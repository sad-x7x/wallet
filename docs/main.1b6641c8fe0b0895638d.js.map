{"version":3,"file":"main.1b6641c8fe0b0895638d.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/lib/quantize.js","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/util/stringFormat.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-splash-screen/dist/esm/index.js","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/components/explore/helpers.ts","webpack://mytonwallet/./src/components/explore/hooks/useDappBridge.ts","webpack://mytonwallet/./src/components/explore/hooks/useWebViewBridge.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/components/ui/InAppBrowser.module.scss?a7be","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/global/helpers/staking.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/util/swap/buildSwapId.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/global/actions/api/transfer.ts","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/util/accentColor.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/components/AppLocked.module.scss?13ef","webpack://mytonwallet/./src/components/AppLocked.tsx","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getCardNftImageUrl.ts","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.module.scss?68a8","webpack://mytonwallet/./src/components/main/sections/Card/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/dapps/DappReturnedDetailsModal.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferFee.tsx","webpack://mytonwallet/./src/components/dapps/DappTransfer.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSelectToken.tsx","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.module.scss?f113","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.tsx","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.module.scss?ffe8","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach(listener => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach(arg => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n/**\n * @deprecated Use `NotificationType`.\n * @since 1.0.0\n */\nexport const HapticsNotificationType = NotificationType;\n/**\n * @deprecated Use `ImpactStyle`.\n * @since 1.0.0\n */\nexport const HapticsImpactStyle = ImpactStyle;\n//# sourceMappingURL=definitions.js.map","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = \"m/44'/607'/0'\";\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 50000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 4; // TODO Replace to 1 after DEX support\nexport const W5_MAX_MESSAGES = 255;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n  megatonWtonMaster: {\n    name: 'megatonWtonMaster',\n    hash: '4c9790d808ea4470614e021f76c40529efe2fbce8138da4284a29b5f1943ef19',\n    isSwapAllowed: true,\n  },\n  megatonRouter: {\n    name: 'megatonRouter',\n    hash: '5d5f0e3ed9602d1ba96006ead98cb5e9b53f49ce4a5cf675e06e4d440b7d267c',\n    isSwapAllowed: true,\n  },\n};\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, Boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport class NotImplemented extends ApiBaseError {\n  constructor(message: string = 'Not implemented') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import type {\n  ApiUpdate,\n  CancellableCallback, OriginMessageData, OriginMessageEvent, WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { bigintReviver } from './bigint';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, Function>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  target.onmessage = (message: OriginMessageEvent) => {\n    if (message.data?.channel === channel) {\n      void onMessage(api, message.data, sendToOrigin);\n    }\n  };\n}\n\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    /**\n     * If the sender's URL includes the DETACHED_TAB_URL, we skip further processing\n     * This condition ensures that we don't interact with tabs that have already been closed.\n     */\n    const url = port.sender?.url;\n    if (url?.includes(DETACHED_TAB_URL)) {\n      return;\n    }\n\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      const json = JSON.stringify(data);\n      port.postMessage(json);\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      if (typeof data === 'string') {\n        data = JSON.parse(data, bigintReviver) as OriginMessageData;\n      }\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', name: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import type { WindowMethods } from './types';\n\nimport { WINDOW_PROVIDER_CHANNEL } from '../../config';\nimport { createPostMessageInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface((name: string, origin?: string, ...args: any[]) => {\n    const method = windowMethods[name as keyof WindowMethods];\n\n    // @ts-ignore\n    return method(...args as WindowMethodArgs<keyof WindowMethods>);\n  }, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider } from '../../../util/windowProvider';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    worker = new Worker(\n      /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n    );\n    connector = createConnector(worker, onUpdate);\n\n    createWindowProvider(worker!);\n  }\n\n  if (!isInitialized) {\n    if (IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as AllMethodResponse<T>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  StateInitWithoutBin = 'StateInitWithoutBin',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiAuthError | ApiTransactionDraftError | ApiTransactionError;\n","import type { ApiTonWalletVersion } from '../chains/ton/types';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiChain = 'ton' | 'tron';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron: boolean;\n  isNativeBottomSheet: boolean;\n  isIosApp: boolean;\n  isAndroidApp: boolean;\n  referrer?: string;\n}\n\nexport interface ApiToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n  isGaslessEnabled?: boolean;\n  isStarsEnabled?: boolean;\n  isTiny?: boolean;\n  customPayloadApiUrl?: string;\n  codeHash?: string;\n}\n\nexport interface ApiTokenWithPrice extends ApiToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  slug: string;\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport type ApiTxTimestamps = Record<string, number | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest' | 'swap'\n| 'nftTransferred' | 'nftReceived' | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string; // Only for TON now\n  inMsgHash?: string; // Only for TON\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport type ApiMtwCardType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\nexport type ApiMtwCardTextType = 'light' | 'dark';\nexport type ApiMtwCardBorderShineType = 'up' | 'down' | 'left' | 'right' | 'radioactive';\n\nexport interface ApiNftMetadata {\n  lottie?: string;\n  imageUrl?: string;\n  fragmentUrl?: string;\n  mtwCardId?: number;\n  mtwCardType?: ApiMtwCardType;\n  mtwCardTextType?: ApiMtwCardTextType;\n  mtwCardBorderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport interface ApiNft {\n  index: number;\n  ownerAddress?: string;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isScam?: boolean;\n  metadata: ApiNftMetadata;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\n\nexport type ApiStakingType = 'nominators' | 'liquid' | 'jetton';\n\ntype BaseStakingState = {\n  id: string;\n  tokenSlug: string;\n  annualYield: number;\n  yieldType: ApiYieldType;\n  balance: bigint;\n  pool: string;\n  isUnstakeRequested?: boolean;\n};\n\nexport type ApiNominatorsStakingState = BaseStakingState & {\n  type: 'nominators';\n  start: number;\n  end: number;\n  pendingDepositAmount: bigint;\n};\n\nexport type ApiLiquidStakingState = BaseStakingState & {\n  type: 'liquid';\n  tokenBalance: bigint;\n  unstakeRequestAmount: bigint;\n  instantAvailable: bigint;\n};\n\nexport type ApiJettonStakingState = BaseStakingState & {\n  type: 'jetton';\n  tokenAddress: string;\n  unclaimedRewards: bigint;\n  stakeWalletAddress: string;\n  tokenAmount: bigint;\n  period: number;\n  tvl: bigint;\n  dailyReward: bigint;\n  poolWallets?: string[];\n};\n\nexport type ApiYieldType = 'APY' | 'APR';\nexport type ApiStakingState = ApiNominatorsStakingState | ApiLiquidStakingState | ApiJettonStakingState;\nexport type ApiToncoinStakingState = ApiNominatorsStakingState | ApiLiquidStakingState;\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n  identifier?: string;\n  sseOptions?: ApiSseOptions;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiTransferToSign {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiDappTransfer extends ApiTransferToSign {\n  isScam?: boolean;\n  /** Whether the transfer should be treated with cautiousness, because its payload is unclear */\n  isDangerous: boolean;\n  normalizedAddress: string;\n  /** The transfer address to show in the UI */\n  displayedToAddress: string;\n  /**\n   * The transaction TON amount that should be shown in the UI.\n   * It may be less than `amount` because the difference is added to `fullFee`.\n   */\n  displayedAmount: bigint;\n  /** The transaction full fee to show in the UI. Includes the network fee and the TON amount used as a fee. */\n  fullFee: bigint;\n  /**\n   * The TON amount that will be returned back as a result of the transaction.\n   * - If `fullFee`  `excess`, the UI should show the difference as the real fee;\n   * - Otherwise, the UI should show the difference as the returned amount.\n   */\n  received: bigint;\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  params: Omit<ApiLocalTransactionParams, 'inMsgHash'>;\n}\n\n/**\n * The `fee` field should contain the final (real) fee, because we want to show the real fee in local transactions\n */\nexport type ApiLocalTransactionParams = Omit<\nApiTransaction, 'txId' | 'timestamp' | 'isIncoming' | 'normalizedAddress'\n> & {\n  txId?: string;\n  normalizedAddress?: string;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  address: string;\n  version: ApiTonWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  lastTxId?: string;\n};\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n| 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n| 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n| 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n| 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n| 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n| 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n| 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n| 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n| 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n| 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n| 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n| 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n| 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n| 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n| 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n| 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n| 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n} from './api/types';\nimport type { LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet  My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line max-len\n  : 'The most feature-rich TON extension  with support of multi-accounts, tokens, NFT, TON DNS, TON Sites, TON Proxy, and TON Magic.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwalletorg/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ''; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME = { en: 'MyTonWalletTips', ru: 'MyTonWalletTipsRu' };\nexport const MTW_CARDS_BASE_URL = 'https://static.mytonwallet.org/cards/';\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = 'GetGems';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const HELPCENTER_URL = { en: 'https://help.mytonwallet.io/', ru: 'https://help.mytonwallet.io/ru' };\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hour\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-178';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Espaol',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Trke',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const STAKING_CYCLE_DURATION_MS = 131_072_000; // 36.4 hours\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\n\nexport const NFT_FRAGMENT_COLLECTIONS = new Set([\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n]);\nexport const NFT_FRAGMENT_GIFT_IMAGE_URL_PREFIX = 'https://nft.fragment.com/gift/';\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\n\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nconst TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    ...TONCOIN,\n    quote: {\n      slug: TONCOIN.slug,\n      price: 1.95,\n      priceUsd: 1.95,\n      percentChange24h: 0,\n    },\n  },\n  trx: {\n    ...TRX,\n    quote: {\n      slug: TRX.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    quote: {\n      slug: TRC20_USDT_MAINNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    quote: {\n      slug: TRC20_USDT_TESTNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    quote: {\n      slug: TON_USDT_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    quote: {\n      slug: MYCOIN.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FISRT_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const SHORT_CURRENCY_SYMBOL_MAP = {\n  USD: '$',\n  EUR: '',\n  RUB: '',\n  CNY: '',\n};\nexport const CURRENCY_LIST: { value: ApiBaseCurrency; name: string }[] = [\n  {\n    value: 'USD',\n    name: 'US Dollar',\n  }, {\n    value: 'EUR',\n    name: 'Euro',\n  }, {\n    value: 'RUB',\n    name: 'Ruble',\n  }, {\n    value: 'CNY',\n    name: 'Yuan',\n  }, {\n    value: 'BTC',\n    name: 'Bitcoin',\n  }, {\n    value: TONCOIN.symbol,\n    name: 'Toncoin',\n  },\n];\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\n// eslint-disable-next-line max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '82566ad72b6568fe7276437d3b0c911aab65ed701c13601941b2917305e81c11', // Stonfi V1\n  'ec614ea4aaea3f7768606f1c1632b3374d3de096a1e7c4ba43c8009c487fee9d', // Stonfi V2\n  'c0f9d14fbc8e14f0d72cba2214165eee35836ab174130912baf9dbfa43ead562', // Dedust (for example, EQBkh7Mc411WTYF0o085MtwJpYpvGhZOMBphhIFzEpzlVODp)\n  '1275095b6da3911292406f4f4386f9e780099b854c6dee9ee2895ddce70927c1', // Dedust (for example, EQCm92zFBkLe_qcFDp7WBvI6JFSDsm4WbDPvZ7xNd7nPL_6M)\n  '5d01684bdf1d5c9be2682c4e36074202432628bd3477d77518d66b0976b78cca', // USDT Storm LP (for example, EQAzm06UMMsnFQrNKEubV1myIR-mm2ZOCnoic36frCgD8MLR)\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 2;\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nconst ALL_TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n    isUnofficial: true,\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n    isUnofficial: true,\n  },\n];\n\nexport const TON_DNS_ZONES = IS_CORE_WALLET\n  ? ALL_TON_DNS_ZONES.filter(({ isUnofficial }) => !isUnofficial)\n  : ALL_TON_DNS_ZONES;\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","/* eslint-disable */\n\n/*\n * quantize.js Copyright 2008 Nick Rabinowitz\n * Ported to node.js by Olivier Lesnicki\n * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php\n */\n\n// fill out a couple protovis dependencies\n/*\n * Block below copied from Protovis: http://mbostock.github.com/protovis/\n * Copyright 2010 Stanford Visualization Group\n * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php\n */\nif (!pv) {\n    var pv = {\n        map: function(array, f) {\n            var o = {};\n            return f ? array.map(function(d, i) {\n                o.index = i;\n                return f.call(o, d);\n            }) : array.slice();\n        },\n        naturalOrder: function(a, b) {\n            return (a < b) ? -1 : ((a > b) ? 1 : 0);\n        },\n        sum: function(array, f) {\n            var o = {};\n            return array.reduce(f ? function(p, d, i) {\n                o.index = i;\n                return p + f.call(o, d);\n            } : function(p, d) {\n                return p + d;\n            }, 0);\n        },\n        max: function(array, f) {\n            return Math.max.apply(null, f ? pv.map(array, f) : array);\n        }\n    }\n}\n\n/**\n * Basic Javascript port of the MMCQ (modified median cut quantization)\n * algorithm from the Leptonica library (http://www.leptonica.com/).\n * Returns a color map you can use to map original pixels to the reduced\n * palette. Still a work in progress.\n *\n * @author Nick Rabinowitz\n * @example\n\n// array of pixels as [R,G,B] arrays\nvar myPixels = [[190,197,190], [202,204,200], [207,214,210], [211,214,211], [205,207,207]\n                // etc\n                ];\nvar maxColors = 4;\n\nvar cmap = MMCQ.quantize(myPixels, maxColors);\nvar newPalette = cmap.palette();\nvar newPixels = myPixels.map(function(p) {\n    return cmap.map(p);\n});\n\n */\nvar MMCQ = (function() {\n    // private constants\n    var sigbits = 5,\n        rshift = 8 - sigbits,\n        maxIterations = 1000,\n        fractByPopulations = 0.75;\n\n    // get reduced-space color index for a pixel\n\n    function getColorIndex(r, g, b) {\n        return (r << (2 * sigbits)) + (g << sigbits) + b;\n    }\n\n    // Simple priority queue\n\n    function PQueue(comparator) {\n        var contents = [],\n            sorted = false;\n\n        function sort() {\n            contents.sort(comparator);\n            sorted = true;\n        }\n\n        return {\n            push: function(o) {\n                contents.push(o);\n                sorted = false;\n            },\n            peek: function(index) {\n                if (!sorted) sort();\n                if (index === undefined) index = contents.length - 1;\n                return contents[index];\n            },\n            pop: function() {\n                if (!sorted) sort();\n                return contents.pop();\n            },\n            size: function() {\n                return contents.length;\n            },\n            map: function(f) {\n                return contents.map(f);\n            },\n            debug: function() {\n                if (!sorted) sort();\n                return contents;\n            }\n        };\n    }\n\n    // 3d color space box\n\n    function VBox(r1, r2, g1, g2, b1, b2, histo) {\n        var vbox = this;\n        vbox.r1 = r1;\n        vbox.r2 = r2;\n        vbox.g1 = g1;\n        vbox.g2 = g2;\n        vbox.b1 = b1;\n        vbox.b2 = b2;\n        vbox.histo = histo;\n    }\n    VBox.prototype = {\n        volume: function(force) {\n            var vbox = this;\n            if (!vbox._volume || force) {\n                vbox._volume = ((vbox.r2 - vbox.r1 + 1) * (vbox.g2 - vbox.g1 + 1) * (vbox.b2 - vbox.b1 + 1));\n            }\n            return vbox._volume;\n        },\n        count: function(force) {\n            var vbox = this,\n                histo = vbox.histo;\n            if (!vbox._count_set || force) {\n                var npix = 0,\n                    i, j, k, index;\n                for (i = vbox.r1; i <= vbox.r2; i++) {\n                    for (j = vbox.g1; j <= vbox.g2; j++) {\n                        for (k = vbox.b1; k <= vbox.b2; k++) {\n                            index = getColorIndex(i, j, k);\n                            npix += (histo[index] || 0);\n                        }\n                    }\n                }\n                vbox._count = npix;\n                vbox._count_set = true;\n            }\n            return vbox._count;\n        },\n        copy: function() {\n            var vbox = this;\n            return new VBox(vbox.r1, vbox.r2, vbox.g1, vbox.g2, vbox.b1, vbox.b2, vbox.histo);\n        },\n        avg: function(force) {\n            var vbox = this,\n                histo = vbox.histo;\n            if (!vbox._avg || force) {\n                var ntot = 0,\n                    mult = 1 << (8 - sigbits),\n                    rsum = 0,\n                    gsum = 0,\n                    bsum = 0,\n                    hval,\n                    i, j, k, histoindex;\n                for (i = vbox.r1; i <= vbox.r2; i++) {\n                    for (j = vbox.g1; j <= vbox.g2; j++) {\n                        for (k = vbox.b1; k <= vbox.b2; k++) {\n                            histoindex = getColorIndex(i, j, k);\n                            hval = histo[histoindex] || 0;\n                            ntot += hval;\n                            rsum += (hval * (i + 0.5) * mult);\n                            gsum += (hval * (j + 0.5) * mult);\n                            bsum += (hval * (k + 0.5) * mult);\n                        }\n                    }\n                }\n                if (ntot) {\n                    vbox._avg = [~~(rsum / ntot), ~~ (gsum / ntot), ~~ (bsum / ntot)];\n                } else {\n                    //console.log('empty box');\n                    vbox._avg = [~~(mult * (vbox.r1 + vbox.r2 + 1) / 2), ~~ (mult * (vbox.g1 + vbox.g2 + 1) / 2), ~~ (mult * (vbox.b1 + vbox.b2 + 1) / 2)];\n                }\n            }\n            return vbox._avg;\n        },\n        contains: function(pixel) {\n            var vbox = this,\n                rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            return (rval >= vbox.r1 && rval <= vbox.r2 &&\n                gval >= vbox.g1 && gval <= vbox.g2 &&\n                bval >= vbox.b1 && bval <= vbox.b2);\n        }\n    };\n\n    // Color map\n\n    function CMap() {\n        this.vboxes = new PQueue(function(a, b) {\n            return pv.naturalOrder(\n                a.vbox.count() * a.vbox.volume(),\n                b.vbox.count() * b.vbox.volume()\n            )\n        });;\n    }\n    CMap.prototype = {\n        push: function(vbox) {\n            this.vboxes.push({\n                vbox: vbox,\n                color: vbox.avg()\n            });\n        },\n        palette: function() {\n            return this.vboxes.map(function(vb) {\n                return vb.color\n            });\n        },\n        size: function() {\n            return this.vboxes.size();\n        },\n        map: function(color) {\n            var vboxes = this.vboxes;\n            for (var i = 0; i < vboxes.size(); i++) {\n                if (vboxes.peek(i).vbox.contains(color)) {\n                    return vboxes.peek(i).color;\n                }\n            }\n            return this.nearest(color);\n        },\n        nearest: function(color) {\n            var vboxes = this.vboxes,\n                d1, d2, pColor;\n            for (var i = 0; i < vboxes.size(); i++) {\n                d2 = Math.sqrt(\n                    Math.pow(color[0] - vboxes.peek(i).color[0], 2) +\n                    Math.pow(color[1] - vboxes.peek(i).color[1], 2) +\n                    Math.pow(color[2] - vboxes.peek(i).color[2], 2)\n                );\n                if (d2 < d1 || d1 === undefined) {\n                    d1 = d2;\n                    pColor = vboxes.peek(i).color;\n                }\n            }\n            return pColor;\n        },\n        forcebw: function() {\n            // XXX: won't  work yet\n            var vboxes = this.vboxes;\n            vboxes.sort(function(a, b) {\n                return pv.naturalOrder(pv.sum(a.color), pv.sum(b.color))\n            });\n\n            // force darkest color to black if everything < 5\n            var lowest = vboxes[0].color;\n            if (lowest[0] < 5 && lowest[1] < 5 && lowest[2] < 5)\n                vboxes[0].color = [0, 0, 0];\n\n            // force lightest color to white if everything > 251\n            var idx = vboxes.length - 1,\n                highest = vboxes[idx].color;\n            if (highest[0] > 251 && highest[1] > 251 && highest[2] > 251)\n                vboxes[idx].color = [255, 255, 255];\n        }\n    };\n\n    // histo (1-d array, giving the number of pixels in\n    // each quantized region of color space), or null on error\n\n    function getHisto(pixels) {\n        var histosize = 1 << (3 * sigbits),\n            histo = new Array(histosize),\n            index, rval, gval, bval;\n        pixels.forEach(function(pixel) {\n            rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            index = getColorIndex(rval, gval, bval);\n            histo[index] = (histo[index] || 0) + 1;\n        });\n        return histo;\n    }\n\n    function vboxFromPixels(pixels, histo) {\n        var rmin = 1000000,\n            rmax = 0,\n            gmin = 1000000,\n            gmax = 0,\n            bmin = 1000000,\n            bmax = 0,\n            rval, gval, bval;\n        // find min/max\n        pixels.forEach(function(pixel) {\n            rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            if (rval < rmin) rmin = rval;\n            else if (rval > rmax) rmax = rval;\n            if (gval < gmin) gmin = gval;\n            else if (gval > gmax) gmax = gval;\n            if (bval < bmin) bmin = bval;\n            else if (bval > bmax) bmax = bval;\n        });\n        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, histo);\n    }\n\n    function medianCutApply(histo, vbox) {\n        if (!vbox.count()) return;\n\n        var rw = vbox.r2 - vbox.r1 + 1,\n            gw = vbox.g2 - vbox.g1 + 1,\n            bw = vbox.b2 - vbox.b1 + 1,\n            maxw = pv.max([rw, gw, bw]);\n        // only one pixel, no split\n        if (vbox.count() == 1) {\n            return [vbox.copy()]\n        }\n        /* Find the partial sum arrays along the selected axis. */\n        var total = 0,\n            partialsum = [],\n            lookaheadsum = [],\n            i, j, k, sum, index;\n        if (maxw == rw) {\n            for (i = vbox.r1; i <= vbox.r2; i++) {\n                sum = 0;\n                for (j = vbox.g1; j <= vbox.g2; j++) {\n                    for (k = vbox.b1; k <= vbox.b2; k++) {\n                        index = getColorIndex(i, j, k);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        } else if (maxw == gw) {\n            for (i = vbox.g1; i <= vbox.g2; i++) {\n                sum = 0;\n                for (j = vbox.r1; j <= vbox.r2; j++) {\n                    for (k = vbox.b1; k <= vbox.b2; k++) {\n                        index = getColorIndex(j, i, k);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        } else { /* maxw == bw */\n            for (i = vbox.b1; i <= vbox.b2; i++) {\n                sum = 0;\n                for (j = vbox.r1; j <= vbox.r2; j++) {\n                    for (k = vbox.g1; k <= vbox.g2; k++) {\n                        index = getColorIndex(j, k, i);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        }\n        partialsum.forEach(function(d, i) {\n            lookaheadsum[i] = total - d\n        });\n\n        function doCut(color) {\n            var dim1 = color + '1',\n                dim2 = color + '2',\n                left, right, vbox1, vbox2, d2, count2 = 0;\n            for (i = vbox[dim1]; i <= vbox[dim2]; i++) {\n                if (partialsum[i] > total / 2) {\n                    vbox1 = vbox.copy();\n                    vbox2 = vbox.copy();\n                    left = i - vbox[dim1];\n                    right = vbox[dim2] - i;\n                    if (left <= right)\n                        d2 = Math.min(vbox[dim2] - 1, ~~ (i + right / 2));\n                    else d2 = Math.max(vbox[dim1], ~~ (i - 1 - left / 2));\n                    // avoid 0-count boxes\n                    while (!partialsum[d2]) d2++;\n                    count2 = lookaheadsum[d2];\n                    while (!count2 && partialsum[d2 - 1]) count2 = lookaheadsum[--d2];\n                    // set dimensions\n                    vbox1[dim2] = d2;\n                    vbox2[dim1] = vbox1[dim2] + 1;\n                    // console.log('vbox counts:', vbox.count(), vbox1.count(), vbox2.count());\n                    return [vbox1, vbox2];\n                }\n            }\n\n        }\n        // determine the cut planes\n        return maxw == rw ? doCut('r') :\n            maxw == gw ? doCut('g') :\n            doCut('b');\n    }\n\n    function quantize(pixels, maxcolors) {\n        // short-circuit\n        if (!pixels.length || maxcolors < 2 || maxcolors > 256) {\n            // console.log('wrong number of maxcolors');\n            return false;\n        }\n\n        // XXX: check color content and convert to grayscale if insufficient\n\n        var histo = getHisto(pixels),\n            histosize = 1 << (3 * sigbits);\n\n        // check that we aren't below maxcolors already\n        var nColors = 0;\n        histo.forEach(function() {\n            nColors++\n        });\n        if (nColors <= maxcolors) {\n            // XXX: generate the new colors from the histo and return\n        }\n\n        // get the beginning vbox from the colors\n        var vbox = vboxFromPixels(pixels, histo),\n            pq = new PQueue(function(a, b) {\n                return pv.naturalOrder(a.count(), b.count())\n            });\n        pq.push(vbox);\n\n        // inner function to do the iteration\n\n        function iter(lh, target) {\n            var ncolors = 1,\n                niters = 0,\n                vbox;\n            while (niters < maxIterations) {\n                vbox = lh.pop();\n                if (!vbox.count()) { /* just put it back */\n                    lh.push(vbox);\n                    niters++;\n                    continue;\n                }\n                // do the cut\n                var vboxes = medianCutApply(histo, vbox),\n                    vbox1 = vboxes[0],\n                    vbox2 = vboxes[1];\n\n                if (!vbox1) {\n                    // console.log(\"vbox1 not defined; shouldn't happen!\");\n                    return;\n                }\n                lh.push(vbox1);\n                if (vbox2) { /* vbox2 can be null */\n                    lh.push(vbox2);\n                    ncolors++;\n                }\n                if (ncolors >= target) return;\n                if (niters++ > maxIterations) {\n                    // console.log(\"infinite loop; perhaps too few pixels!\");\n                    return;\n                }\n            }\n        }\n\n        // first set of colors, sorted by population\n        iter(pq, fractByPopulations * maxcolors);\n        // console.log(pq.size(), pq.debug().length, pq.debug().slice());\n\n        // Re-sort by the product of pixel occupancy times the size in color space.\n        var pq2 = new PQueue(function(a, b) {\n            return pv.naturalOrder(a.count() * a.volume(), b.count() * b.volume())\n        });\n        while (pq.size()) {\n            pq2.push(pq.pop());\n        }\n\n        // next set - generate the median cuts using the (npix * vol) sorting.\n        iter(pq2, maxcolors - pq2.size());\n\n        // calculate the actual colors\n        var cmap = new CMap();\n        while (pq2.size()) {\n            cmap.push(pq2.pop());\n        }\n\n        return cmap;\n    }\n\n    return {\n        quantize: quantize\n    }\n})();\n\nmodule.exports = MMCQ.quantize\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import { bigintReviver } from './bigint';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data, bigintReviver) as WorkerMessageData;\n      } catch (err: any) {\n        logDebugError('PostMessageConnector: Failed to parse message', err);\n        return;\n      }\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    let rawData: AnyLiteral | string = data;\n    if (this.shouldUseJson) {\n      rawData = JSON.stringify(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: Function, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance!.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: Function, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: Function, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    // eslint-disable-next-line no-bitwise\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`);\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`);\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`);\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { TON_DNS_ZONES } from '../config';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat } = zone;\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  // eslint-disable-next-line no-restricted-globals\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n        // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n        || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\n// eslint-disable-next-line no-alert\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('error', handleErrorEvent);\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey]!.push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: T[], array2: T[]): T[] {\n  const set2 = new Set(array2);\n\n  return array1.filter((element) => !set2.has(element));\n}\n\nexport function filterValues<M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n","import { isAscii } from '../stringFormat';\n\nconst MAX_COMMENT_SIZE = 120;\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function isValidLedgerComment(comment: string) {\n  return isAscii(comment) && isLedgerCommentLengthValid(comment);\n}\n\nexport function isLedgerCommentLengthValid(comment: string) {\n  return comment.length <= MAX_COMMENT_SIZE;\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","export function isAscii(str: string) {\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function insertSubstring(str: string, start: number, newSubStr: string) {\n  if (start < 0) {\n    start = str.length - start;\n  }\n  return str.slice(0, start) + newSubStr + str.slice(start);\n}\n\nexport function hexToString(hex: string): string {\n  let result = '';\n  for (let i = 0; i < hex.length; i += 2) {\n    result += String.fromCharCode(parseInt(hex.slice(i, i + 2), 16));\n  }\n\n  return result;\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\nimport { omit } from './iteratees';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: Date;\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: new Date(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logActionHandling(name: string, payload?: any) {\n  if (!DEBUG_API) return;\n  if (name === 'apiUpdate') {\n    if (typeof payload?.type === 'object' && payload.type !== 'updatingStatus') {\n      logDebugApi(`Update: ${payload.type}`, omit(payload, ['type']));\n    }\n  } else {\n    logDebugApi(`Action: ${name}`, payload);\n  }\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n        + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: '!             '\n        + '  Self-XSS.       ,    .  !',\n    es: 'ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n        + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n        + 'no introduzca ni pegue cdigo que no comprenda. Cudese!',\n    zh: 'Self-XSS',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  // eslint-disable-next-line no-restricted-globals\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith('#detached');\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = -3.75 * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin'\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"82\":\"10cb53e3e4914ed789c7\",\"88\":\"7469cde2e48fcea342fb\",\"104\":\"337a5d5347e427590af0\",\"148\":\"c93ab213da47a1c69bbc\",\"168\":\"3ef51449bff845cd930a\",\"196\":\"62cfcca245779edde795\",\"201\":\"8f9951bc8d270f397709\",\"215\":\"a3b70a2b4c9e8aab47e4\",\"232\":\"f2635cf6cd72a03137ee\",\"283\":\"56e93ec75336cca60952\",\"408\":\"d7d8d41d5dce10d243c5\",\"432\":\"feac22f8d67028f0685a\",\"477\":\"473346bae74b64f8b62c\",\"494\":\"2a76b4246c2b484142fb\",\"513\":\"bc27336d82f09051f2ac\",\"542\":\"2d167587e3aa4f5d2b58\",\"564\":\"308caacb4e9cac966aff\",\"580\":\"4f7727668847f6a39dfc\",\"612\":\"5f5efe45c362ef7fd524\",\"642\":\"4019c935ee6610070ce7\",\"687\":\"f15973373fbd842fa90e\",\"749\":\"d5087f7cd9c481e88bdd\",\"776\":\"28cf5f93438bdbe59349\",\"789\":\"293e03235c8d79348a71\",\"884\":\"ca0c5df5be9516ea7f6b\",\"895\":\"8f12ef95ea8874f9ec0b\",\"934\":\"bf9ab69d4ed2b12bef56\",\"941\":\"e77e449fed97d4b53290\",\"956\":\"bc42ad757a7d6b976cd7\",\"988\":\"c70df95cb3aae0eab0d3\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.innerHTML = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 50px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n  once: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = any> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n      hook.onChange = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console, max-len\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\n\nexport default function useUniqueId() {\n  const idRef = useRef<string>();\n\n  if (!idRef.current) {\n    idRef.current = generateUniqueId();\n  }\n\n  return idRef.current;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: Function;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_currentRandomId: number | undefined;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: Function[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: Function) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: Function) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (!container.mappedProps || (\n        !arePropsShallowEqual(container.ownProps, props) && activateContainer(container, currentGlobal, props)\n      )) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stickTo && !stuckTo) {\n      container.stuckTo = stickTo;\n    }\n\n    return stickTo && (!stuckTo || stuckTo === stickTo);\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectIsNewWallet(global: GlobalState, isFirstTransactionsLoaded: boolean) {\n  const { activities } = selectCurrentAccountState(global) ?? {};\n\n  if (activities?.idsMain?.length) {\n    return false;\n  }\n\n  return isFirstTransactionsLoaded;\n}\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectFirstNonHardwareAccount(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).find((account) => !account.isHardware);\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const state = selectAccount(global, global.currentAccountId!);\n\n  return state?.isHardware;\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).filter((account) => account.isHardware);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState) {\n  const hardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return !!selectFirstNonHardwareAccount(global);\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  return Boolean(selectAccount(global, accountId)?.addressByChain.tron);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n","import type {\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n","import type { ApiDappTransfer } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let fullFee = 0n;\n  let received = 0n;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n    fullFee += transaction.fullFee;\n    received += transaction.received;\n\n    if (transaction.displayedAmount) {\n      addSlugAmount(TONCOIN.slug, transaction.displayedAmount);\n    }\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee, // In TON\n    received, // In TON\n    nftCount,\n  };\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const {\n        decimals, quote: {\n          priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash, quote: {\n          price, percentChange24h, priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type {\n  ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction,\n} from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (transaction.metadata?.isScam) return true;\n  if (!token || transaction.type === 'nftTransferred' || transaction.type === 'nftReceived') return false;\n\n  const decimals = token.decimals;\n  const cost = toBig(transaction.amount, decimals).abs().mul(token.quote.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.includes('|');\n}\n\nexport function getRealTxIdFromLocal(txId: string) {\n  return txId.endsWith('|') ? txId.replace('|', '') : undefined;\n}\n\nexport function getIsSwapId(id: string) {\n  return id.startsWith('swap:');\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n      && getIsSupportedChain(from.chain)\n      && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiChain, ApiTxTimestamps } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { findLast, mapValues } from '../../util/iteratees';\nimport { getIsSwapId, getIsTxIdLocal } from '../helpers';\nimport { selectAccount, selectAccountState } from './accounts';\n\nexport function selectNewestTxTimestamps(global: GlobalState, accountId: string): ApiTxTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestTransactionsBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastTxTimestamps(global: GlobalState, accountId: string): ApiTxTimestamps {\n  const txById = selectAccountState(global, accountId)?.activities?.byId ?? {};\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug || {};\n\n  return Object.entries(idsBySlug).reduce((result, [slug, ids]) => {\n    const txId = findLast(ids, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n    if (txId && txId in txById) {\n      result[slug] = txById[txId].timestamp;\n    }\n    return result;\n  }, {} as ApiTxTimestamps);\n}\n\nexport function selectLastMainTxTimestamp(global: GlobalState, accountId: string): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain = [] } = activities;\n  const txId = findLast(idsMain, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectAccountTxTokenSlugs(global: GlobalState, accountId: string, chain: ApiChain) {\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug;\n  if (!idsBySlug) return undefined;\n\n  return Object.keys(idsBySlug).filter((slug) => slug.startsWith(`${chain}-`));\n}\n\nexport function selectLocalTransactions(global: GlobalState, accountId: string) {\n  const accountState = global.byAccountId?.[accountId];\n\n  return accountState?.activities?.localTransactions;\n}\n\nexport function selectIsFirstTransactionsLoaded(global: GlobalState, accountId: string) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n  const { addressByChain } = selectAccount(global, accountId) ?? {};\n\n  if (!byChain || !addressByChain) {\n    return false;\n  }\n\n  return Object.keys(addressByChain).every((chain) => byChain[chain as ApiChain]?.isFirstTransactionsLoaded);\n}\n","import type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiHistoryList,\n  ApiLedgerDriver,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiParsedPayload,\n  ApiPriceHistoryPeriod,\n  ApiSignedTransfer,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingCommonData,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiTokenWithPrice,\n  ApiTransaction,\n  ApiTransactionActivity,\n  ApiUpdate,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\nexport type DialogType = {\n  title?: string;\n  message: string;\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForBrowser,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n  NotcoinVouchers,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | string;\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport interface Account {\n  title?: string;\n  addressByChain: Record<ApiChain, string>;\n  isHardware?: boolean;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport interface AssetPairs {\n  [slug: string]: {\n    isReverseProhibited?: boolean;\n    isMultichain?: boolean;\n  };\n}\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    isLoading?: boolean;\n    byId: Record<string, ApiActivity>;\n    idsBySlug?: Record<string, string[]>;\n    idsMain?: string[];\n    newestTransactionsBySlug?: Record<string, ApiTransaction>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localTransactions?: ApiTransactionActivity[];\n  };\n  byChain?: {\n    [chain in ApiChain]?: { isFirstTransactionsLoaded?: boolean };\n  };\n  nfts?: {\n    byAddress: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n  isBackupRequired?: boolean;\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    error?: string;\n    password?: string;\n    isBackupModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState?: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    hardwareSelectedIndices?: number[];\n    isRemoteTab?: boolean;\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    pairs?: {\n      bySlug: Record<string, AssetPairs>;\n    };\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingInfo?: ApiStakingCommonData;\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: { shouldDelegateToNative?: boolean };\n  initializeHardwareWalletConnection: { transport: LedgerTransport; shouldDelegateToNative?: boolean };\n  connectHardwareWallet: { transport?: LedgerTransport; noRetry?: boolean };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  showDialog: { title?: string; message: string };\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading?: boolean };\n\n  fetchTokenTransactions: { limit: number; slug: string; shouldLoadWithBudget?: boolean };\n  fetchAllTransactions: { limit: number; shouldLoadWithBudget?: boolean };\n  resetIsHistoryEndReached: { slug: string } | undefined;\n  fetchNfts: undefined;\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: undefined;\n  startUnstaking: undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  submitStakingHardware: { isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: { limit?: number; offset?: number } | undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: undefined;\n  submitStakingClaim: { password: string };\n  submitStakingClaimHardware: undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  openSettingsHardwareWallet: undefined;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  submitDappConnectRequestConfirmHardware: { accountId: string };\n  submitDappConnectHardware: { accountId: string; signature: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  showDappTransfer: { transactionIdx: number };\n  setDappTransferScreen: { state: TransferState };\n  clearDappTransferError: undefined;\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  submitDappTransferHardware2: { signedMessages: ApiSignedTransfer[] };\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { origin: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { origin: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  loadSwapPairs: { tokenSlug: string; shouldForceUpdate?: boolean };\n  clearSwapPairsCache: undefined;\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: undefined;\n  closeReceiveModal: undefined;\n  openInvoiceModal: undefined;\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password: string };\n  submitClaimingVestingHardware: undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getTransactionHashFromTxId(chain: ApiChain, txId: string) {\n  if (chain === 'tron') {\n    const localIdSign = txId.indexOf('|');\n\n    return localIdSign !== -1 ? txId.substring(0, localIdSign) : txId;\n  }\n\n  const [, transactionHash] = (txId || '').split(':');\n  return transactionHash;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FISRT_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport { selectCurrentAccount, selectCurrentAccountSettings, selectCurrentAccountState } from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestTxTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestTxTimestamps = selectNewestTxTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestTxTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T extends any>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  // eslint-disable-next-line no-restricted-globals\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await patchCapacitorAppVh(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void patchCapacitorAppVh(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n    patchVh();\n\n    currentWindowSize = {\n      ...getWindowSize(),\n      height: target.height,\n    };\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction patchCapacitorAppVh(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(toggleSafeAreaClasses, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  webApp.enableVerticalSwipes();\n  webApp.lockOrientation();\n  webApp.MainButton.hide();\n  webApp.SecondaryButton.hide();\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n  } else {\n    getActions().closeFullscreen();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: 'The bot requests biometrics for testing purposes.' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('submitTransferPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst SafeArea = registerPlugin('SafeArea', {\r\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { SafeArea };\r\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import type { ApiChain } from '../api/types';\n\nimport { EMPTY_HASH_VALUE } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { isTelegramUrl } from './url';\n\nexport async function openUrl(\n  url: string, options?: { isExternal?: boolean; title?: string; subtitle?: string },\n) {\n  if (IS_CAPACITOR && !options?.isExternal && url.startsWith('http') && !isTelegramUrl(url)) {\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nexport function handleOpenUrl(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href);\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: Function;\nconst renderPromise = new Promise((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line max-len, no-spaced-func\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait,\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport function openDeeplinkOrUrl(url: string, isExternal = false, isFromInAppBrowser = false) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    void processDeeplink(url, isFromInAppBrowser);\n  } else {\n    void openUrl(url, { isExternal });\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n\n    return {\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiChain, ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n): ApiNotificationAddress[] {\n  return accountIds.map((accountId) => {\n    const account = global.accounts!.byId[accountId];\n\n    return {\n      title: account.title,\n      address: account.addressByChain.ton,\n      chain: 'ton' as ApiChain,\n    };\n  });\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: selectNotificationTonAddressesSlow(global, notificationAccounts),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport { SplashScreen } from '@sina_kh/mtw-capacitor-splash-screen';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { processDeeplink } from '../deeplink';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet launchUrl: string | undefined;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom } }) => {\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    void processDeeplink(event.url);\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n\n  launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency } from '../api/types';\n\nimport {\n  DEFAULT_PRICE_CURRENCY,\n  SHORT_CURRENCY_SYMBOL_MAP,\n  WHOLE_PART_DELIMITER,\n} from '../config';\nimport { Big } from '../lib/big.js';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(Object.values(SHORT_CURRENCY_SYMBOL_MAP));\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  const bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  const rounded = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  return applyThousandsGrouping(rounded);\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number,\n) {\n  value = value.toString();\n\n  const prefix = !noSign ? (!value.startsWith('-') ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  return prefix + formatCurrency(noSign ? value : value.replace('-', ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return SHORT_CURRENCY_SYMBOL_MAP[currency as keyof typeof SHORT_CURRENCY_SYMBOL_MAP] ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\nconst PLURAL_RULES = {\n  /* eslint-disable max-len */\n  de: (n: number) => (n !== 1 ? 6 : 2),\n  en: (n: number) => (n !== 1 ? 6 : 2),\n  es: (n: number) => (n !== 1 ? 6 : 2),\n  pl: (n: number) => (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  ru: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  th: () => 6,\n  tr: (n: number) => (n > 1 ? 6 : 2),\n  uk: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  'zh-Hans': () => 6,\n  'zh-Hant': () => 6,\n  /* eslint-enable max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\nfunction processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  const parts = template.split('%');\n  const processedParts: TeactNode[] = [];\n  let currentString = '';\n\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n\n    // Check if the current part is a token (between % symbols)\n    if (i % 2 === 1) {\n      const valueNode = value[part];\n\n      if (valueNode) {\n        if (typeof valueNode === 'string') {\n          currentString += valueNode;\n        } else {\n          // If the value is a component, process the accumulated string and add the component\n          if (currentString) {\n            processedParts.push(...renderText(currentString));\n            currentString = '';\n          }\n          processedParts.push(valueNode);\n        }\n      } else {\n        // If the token is not found, keep it as is (e.g., %unknown_token%)\n        currentString += `%${part}%`;\n      }\n    } else {\n      // If the part is a text segment, append it to the current string\n      currentString += part;\n    }\n  }\n\n  // Process any remaining text in the current string\n  if (currentString) {\n    processedParts.push(...renderText(currentString));\n  }\n\n  return processedParts;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T extends any>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1!.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T extends any>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  // eslint-disable-next-line no-underscore-dangle\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n      // eslint-disable-next-line no-underscore-dangle\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  // eslint-disable-next-line no-underscore-dangle\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    // eslint-disable-next-line no-underscore-dangle\n    if (!value?.__delete) {\n      // eslint-disable-next-line no-null/no-null\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createCallbackManager } from '../util/callbacks';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst blurCallbacks = createCallbackManager();\nconst focusCallbacks = createCallbackManager();\n\nlet isFocused = document.hasFocus();\n\nfunction handleBlur() {\n  if (!isFocused) return;\n\n  isFocused = false;\n  blurCallbacks.runCallbacks();\n}\n\nfunction handleFocus() {\n  isFocused = true;\n  focusCallbacks.runCallbacks();\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (!isFocused) {\n      lastOnBlur();\n    }\n\n    blurCallbacks.addCallback(lastOnBlur);\n    focusCallbacks.addCallback(lastOnFocus);\n\n    return () => {\n      focusCallbacks.removeCallback(lastOnFocus);\n      blurCallbacks.removeCallback(lastOnBlur);\n    };\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return !isFocused;\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallActionInMain<K extends keyof ActionPayloads> {\n  type: 'callActionInMain';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallActionInNative<K extends keyof ActionPayloads> {\n  type: 'callActionInNative';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n| BroadcastChannelCallActionInMain<keyof ActionPayloads>\n| BroadcastChannelCallActionInNative<keyof ActionPayloads>\n| BroadcastChannelNativeLogsRequest\n| BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  if (isBackgroundModeActive()) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nfunction handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callActionInMain': {\n      if (!IS_DELEGATING_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callActionInNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInMain',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInNative',\n    name,\n    options,\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '...';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache: Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}> = new Map();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  SettingsState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 32;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {},\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: undefined,\n  };\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n}: {\n  global: GlobalState;\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n}) {\n  let shouldForceAccountEdit = true;\n\n  if (!partial?.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n    const titlePrefix = isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n    let title = `${titlePrefix} ${accountAmount + 1}${postfix}`;\n\n    if (accountAmount === 0) {\n      title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n\n    partial = { ...partial, title };\n  } else if (titlePostfix) {\n    const title = partial.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    partial = { ...partial, title: `${title.trim()} ${titlePostfix}` };\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  return updateAccount(global, accountId, { ...partial, addressByChain });\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...selectAccount(global, accountId),\n          ...partial,\n        } as Account,\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, ...firstNetworkAccount! });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, ...secondNetworkAccount });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const balances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n\n  for (const [slug, balance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      balances[slug] = balance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manual imported tokens\n  for (const slug of [...importedSlugs, TON_USDT_SLUG]) {\n    if (!(slug in balances)) {\n      balances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: balances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].quote.price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      result[token.slug] = {\n        ...token,\n        quote: currentTokens?.[token.slug]?.quote ?? token.quote,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && currentTokens && isPartialDeepEqual(currentTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && (\n    !isSwapEstimateInputEqual(globalBefore, globalAfter)\n    || globalBefore.currentSwap.pairs !== globalAfter.currentSwap.pairs\n  );\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || swap1[amountKey] !== swap2[amountKey];\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nimport { selectAccountState, selectCurrentAccountState } from '../selectors';\nimport { updateAccountState, updateCurrentAccountId, updateCurrentAccountState } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function updateActivitiesIsLoading(global: GlobalState, isLoading: boolean) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function updateActivitiesIsHistoryEndReached(global: GlobalState, isReached: boolean, slug?: string) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  if (slug) {\n    const bySlug = activities?.isHistoryEndReachedBySlug ?? {};\n\n    return updateCurrentAccountState(global, {\n      activities: {\n        ...activities || { byId: {} },\n        isHistoryEndReachedBySlug: {\n          ...bySlug,\n          [slug]: isReached,\n        },\n      },\n    });\n  }\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isMainHistoryEndReached: isReached,\n    },\n  });\n}\n\nexport function updateActivitiesIsLoadingByAccount(global: GlobalState, accountId: string, isLoading: boolean) {\n  const { activities } = selectAccountState(global, accountId) || {};\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingInfo(global: GlobalState, stakingInfo: GlobalState['stakingInfo']) {\n  return {\n    ...global,\n    stakingInfo,\n  };\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByOrigin: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, origin: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByOrigin) delete dappLastOpenedDatesByOrigin[origin];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.origin !== origin),\n    dappLastOpenedDatesByOrigin,\n  });\n}\n","import type { ApiActivity } from '../api/types';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  let value = a.timestamp - b.timestamp;\n  if (value === 0) {\n    value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n  }\n  return isAsc ? value : -value;\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiChain, ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport {\n  AppState, AuthState, BiometricsState, HardwareConnectState,\n} from '../../types';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact, omitUndefined } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccountIdByAddress,\n  selectAccounts,\n  selectAllHardwareAccounts,\n  selectCurrentNetwork,\n  selectFirstNonHardwareAccount,\n  selectIsOneAccount,\n  selectLedgerAccountIndexToImport,\n  selectNetworkAccountsMemoized,\n  selectNewestTxTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestTxTimestamps = selectNewestTxTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestTxTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  actions.clearSwapPairsCache();\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const nextAuthState = firstNonHardwareAccount\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (Boolean(firstNonHardwareAccount) && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic'),\n    ...(!firstNonHardwareAccount ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const {\n    accountId, tonAddress, tronAddress, secondNetworkAccount,\n  } = result;\n\n  const addressByChain = omitUndefined({\n    ton: tonAddress,\n    tron: tronAddress,\n  }) as Record<ApiChain, string>;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = !Object.values(accounts).length;\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().hardware;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address } as Record<ApiChain, string>;\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      partial: {\n        isHardware: true,\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, {});\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  global = createAccountsFromGlobal(global);\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  setGlobal(global);\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const state = firstNonHardwareAccount && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!firstNonHardwareAccount && { state }),\n  });\n  setGlobal(global);\n\n  if (!firstNonHardwareAccount) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('connectHardwareWallet', async (global, actions, params) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n  const { areSettingsOpen } = global;\n\n  if (IS_DELEGATING_BOTTOM_SHEET && !isFirstAccount && !areSettingsOpen) return;\n\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    hardwareSelectedIndices: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  const isLedgerConnected = await ledgerApi.connectLedger(params.transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(global, {\n    isLedgerConnected: true,\n  });\n  setGlobal(global);\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      global = updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      });\n      setGlobal(global);\n      return;\n    }\n\n    global = updateHardware(global, {\n      isTonAppConnected: true,\n    });\n    setGlobal(global);\n\n    global = getGlobal();\n    const { isRemoteTab } = global.hardware;\n    const network = selectCurrentNetwork(global);\n    const lastIndex = selectLedgerAccountIndexToImport(global);\n    const currentHardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n    const currentHardwareAddresses = currentHardwareAccounts.map((account) => account.addressByChain.ton);\n    const hardwareWallets = isRemoteTab ? [] : await ledgerApi.getNextLedgerWallets(\n      network,\n      lastIndex,\n      currentHardwareAddresses,\n    );\n\n    global = getGlobal();\n\n    if ('error' in hardwareWallets) {\n      actions.showError({ error: hardwareWallets.error });\n      throw Error(hardwareWallets.error);\n    }\n\n    const nextHardwareState = isRemoteTab || hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    global = updateHardware(global, {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: params.transport,\n    });\n    setGlobal(global);\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !params.noRetry) {\n      actions.connectHardwareWallet({ ...params, noRetry: true });\n      return;\n    }\n\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n\n    logDebugError('connectHardwareWallet', err);\n  }\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  global = updateAuth(global, {\n    method: 'importHardwareWallet',\n    error: undefined,\n  });\n\n  global = updateHardware(global, {\n    hardwareSelectedIndices,\n  });\n\n  setGlobal(global);\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connect,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = !Object.values(accounts).length;\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = await callApi('importNewWalletVersion', accountId, version);\n  global = getGlobal();\n\n  const existAccountId = selectAccountIdByAddress(global, 'ton', wallet!.address);\n\n  if (existAccountId) {\n    actions.switchAccount({ accountId: existAccountId });\n    return;\n  }\n\n  const { title: currentWalletTitle } = (global.accounts?.byId ?? {})[accountId];\n  const addressByChain = { ton: wallet!.address } as Record<ApiChain, string>;\n  global = updateCurrentAccountId(global, wallet!.accountId);\n\n  const ledgerInfo = wallet!.ledger ? {\n    isHardware: true,\n    ledger: wallet?.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet!.accountId,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet!.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet!.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { compareActivities } from '../../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, findLast, unique,\n} from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { onTickEnd, pause } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { getIsSwapId, getIsTinyOrScamTransaction, getIsTxIdLocal } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  changeBalance,\n  updateAccountState,\n  updateActivitiesIsHistoryEndReached,\n  updateActivitiesIsLoading,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccountState,\n  selectAccountTxTokenSlugs,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectLastMainTxTimestamp,\n  selectToken,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\n\naddActionHandler('fetchTokenTransactions', async (global, actions, { limit, slug, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  let { idsBySlug, byId } = selectAccountState(global, accountId)?.activities || {};\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n  let tokenIds = (idsBySlug && idsBySlug[slug]) || [];\n  const toTxId = findLast(tokenIds, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n  let toTimestamp = toTxId && byId ? byId[toTxId].timestamp : undefined;\n  const { chain } = selectToken(global, slug);\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchTokenActivitySlice', accountId, chain, slug, toTimestamp, limit);\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true, slug);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n\n    tokenIds = unique(tokenIds.concat(filteredResult.map((tx) => tx.id)));\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  fetchedActivities.sort(compareActivities);\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const newOrderedIds = Object.keys(newById);\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  idsBySlug = currentActivities?.idsBySlug || {};\n  tokenIds = unique((idsBySlug[slug] || []).concat(newOrderedIds));\n\n  tokenIds.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsBySlug: { ...idsBySlug, [slug]: tokenIds },\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchTokenTransactions({ limit, slug });\n    });\n  }\n});\n\naddActionHandler('fetchAllTransactions', async (global, actions, { limit, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  const tonTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'ton') ?? [];\n  const tronTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'tron') ?? [];\n  let toTimestamp = selectLastMainTxTimestamp(global, accountId)!;\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n\n  while (shouldFetchMore) {\n    const result = await callApi(\n      'fetchAllActivitySlice',\n      accountId,\n      limit,\n      toTimestamp,\n      tonTokenSlugs,\n      tronTokenSlugs,\n    );\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  const byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  fetchedActivities.sort(compareActivities);\n\n  const idsMain = unique((currentActivities?.idsMain ?? []).concat(extractKey(fetchedActivities, 'id')));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsMain,\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchAllTransactions({ limit });\n    });\n  }\n});\n\naddActionHandler('resetIsHistoryEndReached', (global, actions, payload) => {\n  global = updateActivitiesIsHistoryEndReached(global, false, payload?.slug);\n  setGlobal(global);\n});\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password!);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        quote: {\n          slug: token.slug,\n          price: token.price ?? 0,\n          priceUsd: token.priceUsd ?? 0,\n          percentChange24h: token.change24h ?? 0,\n        },\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug!];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        quote: {\n          slug: token.slug,\n          price: 0,\n          priceUsd: 0,\n          percentChange24h: 0,\n        },\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n  };\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { BottomSheetPlugin } from './definitions';\n\nconst BottomSheet = registerPlugin<BottomSheetPlugin>('BottomSheet');\n\nexport * from './definitions';\nexport { BottomSheet };\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport buildClassName from '../util/buildClassName';\n\nconst CLOSE_DURATION = 350;\n\nconst useShowTransition = (\n  isOpen = false,\n  onCloseTransitionEnd?: () => void,\n  noFirstOpenTransition = false,\n  className: string | false = 'fast',\n  noCloseTransition = false,\n  closeDuration = CLOSE_DURATION,\n  noOpenTransition = false,\n) => {\n  const [isClosed, setIsClosed] = useState(!isOpen);\n  const closeTimeoutRef = useRef<number>();\n  // SS class should be added in a separate tick to turn on CSS transition.\n  const [hasOpenClassName, setHasOpenClassName] = useState(isOpen && noFirstOpenTransition);\n\n  if (isOpen) {\n    setIsClosed(false);\n    setHasOpenClassName(true);\n\n    if (closeTimeoutRef.current) {\n      window.clearTimeout(closeTimeoutRef.current);\n      closeTimeoutRef.current = undefined;\n    }\n  } else {\n    setHasOpenClassName(false);\n\n    if (!isClosed && !closeTimeoutRef.current) {\n      const exec = () => {\n        setIsClosed(true);\n\n        if (onCloseTransitionEnd) {\n          onCloseTransitionEnd();\n        }\n\n        closeTimeoutRef.current = undefined;\n      };\n\n      if (noCloseTransition) {\n        exec();\n      } else {\n        closeTimeoutRef.current = window.setTimeout(exec, closeDuration);\n      }\n    }\n  }\n\n  // `noCloseTransition`, when set to true, should remove the open class immediately\n  const shouldHaveOpenClassName = (hasOpenClassName && !(noCloseTransition && !isOpen)) || (noOpenTransition && isOpen);\n  const isClosing = Boolean(closeTimeoutRef.current);\n  const shouldRender = isOpen || isClosing;\n  const transitionClassNames = buildClassName(\n    className && 'opacity-transition',\n    className,\n    shouldHaveOpenClassName && 'open',\n    !shouldHaveOpenClassName && 'not-open',\n    shouldRender && 'shown',\n    !shouldRender && 'not-shown',\n    isClosing && 'closing',\n  );\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    hasShownClass: shouldRender,\n    hasOpenClass: shouldHaveOpenClassName,\n  };\n};\n\nexport default useShowTransition;\n","import type { CHAIN, ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SIGN_DATA_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES | SIGN_DATA_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { W5_MAX_MESSAGES } from '../api/chains/ton/constants';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(maxMessages = W5_MAX_MESSAGES): DeviceInfo {\n  return {\n    platform: getPlatform()!,\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features: [\n      'SendTransaction', // TODO DEPRECATED\n      { name: 'SendTransaction', maxMessages },\n    ],\n  };\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import { TONCONNECT_WALLET_JSBRIDGE_KEY } from '../../config';\n\nexport enum WebViewBridgeMessageType {\n  invokeCapFunc = 'invokeCapFunc',\n  functionResponse = 'functionResponse',\n  event = 'event',\n}\n\nexport interface WebViewBridgeMessage {\n  type: string;\n  invocationId: string;\n  name: string;\n  args: any[];\n}\n\nexport const objectToInjection = (obj: Record<string, any>, timeout?: number) => {\n  const funcKeys = Object.keys(obj).filter((key) => typeof obj[key] === 'function');\n\n  const funcs = funcKeys.reduce(\n    (acc, funcName) => `${acc}${funcName}: (...args) => {\n      return new Promise((resolve, reject) => window.invokeCapFunc('bridge:${funcName}', args, resolve, reject))\n    },`,\n    '',\n  );\n\n  return `\n    (() => {\n      if (window.${TONCONNECT_WALLET_JSBRIDGE_KEY}) return;\n      window.capPromises = {};\n      window.capEventListeners = [];\n      window.invokeCapFunc = (name, args, resolve, reject) => {\n        const invocationId = btoa(Math.random()).substring(0, 12);\n        const timeoutMs = ${timeout || 'undefined'};\n        const timeoutId = timeoutMs\n          ? setTimeout(() => reject(new Error(\\`bridge timeout for function with name: \\${name}\\`)), timeoutMs)\n          : null;\n        window.capPromises[invocationId] = { resolve, reject, timeoutId };\n        const target = 'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab;\n        target.postMessage(JSON.stringify({\n          type: '${WebViewBridgeMessageType.invokeCapFunc}',\n          invocationId: invocationId,\n          name,\n          args,\n        }));\n      };\n      window.open = (url) => {\n        window.invokeCapFunc('window:open', { url });\n      };\n      window.close = () => {\n        window.invokeCapFunc('window:close');\n      };\n      window.addEventListener('click', (e) => {\n        const { href, target } = e.target.closest('a') || {};\n        if (href && (target === '_blank' || !href.startsWith('http'))) {\n          e.preventDefault();\n          window.invokeCapFunc('window:open', { url: href });\n        }\n      }, false);\n      window.addEventListener('message', ({ data }) => {\n        try {\n          const message = JSON.parse(data);\n          if (message.type === '${WebViewBridgeMessageType.functionResponse}') {\n            const promise = window.capPromises[message.invocationId];\n            if (!promise) {\n              return;\n            }\n            if (promise.timeoutId) {\n              clearTimeout(promise.timeoutId);\n            }\n            if (message.status === 'fulfilled') {\n              promise.resolve(message.data);\n            } else {\n              promise.reject(new Error(message.data));\n            }\n            delete window.capPromises[message.invocationId];\n          }\n          if (message.type === '${WebViewBridgeMessageType.event}') {\n            window.capEventListeners.forEach((listener) => listener(message.event));\n          }\n        } catch {}\n      });\n      function listen(cb) {\n        window.capEventListeners.push(cb);\n        return function() {\n          const index = window.capEventListeners.indexOf(cb);\n          if (index > -1) {\n            window.capEventListeners.splice(index, 1);\n          }\n        };\n      }\n      window.${TONCONNECT_WALLET_JSBRIDGE_KEY} = {\n        tonconnect: Object.assign(\n          ${JSON.stringify(obj)},\n          {${funcs}},\n          { listen },\n        ),\n      };\n    })();\n  `;\n};\n\nexport const getInjectableJsMessage = (message: any) => {\n  return `\n    (function() {\n      window.dispatchEvent(new MessageEvent('message', {\n        data: ${JSON.stringify(message)}\n      }));\n    })();\n  `;\n};\n","import type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  DeviceInfo,\n  RpcMethod,\n  WalletEvent,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useMemo, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { CustomInAppBrowserObject } from './useWebViewBridge';\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { logDebugError } from '../../../util/logs';\nimport { tonConnectGetDeviceInfo } from '../../../util/tonConnectEnvironment';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { useWebViewBridge } from './useWebViewBridge';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\ninterface WebViewTonConnectBridge {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n  restoreConnection(): Promise<ConnectEvent>;\n  disconnect(): Promise<void>;\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\ninterface OwnProps {\n  endpoint?: string;\n}\n\nexport function useDappBridge({\n  endpoint,\n}: OwnProps) {\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inAppBrowserRef = useRef<CustomInAppBrowserObject>(null);\n  const [requestId, setRequestId] = useState(0);\n  const origin = useMemo(() => {\n    return endpoint ? new URL(endpoint).origin.toLowerCase() : undefined;\n  }, [endpoint]);\n\n  const bridgeObject = useMemo((): WebViewTonConnectBridge | undefined => {\n    if (!origin) return undefined;\n\n    return {\n      deviceInfo: tonConnectGetDeviceInfo(),\n      protocolVersion: TONCONNECT_PROTOCOL_VERSION,\n      isWalletBrowser: true,\n\n      connect: async (protocolVersion, request) => {\n        try {\n          if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n            return buildConnectError(\n              requestId,\n              'Unsupported protocol version',\n              CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n            );\n          }\n          verifyConnectRequest(request);\n\n          await inAppBrowserRef.current?.hide();\n\n          openLoadingOverlay();\n\n          const response = await callApi(\n            'tonConnect_connect',\n            buildDappRequest(origin),\n            request,\n            requestId,\n          );\n\n          closeLoadingOverlay();\n\n          inAppBrowserRef.current?.show();\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:connect', err);\n          inAppBrowserRef.current?.show();\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      restoreConnection: async () => {\n        try {\n          const response = await callApi(\n            'tonConnect_reconnect',\n            buildDappRequest(origin),\n            requestId,\n          );\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:reconnect', err);\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      disconnect: async () => {\n        setRequestId(0);\n\n        await callApi(\n          'tonConnect_disconnect',\n          buildDappRequest(origin),\n          { id: requestId.toString(), method: 'disconnect', params: [] },\n        );\n      },\n\n      send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n        setRequestId(requestId + 1);\n        const global = getGlobal();\n        const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.origin === origin);\n\n        if (!isConnected) {\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n              message: 'Unknown app',\n            },\n            id: request.id.toString(),\n          };\n        }\n\n        const dappRequest = buildDappRequest(origin);\n\n        try {\n          switch (request.method) {\n            case 'sendTransaction': {\n              await inAppBrowserRef.current?.hide();\n\n              const callResponse = await callApi(\n                'tonConnect_sendTransaction',\n                dappRequest,\n                request,\n              );\n              if (IS_DELEGATED_BOTTOM_SHEET) {\n                void BottomSheet.applyScrollPatch();\n              }\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            case 'disconnect': {\n              const callResponse = await callApi(\n                'tonConnect_disconnect',\n                dappRequest,\n                request,\n              );\n\n              return callResponse!;\n            }\n\n            case 'signData': {\n              await inAppBrowserRef.current?.hide();\n              const callResponse = await callApi(\n                'tonConnect_signData',\n                dappRequest,\n                request,\n              );\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            default:\n              return {\n                error: {\n                  code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                  message: `Method \"${request!.method}\" is not supported`,\n                },\n                id: request!.id.toString(),\n              };\n          }\n        } catch (err: any) {\n          logDebugError('useDAppBridge:send', err);\n          inAppBrowserRef.current?.show();\n\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n              message: err?.message,\n            },\n            id: request!.id.toString(),\n          };\n        }\n      },\n    };\n  }, [origin, requestId]);\n\n  const [\n    bridgeInjectionCode,\n    onMessage,\n    sendEvent,\n  ] = useWebViewBridge<WebViewTonConnectBridge, WalletEvent>(inAppBrowserRef, bridgeObject);\n\n  const disconnect = useLastCallback(() => {\n    try {\n      // onDisconnect(endpoint, requestId);\n      sendEvent({ event: 'disconnect', payload: {}, id: requestId });\n    } catch (err: any) {\n      logDebugError('disconnect', err);\n    }\n  });\n\n  return {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    origin,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { useCallback, useMemo } from '../../../lib/teact/teact';\n\nimport type { WebViewBridgeMessage } from '../helpers';\n\nimport { openDeeplinkOrUrl } from '../../../util/deeplink';\nimport { getInjectableJsMessage, objectToInjection, WebViewBridgeMessageType } from '../helpers';\n\nexport type CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ntype UseWebViewBridgeReturnType<Event> = [\n  string,\n  (e: MessageEvent) => void,\n  (event: Event) => void,\n];\n\nexport const useWebViewBridge = <\n  BridgeObject extends { [key: string]: any } = {},\n  Event extends object = {},\n>(\n    inAppBrowserRef: React.RefObject<CustomInAppBrowserObject>,\n    bridgeObj?: BridgeObject,\n    timeout?: number,\n  ): UseWebViewBridgeReturnType<Event> => {\n  const bridgeInjectionCode = useMemo(\n    () => (bridgeObj ? objectToInjection(bridgeObj, timeout) : ''),\n    [bridgeObj, timeout],\n  );\n\n  const postMessage = useCallback((message: any) => {\n    void inAppBrowserRef.current?.executeScript({\n      code: getInjectableJsMessage(JSON.stringify(message)),\n    });\n  }, [inAppBrowserRef]);\n\n  const onMessage = useCallback(\n    async (event: MessageEvent) => {\n      if (!bridgeObj) return;\n\n      const message = typeof event.data === 'string'\n        ? JSON.parse(event.data)\n        : event.data as WebViewBridgeMessage;\n\n      if (message.type === WebViewBridgeMessageType.invokeCapFunc) {\n        try {\n          let result: any;\n          switch (message.name) {\n            case 'window:open': {\n              const { url } = message.args;\n              openDeeplinkOrUrl(url, true, true);\n              result = true;\n              break;\n            }\n\n            case 'window:close': {\n              void inAppBrowserRef.current?.close();\n\n              break;\n            }\n\n            default: {\n              const methodName = message.name.replace('bridge:', '');\n              result = await bridgeObj[methodName](...message.args);\n            }\n          }\n\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'fulfilled',\n            data: result,\n          });\n        } catch (err: any) {\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'rejected',\n            data: err?.message,\n          });\n        }\n      }\n    },\n    [bridgeObj, inAppBrowserRef, postMessage],\n  );\n\n  const sendEvent = useCallback(\n    (event: any) => {\n      postMessage({ type: WebViewBridgeMessageType.event, event });\n    },\n    [postMessage],\n  );\n\n  return [bridgeInjectionCode, onMessage, sendEvent];\n};\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { CustomInAppBrowserObject } from '../explore/hooks/useWebViewBridge';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useDappBridge } from '../explore/hooks/useDappBridge';\n\nimport styles from './InAppBrowser.module.scss';\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const { hasOpenClass, hasShownClass } = useShowTransition(Boolean(url));\n\n  const lang = useLang();\n\n  const {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  } = useDappBridge({\n    endpoint: url,\n  });\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    disconnect();\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('message', onMessage);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    // eslint-disable-next-line no-null/no-null\n    inAppBrowserRef.current = null;\n    closeBrowser();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode);\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    inAppBrowserRef.current = inAppBrowser;\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('message', onMessage);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return;\n\n    void openBrowser();\n  }, [url, title, subtitle]);\n\n  return (\n    <div className={buildClassName(hasShownClass && styles.browserShown, hasOpenClass && styles.browserOpen)} />\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"browserShown\":\"HhiWhPVc\",\"browserOpen\":\"pNRv6m36\"};","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? ({} as Record<ApiChain, string>);\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(address: string, availableChains: Record<ApiChain, unknown>): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","import type { ApiStakingState, ApiToken } from '../../api/types';\nimport type { DropdownItem } from '../../components/ui/Dropdown';\n\nimport { MIN_ACTIVE_STAKING_REWARDS } from '../../config';\nimport { ASSET_LOGO_PATHS } from '../../components/ui/helpers/assetLogos';\n\nexport function buildStakingDropdownItems({\n  tokenBySlug, states, shouldUseNominators,\n}: {\n  tokenBySlug: Record<string, ApiToken>;\n  states: ApiStakingState[];\n  shouldUseNominators?: boolean;\n}) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  const res = states.filter((state) => tokenBySlug[state.tokenSlug]).map<DropdownItem>((state) => {\n    const stateToken = tokenBySlug[state.tokenSlug];\n    const logoPath = ASSET_LOGO_PATHS[stateToken.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n    return {\n      value: state.id,\n      icon: logoPath ?? stateToken.image,\n      name: stateToken.symbol,\n    };\n  });\n  return res;\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.isUnstakeRequested) {\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.isUnstakeRequested\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n","import type { ApiJettonStakingState, ApiTransactionError } from '../../../api/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { getIsActiveStakingState } from '../../helpers/staking';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccount, selectAccountStakingState } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount!,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  if (isUnstaking) {\n    const instantAvailable = global.stakingInfo?.liquid?.available;\n\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n      state.type === 'liquid'\n      && instantAvailable\n      && instantAvailable < state.balance\n    ));\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later.',\n      });\n      global = getGlobal();\n\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later.',\n      });\n\n      global = getGlobal();\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingHardware', async (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: isUnstaking\n      ? StakingState.UnstakeConfirmHardware\n      : StakingState.StakeConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  const accountId = global.currentAccountId!;\n\n  try {\n    if (isUnstaking) {\n      const instantAvailable = global.stakingInfo?.liquid?.available;\n      const stakingBalance = state.balance;\n      const unstakeAmount = state.type === 'nominators' ? stakingBalance : tokenAmount!;\n\n      result = await ledgerApi.submitLedgerUnstake(\n        accountId,\n        state,\n        unstakeAmount,\n        getTonStakingFees(state.type).unstake.real,\n      );\n\n      const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n        state.type === 'liquid'\n        && instantAvailable\n        && instantAvailable < stakingBalance\n      ));\n\n      global = getGlobal();\n      global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n      setGlobal(global);\n    } else {\n      result = await ledgerApi.submitLedgerStake(\n        accountId,\n        amount!,\n        state,\n        getTonStakingFees(state.type).stake.real,\n      );\n    }\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showDialog({\n      message: isUnstaking\n        ? 'Unstaking was unsuccessful. Try again later.'\n        : 'Staking was unsuccessful. Try again later.',\n    });\n  } else if (typeof result !== 'string' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isUnstaking ? StakingState.UnstakeComplete : StakingState.StakeComplete,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global, actions, payload) => {\n  const { limit, offset } = payload ?? {};\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!, limit, offset);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n\n  global = updateCurrentStaking(global, {\n    state: isHardware ? StakingState.ClaimConnectHardware : StakingState.ClaimPassword,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  const result = await callApi(\n    'submitStakingClaim',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: StakingState.None,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaimHardware', async (global, actions) => {\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: StakingState.ClaimConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n\n  try {\n    result = await ledgerApi.submitLedgerStakingClaim(\n      accountId,\n      stakingState,\n      getTonStakingFees(stakingState.type).claim?.real,\n    );\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingClaimHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: StakingState.None,\n    });\n    setGlobal(global);\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent!.pageX!,\n              centerY: captureEvent!.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = (e as RealTouchEvent).touches[0].pageX;\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n| 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","export var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     * On Android the default will be the one the app was launched with.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\nimport { StatusBar, Style } from '@sina_kh/mtw-capacitor-status-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes: Set<HTMLInputTypeAttribute> = new Set([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: React.RefObject<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T extends any>(next: T): T | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: VoidFunction;\n  onBack?: VoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go') as HistoryOperationGo[];\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go') as HistoryOperationState[];\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: VoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isActive);\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isDoubled && styles.doubled, className, transitionClassNames)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { RefObject } from 'react';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLButtonElement>;\n  children: React.ReactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isSmall?: boolean;\n  isDestructive?: boolean;\n  onClick?: NoneToVoidFunction;\n  shouldStopPropagation?: boolean;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isLoading,\n  isPrimary,\n  isSimple,\n  isText,\n  isDisabled,\n  isRound,\n  isSmall,\n  isDestructive,\n  onClick,\n  shouldStopPropagation,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isSimple && styles.isSimple,\n        isSmall && styles.sizeSmall,\n        isPrimary && styles.primary,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isText && styles.isText,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_noClose\":\"rhAMo7kW\",\"headerNoClose\":\"rhAMo7kW\",\"title\":\"ZDSNp0nr\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { RefObject } from 'react';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport { getTelegramApp } from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: React.ReactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const localDialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const swipeDownDateRef = useRef<number>(null);\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    getTelegramApp()?.disableVerticalSwipes();\n\n    return getTelegramApp()?.enableVerticalSwipes;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      return;\n    }\n    const browser = getInAppBrowser();\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose);\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    undefined,\n    false,\n    undefined,\n    animationDuration,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    transitionClassNames,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nexport default freezeWhenClosed(Modal);\n\nfunction getCanCloseModal(lastScrollRef: { current: number | null }, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from 'native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import { DappConnectState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY, IS_CAPACITOR } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  ApiHardwareBlindSigningNotEnabled,\n  ApiUnsupportedVersionError,\n  ApiUserRejectsError,\n} from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  setIsPinAccepted,\n  updateConnectedDapps,\n  updateCurrentAccountId,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount, selectNewestTxTimestamps } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    global = updateDappConnectRequest(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappConnectRequestConfirm', { password, accountId });\n\n    return;\n  }\n\n  void vibrateOnSuccess();\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    password,\n  });\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler(\n  'submitDappConnectRequestConfirmHardware',\n  async (global, actions, { accountId: connectAccountId }) => {\n    const { proof } = global.dappConnectRequest!;\n\n    global = getGlobal();\n    global = updateDappConnectRequest(global, {\n      error: undefined,\n      state: DappConnectState.ConfirmHardware,\n    });\n    setGlobal(global);\n\n    const ledgerApi = await import('../../../util/ledger');\n\n    try {\n      const signature = await ledgerApi.signLedgerProof(connectAccountId!, proof!);\n      if (IS_DELEGATED_BOTTOM_SHEET) {\n        callActionInMain('submitDappConnectHardware', { accountId: connectAccountId, signature });\n\n        return;\n      }\n\n      actions.submitDappConnectHardware({ accountId: connectAccountId, signature });\n    } catch (err) {\n      setGlobal(updateDappConnectRequest(getGlobal(), {\n        error: 'Canceled by the user',\n      }));\n    }\n  },\n);\n\naddActionHandler('submitDappConnectHardware', async (global, actions, { accountId, signature }) => {\n  const { promiseId } = global.dappConnectRequest!;\n\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, { accountId, signature });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  const { promiseId } = global.dappConnectRequest || {};\n  if (!promiseId) {\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappConnectRequestConfirm');\n  } else {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappTransfer');\n  } else if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateCurrentDappTransfer(global, {\n      error: 'Wrong password, please try again.',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappTransferPassword', { password });\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  void callApi('confirmDappRequest', promiseId, password);\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferHardware', async (global, actions) => {\n  const { promiseId, transactions, vestingAddress } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const ledgerApi = await import('../../../util/ledger');\n\n  try {\n    const signedMessages = await ledgerApi.signLedgerTransactions(accountId, transactions!, {\n      isTonConnect: true,\n      vestingAddress,\n    });\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      callActionInMain('submitDappTransferHardware2', { signedMessages });\n\n      return;\n    }\n\n    actions.submitDappTransferHardware2({ signedMessages });\n  } catch (err) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled',\n      }));\n      return;\n    } else if (err instanceof ApiUnsupportedVersionError) {\n      actions.showError({\n        error: '$ledger_unsupported_ton_connect',\n      });\n      void callApi('cancelDappRequest', promiseId, err.message);\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n    }\n\n    global = getGlobal();\n    global = clearCurrentDappTransfer(global);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitDappTransferHardware2', (global, actions, { signedMessages }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('confirmDappRequest', promiseId, signedMessages);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without origin\n  const brokenDapp = result.find(({ origin }) => !origin);\n  if (brokenDapp) {\n    actions.deleteDapp({ origin: brokenDapp.origin });\n    result = result.filter(({ origin }) => origin);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { origin }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { origin });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, origin);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, origin);\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, {\n  promiseId,\n  transactions,\n  accountId,\n  dapp,\n  vestingAddress,\n}) => {\n  const { currentAccountId, currentDappTransfer: { promiseId: currentPromiseId } } = global;\n  if (currentAccountId !== accountId) {\n    const nextNewestTxTimestamps = selectNewestTxTimestamps(global, accountId);\n    await callApi('activateAccount', accountId, nextNewestTxTimestamps);\n    global = getGlobal();\n    setGlobal(updateCurrentAccountId(global, accountId));\n  }\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    actions.closeDappTransfer();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when Dapp Transaction Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => getGlobal().currentDappTransfer.state !== TransferState.None, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  const state = selectIsHardwareAccount(global) && transactions.length > 1\n    ? TransferState.WarningHardware\n    : TransferState.Initial;\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  global = updateCurrentDappTransfer(global, {\n    state,\n    promiseId,\n    transactions,\n    dapp,\n    vestingAddress,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (connectionType === 'connect' && !!global.dappConnectRequest)\n        || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId && accountId !== global.currentAccountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (Boolean(global.dappConnectRequest) || global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitTransferWithDieselResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n  ApiSwapPairAsset,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { buildSwapId } from '../../../util/swap/buildSwapId';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  clearCurrentSwap,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentSwap,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nlet pairsCache: Record<string, { data: ApiSwapPairAsset[]; timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FISRT_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug, pairs } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n      pairs,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    shouldResetOnClose: undefined,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n  global = getGlobal();\n\n  if (!buildResult || 'error' in buildResult) {\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    global = updateCurrentSwap(global, {\n      shouldResetOnClose: true,\n      isLoading: false,\n    });\n    setGlobal(global);\n\n    actions.showError({ error: buildResult?.error });\n\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pending',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    txIds: [],\n  };\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    isLoading: false,\n    state: SwapState.Complete,\n    activityId: buildSwapId(buildResult.id),\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (!result || 'error' in result) {\n    global = getGlobal();\n    global = updateCurrentSwap(global, { shouldResetOnClose: true });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n\n    setGlobal(global);\n    void vibrateOnError();\n\n    actions.showError({ error: result?.error });\n  }\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    error: undefined,\n    shouldResetOnClose: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  global = getGlobal();\n\n  if (!swapItem) {\n    global = updateCurrentSwap(global, {\n      isLoading: false,\n      shouldResetOnClose: true,\n    });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    setGlobal(global);\n\n    actions.showError({ error: ApiCommonError.Unexpected });\n\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    isLoading: false,\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  if (shouldSendTransaction) {\n    global = getGlobal();\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ((ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult) & { txId?: string }) | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('submitTransfer', 'ton', transferOptions, false);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('submitTransfer', 'tron', transferOptions, false);\n    }\n\n    if (!transferResult || 'error' in transferResult) {\n      global = getGlobal();\n      global = updateCurrentSwap(global, { shouldResetOnClose: true });\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n\n      setGlobal(global);\n      void vibrateOnError();\n      actions.showError({ error: transferResult?.error });\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo!.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo!.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo!.bySlug[newTokenOutSlug!];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo!.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently((global, shouldStop) => {\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    const pairsBySlug = global.currentSwap.pairs?.bySlug ?? {};\n    const isPairValid = global.currentSwap.tokenOutSlug! in pairsBySlug;\n    if (!isPairValid) {\n      return {\n        ...getSwapEstimateResetParams(global),\n        errorType: SwapErrorType.InvalidPair,\n      };\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account?.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('loadSwapPairs', async (global, actions, { tokenSlug, shouldForceUpdate }) => {\n  const tokenIn = global.swapTokenInfo?.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid && !shouldForceUpdate) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  if (!pairs) {\n    global = updateCurrentSwap(global, {\n      pairs: {\n        bySlug: {\n          ...global.currentSwap.pairs?.bySlug,\n          [tokenSlug]: {},\n        },\n      },\n    });\n    setGlobal(global);\n    return;\n  }\n\n  const isTonTokenIn = tokenIn.chain === 'ton';\n\n  const bySlug = pairs.reduce((acc, pair) => {\n    const isTonTokenOut = getIsTonToken(pair.slug, true);\n    const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n    const isMultichain = !(\n      (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n    );\n\n    acc[pair.slug] = {\n      ...(isMultichain && {\n        isMultichain,\n      }),\n      ...(pair.isReverseProhibited && {\n        isReverseProhibited: pair.isReverseProhibited,\n      }),\n    };\n    return acc;\n  }, {} as AssetPairs);\n\n  pairsCache[tokenSlug] = { data: pairs, timestamp: Date.now() };\n\n  global = updateCurrentSwap(global, {\n    pairs: {\n      bySlug: {\n        ...global.currentSwap.pairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapPairsCache', () => {\n  pairsCache = {};\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => activity.kind === 'swap' && activity.status === 'pending')\n    .map(({ id }) => id);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo!.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","export function buildSwapId(backendId: string) {\n  return `swap:${backendId}`;\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitMultiTransferResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport { ApiTransactionDraftError, type ApiTransactionError, type ApiTransferToSign } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { NFT_TRANSFER_AMOUNT } from '../../../api/chains/ton/constants';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport { selectAccountState, selectToken, selectTokenAddress } from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n  let { amount } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    // This assignment is needed only for the amount checking hack in the 'newLocalTransaction' handler in\n    // `src/global/actions/apiUpdates/activities.ts` to work.\n    amount = NFT_TRANSFER_AMOUNT;\n\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, { password }) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (promiseId) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = setIsPinAccepted(global);\n      setGlobal(global);\n    }\n\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitMultiTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = [];\n    for (let i = 0; i < nfts.length; i += NFT_BATCH_SIZE) {\n      chunks.push(nfts.slice(i, i + NFT_BATCH_SIZE));\n    }\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(global, {\n    isLoading: false,\n  });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n  } else {\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global, actions) => {\n  const {\n    toAddress,\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n    nfts,\n  } = global.currentTransfer;\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (promiseId) {\n    const message: ApiTransferToSign = {\n      toAddress: toAddress!,\n      amount: amount!,\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await ledgerApi.signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n      }\n    }\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  let error: string | undefined;\n\n  if (nfts?.length) {\n    for (const nft of nfts) {\n      const currentResult = await ledgerApi.submitLedgerNftTransfer({\n        accountId: global.currentAccountId!,\n        nftAddress: nft.address,\n        password: '',\n        toAddress: resolvedAddress!,\n        comment,\n        nft,\n        realFee: realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length),\n      });\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + 1,\n      });\n      setGlobal(global);\n      result = currentResult;\n    }\n  } else {\n    const tokenAddress = selectTokenAddress(global, tokenSlug);\n    const options = {\n      accountId: global.currentAccountId!,\n      password: '',\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment,\n      tokenAddress,\n      realFee: realNativeFee,\n    };\n\n    try {\n      result = await ledgerApi.submitLedgerTransfer(options, tokenSlug);\n    } catch (err: any) {\n      if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n        error = '$hardware_blind_sign_not_enabled';\n      }\n    }\n  }\n\n  if (!error && result === undefined) {\n    error = 'Declined';\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({\n      error: result.error,\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n","import {\n  BURN_ADDRESS, IS_CORE_WALLET, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN,\n} from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateAccountSettings, updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET || IS_CORE_WALLET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  TONCOIN,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateVesting,\n} from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateVesting(getGlobal(), accountId, { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateVesting(global, accountId, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('submitClaimingVestingHardware', async (global, actions) => {\n  global = updateVesting(global, global.currentAccountId!, {\n    isLoading: true,\n    error: undefined,\n    unfreezeState: VestingUnfreezeState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n  const options: ApiSubmitTransferOptions = {\n    accountId,\n    password: '',\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else {\n    global = getGlobal();\n    global = updateVesting(global, accountId, {\n      isConfirmRequested: undefined,\n      unfreezeRequestedIds,\n    });\n    setGlobal(global);\n    actions.openVestingModal();\n  }\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts, deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = Object.keys(selectAccounts(global) || {});\n  if (!pushNotifications.userToken && accounts.length) {\n    enabledAccounts = accounts.slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    if (global.accounts?.byId[accountId].addressByChain.ton) {\n      acc[accountId] = createResult.addressKeys[global.accounts?.byId[accountId].addressByChain.ton];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId]!;\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[global.accounts!.byId[accountId].addressByChain.ton],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let accountIds: string[];\n\n  if (isEnabled) {\n    accountIds = Object.keys(selectAccounts(global) || {})\n      .slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n    for (const newAccountId of accountIds) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    accountIds = Object.keys(enabledAccounts);\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (!accountIds.length) {\n    return;\n  }\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, accountIds), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of accountIds) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const accountId of accountIds) {\n      const address = global.accounts!.byId[accountId].addressByChain.ton;\n\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import type { ApiChain, ApiLiquidStakingState } from '../../../api/types';\n\nimport { DEFAULT_STAKING_STATE, IS_CORE_WALLET, MTW_CARDS_COLLECTION } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addNft,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateStakingInfo,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport { selectAccountNftByAddress, selectAccountState, selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        common,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n        isUnstakeRequested: false,\n      });\n      global = updateStakingInfo(global, common);\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      global = getGlobal();\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: nfts,\n          orderedAddresses: Object.keys(nfts),\n        },\n      });\n\n      if (!IS_CORE_WALLET) {\n        update.nfts.forEach((nft) => {\n          if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n            global = updateAccountSettingsBackgroundNft(global, nft);\n          }\n        });\n      }\n\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n\n      if (!IS_CORE_WALLET) {\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          global = updateAccountSettingsBackgroundNft(global, nft);\n        }\n      }\n\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, partial } = update;\n      global = updateAccount(global, accountId, {\n        addressByChain: {\n          ton: partial.address,\n        } as Record<ApiChain, string>,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = { ...global, isAppUpdateRequired };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      if (isUpdating && global[key]) break;\n\n      setGlobal({\n        ...global,\n        [key]: isUpdating ? Date.now() : undefined,\n      });\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({ global, accountId, addressByChain: { ton: address } as Record<ApiChain, string> });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        addressByChain: { ton: secondAddress } as Record<ApiChain, string>,\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nfunction loadSound() {\n  if (IS_CAPACITOR) {\n    NativeAudio.preload({\n      assetId: 'incomingTransactionSound',\n      assetPath: 'public/incoming-transaction.mp3',\n      audioChannelNum: 1,\n      isUrl: false,\n    }).catch((err : any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nloadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiTransactionActivity } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { groupBy } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { getIsTonToken } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { getIsTinyOrScamTransaction, getRealTxIdFromLocal } from '../../helpers';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addLocalTransaction,\n  addNewActivities,\n  clearIsPinAccepted,\n  removeLocalTransaction,\n  replaceLocalTransaction,\n  setIsFirstActivitiesLoadedTrue,\n  updateAccountState,\n  updateActivitiesIsLoadingByAccount,\n  updateActivity,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState, selectLocalTransactions } from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'newLocalTransaction': {\n      const {\n        accountId,\n        transaction,\n        transaction: { amount, txId },\n      } = update;\n\n      global = updateActivity(global, accountId, transaction);\n      global = addLocalTransaction(global, accountId, transaction);\n\n      if (-amount === global.currentTransfer.amount) {\n        global = updateCurrentTransfer(global, {\n          txId,\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n        if (getDoesUsePinPad()) {\n          global = clearIsPinAccepted(global);\n        }\n\n        if (getIsTonToken(transaction.slug)) {\n          actions.fetchTransferDieselState({ tokenSlug: transaction.slug });\n        }\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities, chain } = update;\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n\n      const localTransactions = selectLocalTransactions(global, accountId) ?? [];\n      const withLocalIndex = activities.map((activity) => {\n        if (activity.kind !== 'transaction') {\n          return { activity, localIndex: -1, groupName: 'newActivities' };\n        }\n\n        const localIndex = localTransactions.findIndex(({\n          txId, amount, isIncoming, slug, normalizedAddress, inMsgHash,\n        }) => {\n          if (getRealTxIdFromLocal(txId) === activity.txId) {\n            return true;\n          } else if (slug === TONCOIN.slug) {\n            return inMsgHash === activity.inMsgHash && normalizedAddress === activity.normalizedAddress;\n          } else {\n            return amount === activity.amount && !isIncoming && slug === activity.slug\n              && normalizedAddress === activity.normalizedAddress;\n          }\n        });\n\n        return { activity, localIndex, groupName: localIndex >= 0 ? 'localUpdates' : 'newActivities' };\n      });\n\n      const groups = groupBy(withLocalIndex, 'groupName');\n\n      groups.localUpdates?.forEach(({ activity, localIndex }) => {\n        const [localTransaction] = localTransactions.splice(localIndex, 1);\n\n        const { txId } = activity as ApiTransactionActivity;\n        const localTxId = localTransaction.txId;\n        global = replaceLocalTransaction(global, accountId, localTxId, activity as ApiTransactionActivity);\n\n        if (global.currentTransfer.txId === localTxId) {\n          global = updateCurrentTransfer(global, { txId });\n        }\n\n        const { currentActivityId } = selectAccountState(global, accountId) || {};\n        if (currentActivityId === localTxId) {\n          global = updateAccountState(global, accountId, { currentActivityId: txId });\n        }\n\n        global = removeLocalTransaction(global, accountId, localTxId);\n      });\n\n      if (groups.newActivities) {\n        const newActivities = groups.newActivities.map(({ activity }) => activity);\n\n        global = addNewActivities(global, accountId, newActivities);\n\n        const shouldPlaySound = newActivities.some((activity) => {\n          return activity.kind === 'transaction'\n            && activity.isIncoming\n            && global.settings.canPlaySounds\n            && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n            && !(\n              global.settings.areTinyTransfersHidden\n              && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug!])\n            )\n            && !getIsTransactionWithPoisoning(activity);\n        });\n\n        if (shouldPlaySound) {\n          playIncomingTransactionSound();\n        }\n      }\n\n      if (chain) {\n        global = setIsFirstActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n","import type {\n  ApiActivity, ApiChain, ApiTransaction, ApiTransactionActivity,\n} from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { compareActivities } from '../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, groupBy, mapValues, unique,\n} from '../../util/iteratees';\nimport { getIsTxIdLocal } from '../helpers';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity): GlobalState {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const idsBySlug = activities?.idsBySlug || {};\n\n  const { id, timestamp, kind } = activity;\n\n  const idsMain = [id].concat(activities?.idsMain ?? []);\n\n  if (kind === 'swap') {\n    const { from, to } = activity;\n\n    let fromTokenIds = idsBySlug[from] || [];\n    let toTokenIds = idsBySlug[to] || [];\n\n    if (!fromTokenIds.includes(id)) {\n      fromTokenIds = [id].concat(fromTokenIds);\n    }\n    if (!toTokenIds.includes(id)) {\n      toTokenIds = [id].concat(toTokenIds);\n    }\n\n    return updateAccountState(global, accountId, {\n      activities: {\n        ...activities,\n        byId: { ...activities?.byId, [id]: activity },\n        idsBySlug: { ...idsBySlug, [from]: fromTokenIds, [to]: toTokenIds },\n        idsMain,\n      },\n    });\n  }\n\n  const { slug } = activity;\n  const isLocal = getIsTxIdLocal(id);\n  let newestTransactionsBySlug = activities?.newestTransactionsBySlug || {};\n\n  if (!isLocal) {\n    const newestTx = newestTransactionsBySlug[slug];\n    if (!newestTx || newestTx.timestamp < timestamp || (newestTx.timestamp === timestamp && newestTx.txId < id)) {\n      newestTransactionsBySlug = { ...newestTransactionsBySlug, [slug]: activity };\n    }\n  }\n\n  let tokenTxIds = idsBySlug[slug] || [];\n\n  if (!tokenTxIds.includes(id)) {\n    tokenTxIds = [id].concat(tokenTxIds);\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId: { ...activities?.byId, [id]: activity },\n      idsBySlug: { ...idsBySlug, [slug]: tokenTxIds },\n      newestTransactionsBySlug,\n    },\n  });\n}\n\nexport function addNewActivities(global: GlobalState, accountId: string, newActivities: ApiActivity[]) {\n  let { activities } = selectAccountState(global, accountId) || {};\n\n  const newById = buildCollectionByKey(newActivities, 'id');\n  const byId = { ...activities?.byId, ...newById };\n\n  const newIdsMain = extractKey(newActivities, 'id');\n  const idsMain = unique(newIdsMain.concat(activities?.idsMain ?? []));\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  const replacedIdsBySlug = mapValues(newIdsBySlug, (newIds, slug) => {\n    const currentActivityIds = activities?.idsBySlug?.[slug];\n\n    return currentActivityIds ? unique(newIds.concat(currentActivityIds)) : newIds;\n  });\n\n  const newTxs = newActivities.filter(({ kind }) => kind === 'transaction') as ApiTransactionActivity[];\n  const newNewestTxsBySlug: Record<string, ApiTransaction> = { ...activities?.newestTransactionsBySlug };\n\n  // The transaction that replaced the local one may be newer\n  for (const [slug, txs] of Object.entries(groupBy(newTxs, 'slug'))) {\n    const newTx = txs[0];\n    if (!(slug in newNewestTxsBySlug) || newTx.timestamp > newNewestTxsBySlug[slug].timestamp) {\n      newNewestTxsBySlug[slug] = newTx;\n    }\n  }\n\n  activities = {\n    ...activities,\n    idsMain,\n    byId,\n    idsBySlug: { ...activities?.idsBySlug, ...replacedIdsBySlug },\n    newestTransactionsBySlug: newNewestTxsBySlug,\n  };\n\n  return updateAccountState(global, accountId, { activities });\n}\n\nfunction buildActivityIdsBySlug(activities: ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    const { id } = activity;\n\n    if ('slug' in activity) {\n      if (!acc[activity.slug]) {\n        acc[activity.slug] = [id];\n      } else {\n        acc[activity.slug].push(id);\n      }\n    }\n\n    if ('from' in activity) {\n      if (!acc[activity.from]) {\n        acc[activity.from] = [id];\n      } else {\n        acc[activity.from].push(id);\n      }\n    }\n\n    if ('to' in activity) {\n      if (!acc[activity.to]) {\n        acc[activity.to] = [id];\n      } else {\n        acc[activity.to].push(id);\n      }\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function replaceLocalTransaction(\n  global: GlobalState,\n  accountId: string,\n  localTxId: string,\n  activity: ApiTransactionActivity,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId, idsBySlug } = activities || { byId: {}, idsBySlug: {} };\n  const replacedActivity: ApiActivity | undefined = byId[localTxId];\n\n  if (!replacedActivity || replacedActivity.kind !== 'transaction') return global;\n\n  const {\n    slug, amount, timestamp, txId, shouldHide, fee,\n  } = activity;\n  const updatedIdsBySlug = { ...idsBySlug };\n  let { idsMain = [], newestTransactionsBySlug = {} } = activities ?? {};\n\n  if (slug in updatedIdsBySlug) {\n    const indexOfTxId = updatedIdsBySlug[slug].indexOf(localTxId);\n    if (indexOfTxId === -1) return global;\n\n    updatedIdsBySlug[slug] = [\n      ...updatedIdsBySlug[slug].slice(0, indexOfTxId),\n      txId,\n      ...updatedIdsBySlug[slug].slice(indexOfTxId + 1),\n    ];\n\n    const indexOfTxIdMain = idsMain.indexOf(localTxId);\n    if (indexOfTxIdMain === -1) return global;\n\n    idsMain = [\n      ...idsMain.slice(0, indexOfTxIdMain),\n      txId,\n      ...idsMain.slice(indexOfTxIdMain + 1),\n    ];\n  }\n\n  const updatedByTxId = {\n    ...byId,\n    [txId]: {\n      ...replacedActivity,\n      id: txId,\n      txId,\n      amount,\n      shouldHide,\n      timestamp,\n      fee,\n    },\n  };\n\n  delete updatedByTxId[localTxId];\n\n  const newestTransaction = newestTransactionsBySlug[slug];\n\n  if (!newestTransaction || timestamp > newestTransaction.timestamp) {\n    newestTransactionsBySlug = {\n      ...newestTransactionsBySlug,\n      [slug]: activity,\n    };\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId: updatedByTxId,\n      idsBySlug: updatedIdsBySlug,\n      newestTransactionsBySlug,\n    },\n  });\n}\n\nexport function addLocalTransaction(global: GlobalState, accountId: string, transaction: ApiTransactionActivity) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const localTransactions = (activities?.localTransactions ?? []).concat(transaction);\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: activities?.byId ?? {},\n      localTransactions,\n    },\n  });\n}\n\nexport function removeLocalTransaction(global: GlobalState, accountId: string, txId: string) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const localTransactions = (activities?.localTransactions ?? []).filter(({ id }) => id !== txId);\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: activities?.byId ?? {},\n      localTransactions,\n    },\n  });\n}\n\nexport function setIsFirstActivitiesLoadedTrue(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n\n  if (byChain && byChain[chain]?.isFirstTransactionsLoaded) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    byChain: {\n      ...byChain,\n      [chain]: {\n        ...byChain?.[chain],\n        isFirstTransactionsLoaded: true,\n      },\n    },\n  });\n}\n","import { TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateAccountState,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        realFee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount,\n        fee,\n        realFee,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateActiveDapp': {\n      const { accountId, origin } = update;\n\n      global = updateAccountState(global, accountId, {\n        activeDappOrigin: origin,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { accountId, origin } = update;\n      const accountState = selectAccountState(global, accountId);\n\n      if (accountState?.activeDappOrigin === origin) {\n        global = updateAccountState(global, accountId, {\n          activeDappOrigin: undefined,\n        });\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading');\n      }\n\n      actions.apiUpdateDappCloseLoading();\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n//# sourceMappingURL=definitions.js.map","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestTxTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n\n  actions.clearSwapPairsCache();\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const { message, title } = payload;\n\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push({ message, title });\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n    && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n    && (\n      (\n        global.currentSwap.tokenInSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n        && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n      )\n    || isDefaultFirstTokenOutSwap\n    );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n    && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.StateInitWithoutBin:\n      actions.showDialog({ message: '$state_init_requires_bin' });\n      break;\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      actions.showDialog({ message: '$state_init_invalid' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      actions.showDialog({\n        message: 'Invalid address format. Only URL Safe Base64 format is allowed.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later.' });\n      break;\n\n    case ApiTransactionDraftError.InactiveContract:\n      actions.showDialog({\n        message: '$transfer_inactive_contract_error',\n      });\n      break;\n\n    case ApiTransactionError.NotSupportedHardwareOperation:\n      actions.showDialog({\n        message: '$ledger_not_supported_operation',\n      });\n      break;\n\n    case ApiCommonError.ServerError:\n      actions.showDialog({\n        message: window.navigator.onLine\n          ? 'An error on the server side. Please try again.'\n          : 'No internet connection. Please check your connection and try again.',\n      });\n      break;\n\n    case ApiCommonError.DebugError:\n      actions.showDialog({ message: 'Unexpected error. Please let the support know.' });\n      break;\n\n    case ApiCommonError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestTxTimestamps = selectNewestTxTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestTxTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import type { RefObject } from '../lib/teact/teact';\nimport { useLayoutEffect } from '../lib/teact/teact';\nimport { setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { AppTheme } from '../global/types';\n\nimport quantize from '../lib/quantize';\nimport { euclideanDistance, hex2rgb } from './colors';\nimport { logDebugError } from './logs';\n\nconst COLOR_COUNT = 2;\nconst QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: RefObject | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport function extractAccentColorIndex(img: HTMLImageElement) {\n  try {\n    const palette = extractPaletteFromImage(img);\n    if (!palette?.length) {\n      return undefined;\n    }\n\n    const dominantRgb = palette[0];\n    const distances = ACCENT_COLORS.light.map((ac) => euclideanDistance(dominantRgb, hex2rgb(ac)));\n    const minDistance = Math.min(...distances);\n    const index = distances.indexOf(minDistance);\n\n    return index;\n  } catch (err) {\n    logDebugError('getAccentColorFromImage', err);\n    return undefined;\n  }\n}\n\nfunction extractPaletteFromImage(img: HTMLImageElement) {\n  const imageData = extractImageData(img);\n  const pixelArray = createPixelArray(imageData, img.naturalWidth * img.naturalHeight, QUALITY);\n  const cmap = quantize(pixelArray, COLOR_COUNT);\n  if (!cmap) return undefined;\n\n  const palette = cmap.palette() as [number, number, number][];\n\n  return palette;\n}\n\nfunction extractImageData(img: HTMLImageElement) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.naturalWidth;\n  canvas.height = img.naturalHeight;\n\n  const ctx = canvas.getContext('2d')!;\n\n  ctx.drawImage(img, 0, 0);\n\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  return imageData.data;\n}\n\nfunction createPixelArray(imgData: Uint8ClampedArray, pixelCount: number, quality: number) {\n  const pixels = imgData;\n  const pixelArray = [];\n\n  for (let i = 0, offset, r, g, b, a; i < pixelCount; i += quality) {\n    offset = i * 4;\n    r = pixels[offset + 0];\n    g = pixels[offset + 1];\n    b = pixels[offset + 2];\n    a = pixels[offset + 3];\n\n    // If pixel is mostly opaque and not white\n    if (typeof a === 'undefined' || a >= 125) {\n      if (!(r > 250 && g > 250 && b > 250)) {\n        pixelArray.push([r, g, b]);\n      }\n    }\n  }\n  return pixelArray;\n}\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport async function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  await chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  chrome.tabs.onRemoved.addListener((closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n\n    onClose();\n  });\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId!, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import useShowTransition from './useShowTransition';\n\nexport default function useMediaTransition(mediaData?: any) {\n  const isMediaReady = Boolean(mediaData);\n  const { transitionClassNames } = useShowTransition(isMediaReady, undefined, isMediaReady, 'slow');\n\n  return transitionClassNames;\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  className?: string;\n  imageClassName?: string;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  className,\n  imageClassName,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLImageElement>(null);\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  return (\n    <div className={buildClassName(transitionClassNames, className)}>\n      <img\n        ref={ref}\n        src={url}\n        alt={alt}\n        loading={loading}\n        className={imageClassName}\n        draggable={false}\n        referrerPolicy=\"same-origin\"\n        onLoad={!isLoaded ? handleLoad : undefined}\n      />\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGrayWhite from '../../../assets/lottie/clock_dark_gray_white.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGrayWhite from '../../../assets/lottie/clock_light_gray_white.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGrayWhite from '../../../assets/lottiePreview/clock_dark_gray_white.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGrayWhite from '../../../assets/lottiePreview/clock_light_gray_white.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGrayWhite: iconClockLightGrayWhite,\n    iconClockGreen: iconClockLightGreen,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGrayWhite: iconClockPreviewLightGrayWhite,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGrayWhite: iconClockDarkGrayWhite,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGrayWhite: iconClockPreviewDarkGrayWhite,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n    },\n  },\n};\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: RefObject<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { createSignal } from '../../../../util/signals';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nconst [getHideCounter, setHideCounter] = createSignal(0);\n\nexport function hideBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(currentCounter + 1);\n}\n\nexport function showBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(Math.max(0, currentCounter - 1));\n}\n\nfunction getIsBottomBarHidden() {\n  return getHideCounter() > 0;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const {\n    openSettings, closeSettings, setActiveContentTab, closeSiteCategory, selectToken, openExplore, closeExplore,\n  } = getActions();\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return getHideCounter.subscribe(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  const handleWalletClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n    if (!areAssetsActive && isWalletTabActive) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const handleExploreClick = useLastCallback(() => {\n    if (isExploreOpen) {\n      closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n    }\n\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    openExplore(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  const handleSettingsClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: handleWalletClick,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={handleWalletClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={handleExploreClick}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={handleSettingsClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { hideBottomBar, showBottomBar } from '../components/main/sections/Actions/BottomBar';\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass>;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO  `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: React.RefObject<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer!.unobserve(el);\n        observer!.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { RefObject } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const transitionClassNames = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      className={buildClassName(className, transitionClassNames)}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const transitionClassNames = useMediaTransition(isPreviewLoaded && !noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      className={buildClassName(className, styles.root, !noPreviewTransition && transitionClassNames)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"input_rich\":\"ijuURRdU\",\"inputRich\":\"ijuURRdU\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"input_large\":\"Vvta_r3C\",\"inputLarge\":\"Vvta_r3C\",\"isLoading\":\"oLkTqd0H\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\"};","import type {\n  ChangeEvent, FormEvent, KeyboardEvent, RefObject,\n} from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoComplete,\n  autoCorrect,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      {isMultiline ? (\n        <textarea\n          ref={ref as RefObject<HTMLTextAreaElement>}\n          id={id}\n          className={inputFullClass}\n          value={value}\n          disabled={isDisabled}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          onInput={handleInput}\n          onChange={handleChange}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      ) : (\n        <input\n          ref={ref as RefObject<HTMLInputElement>}\n          id={id}\n          className={inputFullClass}\n          type={finalType}\n          value={value}\n          disabled={isDisabled}\n          inputMode={inputMode}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          autoCorrect={autoCorrect}\n          spellCheck={autoCorrect}\n          onInput={handleInput}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      )}\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: React.ReactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    isSuccess && styles.success,\n  );\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => {\n    return () => {\n      // Don't trust this effect 100%, because it won't give the desired result when PinPad unmounts after the NBS closing\n      clearIsPinAccepted();\n    };\n  }, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      isSuccess && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              isSuccess && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      <div className={titleClassName}>{title}</div>\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton\n          className={!canRenderBackspace && styles.buttonHidden}\n          isDisabled={!canRenderBackspace || isSuccess}\n          onClick={handleBackspaceClick}\n        >\n          <i className=\"icon icon-backspace\" aria-hidden />\n        </PinPadButton>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n  (global, _, stickToFirst) => {\n    const { isPinAccepted } = global;\n\n    return stickToFirst(isPinAccepted);\n  },\n)(PinPad));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { pause } from '../../util/schedulers';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n| 'unfreeze' | 'passcode' | 'unlock' | 'claim';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length;\n  const canUsePinPad = getDoesUsePinPad();\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        onSubmit(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if ((IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain) || !isActive || !isBiometricAuthEnabled) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled]);\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    onSubmit(password);\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    return (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n          type={hasError ? 'error' : undefined}\n          length={PIN_LENGTH}\n          resetStateDelayMs={resetStateDelayMs}\n          value={password}\n          onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n          onChange={setPassword}\n          onClearError={handleClearError}\n          onSubmit={onSubmit}\n        />\n      </>\n    );\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n      </>\n    );\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm()}\n\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {!isBiometricAuthEnabled && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n  };\n})(PasswordForm));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\"};","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import type { RefObject } from 'react';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => React.ReactNode;\nexport type TransitionProps = {\n  ref?: RefObject<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: React.ReactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, React.ReactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"ra8fobWi\",\"appLockedFixed\":\"v6O5aP3y\",\"unlockButtonHidden\":\"YltinIdz\",\"title\":\"BTI1cF2x\",\"passwordFormContent\":\"gUfrKRnP\",\"logo\":\"Ut7tq0ls\",\"passwordInputWrapper\":\"WLrzziXQ\",\"appLockedWrapper\":\"mbuGFcLr\"};","import { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { AutolockValueType, Theme } from '../global/types';\n\nimport {\n  APP_NAME, AUTOLOCK_OPTIONS_LIST, DEBUG, IS_CORE_WALLET, IS_TELEGRAM_APP,\n} from '../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsHardwareAccount,\n  selectIsNativeBiometricAuthEnabled,\n} from '../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../util/biometrics';\nimport buildClassName from '../util/buildClassName';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrateOnSuccess } from '../util/haptics';\nimport { createSignal } from '../util/signals';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../util/windowEnvironment';\nimport { callApi } from '../api';\n\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../hooks/useBackgroundMode';\nimport useEffectOnce from '../hooks/useEffectOnce';\nimport useFlag from '../hooks/useFlag';\nimport { useHotkeys } from '../hooks/useHotkeys';\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\nimport useShowTransition from '../hooks/useShowTransition';\nimport useThrottledCallback from '../hooks/useThrottledCallback';\n\nimport Button from './ui/Button';\nimport Image from './ui/Image';\nimport { getInAppBrowser } from './ui/InAppBrowser';\nimport PasswordForm from './ui/PasswordForm';\nimport Transition from './ui/Transition';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../assets/logoDark.svg';\nimport logoLightPath from '../assets/logoLight.svg';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst PINPAD_RESET_DELAY = 300;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isHardwareAccount?: boolean;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isHardwareAccount,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n}: StateProps): TeactJsx {\n  const {\n    setIsPinAccepted, clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive,\n  } = getActions();\n  const lang = useLang();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  const [isLocked, lock, unlock] = useFlag((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(\n    isBackgroundModeActive() ? SLIDES.button : SLIDES.passwordForm,\n  );\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(SLIDES.button);\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { transitionClassNames } = useShowTransition(isLocked, afterUnlockCallback, true, 'slow');\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(SLIDES.button);\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    unlock();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderLogo() {\n    return (\n      <div className={styles.logo}>\n        <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt=\"Logo\" />\n      </div>\n    );\n  }\n\n  function renderTransitionContent(isActive: boolean) {\n    const isFixedSlide = isNonNativeBiometricAuthEnabled && slideForBiometricAuth === SLIDES.button;\n\n    return (\n      <div\n        className={buildClassName(styles.appLocked, isNonNativeBiometricAuthEnabled && styles.appLockedFixed)}\n      >\n        {\n          isFixedSlide ? (\n            <>\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n              <Button\n                isPrimary\n                className={!isActive ? styles.unlockButtonHidden : undefined}\n                onClick={handleChangeSlideForBiometricAuth}\n              >\n                {lang('Unlock')}\n              </Button>\n            </>\n          ) : (\n            <PasswordForm\n              isActive={getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n              noAnimatedIcon\n              forceBiometricsInMain\n              error={passwordError}\n              resetStateDelayMs={PINPAD_RESET_DELAY}\n              operationType=\"unlock\"\n              containerClassName={styles.passwordFormContent}\n              inputWrapperClassName={styles.passwordInputWrapper}\n              submitLabel={lang('Unlock')}\n              onSubmit={handleSubmitPassword}\n              onUpdate={handlePasswordChange}\n            >\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n            </PasswordForm>\n          )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={isNonNativeBiometricAuthEnabled ? handleChangeSlideForBiometricAuth : undefined}\n      activeKey={transitionKey}\n      className={buildClassName(transitionClassNames, styles.appLockedWrapper)}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue: isAppLockEnabled ? autolockValue : undefined,\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isHardwareAccount,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import type { ApiNft } from '../../../../../api/types';\n\nimport { MTW_CARDS_BASE_URL } from '../../../../../config';\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata!.mtwCardId}.webp`;\n}\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { LedgerTransport } from '../../../util/ledger/types';\nimport type { GlobalState } from '../../types';\nimport {\n  AppState, AuthState, HardwareConnectState, SettingsState, SwapState, TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  extractAccentColorIndex,\n} from '../../../util/accentColor';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport { getCachedImageUrl } from '../../../util/getCachedImageUrl';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { preloadImage } from '../../../util/preloadImage';\nimport { pause } from '../../../util/schedulers';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectFirstNonHardwareAccount,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/AppLocked';\nimport { getCardNftImageUrl } from '../../../components/main/sections/Card/helpers/getCardNftImageUrl';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (firstNonHardwareAccount) {\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const authState = firstNonHardwareAccount\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, actions, props) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  return { ...global, isAddAccountModalOpen: undefined };\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const { isBluetoothAvailable, isUsbAvailable } = await ledgerApi.detectAvailableTransports();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  if (availableTransports.length === 0) {\n    actions.showNotification({\n      message: 'Ledger is not supported on this device.',\n    });\n  } else if (availableTransports.length === 1) {\n    actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n  } else {\n    global = updateHardware(getGlobal(), {\n      availableTransports,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  if (IS_DELEGATING_BOTTOM_SHEET && params.shouldDelegateToNative) {\n    callActionInNative('initializeHardwareWalletConnection', { transport: params.transport });\n    return;\n  }\n\n  const setHardwareStateToConnecting = () => {\n    global = getGlobal();\n    global = updateHardware(getGlobal(), {\n      hardwareState: HardwareConnectState.Connecting,\n    });\n    setGlobal(global);\n  };\n\n  setHardwareStateToConnecting();\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (await ledgerApi.connectLedger(params.transport)) {\n    actions.connectHardwareWallet({ transport: params.transport });\n    return;\n  }\n\n  if (!IS_EXTENSION) {\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForBrowser,\n  });\n  setGlobal(global);\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  onLedgerTabClose(id, async () => {\n    await chrome.windows.update(popup.id!, { focused: true });\n\n    if (!await ledgerApi.connectLedger(params.transport)) {\n      actions.closeHardwareWalletModal();\n      return;\n    }\n\n    setHardwareStateToConnecting();\n    actions.connectHardwareWallet({ transport: params.transport });\n  });\n});\n\naddActionHandler('openHardwareWalletModal', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n\n  setGlobal({ ...global, isHardwareModalOpen: true });\n});\n\naddActionHandler('openSettingsHardwareWallet', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  setGlobal({ ...global, isHardwareModalOpen: false });\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdatePrices');\n\n  await Promise.all([\n    callApi('tryUpdateTokens'),\n    callApi('tryUpdateSwapTokens'),\n  ]);\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('openReceiveModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal');\n    return;\n  }\n\n  setGlobal({ ...global, isReceiveModalOpen: true });\n});\n\naddActionHandler('closeReceiveModal', (global) => {\n  setGlobal({ ...global, isReceiveModalOpen: undefined });\n});\n\naddActionHandler('openInvoiceModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal');\n    return;\n  }\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('closeInvoiceModal', (global) => {\n  setGlobal({ ...global, isInvoiceModalOpen: undefined });\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('initLedgerPage', (global) => {\n  global = updateHardware(global, {\n    isRemoteTab: true,\n  });\n  setGlobal({ ...global, appState: AppState.Ledger });\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata!;\n\n  let accentColorIndex: number | undefined;\n  if (mtwCardBorderShineType === 'radioactive') {\n    accentColorIndex = ACCENT_RADIOACTIVE_INDEX;\n  } else if (mtwCardType === 'silver') {\n    accentColorIndex = ACCENT_SILVER_INDEX;\n  } else if (mtwCardType === 'gold') {\n    accentColorIndex = ACCENT_GOLD_INDEX;\n  } else if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    accentColorIndex = ACCENT_BNW_INDEX;\n  } else {\n    const src = getCardNftImageUrl(nft);\n    if (!src) return;\n\n    const cachedBlobUrl = await getCachedImageUrl(src);\n    const img = await preloadImage(cachedBlobUrl);\n    accentColorIndex = extractAccentColorIndex(img);\n    URL.revokeObjectURL(cachedBlobUrl);\n\n    if (!accentColorIndex) return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n});\n\nasync function connectLedgerAndGetHardwareState() {\n  const ledgerApi = await import('../../../util/ledger');\n  let newHardwareState;\n\n  // If not running in the Capacitor environment, try to instantly connect to the Ledger\n  const isConnected = !IS_CAPACITOR ? await ledgerApi.connectLedger() : false;\n\n  if (!isConnected && IS_EXTENSION) {\n    newHardwareState = HardwareConnectState.WaitingForBrowser;\n  } else {\n    newHardwareState = HardwareConnectState.Connect;\n  }\n\n  return newHardwareState;\n}\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\n\nimport { setLanguage } from '../../../util/langProvider';\nimport switchTheme from '../../../util/switchTheme';\nimport { addActionHandler } from '../..';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n","import { TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { unique } from '../../../util/iteratees';\nimport { callActionInMain } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError, updateCurrentAccountState, updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectAccount, selectCurrentAccountState } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransfer', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentDappTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { origin }) => {\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByOrigin,\n    [origin]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByOrigin: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openUrl(payload.url, payload);\n});\n","import { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (\n      collectionAddress !== undefined && nft.collectionAddress === collectionAddress\n    )\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { updateVesting } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: true,\n    unfreezeState: isHardware ? VestingUnfreezeState.ConnectHardware : VestingUnfreezeState.Password,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (\n    !isExists\n    && Object.keys(enabledAccounts || {}).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: selectNotificationTonAddressesSlow(global, accountIds),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n  UserToken,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { bigintReviver } from '../util/bigint';\nimport {\n  cloneDeep, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { getIsActiveStakingState } from './helpers/staking';\nimport { getIsTxIdLocal } from './helpers';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && Object.keys(cached.accounts).length > 0) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances!.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          // eslint-disable-next-line @typescript-eslint/no-loop-func\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion === 14) {\n    clearActivities();\n    cached.stateVersion = 15;\n  }\n\n  if (cached.stateVersion === 15) {\n    clearActivities();\n    cached.stateVersion = 16;\n  }\n\n  if (cached.stateVersion === 16) {\n    clearActivities();\n    cached.stateVersion = 17;\n  }\n\n  if (cached.stateVersion === 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion === 20) {\n    clearActivities();\n    cached.stateVersion = 21;\n  }\n\n  if (cached.stateVersion === 21) {\n    clearActivities();\n    cached.stateVersion = 22;\n  }\n\n  if (cached.stateVersion === 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestTransactionsBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n  if (newestTransactionsBySlug) {\n    Object.values(newestTransactionsBySlug).forEach((tx) => {\n      if (tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'tokenInfo',\n      'settings',\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: global.accounts?.byId || {},\n    },\n    byAccountId: reduceByAccountId(global),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    acc[accountId] = pick(state, [\n      'balances',\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'stakingHistory',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByOrigin',\n      'dapps',\n    ]);\n\n    const accountTokens = selectAccountTokens(global, accountId);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokens);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokens?: UserToken[]) {\n  const {\n    idsBySlug, newestTransactionsBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokens || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedSlugs = tokens.slice(0, ACTIVITY_TOKENS_LIMIT).map(({ slug }) => slug);\n  if (!reducedSlugs.includes(TONCOIN.slug)) {\n    reducedSlugs.push(TONCOIN.slug);\n  }\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, reducedSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestTransactionsBySlug = newestTransactionsBySlug\n    ? pick(newestTransactionsBySlug, reducedSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestTransactionsBySlug: reducedNewestTransactionsBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && Object.values(stateById).length) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => !getIsTxIdLocal(id) && Boolean(byId[id]))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","export enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  visualViewport!.addEventListener('resize', handleViewportResize);\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    const id = setTimeout(() => savedCallback(), delay);\n    return () => clearTimeout(id);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T extends any>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '' | '' | '';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '': '1f977',\n  '': '1f984',\n  '': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`], transitionClassNames)}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from './Button';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n};\n\nfunction ModalHeader({\n  title, className, withNotch, closeClassName, onClose, onBackButtonClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerTitle\":\"r6WClabQ\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"iconQuestion\":\"CLKLBCVt\",\"blockWithTooltip\":\"eqWsA9Ak\",\"tooltip\":\"DCWmLsBA\",\"tooltip_wide\":\"ESFWFyav\",\"tooltipWide\":\"ESFWFyav\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialog\":\"xRqyv_rX\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  theme: Theme;\n}\n\nfunction SettingsAbout({\n  isActive, handleBackClick, isInsideModal, theme,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"\" />, unicorn: <Emoji from=\"\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  // eslint-disable-next-line no-null/no-null\n  const firstInputRef = useRef<HTMLInputElement>(null);\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useHideBottomBar(Boolean(isActive));\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\n// eslint-disable-next-line consistent-return\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneClassNames = useMediaTransition(one);\n  const twoClassNames = useMediaTransition(two);\n  const threeClassNames = useMediaTransition(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', oneClassNames)}>1</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', twoClassNames)}>2</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', threeClassNames)}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: React.ReactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const { transitionClassNames } = useShowTransition(isLogoReady, undefined, undefined, 'slow');\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          src={logoPath}\n          alt={APP_NAME}\n          className={buildClassName(styles.logo, transitionClassNames)}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={styles.importButtonsBlock}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n  | 'isBackupModalOpen'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<number | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return <SettingsAbout isActive={isActive} handleBackClick={closeAbout} theme={theme} />;\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n    'isBackupModalOpen',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\n\nimport { getCardNftImageUrl } from '../components/main/sections/Card/helpers/getCardNftImageUrl';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"accountTitle\":\"OmlnPb32\",\"accountTitleInteractive\":\"Fldd4MBh\",\"accountTitleInner\":\"YGITDXg2\",\"accountTitleShort\":\"qroBIVHK\",\"arrowIcon\":\"npqBgt0Z\",\"menuButton\":\"MelIpdSX\",\"edit\":\"k40niuQ5\",\"inputContainer\":\"XNPgjyNM\",\"input\":\"b5kkV6B7\",\"saveButton\":\"BIi0915d\",\"container\":\"PpBNJGXa\",\"dialog\":\"rSsbSpKy\",\"backdrop\":\"qHXAdLTy\",\"dialog_compact\":\"aMGXe7oo\",\"dialogCompact\":\"aMGXe7oo\",\"actionIcon\":\"wHon4UZ6\",\"button\":\"nW3c_nQf\",\"button_current\":\"ApT2_0sQ\",\"buttonCurrent\":\"ApT2_0sQ\",\"customCard\":\"q9ZqciDr\",\"accountName\":\"vSsIdneH\",\"accountAddressBlock\":\"HvcgH37L\",\"createAccountButton\":\"R6UTDxww\",\"createAccountIcon\":\"aB938ron\",\"menuButtons\":\"vqWRGYSE\",\"inStickyCard\":\"W68g0iId\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  isHardware?: boolean;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const HARDWARE_ACCOUNT_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  isHardware,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const addressOrMultichain = Object.keys(addressByChain).length > 1\n    ? lang('Multichain')\n    : shortenAddress(\n      addressByChain.ton,\n      isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.button_current,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"iconLedger\":\"fQt3UNlM\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, HARDWARE_ACCOUNT_ADDRESS_SHIFT } from '../main/sections/Card/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  isHardware?: boolean;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  isHardware,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isHardware && <i className={buildClassName('icon-ledger', isHardware && styles.iconLedger)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n      && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"textIcon\":\"SOw0Xtct\",\"text\":\"GuAw_sFJ\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {renderText(lang(error!))}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({ onEsc: () => { handler(); } });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import type { FC, RefObject } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  menuRef?: RefObject<HTMLDivElement | null>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  style?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: () => void;\n  onClose?: () => void;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  style,\n  positionX = 'left',\n  positionY = 'top',\n  transformOriginX,\n  transformOriginY,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let bubbleRef = useRef<HTMLDivElement>(null);\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen,\n    onCloseAnimationEnd,\n    shouldSkipTransition,\n    undefined,\n    shouldSkipTransition,\n  );\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, bubbleRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[positionY],\n    styles[positionX],\n    styles[type],\n    transitionClassNames,\n  );\n\n  const transformOriginYStyle = transformOriginY !== undefined ? `${transformOriginY}px` : undefined;\n  const transformOriginXStyle = transformOriginX !== undefined ? `${transformOriginX}px` : undefined;\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      style={style}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        style={`transform-origin: ${transformOriginXStyle || positionX} ${transformOriginYStyle || positionY}`}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: RefObject<HTMLElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"separator\":\"KUw9xH1F\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"insideButton\":\"rpgBhur3\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\nimport windowSize from '../../util/windowSize';\n\nimport useLang from '../../hooks/useLang';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\n\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  selectedValue?: string;\n  items: DropdownItem[];\n  withPortal?: boolean;\n  anchorPosition?: IAnchorPosition;\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  menuStyle?: string;\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SAFE_POSITION_PX = 6;\n\nfunction DropdownMenu({\n  isOpen,\n  selectedValue,\n  items,\n  withPortal,\n  anchorPosition,\n  menuPosition,\n  menuPositionHorizontal,\n  menuStyle,\n  transformOriginX,\n  transformOriginY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  const [menuLeft, setMenuLeft] = useState(anchorPosition?.x);\n\n  useEffect(() => {\n    if (isOpen && menuRef.current && anchorPosition) {\n      const menuWidth = menuRef.current.offsetWidth;\n      const windowWidth = windowSize.get().width;\n      let left = anchorPosition?.x;\n\n      left = Math.min(left, windowWidth - menuWidth - SAFE_POSITION_PX);\n      left = Math.max(left, SAFE_POSITION_PX);\n\n      setMenuLeft(left);\n    }\n  }, [anchorPosition, isOpen]);\n\n  if (anchorPosition) {\n    menuStyle = `${menuStyle || ''};left: ${menuLeft}px; top: ${anchorPosition.y}px;`;\n  }\n\n  const prevMenuStyle = usePrevDuringAnimationSimple(menuStyle);\n\n  const handleItemClick = (e: React.MouseEvent, value: string) => {\n    e.stopPropagation();\n    onSelect?.(value);\n    onClose();\n  };\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      style={menuStyle || prevMenuStyle}\n      withPortal={withPortal}\n      positionX={menuPositionHorizontal}\n      positionY={menuPosition}\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          item.icon && styles.item_with_icon,\n          item.isDisabled && styles.disabled,\n          item.isDangerous && styles.dangerous,\n          item.withSeparator && index > 0 && styles.separator,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <button\n            key={item.value}\n            type=\"button\"\n            className={fullButtonClassName}\n            disabled={item.isDisabled}\n            onClick={(e) => handleItemClick(e, item.value)}\n          >\n            {item.icon && (\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', styles.itemIcon, iconClassName)} />\n            )}\n            {item.overlayIcon && (\n              <img src={item.overlayIcon} alt=\"\" className={buildClassName('icon', styles.itemOverlayIcon)} />\n            )}\n            {item.fontIcon && (\n              <i\n                className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n                aria-hidden\n              />\n            )}\n            <span className={buildClassName(styles.itemName, 'menuItemName')}>\n              {shouldTranslateOptions ? lang(item.name) : item.name}\n              {item.description && (\n                <span className={styles.itemDescription}>\n                  {shouldTranslateOptions ? lang(item.description) : item.description}\n                </span>\n              )}\n            </span>\n          </button>\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem {\n  value: string;\n  name: string;\n  selectedName?: string;\n  description?: string;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withSeparator?: boolean;\n}\n\ninterface OwnProps {\n  label?: string;\n  selectedValue?: string;\n  items: DropdownItem[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light';\n  arrow?: 'caret' | 'chevron';\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: string) => void;\n  isLoading?: boolean;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_HORIZONTAL = 'right';\n\nfunction Dropdown({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPosition,\n  menuPositionHorizontal = DEFAULT_MENU_POSITION_HORIZONTAL,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const [selectedItem, selectedItemName] = useMemo(() => {\n    const item = items.find((i) => selectedValue !== undefined && i.value === selectedValue);\n    const selectedName = item?.selectedName ?? item?.name ?? '';\n    return [item, selectedName];\n  }, [items, selectedValue]);\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const buttonArrowIcon = buildClassName(\n    styles.buttonIcon,\n    arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n  );\n\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n  const fullClassName = buildClassName(\n    className,\n    theme && styles[theme],\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    !isFullyInteractive && disabled && styles.disabled,\n    withMenu && menuClassName,\n    itemClassName,\n  );\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <button\n          type=\"button\"\n          className={buttonFullClassName}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n          disabled={disabled}\n        >\n          {selectedItem?.icon && <img src={selectedItem.icon} alt=\"\" className={styles.itemIcon} />}\n          {selectedItem?.overlayIcon && (\n            <img\n              src={selectedItem?.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, styles.insideButton)}\n            />\n          )}\n          {selectedItem?.fontIcon && (\n            <i\n              className={buildClassName(`icon-${selectedItem.fontIcon}`, styles.fontIcon)}\n              aria-hidden\n            />\n          )}\n          <span className={buildClassName(styles.itemName, 'itemName', itemClassName)}>\n            {shouldTranslateOptions ? lang(selectedItemName) : selectedItemName}\n          </span>\n          {withMenu && <i className={buttonArrowIcon} aria-hidden />}\n        </button>\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionHorizontal={menuPositionHorizontal}\n          menuPosition={menuPosition}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport {\n  IS_ANDROID, IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  // All API method calls should be delegated from the main to the native copy of the app on iOS (NBS)\n  shouldDelegateToNative?: boolean;\n  state?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  shouldDelegateToNative,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    connectHardwareWallet,\n    resetHardwareWalletConnect,\n    initializeHardwareWalletModal,\n    initializeHardwareWalletConnection,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting || (\n    state === HardwareConnectState.Connect && !isLedgerFailed && !isTonAppFailed && availableTransports?.length === 1\n  );\n  const isWaitingForBrowser = state === HardwareConnectState.WaitingForBrowser;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    transitionClassNames: availableTransportsClassNames,\n  } = useShowTransition(Boolean(renderingAvailableTransports.length > 0 && selectedTransport));\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(isActive);\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (isRemoteTab || !isActive || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) return;\n\n    initializeHardwareWalletModal({ shouldDelegateToNative: IS_DELEGATING_BOTTOM_SHEET && shouldDelegateToNative });\n  }, [isActive, isRemoteTab, shouldDelegateToNative]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isRemoteTab || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n\n      setTimeout(() => {\n        resetHardwareWalletConnect();\n      }, NEXT_SLIDE_DELAY);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (\n      state === HardwareConnectState.ConnectedWithSingleWallet\n      || state === HardwareConnectState.ConnectedWithSeveralWallets\n    ) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [state, handleConnected]);\n\n  const handleCloseWithBrowserTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    void closeLedgerTab();\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (renderingAvailableTransports.length > 1) {\n      initializeHardwareWalletConnection({\n        transport: selectedTransport!,\n        shouldDelegateToNative,\n      });\n    } else {\n      connectHardwareWallet({ transport: availableTransports?.[0] });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div className={buildClassName(styles.dropdownBlock, availableTransportsClassNames)}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport!}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport as (value: string) => void}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (isRemoteTab && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderWaitingForBrowser() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleCloseWithBrowserTab : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleCloseWithBrowserTab} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={styles.container}>\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              styles.textBlock_gap,\n            )}\n          >\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Switch to the newly opened tab to connect Ledger.')}\n            </span>\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Once connected, switch back to this window to proceed.')}\n            </span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button\n              className={buildClassName(styles.button, styles.button_single)}\n              onClick={handleCloseWithBrowserTab}\n            >\n              {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderConnect() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? onClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={buildClassName(\n          styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n        )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              isConnected && styles.textBlock_success,\n            )}\n          >\n            <span\n              className={buildClassName(\n                styles.text,\n                isLedgerFailed && styles.text_failed,\n                isLedgerConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Connect your Ledger')}\n            </span>\n            <span\n              className={buildClassName(\n                styles.text,\n                isTonAppFailed && styles.text_failed,\n                isTonAppConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Unlock it and open the TON App')}\n            </span>\n          </div>\n\n          {shouldRenderAvailableTransports && renderAvailableTransports()}\n          {renderButtons()}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent() {\n    if (isWaitingForBrowser) {\n      return renderWaitingForBrowser();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForBrowser ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { availableTransports, lastUsedTransport } = global.hardware;\n\n  return {\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappUrl\":\"Xz5xXLpO\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"shimmer\":\"IwL4cJVX\",\"transactionDappIconSkeleton\":\"Q9_OlVcf\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowContainerSkeleton\":\"XcidIimi\",\"rowContainerLargeSkeleton\":\"Lh4_AmEs\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowTextSkeleton\":\"iLWJ6ABT\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"warningForPayload\":\"fHoMTSia\",\"fee\":\"nBxdGGBZ\",\"buttonsAfterFee\":\"LNrikojg\",\"detailsModalContent\":\"O32mclho\",\"detailsModalExplanation\":\"tFBBFIVM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  iconUrl?: string;\n  name?: string;\n  url?: string;\n  origin?: string;\n  onDisconnect?: (origin: string) => void;\n  className?: string;\n}\n\nfunction DappInfo({\n  iconUrl,\n  name,\n  url,\n  origin,\n  onDisconnect,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const shouldShowDisconnect = Boolean(onDisconnect && origin);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(origin!);\n  });\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappUrl}>{url && new URL(url).host}</span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, HardwareConnectState } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  hardwareState,\n  settingsByAccountId,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = useMemo(() => {\n    return accounts && Object.keys(accounts).length > 1;\n  }, [accounts]);\n  const { iconUrl, name, url } = dapp || {};\n\n  const handleSubmit = useLastCallback(() => {\n    closeConfirm();\n    const { isHardware } = accounts![selectedAccount];\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      cancelDappConnectRequestConfirm();\n    } else if (isHardware) {\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const isActive = accountId === selectedAccount;\n    const onClick = isActive || isLoading ? undefined : () => setSelectedAccount(accountId);\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n\n        <div className={modalStyles.transitionContent}>\n          <DappInfo\n            iconUrl={iconUrl}\n            name={name}\n            url={url}\n            className={buildClassName(styles.dapp_first, styles.dapp_push)}\n          />\n          {shouldRenderAccounts && renderAccounts()}\n\n          <div className={styles.footer}>\n            <Button\n              isPrimary\n              onClick={openConfirm}\n            >\n              {lang('Connect')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        <div className={modalStyles.transitionContent}>\n          <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n            <div className={styles.dappInfoIconSkeleton} />\n            <div className={styles.dappInfoTextSkeleton}>\n              <div className={styles.nameSkeleton} />\n              <div className={styles.descSkeleton} />\n            </div>\n          </div>\n          <div className={styles.accountWrapperSkeleton}>\n            {shouldRenderAccounts && renderAccounts()}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    hardwareState,\n    settingsByAccountId: global.settings.byAccountId,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(DappConnectModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, type TeactNode, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as TeactNode[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved') as string, icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleOpenUrl, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const addressNameRef = useRef<HTMLInputElement>(null);\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, getExplorerName(chain!));\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    menuPosition,\n    isActionsMenuOpen,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            anchorPosition={menuPosition}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleOpenUrl}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div\n        className={buildClassName(styles.wrapper, className)}\n        /* eslint-disable-next-line react/jsx-props-no-spreading */\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n  },\n) {\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setMenuPosition(undefined));\n  const isActionsMenuOpen = Boolean(menuPosition);\n\n  const menuItems = useMemo<DropdownItem[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer,\n    } = options;\n\n    const items: DropdownItem[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      withSeparator: true,\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        withSeparator: true,\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        withSeparator: true,\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        withSeparator: true,\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    menuHandlers[value as MenuHandler]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = (e as React.TouchEvent);\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { bottom } = e.currentTarget.getBoundingClientRect();\n\n    setMenuPosition({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n  });\n\n  return {\n    isActionsMenuOpen,\n    menuPosition,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug];\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token?.decimals ?? 0), token?.symbol ?? '')}\n      </span>,\n    );\n  }\n\n  if (Object.keys(amountsBySlug).length > 0) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={styles.payloadField}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.quote.price;\n  }, 0);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && '  '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  /** In TON */\n  fullFee: bigint;\n  /** In TON */\n  received: bigint;\n};\n\nfunction DappReturnedDetailsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={lang('Dapp Fee Details')}\n      contentClassName={styles.detailsModalContent}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(DappReturnedDetailsModal);\n\nfunction FeeDetailsContent({ onClose, fullFee, received }: Omit<OwnProps, 'isOpen'>) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={styles.detailsModalExplanation}>\n        <div>\n          {renderText(lang('$dapp_return_details', {\n            fee_amount: <b>{formatCurrency(toDecimal(fullFee, TONCOIN.decimals), TONCOIN.symbol, undefined, true)}</b>,\n            // Rounding down to make the actual result better than we predict\n            received_amount: <b>{'~'}{formatCurrency(toDecimal(received, TONCOIN.decimals), TONCOIN.symbol)}</b>,\n          }))}\n        </div>\n        <div className={styles.warningForPayload}>\n          {lang('$dapp_return_disclaimer')}\n        </div>\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport FeeLine, { FeeLineContainer } from '../ui/FeeLine';\nimport DappReturnedDetailsModal from './DappReturnedDetailsModal';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = Pick<ApiDappTransfer, 'fullFee' | 'received'>;\n\nfunction DappTransferFee({\n  fullFee, received,\n}: OwnProps) {\n  const lang = useLang();\n  const [isDetailsModalOpen, openDetailsModal, closeDetailsModal] = useFlag();\n\n  if (received === 0n) {\n    return (\n      <FeeLine\n        terms={{ native: fullFee }}\n        token={TONCOIN}\n        precision=\"exact\"\n        className={styles.fee}\n      />\n    );\n  }\n\n  if (fullFee >= received) {\n    const realFee = fullFee - received;\n    const realFeePrecision = 'approximate';\n    return (\n      <>\n        <FeeLine\n          terms={{ native: realFee }}\n          token={TONCOIN}\n          precision=\"approximate\"\n          onDetailsClick={openDetailsModal}\n          className={styles.fee}\n        />\n        <FeeDetailsModal\n          isOpen={isDetailsModalOpen}\n          onClose={closeDetailsModal}\n          fullFee={{ native: fullFee }}\n          realFee={{ native: realFee }}\n          realFeePrecision={realFeePrecision}\n          excessFee={received}\n          excessFeePrecision=\"approximate\"\n          token={TONCOIN}\n          title={lang('Dapp Fee Details')}\n          extraContent={<div className={styles.explanationWarning}>{lang('$dapp_return_disclaimer')}</div>}\n        />\n      </>\n    );\n  }\n\n  const realReceived = received - fullFee;\n  return (\n    <>\n      <FeeLineContainer className={styles.fee} onDetailsClick={openDetailsModal}>\n        {lang('$returned_value', {\n          // Rounding down to make the actual result better than we predict\n          value: formatCurrency(toDecimal(realReceived, TONCOIN.decimals), TONCOIN.symbol),\n        })}\n      </FeeLineContainer>\n      <DappReturnedDetailsModal\n        isOpen={isDetailsModalOpen}\n        onClose={closeDetailsModal}\n        fullFee={fullFee}\n        received={received}\n      />\n    </>\n  );\n}\n\nexport default memo(DappTransferFee);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport DappAmountField from './DappAmountField';\nimport DappTransferFee from './DappTransferFee';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransfer({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  function renderAmount() {\n    if (isNftTransferPayload(transaction.payload)) {\n      if (transaction.displayedAmount === 0n) {\n        return undefined;\n      }\n\n      return (\n        <DappAmountField\n          label={lang('Additional Amount Sent')}\n          amountsBySlug={{ [TONCOIN.slug]: transaction.displayedAmount }}\n        />\n      );\n    }\n\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      amountBySlug[transaction.payload.slug] = transaction.payload.amount;\n    }\n    amountBySlug[TONCOIN.slug] = transaction.displayedAmount;\n\n    if (amountBySlug[TONCOIN.slug] === 0n && Object.keys(amountBySlug).length > 1) {\n      delete amountBySlug[TONCOIN.slug];\n    }\n\n    return <DappAmountField label={lang('Amount')} amountsBySlug={amountBySlug} />;\n  }\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {renderAmount()}\n\n      {payloadElement && (\n        <>\n          <p className={styles.label}>{renderPayloadLabel()}</p>\n          <div className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}>\n            {payloadElement}\n            {!isPayloadExpanded && (\n              <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n                {lang('View')}\n              </div>\n            )}\n          </div>\n          {transaction.isDangerous && (\n            <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n          )}\n        </>\n      )}\n\n      <DappTransferFee fullFee={transaction.fullFee} received={transaction.received} />\n    </>\n  );\n}\n\nexport default memo(DappTransfer);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp, ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentDappTransferTotals,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport DappAmountField from './DappAmountField';\nimport DappInfo from './DappInfo';\nimport DappTransfer from './DappTransfer';\nimport DappTransferFee from './DappTransferFee';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  totalFullFee: bigint;\n  totalReceived: bigint;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nfunction DappTransferInitial({\n  currentAccount,\n  toncoinBalance,\n  transactions,\n  totalAmountsBySlug,\n  totalFullFee,\n  totalReceived,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { showDappTransfer, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const isSingleTransaction = transactions?.length === 1;\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  function renderTransaction() {\n    return (\n      <DappTransfer\n        transaction={renderingTransactions![0]}\n        tokensBySlug={tokensBySlug}\n      />\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    let amountText = '';\n    if (isNftTransferPayload(payload)) {\n      amountText = '1 NFT';\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const token = tokensBySlug[tokenSlug];\n      if (token) {\n        const { decimals, symbol } = token;\n        amountText = formatCurrency(toDecimal(amount, decimals), symbol);\n      }\n    }\n    if (!amountText || transaction.displayedAmount) {\n      if (amountText) amountText += ' + ';\n      amountText += formatCurrency(toDecimal(transaction.displayedAmount), TONCOIN.symbol);\n    }\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransfer({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    const hasAmount = nftCount > 0 || Object.keys(totalAmountsBySlug).length > 0;\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions?.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n        {isDangerous && (\n          <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n        )}\n        <DappTransferFee fullFee={totalFullFee} received={totalReceived} />\n      </>\n    );\n  }\n\n  if (!renderingTransactions) {\n    return undefined;\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n      {isSingleTransaction ? renderTransaction() : renderTransactions()}\n\n      <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n        <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          isLoading={isLoading}\n          isDisabled={isScam}\n          className={modalStyles.button}\n          onClick={!isScam ? submitDappTransferConfirm : undefined}\n        >\n          {lang('Send')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions } = global.currentDappTransfer;\n\n  const accounts = selectNetworkAccounts(global);\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee: totalFullFee,\n    received: totalReceived,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    transactions,\n    totalAmountsBySlug,\n    totalFullFee,\n    totalReceived,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n  };\n})(DappTransferInitial));\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.displayedAmount + transaction.fullFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].quote.priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.quote.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { isNftTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransfer from './DappTransfer';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nconst MAX_TRANSACTIONS_IN_SMALL_MODAL = 4;\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    dapp,\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    error,\n  },\n  tokensBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMediaViewerOpen,\n  isDangerous: withPayloadWarning,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const isDappLoading = dapp === undefined;\n  const needsExtraHeight = withPayloadWarning || (transactions?.length ?? 0) > MAX_TRANSACTIONS_IN_SMALL_MODAL;\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransferHardware();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderSubTransaction() {\n    const transaction = viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined;\n\n    return (\n      <>\n        <ModalHeader title={lang('Transaction Info')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          {Boolean(transaction) && (\n            <DappTransfer\n              transaction={transaction}\n              tokensBySlug={tokensBySlug}\n            />\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n            <Button onClick={handleBackClick}>{lang('Back')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    const renderRow = (isLarge?: boolean) => (\n      <div className={buildClassName(styles.rowContainerSkeleton, isLarge && styles.rowContainerLargeSkeleton)}>\n        <div className={buildClassName(styles.rowTextSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n        <div className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      </div>\n    );\n\n    return (\n      <>\n        <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.transactionDirection}>\n            <div className={styles.transactionDirectionLeftSkeleton}>\n              <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n              <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n            </div>\n            <div className={styles.transactionDirectionRightSkeleton}>\n              <div className={buildClassName(styles.dappInfoIconSkeleton, styles.transactionDappIconSkeleton)} />\n              <div className={styles.dappInfoDataSkeleton}>\n                <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n                <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n              </div>\n            </div>\n          </div>\n          {renderRow(true)}\n          {renderRow()}\n          {renderRow()}\n        </div>\n      </>\n    );\n  }\n\n  function renderTransferInitialWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isDappLoading ? renderWaitForConnection() : (\n          <>\n            <ModalHeader\n              title={lang(isNftTransferPayload(renderingTransactions?.[0].payload) ? 'Send NFT' : 'Send Transaction')}\n              onClose={closeDappTransfer}\n            />\n            <DappTransferInitial onClose={closeDappTransfer} />\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return renderTransferInitialWithSkeleton();\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n      case TransferState.Confirm:\n        return renderSubTransaction();\n      case TransferState.Password:\n        return renderPassword(isActive);\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      forceFullNative={needsExtraHeight || renderingKey === TransferState.Password}\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n","import { Dialog } from 'native-dialog';\nimport type { FC } from '../lib/teact/teact';\nimport React, { memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  useEffect(() => {\n    if (IS_CAPACITOR) {\n      if (dialog) {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message),\n        }).then(() => {\n          dismissDialog();\n        });\n      }\n    } else if (dialog) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [dialogs, lang, dialog, openModal, title]);\n\n  if (!dialog || IS_CAPACITOR) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {renderText(lang(dialog.message))}\n      </div>\n      <div className={modalStyles.footerButtons}>\n        <Button onClick={closeModal}>{lang('OK')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { transitionClassNames, shouldRender } = useShowTransition(isElectronUpdateDownloaded || isAppUpdateAvailable);\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.container,\n        transitionClassNames,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: React.ReactNode;\n  withTitle?: boolean;\n};\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import type { RefObject } from 'react';\nimport { useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: RefObject<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element: HTMLDivElement | null = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: React.RefObject<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T extends any>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"menuItem_separator\":\"qFOW6a6C\",\"menuItemSeparator\":\"qFOW6a6C\",\"destructive\":\"C84vY_ER\"};","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: React.ReactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n  isSeparator?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n    isSeparator,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n    isSeparator && styles.menuItem_separator,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div className={styles.folder}>\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={() => {\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)} onClick={handleCategoryClick}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  origin: string;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_ORIGIN_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst ORIGIN_REPLACEMENTS_BY_ORIGIN = POPULAR_DAPP_ORIGIN_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  origin,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    if (!iconUrl) {\n      return (\n        <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogo_icon, iconClassName)}>\n          <i className={buildClassName(dappStyles.dappIcon, 'icon-laptop')} aria-hidden />\n        </div>\n      );\n    }\n\n    return (\n      <div className={iconClassName}>\n        <Image\n          url={iconUrl}\n          className={iconClassName}\n          imageClassName={styles.icon}\n          alt={lang('Icon')}\n        />\n      </div>\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(ORIGIN_REPLACEMENTS_BY_ORIGIN[url] || url);\n\n    setTimeout(() => void updateDappLastOpenedAt({ origin }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badge\":\"PI6bQC1A\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_ORIGINS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByOrigin = {} }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    return dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_ORIGINS.has(dapp.origin))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByOrigin[dapp.origin] }))\n      .sort(compareDapps);\n  }, [dappLastOpenedDatesByOrigin, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByOrigin };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url, origin,\n  } = dapp;\n\n  return (\n    <DappFeedItem\n      key={origin}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      origin={origin}\n    />\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport { getHostnameFromUrl, isValidUrl } from '../../util/url';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\ninterface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    addSiteToBrowserHistory,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const trendingContainerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => {\n    return shouldRestrict\n      ? originalSites?.filter((site) => !site.canBeRestricted)\n      : originalSites;\n  }, [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(() => {\n    const search = searchValue.toLowerCase();\n    const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n    const sitesResult = search.length && filteredSites\n      ? filteredSites.filter(({ url, name, description }) => {\n        return url.toLowerCase().includes(search)\n          || name.toLowerCase().includes(search)\n          || description.toLowerCase().includes(search);\n      })\n      : undefined;\n\n    return {\n      history: historyResult,\n      sites: sitesResult,\n      isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n    };\n  }, [browserHistory, searchValue, filteredSites]);\n\n  const { trendingSites, allSites } = useMemo(() => {\n    return (filteredSites || []).reduce((acc, site) => {\n      if (site.isFeatured) {\n        acc.trendingSites.push(site);\n      }\n\n      if (!acc.allSites[site.categoryId!]) {\n        acc.allSites[site.categoryId!] = [];\n      }\n      acc.allSites[site.categoryId!].push(site);\n\n      return acc;\n    }, { trendingSites: [] as ApiSite[], allSites: {} as Record<number, ApiSite[]> });\n  }, [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: closeSiteCategory,\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n      },\n    });\n  }, [filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n    let url = originalUrl;\n    if (!url.startsWith('http:') && !url.startsWith('https:')) {\n      url = `https://${url}`;\n    }\n    if (!isValidUrl(url)) {\n      url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n    } else {\n      addSiteToBrowserHistory({ url });\n    }\n\n    void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n  }\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = originalSites?.find(({ url: currentUrl }) => currentUrl === url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  function handleSiteClear(e: React.MouseEvent, url: string) {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  }\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderSearchSuggestions() {\n    return (\n      <Menu\n        type=\"suggestion\"\n        noBackdrop\n        isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n        className={styles.suggestions}\n        bubbleClassName={styles.suggestionsMenu}\n        onClose={handleMenuClose}\n      >\n        {searchSuggestions?.history?.map((url) => (\n          <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={handleSiteClick} clickArg={url}>\n            <i\n              className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n              aria-hidden\n            />\n            <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n            <button\n              className={styles.clearSuggestion}\n              type=\"button\"\n              aria-label={lang('Clear')}\n              title={lang('Clear')}\n              onMouseDown={(e) => handleSiteClear(e, url)}\n              onClick={stopEvent}\n            >\n              <i className=\"icon-close\" aria-hidden />\n            </button>\n          </MenuItem>\n        ))}\n        {searchSuggestions?.sites?.map((site) => (\n          <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n        ))}\n      </Menu>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : undefined}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              {renderSearchSuggestions()}\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey!];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey!}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? []).map(({ addressByChain: { ton: address } }) => address),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, HardwareConnectState } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  onClose,\n  hardwareWallets,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const {\n    afterSelectHardwareWallets,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<number | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n    resetHardwareWalletConnect();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            isRemoteTab={isRemoteTab}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  suffix?: string,\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${formattedWholePart}${extraSpan}`;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: React.RefObject<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = (content: string) => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = content;\n      document.body.appendChild(measureEl.current);\n\n      let delta = 1;\n\n      while (delta > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--base-font-size', delta.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        delta -= 0.05;\n      }\n\n      isFontChangedRef.current = delta < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--base-font-size', delta.toString());\n    });\n  };\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: React.ReactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  suffix,\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, suffix, decimals);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (newText.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(html);\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [decimals, textRef, value]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    size === 'large' && styles.input_large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n        <div\n          ref={inputRef}\n          contentEditable={!disabled && !isLoading}\n          id={id}\n          role=\"textbox\"\n          aria-required\n          aria-placeholder={lang('Amount value')}\n          aria-labelledby={labelText ? `${id}Label` : undefined}\n          tabIndex={0}\n          inputMode=\"decimal\"\n          className={inputFullClass}\n          onKeyDown={handleKeyDown}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onClick={onInputClick}\n        />\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n    ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n","export function saveCaretPosition(context: HTMLElement, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = clearedValue?.[0]?.length || range.toString().length || 0;\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode();\n\n  return {\n    node: node || root,\n    position: index,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tab\":\"YpO46ybD\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenDropdown\":\"N9176Gyt\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { UserToken } from '../../global/types';\nimport type { DropdownItem } from '../ui/Dropdown';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountTokens } from '../../global/selectors';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown from '../ui/Dropdown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  address?: string;\n  tokens?: UserToken[];\n}\n\nfunction InvoiceModal({\n  address,\n  isOpen,\n  tokens,\n}: StateProps) {\n  const { closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n\n  const [amount, setAmount] = useState<bigint | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment) : '';\n  const decimals = TONCOIN.decimals; // TODO Change it after token selection is supported\n\n  const dropdownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if (token.slug === TONCOIN.slug) {\n        acc.push({\n          value: token.slug,\n          icon: token.image || ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS],\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [tokens]);\n\n  const handleAmountInput = useLastCallback((stringValue?: string) => {\n    setHasAmountError(false);\n\n    if (!stringValue) {\n      setAmount(undefined);\n      return;\n    }\n\n    const value = fromDecimal(stringValue, decimals);\n\n    if (value < 0) {\n      setHasAmountError(true);\n      return;\n    }\n\n    setAmount(value);\n  });\n\n  function renderTokens() {\n    return <Dropdown items={dropdownItems} selectedValue={TONCOIN.slug} className={styles.tokenDropdown} />;\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('Deposit Link')}\n      contentClassName={styles.content}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n    >\n      <div className={styles.contentTitle}>\n        {renderText(lang('$receive_invoice_description'))}\n      </div>\n      <RichNumberInput\n        key=\"amount\"\n        id=\"amount\"\n        hasError={hasAmountError}\n        value={amount === undefined ? undefined : toDecimal(amount)}\n        labelText={lang('Amount')}\n        onChange={handleAmountInput}\n      >\n        {renderTokens()}\n      </RichNumberInput>\n      <Input\n        value={comment}\n        label={lang('Comment')}\n        placeholder={lang('Optional')}\n        wrapperClassName={styles.invoiceComment}\n        onInput={setComment}\n      />\n\n      <p className={styles.labelForInvoice}>\n        {lang('Share this URL to receive TON')}\n      </p>\n      <InteractiveTextField\n        text={invoiceUrl}\n        copyNotification={lang('Invoice link was copied!')}\n        className={styles.invoiceLinkField}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      address,\n      tokens: selectCurrentAccountTokens(global),\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById: Map<string, VoidFunction> = new Map();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../global/types';\n\ninterface Layout {\n  withPortal?: boolean;\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  anchor: IAnchorPosition | undefined,\n  getTriggerElement: () => HTMLElement | null,\n  getRootElement: () => HTMLElement | null,\n  getMenuElement: () => HTMLElement | null,\n  getLayout?: () => Layout,\n) {\n  const [positionX, setPositionX] = useState<'right' | 'left'>('right');\n  const [positionY, setPositionY] = useState<'top' | 'bottom'>('bottom');\n  const [transformOriginX, setTransformOriginX] = useState<number>();\n  const [transformOriginY, setTransformOriginY] = useState<number>();\n  const [withScroll, setWithScroll] = useState(false);\n  const [style, setStyle] = useState('');\n  const [menuStyle, setMenuStyle] = useState('opacity: 0;');\n\n  useEffect(() => {\n    const triggerEl = getTriggerElement();\n    if (!anchor || !triggerEl) {\n      return;\n    }\n\n    let { x, y } = anchor;\n    const anchorX = x;\n    const anchorY = y;\n\n    const menuEl = getMenuElement();\n    const rootEl = getRootElement();\n\n    const {\n      withPortal = false,\n    } = getLayout?.() || {};\n\n    const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) : undefined;\n    const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n    const menuRect = menuEl ? {\n      width: menuElWidth,\n      height: menuElHeight + marginTop!,\n    } : EMPTY_RECT;\n\n    const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n    let horizontalPosition: 'left' | 'right';\n    let verticalPosition: 'top' | 'bottom';\n    if (x - menuRect.width - rootRect.left > 0) {\n      horizontalPosition = 'right';\n      x -= 3;\n    } else {\n      horizontalPosition = 'left';\n      x = 16;\n    }\n    setPositionX(horizontalPosition);\n\n    if (y + menuRect.height < rootRect.height + rootRect.top) {\n      verticalPosition = 'top';\n    } else {\n      verticalPosition = 'bottom';\n\n      if (y - menuRect.height < rootRect.top) {\n        y = rootRect.top + rootRect.height;\n      }\n    }\n\n    setPositionY(verticalPosition);\n\n    const triggerRect = triggerEl.getBoundingClientRect();\n\n    const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n    const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n    );\n    const left = (horizontalPosition === 'left'\n      ? (withPortal\n        ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n        : leftWithPossibleNegative)\n      : (x - triggerRect.left)) + addedXForPortalPositioning;\n    const top = y - triggerRect.top + addedYForPortalPositioning;\n\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n\n    setWithScroll(menuMaxHeight < menuRect.height);\n    setMenuStyle(`max-height: ${menuMaxHeight}px;`);\n    setStyle(`left: ${left}px; top: ${top}px`);\n    const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n    const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n    setTransformOriginX(horizontalPosition === 'left' ? offsetX : menuRect.width + offsetX);\n    setTransformOriginY(verticalPosition === 'bottom' ? menuRect.height + offsetY : offsetY);\n  }, [\n    anchor, getMenuElement, getRootElement, getTriggerElement, getLayout,\n  ]);\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    menuStyle,\n    withScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"platform\":\"QAOyOloL\",\"platform_animate\":\"K0kRAFlY\",\"platformAnimate\":\"K0kRAFlY\",\"menuItem\":\"tUY9MzOP\"};","import React, {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport forceReflow from '../../util/forceReflow';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMenuPosition from '../../hooks/useMenuPosition';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  title: string;\n  isActive?: boolean;\n  previousActiveTab?: number;\n  menuItems?: DropdownItem[];\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n};\n\nfunction Tab({\n  className,\n  title,\n  isActive,\n  previousActiveTab,\n  menuItems,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const tabRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuPosition(undefined));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) return;\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuPosition({ x, y: y + height });\n    }\n  });\n\n  useLayoutEffect(() => {\n    // Set initial active state\n    if (isActive && previousActiveTab === undefined && tabRef.current) {\n      addExtraClass(tabRef.current, styles.Tab_active);\n    }\n  }, [isActive, previousActiveTab]);\n\n  useEffect(() => {\n    if (!isActive || previousActiveTab === undefined) {\n      return;\n    }\n\n    const tabEl = tabRef.current!;\n    const prevTabEl = tabEl.parentElement!.children[previousActiveTab] as HTMLElement;\n    if (!prevTabEl) {\n      // The number of tabs in the parent component has decreased. It is necessary to add the active tab class name.\n      if (isActive && !tabEl.classList.contains(styles.Tab_active)) {\n        requestMutation(() => {\n          addExtraClass(tabEl, styles.Tab_active);\n        });\n      }\n      return;\n    }\n\n    const platformEl = tabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n    const prevPlatformEl = prevTabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n\n    // We move and resize the platform, so it repeats the position and size of the previous one\n    const shiftLeft = prevPlatformEl.parentElement!.offsetLeft - platformEl.parentElement!.offsetLeft;\n    const scaleFactor = prevPlatformEl.clientWidth / platformEl.clientWidth;\n\n    requestMutation(() => {\n      removeExtraClass(prevPlatformEl, styles.platform_animate);\n      removeExtraClass(platformEl, styles.platform_animate);\n      setExtraStyles(platformEl, {\n        transform:\n        `translate3d(${shiftLeft}px, 0, 0) scale3d(${scaleFactor}, 1, 1)`,\n      });\n\n      requestForcedReflow(() => {\n        forceReflow(platformEl);\n\n        return () => {\n          addExtraClass(platformEl, styles.platform_animate);\n          setExtraStyles(platformEl, { transform: 'none' });\n\n          removeExtraClass(prevTabEl, styles.Tab_active);\n          addExtraClass(tabEl, styles.Tab_active);\n        };\n      });\n    });\n  }, [isActive, previousActiveTab]);\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n      ref={tabRef}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {title}\n        {hasMenu && isActive && <i className=\"icon-caret-down\" aria-hidden />}\n        <i className={styles.platform} aria-hidden />\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          items={menuItems!}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  big?: boolean;\n  className?: string;\n  withBorder?: boolean;\n  onSwitchTab: (index: number) => void;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\n\nfunction TabList({\n  tabs, activeTab, big, className, withBorder, onSwitchTab,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const previousActiveTab = usePrevious(activeTab);\n\n  const fullClassName = buildClassName(\n    styles.container,\n    big && styles.big,\n    withBorder && styles.withBorder,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  // Scroll container to place active tab in the center\n  useEffect(() => {\n    const container = containerRef.current!;\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          previousActiveTab={previousActiveTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(TabList);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"withBorder\":\"edZdDyi5\",\"big\":\"lM5X6ama\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: React.RefObject<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  // eslint-disable-next-line no-null/no-null\n  const qrCodeRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n      // eslint-disable-next-line no-underscore-dangle\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Record<ApiChain, string>;\n  isLedger?: boolean;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nconst TON_TAB_ID = 0;\nconst TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: styles.tab,\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: styles.tab,\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const [activeTab, setActiveTab] = useState<number>(tabs.length ? tabs[0].id : 0);\n\n  function renderActions() {\n    if (tabs[activeTab]?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          withBorder\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          onSwitchTab={setActiveTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'small' | 'middle';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"nftIcon\":\"kRGDvyHS\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string;\n  text: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    className,\n  );\n\n  function renderNftIcon() {\n    return (\n      <div className={styles.nftIcon}>\n        <img src={imageUrl} alt=\"\" className={styles.image} />\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !imageUrl && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {imageUrl && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? (\n            lang('%amount% to %address%', {\n              amount: <span className={styles.bold}>{text}</span>,\n              address: <span className={styles.bold}>{secondText}</span>,\n            }))\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <div className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}>\n        {wholePart.trim().replace('\\u202F', '').replace('-', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </div>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLInputElement | null>(null);\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    const content = buildContentHtml(inputValue, suffix, decimals, true);\n    contentEl.innerHTML = content;\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(content);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.innerHTML = zeroValue;\n    }\n  }, [decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    styles.input_large,\n    styles.disabled,\n    error && styles.error,\n    valueClassName,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div\n          ref={contentRef}\n          id={id}\n          className={inputFullClass}\n        />\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"ton\":\"dRmsmePr\",\"tonIcon\":\"nWRXjyrv\",\"tonName\":\"M_R_H7ar\",\"amountTopRight\":\"pJIvsCMH\",\"amountTopRight_static\":\"vETUxQf6\",\"amountTopRightStatic\":\"vETUxQf6\",\"amountTopRight_slide\":\"MiydIaDQ\",\"amountTopRightSlide\":\"MiydIaDQ\",\"Transition\":\"XV_Y5UzE\",\"transition\":\"XV_Y5UzE\",\"Transition_slide-from\":\"mUqK49u9\",\"transitionSlideFrom\":\"mUqK49u9\",\"Transition_slide-to\":\"PtgIoWPj\",\"transitionSlideTo\":\"PtgIoWPj\",\"amountBottomWrapper\":\"LEdLaJfa\",\"amountBottomWrapper_static\":\"u8l2R2oR\",\"amountBottomWrapperStatic\":\"u8l2R2oR\",\"amountBottom\":\"MgCN1q08\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"minAmountValue\":\"N25bZnkf\",\"amountInCurrency\":\"QVMu65Mz\",\"historyTotalValue\":\"ps_1E9fe\",\"balanceContainer\":\"uPQESumk\",\"balance\":\"n_5PvqB1\",\"balanceLink\":\"LhvBMVJI\",\"stakingBalance\":\"ZzjyhAIi\",\"amountInput\":\"CVWcZDbx\",\"inputStatic\":\"ckTzdegT\",\"inputRichStatic\":\"tsi7Leof\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButton\":\"ANY2XY_3\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfo\":\"m1LUZiWL\",\"tokenDropdown\":\"A1GMBD3_\",\"tokenDropdownItem\":\"sV49vdb8\",\"tokenDropdownMenu\":\"SMF4FqKo\"};","import { Dialog } from 'native-dialog';\nimport React, {\n  memo, type TeactNode, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  JVAULT_URL,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  SHORT_FRACTION_DIGITS,\n  STAKING_MIN_AMOUNT,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { throttle } from '../../util/schedulers';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  fee?: bigint;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  apiError,\n  tokens,\n  tokenBySlug,\n  fee,\n  stakingState,\n  states,\n  shouldUseNominators,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  const [isIncorrectAmount, setIsIncorrectAmount] = useState<boolean>(false);\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState<boolean>(false);\n  const [isInsufficientFee, setIsInsufficientFee] = useState(false);\n  const [isBelowMinimumAmount, setIsBelowMinimumAmount] = useState(false);\n  const [shouldUseAllBalance, setShouldUseAllBalance] = useState<boolean>(false);\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance = 0n,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const hasAmountError = Boolean(isInsufficientBalance || apiError);\n  const minAmount = stakingType === 'nominators' ? NOMINATORS_STAKING_MIN_AMOUNT : STAKING_MIN_AMOUNT;\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const validateAndSetAmount = useLastCallback((newAmount: bigint | undefined, noReset = false) => {\n    if (!noReset) {\n      setShouldUseAllBalance(false);\n      setIsIncorrectAmount(false);\n      setIsInsufficientBalance(false);\n      setIsBelowMinimumAmount(false);\n      setIsInsufficientFee(false);\n    }\n\n    if (newAmount === undefined) {\n      setAmount(undefined);\n      return;\n    }\n\n    if (Number.isNaN(newAmount) || newAmount < 0) {\n      setIsIncorrectAmount(true);\n      return;\n    }\n\n    if (newAmount < minAmount) {\n      setIsBelowMinimumAmount(true);\n    } else if (!maxAmount || newAmount > balance) {\n      setIsInsufficientBalance(true);\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      setIsInsufficientFee(true);\n    }\n\n    setAmount(newAmount);\n  });\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  useEffect(() => {\n    if (shouldUseAllBalance && maxAmount) {\n      const newAmount = maxAmount;\n\n      validateAndSetAmount(newAmount, true);\n    } else {\n      validateAndSetAmount(amount, true);\n    }\n  }, [amount, fee, shouldUseAllBalance, validateAndSetAmount, maxAmount]);\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      const text = stakingState && stakingState.type === 'jetton'\n        ? [\n          // We use `replace` instead of `lang` argument to avoid JSX output\n          `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n          `${lang('$safe_staking_description_jetton2')}`,\n        ]\n        : [\n          `1. ${lang('$safe_staking_description1')}`,\n          `2. ${lang('$safe_staking_description2')}`,\n          `3. ${lang('$safe_staking_description3')}`,\n        ];\n\n      void Dialog.alert({\n        title: lang('Why is staking safe?'),\n        message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n      })\n        .then(closeSafeInfoModal);\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState]);\n\n  const handleMaxAmountClick = useLastCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!maxAmount) {\n      return;\n    }\n\n    void vibrate();\n\n    setShouldUseAllBalance(true);\n  });\n\n  const canSubmit = amount\n    && maxAmount\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function getError() {\n    if (isInsufficientBalance) {\n      return lang('Insufficient balance');\n    }\n\n    if (isInsufficientFee) {\n      return lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') });\n    }\n\n    if (isBelowMinimumAmount) {\n      return lang('$min_value', {\n        value: (\n          <span className={styles.minAmountValue}>\n            {formatCurrency(toDecimal(minAmount), symbol ?? '')}\n          </span>\n        ),\n      });\n    }\n\n    return apiError ? lang(apiError) : undefined;\n  }\n\n  function renderTopRight() {\n    if (!symbol) return undefined;\n\n    const hasBalance = !!token;\n    const balanceButton = lang('$max_balance', {\n      balance: (\n        <div\n          role=\"button\"\n          tabIndex={0}\n          className={styles.balanceLink}\n          onClick={handleMaxAmountClick}\n        >\n          {hasBalance ? formatCurrency(toDecimal(maxAmount, decimals), symbol) : lang('Loading...')}\n        </div>\n      ),\n    });\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountTopRight, isStatic && styles.amountTopRight_static)}\n        slideClassName={styles.amountTopRight_slide}\n        name=\"fade\"\n        activeKey={0}\n      >\n        <div className={styles.balanceContainer}>\n          <span className={styles.balance}>\n            {balanceButton}\n          </span>\n        </div>\n      </Transition>\n    );\n  }\n\n  function renderBottomRight() {\n    const error = getError();\n\n    const activeKey = isInsufficientBalance ? 0\n      : isInsufficientFee ? 1\n        : isBelowMinimumAmount ? 2\n          : apiError ? 3\n            : !stakingBalance && !hasAmountError ? 4\n              : 5;\n\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isIncorrectAmount && styles.amountBottomRight_error)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang('Why is staking safe?')}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {stakingState && stakingState.type === 'jetton' ? renderJettonDescription() : renderTonDescription()}\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const balanceResult = amount\n      ? toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString()\n      : '0';\n\n    return (\n      <RichNumberField\n        labelText={lang('Est. balance in a year')}\n        zeroValue=\"...\"\n        value={balanceResult}\n        decimals={decimals}\n        className={styles.balanceResultWrapper}\n        inputClassName={buildClassName(styles.balanceResultInput, isStatic && styles.inputRichStatic)}\n        labelClassName={styles.balanceResultLabel}\n        valueClassName={styles.balanceResult}\n      />\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: `${annualYield}%` })}</div>\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang('Why this is safe')}\n          </Button>\n        </div>\n      </div>\n\n      {renderTopRight()}\n      <RichNumberInput\n        key=\"staking_amount\"\n        id=\"staking_amount\"\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        value={amount === undefined ? undefined : toDecimal(amount)}\n        labelText={lang('Amount')}\n        onChange={handleAmountChange}\n        onPressEnter={handleSubmit}\n        decimals={decimals}\n        inputClassName={isStatic ? styles.inputRichStatic : undefined}\n        className={styles.amountInput}\n      >\n        <Dropdown\n          items={dropDownItems}\n          selectedValue={stakingState?.id}\n          className={styles.tokenDropdown}\n          itemClassName={styles.tokenDropdownItem}\n          onChange={handleChangeStaking}\n        />\n      </RichNumberInput>\n      <div className={buildClassName(styles.amountBottomWrapper, isStatic && styles.amountBottomWrapper_static)}>\n        <div className={styles.amountBottom}>\n          {renderBottomRight()}\n        </div>\n      </div>\n\n      {renderStakingResult()}\n\n      <div className={modalStyles.buttons}>\n        <Button\n          isPrimary\n          isSubmit\n          isDisabled={!canSubmit}\n          isLoading={isLoading}\n        >\n          {lang('$stake_asset', { symbol: token?.symbol })}\n        </Button>\n      </div>\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n\n      const {\n        state,\n        isLoading,\n        fee,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        fee,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n    submitStakingHardware,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStakingHardware();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStakingPassword({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiJettonStakingState } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitStakingClaim,\n    submitStakingClaimHardware,\n    cancelStakingClaim,\n    clearStakingError,\n  } = getActions();\n\n  const {\n    tokenSlug,\n    unclaimedRewards = 0n,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees('jetton').claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaimHardware();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(toDecimal(unclaimedRewards, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Rewards Claim') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    stakingState: stakingState?.type === 'jetton' ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\"};","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n}\n\nfunction StakingProfitItem({ tonToken, timestamp, profit }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <div className={styles.amount}>\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  endOfStakingCycle?: number;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  endOfStakingCycle,\n  theme,\n  onClose,\n  shouldUseNominators,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    isUnstakeRequested,\n  } = stakingState ?? {};\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    transitionClassNames: spinnerClassNames,\n  } = useShowTransition(isLoading && isActive);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug)!, [tokens]);\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, isUnstakeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  function renderUnstakeDescription() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {Boolean(endOfStakingCycle) && lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, endOfStakingCycle)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        <div className={styles.historyTotal}>\n          {lang('$total', {\n            value: (\n              <span className={styles.historyTotalValue}>\n                {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n              </span>\n            ),\n          })}\n        </div>\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          inputClassName={styles.balanceResultInput}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        <div className={styles.stakingInfoButtons}>\n          <Button\n            className={styles.stakingInfoButton}\n            isDisabled={isLoading}\n            onClick={handleClaimClick}\n          >\n            {lang('Claim')}\n          </Button>\n        </div>\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner className={buildClassName(styles.stakingInfoLoadingAnimation, spinnerClassNames)} />\n              )}\n            </div>\n\n            <Dropdown\n              items={dropDownItems}\n              selectedValue={stakingId}\n              className={styles.tokenDropdown}\n              itemClassName={styles.tokenDropdownItem}\n              menuClassName={styles.tokenDropdownMenu}\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {isUnstakeRequested\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  inputClassName={styles.balanceResultInput}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                <div\n                  className={\n                    buildClassName(styles.stakingInfoButtons, !!unclaimedRewards && styles.stakingInfoButtonsWithMargin)\n                  }\n                >\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isPrimary\n                    isDisabled={isLoading}\n                    onClick={handleStakeClick}\n                  >\n                    {lang('Stake More')}\n                  </Button>\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isDisabled={isLoading}\n                    onClick={handleUnstakeClick}\n                  >\n                    {lang('Unstake')}\n                  </Button>\n                </div>\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : global.stakingInfo?.round.end;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug: global.tokenInfo.bySlug,\n    endOfStakingCycle,\n    theme: global.settings.theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n  };\n})(StakingInfoContent));\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: any[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type {\n  GlobalState, HardwareConnectState, Theme, UserToken,\n} from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  IS_CAPACITOR,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../config';\nimport { Big } from '../../lib/big.js';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport {\n  formatCurrency,\n  formatCurrencySimple,\n  getShortCurrencySymbol,\n} from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  tokens?: UserToken[];\n  stakingInfo: GlobalState['stakingInfo'];\n  baseCurrency?: ApiBaseCurrency;\n  isNominators?: boolean;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isLoading,\n  error,\n  tokens,\n  stakingInfo,\n  baseCurrency,\n  isNominators,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    submitStakingHardware,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : stakingInfo?.round?.end;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingType === 'liquid' ? stakingInfo?.liquid?.available ?? 0n : 0n;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const logoPath = token\n    && (ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image);\n\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const [isLongUnstake, setIsLongUnstake] = useState(false);\n\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState(false);\n\n  const [unstakeAmount, setUnstakeAmount] = useState(isNominators ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  useEffect(() => {\n    if (!stakingState) return;\n\n    let isInstantUnstake = true;\n\n    switch (stakingState.type) {\n      case 'nominators': {\n        isInstantUnstake = false;\n        break;\n      }\n      case 'liquid': {\n        isInstantUnstake = amount ? amount < instantAvailable : true;\n        break;\n      }\n      case 'jetton': {\n        isInstantUnstake = true;\n        break;\n      }\n    }\n\n    setIsLongUnstake(!isInstantUnstake);\n  }, [instantAvailable, amount, stakingState]);\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(endOfStakingCycle ?? Date.now() + STAKING_CYCLE_DURATION_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const amountInCurrency = token && token.price && unstakeAmount\n    ? toBig(unstakeAmount, token.decimals)\n      .mul(token.price)\n      .round(token.decimals, Big.roundHalfUp)\n      .toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isNominators ? stakingBalance : undefined);\n      setHasAmountError(false);\n      setIsInsufficientBalance(false);\n    }\n  }, [isOpen, fetchStakingHistory, isNominators, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStakingPassword({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStakingHardware({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  const validateAndSetAmount = useLastCallback(\n    (newAmount: bigint | undefined, noReset = false) => {\n      if (!noReset) {\n        setHasAmountError(false);\n        setIsInsufficientBalance(false);\n      }\n\n      if (newAmount === undefined) {\n        setUnstakeAmount(undefined);\n        return;\n      }\n\n      if (newAmount < 0) {\n        setHasAmountError(true);\n        return;\n      }\n\n      if (!stakingBalance || newAmount > stakingBalance) {\n        setHasAmountError(true);\n        setIsInsufficientBalance(true);\n      }\n\n      setUnstakeAmount(newAmount);\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      e.preventDefault();\n\n      if (!stakingBalance) {\n        return;\n      }\n\n      validateAndSetAmount(stakingBalance);\n    },\n  );\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, token?.decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function renderBalance() {\n    return (\n      <div className={styles.balanceContainer}>\n        <span className={styles.balance}>\n          {lang('$all_balance', {\n            balance: (\n              <a href=\"#\" onClick={handleMaxAmountClick} className={styles.balanceLink}>\n                {\n                  stakingBalance !== undefined\n                    ? formatCurrencySimple(stakingBalance, token?.symbol!, token?.decimals!)\n                    : lang('Loading...')\n                }\n              </a>\n            ),\n          })}\n        </span>\n      </div>\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        &thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol)}\n      </span>\n    );\n  }\n\n  function renderBottomRight() {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={styles.amountBottomRight}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGrayWhite}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGrayWhite}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition name=\"fade\" activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}>\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          {!isNominators && renderBalance()}\n          <RichNumberInput\n            key=\"unstaking_amount\"\n            id=\"unstaking_amount\"\n            hasError={hasAmountError}\n            value={unstakeAmount === undefined ? undefined : toDecimal(unstakeAmount, token?.decimals)}\n            labelText={lang('Amount to unstake')}\n            onChange={handleAmountChange}\n            className={styles.amountInput}\n            decimals={token?.decimals}\n            disabled={isNominators}\n          >\n            <div className={styles.ton}>\n              <img src={logoPath} alt=\"\" className={styles.tonIcon} />\n              <span className={styles.tonName}>{token?.symbol}</span>\n            </div>\n          </RichNumberInput>\n\n          <div className={styles.amountBottomWrapper}>\n            <div className={styles.amountBottom}>\n              {shouldRenderCurrency && renderCurrencyValue()}\n              {renderBottomRight()}\n            </div>\n          </div>\n\n          {renderUnstakeInfo()}\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              isLoading={isLoading}\n              isDisabled={isUnstakeDisabled}\n              onClick={handleStartUnstakeClick}\n            >\n              {lang('Unstake')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp() ? lang('Request is sent!') : lang('Request for unstaking is sent!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"green\"\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const baseCurrency = global.settings.baseCurrency;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    stakingInfo: global.stakingInfo,\n    baseCurrency,\n    isNominators,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n  );\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button type=\"button\" className={buildClassName(styles.wrapper, transitionClassNames)} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwalletorg/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport { selectCurrentAccountState, selectMycoin } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                <div className={styles.buttons}>\n                  <Button\n                    className={styles.button}\n                    isPrimary\n                    isDisabled={isDisabledUnfreeze}\n                    onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                  >\n                    {lang('Unfreeze')}\n                  </Button>\n                </div>\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitClaimingVesting,\n    submitClaimingVestingHardware,\n    cancelClaimingVesting,\n    clearVestingError,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVestingHardware();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"balanceContainer\":\"fwq9FYcS\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"balance\":\"UT26q2A_\",\"balanceLink\":\"aHx9_6_d\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"slippageLabel\":\"BCxUm5xP\",\"tokenSelectorWrapper\":\"lZebIDqX\",\"tokenSelectorSlide\":\"jBt5MAxL\",\"tokenSelector\":\"Wmj18JYJ\",\"tokenSelectorIcon\":\"TTCQtR6c\",\"tokenIcon\":\"op410kWk\",\"tokenContent\":\"VH09DZnr\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedTooltipMessage\":\"VLNF6T4k\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"swapArrowIcon\":\"Vzdj7mTH\",\"swapArrowIconTitle\":\"yFebB6BA\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import React, {\n  memo,\n  useLayoutEffect,\n  useRef,\n} from '../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport { SwapState, type UserSwapToken } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../../util/windowEnvironment';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TokenIcon from '../../common/TokenIcon';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  token?: UserSwapToken;\n  shouldFilter?: boolean;\n}\n\nfunction SwapSelectToken({ token, shouldFilter }: OwnProps) {\n  const { setSwapScreen } = getActions();\n\n  const { transitionRef } = useSelectorWidth(token);\n\n  const handleOpenSelectTokenModal = useLastCallback(() => {\n    setSwapScreen({\n      state: shouldFilter ? SwapState.SelectTokenTo : SwapState.SelectTokenFrom,\n    });\n  });\n\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function renderToken(tokenToRender: UserSwapToken | undefined) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={styles.tokenSelectorWrapper}\n        slideClassName={styles.tokenSelectorSlide}\n      >\n        <button\n          type=\"button\"\n          className={styles.tokenSelector}\n          onClick={handleOpenSelectTokenModal}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.tokenContent}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.tokenSelectorIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SwapSelectToken);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: UserSwapToken) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | TeactNode[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType];\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' });\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol });\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol });\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-arrow-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {renderedText}\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn,\n  );\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div className={buildClassName(styles.root, transitionClassNames)}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp; {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, transitionClassNames)}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut!.symbol}</span>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"nLt5kPU7\",\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\"};","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: React.ReactNode;\n  emoji?: EmojiIcon;\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { transitionClassNames, shouldRender } = useShowTransition(isOpen);\n\n  // eslint-disable-next-line no-null/no-null\n  const iconRef = useRef<HTMLDivElement | null>(null);\n  // eslint-disable-next-line no-null/no-null\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const tooltipStyle = useRef<string | undefined>();\n  const arrowStyle = useRef<string | undefined>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    if (emoji) {\n      return (\n        <div\n          ref={iconRef}\n          className={buildClassName(styles.icon, iconClassName)}\n          onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </div>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(styles.icon, 'icon-question', iconClassName)}\n        onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.wrapper} data-tooltip-key={randomTooltipKey}>\n      {shouldRender && (\n        <Portal>\n          <div\n            className={buildClassName(styles.container, transitionClassNames)}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </div>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  const [isSlippageFocused, markSlippageFocused, unmarkSlippageFocused] = useFlag();\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol}  ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <IconWithTooltip\n          message={(\n            <div className={styles.advancedTooltipMessage}>\n              <span>{lang('$swap_slippage_tooltip1')}</span>\n              <span>{lang('$swap_slippage_tooltip2')}</span>\n            </div>\n          )}\n          tooltipClassName={styles.advancedTooltipContainer}\n          iconClassName={buildClassName(\n            styles.advancedTooltip, slippageError && styles.advancedError,\n          )}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix={isSlippageFocused ? '' : '%'}\n            size=\"normal\"\n            onChange={handleInputChange}\n            onFocus={markSlippageFocused}\n            onBlur={unmarkSlippageFocused}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <IconWithTooltip\n                message={(\n                  <div className={styles.advancedTooltipMessage}>\n                    <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n                  </div>\n                )}\n                tooltipClassName={styles.advancedTooltipContainer}\n                iconClassName={styles.advancedTooltip}\n              />\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_price_impact_tooltip1')}</span>\n                      <span>{lang('$swap_price_impact_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={buildClassName(\n                    styles.advancedTooltip, priceImpactError && styles.advancedError,\n                  )}\n                />\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                      <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={styles.advancedTooltip}\n                />\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\nimport SwapSelectToken from './components/SwapSelectToken';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  accountId?: string;\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    pairs,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  accountId,\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    loadSwapPairs,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputInRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputOutRef = useRef<HTMLDivElement>(null);\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const tokenInTransitionKey = useTokenTransitionKey(currentTokenInSlug ?? '');\n\n  const accountIdPrev = usePrevious(accountId, true);\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairs?.bySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  useEffect(() => {\n    const shouldForceUpdate = accountId !== accountIdPrev;\n\n    if (currentTokenInSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenInSlug, shouldForceUpdate });\n    }\n    if (currentTokenOutSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenOutSlug, shouldForceUpdate });\n    }\n  }, [accountId, accountIdPrev, currentTokenInSlug, currentTokenOutSlug]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  };\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain] });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={tokenInTransitionKey}\n      >\n        {maxAmount !== undefined && (\n          <div className={styles.balanceContainer}>\n            <span className={styles.balance}>\n              {lang('$max_balance', {\n                balance: (\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={handleMaxAmountClick}\n                    className={styles.balanceLink}\n                  >\n                    {formatCurrency(toDecimal(maxAmount, tokenIn?.decimals), tokenIn!.symbol)}\n                  </div>\n                ),\n              })}\n            </span>\n          </div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-arrow-right-swap')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SwapSelectToken token={tokenIn} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SwapSelectToken token={tokenOut} shouldFilter />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        accountId: global.currentAccountId,\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useTokenTransitionKey(tokenSlug: string) {\n  const transitionKeyRef = useRef(0);\n\n  useSyncEffect(() => {\n    transitionKeyRef.current++;\n  }, [tokenSlug]);\n\n  return transitionKeyRef.current;\n}\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll')}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"inputButton\":\"AryS2PDZ\",\"inputButtonClear\":\"P0VxxOpY\",\"inputButtonTransition\":\"lRz9la7D\",\"inputButtonShifted\":\"KYWbK7EG\",\"amountInput\":\"lJJMNmjc\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"amountBottomWrapper\":\"pzJTzb6I\",\"amountBottom\":\"NwaO39Nr\",\"amountBottomRight\":\"Zkzr1Luh\",\"amountBottomRight_slide\":\"M4tMPnH0\",\"amountBottomRightSlide\":\"M4tMPnH0\",\"Transition\":\"xqhpp_RM\",\"transition\":\"xqhpp_RM\",\"Transition_slide-from\":\"VsOZiVJz\",\"transitionSlideFrom\":\"VsOZiVJz\",\"Transition_slide-to\":\"OKWgH5Dr\",\"transitionSlideTo\":\"OKWgH5Dr\",\"amountBottomRight_static\":\"EY9Piz6P\",\"amountBottomRightStatic\":\"EY9Piz6P\",\"balanceError\":\"Jag9KEHr\",\"balanceContainer\":\"E0ipzM4y\",\"balance\":\"Xbj3_5WF\",\"balanceLink\":\"GAcZr7Wf\",\"amountInCurrency\":\"GgT8dw74\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"tokenDropdown\":\"NHWRtRzL\",\"tokenDropdownItem\":\"Qkrt8RTy\",\"inputStatic\":\"RJsBtjCe\",\"inputRichStatic\":\"BrNIQCUa\",\"inputWithIcon\":\"uMO1BRcS\",\"commentLabel\":\"SXy2g5zj\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiChain, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport type { DropdownItem } from '../ui/Dropdown';\nimport { TransferState } from '../../global/types';\n\nimport { PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { SECOND } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { isDnsDomain } from '../../util/dns';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee, getMaxTransferAmount, isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { IS_ANDROID, IS_CLIPBOARDS_SUPPORTED, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport FeeLine from '../ui/FeeLine';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Menu from '../ui/Menu';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId?: string;\n  accounts?: Record<string, Account>;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst SHORT_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n\nfunction TransferInitial({\n  isStatic,\n  tokenSlug,\n  toAddress = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    showNotification,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    requestOpenQrScanner,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const addressBookTimeoutRef = useRef<number>(null);\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const {\n    amount: balance,\n    decimals,\n    price,\n    symbol,\n    chain,\n    codeHash,\n  } = transferToken || {};\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [savedAddressForDeletion, setSavedAddressForDeletion] = useState<string | undefined>();\n  const [savedChainForDeletion, setSavedChainForDeletion] = useState<ApiChain | undefined>();\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const otherAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return otherAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [otherAccountIds.length, savedAddresses]);\n\n  const nativeToken = useMemo(() => {\n    return tokens?.find((token) => !token.tokenAddress && token.chain === chain);\n  }, [tokens, chain])!;\n\n  const isToncoin = tokenSlug === TONCOIN.slug;\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const amountInCurrency = price && amount\n    ? toBig(amount, decimals).mul(price).round(decimals, Big.roundHalfUp).toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n  const withAddressClearButton = !!toAddress.length;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance: nativeToken.amount,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const isDisabledDebounce = useRef(false);\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  const dropDownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if ((token.amount > 0 && !token.isDisabled) || token.slug === tokenSlug) {\n        acc.push({\n          value: token.slug,\n          icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image,\n          overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [isMultichainAccount, tokenSlug, tokens]);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (STAKED_TOKEN_SLUGS.has(tokenSlug) || PRICELESS_TOKEN_HASHES.has(codeHash ?? '')) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n      });\n    }\n  }, [tokenSlug, codeHash, lang]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkAddressFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n\n      return;\n    }\n\n    if (isDnsDomain(toAddress) && toAddress !== toAddress.toLowerCase()) {\n      setTransferToAddress({ toAddress: toAddress.toLowerCase().trim() });\n    } else if (toAddress !== toAddress.trim()) {\n      setTransferToAddress({ toAddress: toAddress.trim() });\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n    });\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const handleAddressClearClick = useLastCallback(() => {\n    setTransferToAddress({ toAddress: undefined });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelTransfer();\n  });\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      handleAddressClearClick();\n      setTransferAmount({ amount: undefined });\n      setTransferComment({ comment: undefined });\n      setTransferShouldEncrypt({ shouldEncrypt: false });\n    }\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        isDisabledDebounce.current = true;\n        setTransferToAddress({ toAddress: text.trim() });\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleAddressBookItemClick = useLastCallback(\n    (address: string) => {\n      isDisabledDebounce.current = true;\n      setTransferToAddress({ toAddress: address });\n      closeAddressBook();\n    },\n  );\n\n  const handleDeleteSavedAddressClick = useLastCallback(\n    (address: string) => {\n      setSavedAddressForDeletion(address);\n      setSavedChainForDeletion(chain);\n      closeAddressBook();\n    },\n  );\n\n  const closeDeleteSavedAddressModal = useLastCallback(() => {\n    setSavedAddressForDeletion(undefined);\n    setSavedChainForDeletion(undefined);\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    if (value === undefined || value >= 0) {\n      setTransferAmount({ amount: value });\n    }\n  });\n\n  const handleMaxAmountClick = useLastCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    if (!balance) {\n      return;\n    }\n\n    void vibrate();\n    isDisabledDebounce.current = true;\n    setTransferAmount({ amount: maxAmount });\n  });\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const hasToAddressError = toAddress.length > 0 && !isAddressValid;\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        // NFT transfer is only available on the TON blockchain\n        return (!isNftTransfer || item.chain === 'ton') && doesSavedAddressFitSearch(item, toAddress);\n      })\n      .map((item) => renderAddressItem({\n        key: `saved-${item.address}-${item.chain}`,\n        address: item.address,\n        name: item.name,\n        chain: isMultichainAccount ? item.chain : undefined,\n        deleteLabel: lang('Delete'),\n        onClick: handleAddressBookItemClick,\n        onDeleteClick: handleDeleteSavedAddressClick,\n      }));\n  }, [savedAddresses, isNftTransfer, toAddress, isMultichainAccount, lang]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((currentChain) => {\n          const currentAddress = account.addressByChain[currentChain as ApiChain];\n          const key = `${currentChain}:${currentAddress}`;\n          if (\n            !uniqueAddresses.has(key)\n            // NFT transfer is only available on the TON blockchain\n            && (!isNftTransfer || currentChain === 'ton')\n            && (isMultichainAccount || currentChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${currentChain}:${currentAddress}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(currentAddress)!,\n              address: currentAddress,\n              chain: currentChain as ApiChain,\n              isHardware: account.isHardware,\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, toAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => renderAddressItem({\n      key: `address-${address}-${addressChain}`,\n      address,\n      name,\n      chain: isMultichainAccount ? addressChain : undefined,\n      isHardware,\n      onClick: handleAddressBookItemClick,\n    }));\n  }, [otherAccountIds, savedAddresses, accounts, isMultichainAccount, isNftTransfer, toAddress]);\n\n  const shouldRenderSuggestions = !!renderedSavedAddresses?.length || !!renderedOtherAccounts?.length;\n\n  function renderAddressBook() {\n    if (!shouldRenderSuggestions) return undefined;\n\n    return (\n      <Menu\n        positionX=\"right\"\n        type=\"suggestion\"\n        noBackdrop\n        bubbleClassName={styles.savedAddressBubble}\n        isOpen={isAddressBookOpen}\n        onClose={closeAddressBook}\n      >\n        {renderedSavedAddresses}\n        {renderedOtherAccounts}\n      </Menu>\n    );\n  }\n\n  function renderBottomRight() {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 1;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isStatic && styles.amountBottomRight_static)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderInputActions() {\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={toAddress.length ? 0 : 1} name=\"fade\">\n        {toAddress.length ? (\n          <Button\n            isSimple\n            id={INPUT_CLEAR_BUTTON_ID}\n            className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n            onClick={handleAddressClearClick}\n            ariaLabel={lang('Clear')}\n          >\n            <i className=\"icon-close-filled\" aria-hidden />\n          </Button>\n        ) : (\n          <>\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderBalance() {\n    if (!symbol || isNftTransfer) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.balanceContainer}>\n        <span className={styles.balance}>\n          {lang('$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={handleMaxAmountClick}\n                className={styles.balanceLink}\n              >\n                {maxAmount !== undefined ? formatCurrency(toDecimal(maxAmount, decimals), symbol) : lang('Loading...')}\n              </div>\n            ),\n          })}\n        </span>\n      </div>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <Dropdown\n        items={dropDownItems}\n        selectedValue={tokenSlug}\n        className={styles.tokenDropdown}\n        itemClassName={styles.tokenDropdownItem}\n        onChange={handleTokenChange}\n      />\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        &thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol, undefined, true)}\n      </span>\n    );\n  }\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : [COMMENT_DROPDOWN_ITEMS[0]]}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"light\"\n        disabled={chain === 'tron'}\n        menuPositionHorizontal=\"left\"\n        shouldTranslateOptions\n        className={styles.commentLabel}\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  function renderCommentField() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    return (\n      <Input\n        wrapperClassName={styles.commentInputWrapper}\n        className={isStatic ? styles.inputStatic : undefined}\n        label={renderCommentLabel()}\n        placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n        value={comment}\n        isMultiline\n        isDisabled={chain === 'tron'}\n        onInput={handleCommentChange}\n        isRequired={isCommentRequired}\n      />\n    );\n  }\n\n  const withButton = isQrScannerSupported || withPasteButton || withAddressClearButton;\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  const shouldIgnoreErrors = isAddressBookOpen && shouldRenderSuggestions;\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} />}\n        {Boolean(nfts?.length) && nfts!.length > 1 && <NftChips nfts={nfts!} isStatic={isStatic} />}\n\n        <Input\n          ref={toAddressRef}\n          className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n          isRequired\n          label={lang('Recipient Address')}\n          placeholder={lang('Wallet address or domain')}\n          value={isAddressFocused ? toAddress : toAddressShort}\n          error={hasToAddressError && !shouldIgnoreErrors ? (lang('Incorrect address') as string) : undefined}\n          autoCorrect={false}\n          onInput={handleAddressInput}\n          onFocus={handleAddressFocus}\n          onBlur={handleAddressBlur}\n        >\n          {renderInputActions()}\n        </Input>\n\n        {shouldUseAddressBook && renderAddressBook()}\n\n        {renderBalance()}\n        {!isNftTransfer && (\n          <>\n            <RichNumberInput\n              key=\"amount\"\n              id=\"amount\"\n              hasError={hasAmountError}\n              value={amount === undefined ? undefined : toDecimal(amount, decimals)}\n              labelText={lang('Amount')}\n              onChange={handleAmountChange}\n              onPressEnter={handleSubmit}\n              decimals={decimals}\n              className={styles.amountInput}\n              inputClassName={isStatic ? styles.inputRichStatic : undefined}\n            >\n              {renderTokens()}\n            </RichNumberInput>\n\n            <div className={styles.amountBottomWrapper}>\n              <div className={styles.amountBottom}>\n                {shouldRenderCurrency && renderCurrencyValue()}\n                {renderBottomRight()}\n              </div>\n            </div>\n          </>\n        )}\n\n        {chain === 'ton' && renderCommentField()}\n\n        <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n          {renderFee()}\n\n          <div className={styles.buttons}>\n            <Button\n              isDisabled={shouldDisableClearButton || isLoading}\n              className={styles.button}\n              onClick={handleClear}\n            >\n              {lang('Clear')}\n            </Button>\n            <Button\n              isPrimary\n              isSubmit\n              isDisabled={!canSubmit}\n              isLoading={isLoading}\n              className={styles.button}\n            >\n              {renderButtonText()}\n            </Button>\n          </div>\n        </div>\n      </form>\n      <DeleteSavedAddressModal\n        isOpen={Boolean(savedAddressForDeletion)}\n        address={savedAddressForDeletion}\n        chain={savedChainForDeletion}\n        onClose={closeDeleteSavedAddressModal}\n      />\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const baseCurrency = global.settings.baseCurrency;\n\n      return {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        baseCurrency,\n        currentAccountId: global.currentAccountId,\n        accounts: selectNetworkAccounts(global),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      };\n    },\n    (global, { isStatic }, stickToFirst) => {\n      if (!isStatic) {\n        return stickToFirst(global.currentAccountId);\n      }\n\n      const { nfts, tokenSlug = TONCOIN.slug } = global.currentTransfer;\n      const key = nfts?.length ? `${nfts[0].address}_${nfts.length}` : tokenSlug;\n\n      return stickToFirst(`${global.currentAccountId}_${key}`);\n    },\n  )(TransferInitial),\n);\n\nfunction trimStringByMaxBytes(str: string, maxBytes: number) {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n\n  return decoder.decode(encoded.slice(0, maxBytes)).replace(/\\uFFFD/g, '');\n}\n\nfunction renderAddressItem({\n  key,\n  address,\n  name,\n  chain,\n  isHardware,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: {\n  key: string;\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}) {\n  const isSavedAddress = !!onDeleteClick;\n  const handleDeleteClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      key={key}\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : () => onClick(address)}\n      onClick={IS_TOUCH_ENV ? () => onClick(address) : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && (\n        <span className={styles.savedAddressDelete}>\n          <span tabIndex={-1} role=\"button\" className={styles.savedAddressDeleteInner} onMouseDown={handleDeleteClick}>\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"transferSlideContent\":\"PkpRKi3Q\",\"spinner\":\"KCsGLTLM\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { Theme } from '../../../../global/types';\nimport { ActiveTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_ICON_PX,\n  DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  IS_STAKING_DISABLED,\n  TONCOIN,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { selectAccountState, selectCurrentAccountSettings } from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getChainBySlug } from '../../../../util/tokens';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  nfts?: ApiNft[];\n  tokenSlug: string;\n  isTransferWithComment: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nlet activeTransferKey = 0;\n\nfunction LandscapeActions({\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  nfts,\n  tokenSlug,\n  isTransferWithComment,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    styles.transferSlideContent,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const areNotAllTabs = !isSwapAllowed || !isStakingAllowed;\n  const isLastTab = (!isStakingAllowed && !isSwapAllowed && activeTabIndex === ActiveTab.Transfer)\n    || (!isStakingAllowed && isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n    || (isStakingAllowed && activeTabIndex === ActiveTab.Stake);\n  const transferKey = useMemo(() => nfts?.map((nft) => nft.address).join(',') || tokenSlug, [nfts, tokenSlug]);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useSyncEffect(() => {\n    activeTransferKey += 1;\n  }, [transferKey]);\n\n  useEffect(() => {\n    if (\n      (!isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n      || (!isStakingAllowed && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapAllowed, isStakingAllowed]);\n\n  function renderCurrentTab(isActive: boolean, isPrev: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <Transition\n              activeKey={activeTransferKey}\n              name={isPrev ? 'semiFade' : 'none'}\n              direction={!isTransferWithComment ? 'inverse' : undefined}\n              shouldCleanup\n              slideClassName={styles.transferSlideContent}\n            >\n              <TransferInitial key={activeTransferKey} isStatic />\n            </Transition>\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Transfer && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isSendAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconSend}\n            iconPreviewClass=\"icon-action-send\"\n            onEnded={stopSendAnimation}\n          />\n          <span className={styles.tabText}>{lang('Send')}</span>\n          <span className={styles.tabDecoration} aria-hidden />\n          <span className={styles.tabDelimiter} aria-hidden />\n        </div>\n        {isSwapAllowed && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {isStakingAllowed && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>\n              {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: 'Unstaking' }[stakingStatus])}\n            </span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentBgRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentFooterRef = useRef<HTMLDivElement>(null);\n\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query)!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current!.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n      const { nfts, tokenSlug } = global.currentTransfer;\n      const isTransferWithComment = getChainBySlug(tokenSlug) === TONCOIN.chain;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        nfts,\n        tokenSlug,\n        isTransferWithComment,\n        isSwapDisabled,\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonIcon\":\"iQddp8Ac\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\n\nimport { IS_CORE_WALLET, IS_STAKING_DISABLED } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  stakingStatus: StakingStateStatus;\n  onEarnClick: NoneToVoidFunction;\n  isLedger?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  onEarnClick,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleStartTransfer}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n          {lang('Send')}\n        </Button>\n        {isSwapAllowed && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {isStakingAllowed && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: 'Unstaking' }[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceTransition\":\"Q_lPdCwD\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"addressContainer\":\"Hscx8f3y\",\"address\":\"xtFe1Hpt\",\"icon\":\"Z4odaM4f\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"explorerButton\":\"a6nY4qXV\",\"change\":\"p0ADnah2\",\"changeCourseUp\":\"_4aE_WOLG\",\"changeCourseDown\":\"YOGTFZhO\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"dapp\":\"LHIzI0Gu\",\"dappIcon\":\"dwmUjn3W\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\n\nimport styles from '../Card.module.scss';\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      let stakingAmount = toBig(stakingState.balance, token.decimals);\n      if (stakingState.type === 'jetton') {\n        stakingAmount = stakingAmount.plus(toBig(stakingState.unclaimedRewards, token.decimals));\n      }\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changeClassName = changePercent > 0\n    ? styles.changeCourseUp\n    : (changePercent < 0 ? styles.changeCourseDown : undefined);\n  const changePrefix = changeValue > 0 ? '' : changeValue < 0 ? '' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changeClassName,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAt?: number) {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={!isDisabled && styles.root} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: React.ReactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { Account, AccountSettings } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { selectNetworkAccounts } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport trapFocus from '../../../../util/trapFocus';\nimport { getIsMobileTelegramApp } from '../../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport AccountButton from './AccountButton';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  canEdit?: boolean;\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  menuButtonClassName?: string;\n  noSettingsButton?: boolean;\n  withAccountSelector?: boolean;\n  isInsideSticky?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  shouldForceAccountEdit?: boolean;\n  currentWalletVersion?: ApiTonWalletVersion;\n  isAppLockEnabled?: boolean;\n  isFullscreen?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  canEdit,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  menuButtonClassName,\n  noSettingsButton,\n  withAccountSelector,\n  accounts,\n  isInsideSticky,\n  shouldForceAccountEdit,\n  currentWalletVersion,\n  isAppLockEnabled,\n  isFullscreen,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    renameAccount,\n    openAddAccountModal,\n    openSettings,\n    requestOpenQrScanner,\n    openSettingsWithState,\n    setIsManualLockActive,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const lang = useLang();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(shouldForceAccountEdit);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen && !isEdit, undefined, undefined, 'slow');\n  const [inputValue, setInputValue] = useState<string>(currentAccount?.title || '');\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const isMultichainAccount = Boolean(currentAccount?.addressByChain.tron);\n  const noSettingsOrQrSupported = noSettingsButton || (isInsideSticky && isQrScannerSupported);\n  const withAddW5Button = currentWalletVersion !== 'W5' && !currentAccount?.isHardware && !isMultichainAccount;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  useEffect(() => {\n    if (isOpen && forceClose) {\n      closeAccountSelector();\n    }\n  }, [forceClose, isOpen]);\n\n  useEffectWithPrevDeps(([prevShouldForceAccountEdit]) => {\n    if (prevShouldForceAccountEdit && !shouldForceAccountEdit) {\n      closeEdit();\n    }\n  }, [shouldForceAccountEdit]);\n\n  useEffect(\n    () => (shouldRender ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRender],\n  );\n  useEffect(\n    () => (isEdit ? captureEscKeyListener(closeEdit) : undefined),\n    [closeEdit, isEdit],\n  );\n  useEffect(() => (shouldRender && modalRef.current ? trapFocus(modalRef.current) : undefined), [shouldRender]);\n  useFocusAfterAnimation(inputRef, !isEdit);\n  useEffect(() => {\n    if (isEdit) {\n      setInputValue(currentAccount?.title || '');\n    }\n  }, [currentAccount?.title, isEdit]);\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleSaveClick = useLastCallback(() => {\n    renameAccount({ accountId: currentAccountId, title: inputValue.trim() });\n    closeAccountSelector();\n    closeEdit();\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n  useEffect(() => {\n    if (isEdit && isInsideSticky) { handleSaveClick(); }\n  }, [isEdit, isInsideSticky]);\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleInputKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.code === 'Enter') {\n      handleSaveClick();\n    } else {\n      setInputValue(e.currentTarget.value);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    closeAccountSelector();\n  });\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    isHardware?: boolean,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        isHardware={isHardware}\n        isActive={isActive}\n        title={title}\n        canEditAccount={canEdit}\n        cardBackgroundNft={cardBackgroundNft}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    transitionClassNames,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && styles.accountTitleInteractive,\n    accountClassName,\n    isQrScannerSupported && !noSettingsOrQrSupported && styles.accountTitleShort,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <>\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {currentAccount?.title || shortenAddress(currentAccount?.addressByChain?.ton || '')}\n          </span>\n          {withAccountSelector && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n        <div className={buildClassName(styles.menuButtons, isInsideSticky && styles.inStickyCard)}>\n          {isAppLockEnabled && !isInsideSticky && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('App Lock')}\n              onClick={handleManualLock}\n            >\n              <i className=\"icon-manual-lock\" aria-hidden />\n            </Button>\n          )}\n          {!noSettingsOrQrSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Main menu')}\n              onClick={openSettings}\n            >\n              <i className=\"icon-cog\" aria-hidden />\n            </Button>\n          )}\n          {isQrScannerSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Scan QR Code')}\n              onClick={handleQrScanClick}\n            >\n              <i className=\"icon-qr-scanner\" aria-hidden />\n            </Button>\n          )}\n          {getIsMobileTelegramApp() && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Toggle fullscreen')}\n              onClick={handleFullscreenToggle}\n            >\n              <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderInput() {\n    return (\n      <div className={buildClassName(styles.inputContainer, 'account-edit-input')}>\n        <input\n          ref={inputRef}\n          className={styles.input}\n          value={inputValue}\n          onKeyDown={handleInputKeyDown}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <Button isSimple className={styles.saveButton} onClick={handleSaveClick}>{lang('Done')}</Button>\n      </div>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, isHardware }]) => {\n              return renderButton(accountId, addressByChain, isHardware, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!isEdit && renderCurrentAccount()}\n      {isEdit && !isInsideSticky && renderInput()}\n\n      {shouldRender && renderAccountsSelector()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      shouldForceAccountEdit,\n      walletVersions,\n      settings: { isAppLockEnabled, byAccountId: settingsByAccountId },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n\n    return {\n      currentAccountId,\n      currentAccount: accounts?.[currentAccountId],\n      accounts,\n      shouldForceAccountEdit,\n      currentWalletVersion: walletVersions?.currentVersion,\n      isAppLockEnabled,\n      settingsByAccountId,\n      isFullscreen,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","import React, { memo, type TeactNode, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isTestnet?: boolean;\n  isHardwareAccount?: boolean;\n  withTextGradient?: boolean;\n}\n\nfunction CardAddress({\n  addressByChain, isTestnet, isHardwareAccount, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag(false);\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    if (chains.length < 2) return undefined;\n\n    return chains.map((key) => ({\n      value: addressByChain![key],\n      name: shortenAddress(addressByChain![key])!,\n      icon: getChainNetworkIcon(key),\n      fontIcon: 'copy',\n      chain: key,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(key),\n      }) as TeactNode[]\n      ).join(''),\n    }));\n  }, [addressByChain, chains, lang]);\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!') as string, icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullButtonClassName = buildClassName(\n            menuStyles.button,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullButtonClassName}>\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              <span\n                className={buildClassName(menuStyles.itemName, styles.menuItemName)}\n                tabIndex={0}\n                role=\"button\"\n                onClick={(e) => handleItemClick(e, item.value)}\n              >\n                {item.name}\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    return (\n      <div className={styles.addressContainer}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onClick={() => openMenu()}\n        >\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {lang('Multichain')}\n          </span>\n          <i className={buildClassName(styles.icon, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  return (\n    <div className={styles.addressContainer}>\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(addressByChain![chain])}\n      >\n        {shortenAddress(addressByChain![chain])}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, addressByChain![chain], isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain, isHardware } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    isTestnet: global.settings.isTestnet,\n    isHardwareAccount: isHardware,\n  };\n})(CardAddress));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\n\nimport { CURRENCY_LIST } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionHorizontal?: 'right' | 'left';\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcher({\n  isOpen,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionHorizontal,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const currencyList = useMemo(\n    () => CURRENCY_LIST.filter((item) => item.value !== excludedCurrency),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionHorizontal={menuPositionHorizontal}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from './helpers/getCardNftImageUrl';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const transitionClassNames = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div className={buildClassName(rootClassName, transitionClassNames)} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TRC20_USDT_MAINNET_SLUG]: 'green',\n  [TRC20_USDT_TESTNET_SLUG]: 'green',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleMouseMove}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionHorizontal=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET, TONCOIN } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleOpenUrl } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../../../ui/helpers/assetLogos';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcher from './CurrencySwitcher';\n\nimport styles from './Card.module.scss';\n\nimport tonUrl from '../../../../assets/coins/ton.svg';\n\ninterface OwnProps {\n  token: UserToken;\n  classNames: string;\n  isUpdating?: boolean;\n  onYieldClick: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  onYieldClick,\n  onClose,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, image, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const logoPath = slug === TONCOIN.slug\n    ? tonUrl\n    : image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const change = (initialPrice && price) ? price - initialPrice : 0;\n\n  const value = toBig(amount, decimals).mul(price).toString();\n  const changePrefix = change === undefined ? change : change > 0 ? '' : change < 0 ? '' : 0;\n\n  const changeValue = change ? Math.abs(round(change, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history![0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as TeactNode[]).join('');\n\n    return (\n      <>\n        {'  '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleOpenUrl}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <img className={styles.tokenLogo} src={logoPath} alt={token.name} />\n        <div className={styles.tokenInfoHeader}>\n          <b className={styles.tokenAmount}>{formatCurrency(toDecimal(amount, token.decimals), symbol)}</b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                &thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n              </div>\n              <CurrencySwitcher\n                isOpen={isCurrencyMenuOpen}\n                menuPositionHorizontal=\"right\"\n                excludedCurrency={token.symbol}\n                onClose={closeCurrencyMenu}\n                onChange={handleCurrencyChange}\n              />\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span className={styles.apy} onClick={() => onYieldClick(stakingId)}>\n                {yieldType} {annualYield}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}\n              &thinsp;\n              {Math.abs(changePercent)}%  {formatCurrency(Math.abs(changeValue), currencySymbol)}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history!}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history![0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n    };\n  })(TokenCard),\n);\n","import type { Ref } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET, IS_EXTENSION } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport AccountSelector from './AccountSelector';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: Ref<HTMLDivElement>;\n  forceCloseAccountSelector?: boolean;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  balanceUpdateStartedAt?: number;\n  cardNft?: ApiNft;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  activeDappOrigin,\n  currentTokenSlug,\n  forceCloseAccountSelector,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  balanceUpdateStartedAt,\n  cardNft,\n}: OwnProps & StateProps) {\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const { isPortrait } = useDeviceScreen();\n\n  const isUpdating = useUpdateIndicator(balanceUpdateStartedAt);\n\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    transitionClassNames: tokenCardTransitionClassNames,\n  } = useShowTransition(Boolean(currentTokenSlug), undefined, true);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const dappDomain = useMemo(() => {\n    if (!activeDappOrigin) {\n      return undefined;\n    }\n\n    let value: string | undefined;\n    try {\n      value = new URL(activeDappOrigin).hostname;\n    } catch (err) {\n      value = shortenAddress(activeDappOrigin);\n    }\n\n    return value;\n  }, [activeDappOrigin]);\n  const renderingDappDomain = useCurrentOrPrev(dappDomain, true);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const {\n    shouldRender: shouldRenderDappElement,\n    transitionClassNames: dappClassNames,\n  } = useShowTransition(Boolean(dappDomain));\n\n  const shouldRenderDapp = IS_EXTENSION && shouldRenderDappElement;\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changeClassName, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.balanceTransition}>\n          <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n            <span\n              className={buildClassName(\n                styles.currencySwitcher,\n                isUpdating && 'glare-text',\n                !isUpdating && withTextGradient && 'gradientText',\n              )}\n              role=\"button\"\n              tabIndex={0}\n              onClick={openCurrencyMenu}\n            >\n              {shortBaseSymbol.length === 1 && shortBaseSymbol}\n              <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n              {primaryFractionPart && (\n                <span className={styles.primaryFractionPart}>\n                  <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                </span>\n              )}\n              {shortBaseSymbol.length > 1 && (\n                <span className={styles.primaryFractionPart}>\n                &nbsp;{shortBaseSymbol}\n                </span>\n              )}\n              <i className={iconCaretClassNames} aria-hidden />\n            </span>\n          </div>\n        </Transition>\n        <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n        {primaryValue !== '0' && (\n          <div className={buildClassName(styles.change, changeClassName, 'rounded-font')}>\n            {changePrefix}\n            &thinsp;\n            <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n            {'  '}\n            <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n          </div>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          <AccountSelector\n            withAccountSelector={!IS_CORE_WALLET}\n            noSettingsButton={isPortrait}\n            accountClassName={buildClassName(withTextGradient && 'gradientText')}\n            forceClose={forceCloseAccountSelector}\n            canEdit={!IS_CORE_WALLET}\n          />\n          {shouldRenderDapp && (\n            <div className={buildClassName(styles.dapp, dappClassNames)}>\n              <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n              {renderingDappDomain}\n            </div>\n          )}\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          classNames={tokenCardTransitionClassNames}\n          isUpdating={isUpdating}\n          onYieldClick={onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        activeDappOrigin: accountState?.activeDappOrigin,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        balanceUpdateStartedAt: global.balanceUpdateStartedAt,\n        cardNft,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"d8E3jNRv\",\"background\":\"sWp81HgH\",\"noNoise\":\"MHtSlPVW\",\"content\":\"duM9JHY8\",\"account\":\"NEB0Tl4P\",\"menuButton\":\"ucgPS0OB\",\"balance\":\"EDIvoE0D\",\"balanceFractionPart\":\"kBYrVlBo\",\"iconCaret\":\"EDC1Bcor\",\"iconCaretFraction\":\"uTPq0gij\",\"currencySwitcher\":\"JdDnaL44\",\"darkText\":\"raaB0_Hf\",\"lightText\":\"p4Ksvslm\",\"cardBackground\":\"NxJpWlzN\"};","import React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AccountSelector from './AccountSelector';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\n\nimport styles from './StickyCard.module.scss';\n\ninterface OwnProps {\n  classNames?: string;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n}\n\nfunction StickyCard({\n  classNames,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  cardNft,\n}: OwnProps & StateProps) {\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = values || {};\n\n  const iconCaretClassNames = buildClassName(\n    'icon',\n    'icon-caret-down',\n    styles.iconCaret,\n    primaryFractionPart && styles.iconCaretFraction,\n  );\n\n  return (\n    <div className={styles.root}>\n      <div className={buildClassName(styles.background, cardNft && styles.noNoise, classNames)}>\n        {!IS_CORE_WALLET && (<CustomCardManager isSticky nft={cardNft} onCardChange={handleCardChange} />)}\n        <div className={buildClassName(styles.content, customCardClassName)}>\n          <AccountSelector\n            isInsideSticky\n            accountClassName={buildClassName(styles.account, withTextGradient && 'gradientText')}\n            accountSelectorClassName=\"sticky-card-account-selector\"\n            menuButtonClassName={styles.menuButton}\n            noSettingsButton\n            withAccountSelector={!(IS_ELECTRON && IS_MAC_OS) && !IS_CORE_WALLET}\n          />\n          <div className={styles.balance}>\n            <span\n              role=\"button\"\n              tabIndex={0}\n              className={buildClassName(styles.currencySwitcher, withTextGradient && 'gradientText')}\n              onClick={openCurrencyMenu}\n            >\n              {shortBaseSymbol.length === 1 && shortBaseSymbol}\n              {primaryWholePart}\n              {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n              {shortBaseSymbol.length > 1 && (\n                <span className={styles.balanceFractionPart}>&nbsp;{shortBaseSymbol}</span>\n              )}\n              <i className={iconCaretClassNames} aria-hidden />\n            </span>\n            <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        baseCurrency: global.settings.baseCurrency,\n        cardNft,\n        stakingStates,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StickyCard),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    requestParamsRef.current = {};\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    requestParamsRef.current = { direction, offsetId };\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nexport default useInfiniteScroll;\n","import type { RefObject, UIEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  maxHeight?: number;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: React.ReactNode;\n  scrollContainerClosest?: string;\n  children: React.ReactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor!.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && `height: ${maxHeight}px`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"dtfXKrc1\",\"active\":\"s5rKiBWU\",\"itemLast\":\"Lj95SXyq\",\"iconArrow\":\"In7wjvJn\",\"icon\":\"_ICqu0z2\",\"icon_staking\":\"gTKLXaB3\",\"iconStaking\":\"gTKLXaB3\",\"icon_operationPositive\":\"GmWiDZkI\",\"iconOperationPositive\":\"GmWiDZkI\",\"icon_purple\":\"SQWZ9Oez\",\"iconPurple\":\"SQWZ9Oez\",\"icon_error\":\"Q65FM3J4\",\"iconError\":\"mGFBcSmx\",\"icon_swap\":\"ZfCaWqB1\",\"iconSwap\":\"ZfCaWqB1\",\"iconWaiting\":\"sjVip3sq\",\"iconWaitingStake\":\"g8fmH7H_\",\"header\":\"ysalRrTJ\",\"subheader\":\"mn7fmzAk\",\"operationName\":\"cQDrPzK7\",\"address\":\"Rymf6Lfn\",\"amount\":\"SFuQDDGL\",\"addressValue\":\"eBNgO37m\",\"chainIcon\":\"taalmW1o\",\"amount_operationPositive\":\"hOJqc3Zk\",\"amountOperationPositive\":\"hOJqc3Zk\",\"amount_operationNegative\":\"p3a9Uamy\",\"amountOperationNegative\":\"p3a9Uamy\",\"amount_stake\":\"WAuCiqJm\",\"amountStake\":\"WAuCiqJm\",\"commentIcon\":\"axmClUqA\",\"comment\":\"m3tsD5Lh\",\"comment_incoming\":\"RK0krKoG\",\"commentIncoming\":\"RK0krKoG\",\"comment_outgoing\":\"cSX4gOae\",\"commentOutgoing\":\"cSX4gOae\",\"scamImage\":\"TqSKLa3F\",\"swapAmount\":\"enfXRStc\",\"swapArrowRight\":\"ZcG2fXCw\",\"swapBuy\":\"Q2WugE4t\",\"swapError\":\"XhetBWmN\",\"swapSell\":\"tnzn3bEs\",\"swapHold\":\"LuAdiHBF\",\"isSwapErrorMessage\":\"shgP3pO5\",\"nft\":\"ak_LCBLa\",\"received\":\"x4oZwp8K\",\"nftWithComment\":\"KZh31z_P\",\"nftImage\":\"sjeAoWgh\",\"nftData\":\"qHIX_uIs\",\"nftName\":\"eCN9f1Sr\",\"nftCollection\":\"EoWXh7mx\"};","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Transaction.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  isLast: boolean;\n  activity: ApiSwapActivity;\n  isActive: boolean;\n  appTheme: AppTheme;\n  addressByChain?: Account['addressByChain'];\n  onClick: (id: string) => void;\n};\n\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(id);\n  });\n\n  const swapIconClass = buildClassName(\n    'icon-swap',\n    styles.icon_swap,\n    isError && styles.icon_error,\n  );\n\n  const iconFullClass = buildClassName(\n    styles.icon,\n    swapIconClass,\n  );\n\n  function renderAmount() {\n    const amountSwapClass = buildClassName(\n      styles.amount,\n      styles.swapAmount,\n    );\n\n    return (\n      <div className={amountSwapClass}>\n        <span className={buildClassName(styles.swapSell, isError && styles.swapError)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(\n            styles.swapArrowRight,\n            'icon-arrow-right',\n            isError && styles.swapError,\n            isHold && styles.swapHold,\n          )}\n          aria-hidden\n        />\n        <span className={buildClassName(\n          styles.swapBuy,\n          isError && styles.swapError,\n          isHold && styles.swapHold,\n        )}\n        >\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n      </div>\n    );\n  }\n\n  function renderErrorMessage() {\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from hangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={buildClassName(isError && styles.isSwapErrorMessage)}>\n        {date}{state ? `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}${state}` : ''}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError) {\n      return lang('SwapTitle');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={id}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n      )}\n      onClick={handleClick}\n      isSimple\n    >\n      <i className={iconFullClass} aria-hidden />\n      {isPending && (\n        <AnimatedIconWithPreview\n          play\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.iconWaiting}\n          nonInteractive\n          noLoop={false}\n          forceOnHeavyAnimation\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGreen}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGreen}\n        />\n      )}\n      {isError && (\n        <i\n          className={buildClassName(styles.iconError, 'icon-close-filled')}\n          aria-hidden\n        />\n      )}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderErrorMessage()}\n        {renderCurrency(activity, fromToken, toToken)}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nfunction renderCurrency(activity: ApiSwapActivity, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n  return (\n    <div className={styles.address}>\n      {\n        rate && (\n          <>\n            {rate.firstCurrencySymbol}{'  '}\n            <span className={styles.addressValue}>\n              {rate.price}{' '}{rate.secondCurrencySymbol}\n            </span>\n          </>\n        )\n      }\n    </div>\n  );\n}\n","import type { Ref, RefObject } from 'react';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiTokenWithPrice, ApiTransactionActivity, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, SavedAddress } from '../../../../global/types';\nimport { MediaType } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, TONCOIN, TRANSACTION_ADDRESS_SHIFT } from '../../../../config';\nimport { getIsTxIdLocal } from '../../../../global/helpers';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Transaction.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast: boolean;\n  isActive: boolean;\n  withChainIcon?: boolean;\n  annualYield: number;\n  yieldType?: ApiYieldType;\n  appTheme: AppTheme;\n  savedAddresses?: SavedAddress[];\n  onClick: (id: string) => void;\n};\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  onClick,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n  } = transaction;\n\n  const isStake = type === 'stake';\n  const isUnstake = type === 'unstake';\n  const isUnstakeRequest = type === 'unstakeRequest';\n  const isStaking = isStake || isUnstake || isUnstakeRequest;\n  const isNftTransfer = type === 'nftTransferred' || type === 'nftReceived' || Boolean(nft);\n\n  const token = tokensBySlug?.[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || metadata?.name;\n  const isLocal = getIsTxIdLocal(txId);\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(transaction);\n  const isScam = isTransactionWithPoisoning || Boolean(metadata?.isScam);\n\n  const handleClick = useLastCallback(() => {\n    onClick(txId);\n  });\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft, txId });\n  });\n\n  function getOperationName() {\n    if (isStake) {\n      return 'Staked';\n    }\n\n    if (isUnstakeRequest) {\n      return 'Unstake Requested';\n    }\n\n    if (isUnstake) {\n      return 'Unstaked';\n    }\n\n    return isIncoming ? 'Received' : 'Sent';\n  }\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.nft,\n          isIncoming && styles.received,\n          comment && styles.nftWithComment,\n          'transaction-nft',\n        )}\n        onClick={handleNftClick}\n        data-nft-address={nft?.address}\n        data-tx-id={txId}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    if (isStaking || isScam || (!comment && !encryptedComment)) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(\n          styles.comment,\n          isIncoming ? styles.comment_incoming : styles.comment_outgoing,\n        )}\n      >\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  const stakeIconClass = buildClassName(\n    isStaking && 'icon-earn',\n    isStake && styles.icon_purple,\n    isStaking && styles.icon_staking,\n    !isStaking && (isIncoming ? 'icon-receive-alt' : 'icon-send-alt'),\n  );\n\n  const iconFullClass = buildClassName(\n    styles.icon,\n    isIncoming && styles.icon_operationPositive,\n    stakeIconClass,\n  );\n\n  function renderAmount() {\n    const amountOtherClass = buildClassName(\n      styles.amount,\n      isIncoming\n        ? styles.amount_operationPositive\n        : (isStake ? styles.amount_stake : styles.amount_operationNegative),\n    );\n\n    return (\n      <div className={amountOtherClass}>\n        {isNftTransfer ? 'NFT' : formatCurrencyExtended(\n          toDecimal(isStaking ? bigintAbs(amount) : amount, token!.decimals),\n          token?.symbol || TONCOIN.symbol,\n          isStaking,\n        )}\n      </div>\n    );\n  }\n\n  function renderAddress() {\n    return (\n      <div className={styles.address}>\n        {!isStaking && lang(isIncoming ? '$transaction_from' : '$transaction_to', {\n          address: (\n            <span className={styles.addressValue}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        })}\n        {isStake && lang('at %annual_yield%', {\n          annual_yield: <span className={styles.addressValue}>{yieldType} {annualYield}%</span>,\n        })}\n        {(isUnstake || isUnstakeRequest) && '\\u00A0'}\n      </div>\n    );\n  }\n\n  const waitingIconName = isStake ? 'iconClockPurpleWhite' : (isIncoming ? 'iconClockGreen' : 'iconClockGray');\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={txId}\n      className={buildClassName(styles.item, isLast && styles.itemLast, isActive && styles.active)}\n      onClick={handleClick}\n      isSimple\n    >\n      <i className={iconFullClass} aria-hidden />\n      {isLocal && (\n        <AnimatedIconWithPreview\n          play\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.iconWaiting}\n          nonInteractive\n          noLoop={false}\n          forceOnHeavyAnimation\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][waitingIconName]}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[waitingIconName]}\n        />\n      )}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {lang(getOperationName())}\n          {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {formatTime(timestamp)}\n        {renderAddress()}\n      </div>\n      {nft && renderNft()}\n      {renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\"};","import React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity, ApiStakingState, ApiSwapAsset, ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { getIsSwapId, getIsTinyOrScamTransaction, getIsTxIdLocal } from '../../../../global/helpers';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsFirstTransactionsLoaded,\n  selectIsMultichainAccount,\n  selectIsNewWallet,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt, SECOND } from '../../../../util/dateFormat';\nimport { buildCollectionByKey, findLast } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useThrottledCallback from '../../../../hooks/useThrottledCallback';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport NewWalletGreeting from './NewWalletGreeting';\nimport Swap from './Swap';\nimport Transaction from './Transaction';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isNewWallet: boolean;\n  isMultichainAccount: boolean;\n  addressByChain?: Account['addressByChain'];\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  idsBySlug?: Record<string, string[]>;\n  idsMain?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isMainHistoryEndReached?: boolean;\n  isHistoryEndReachedBySlug?: Record<string, boolean>;\n  alwaysShownSlugs?: string[];\n  activitiesUpdateStartedAt?: number;\n  theme: Theme;\n  isFirstTransactionsLoaded?: boolean;\n  stakingStates?: ApiStakingState[];\n};\n\ninterface ActivityOffsetInfo {\n  offset: number;\n  offsetNext: number;\n  dateCount: number;\n  commentCount: number;\n  nftCount: number;\n  date: number;\n}\n\nconst FURTHER_SLICE = 30;\nconst THROTTLE_TIME = SECOND;\n\nconst DATE_HEADER_HEIGHT = 2.5 * REM;\nconst TRANSACTION_COMMENT_HEIGHT = 2.1875 * REM;\nconst TRANSACTION_NFT_HEIGHT = 4 * REM;\nconst TRANSACTION_HEIGHT = 4 * REM;\n\nconst TIME_BETWEEN_SWAP_AND_TX = 3600000; // 1 hour\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isNewWallet,\n  isMultichainAccount,\n  addressByChain,\n  slug,\n  idsBySlug,\n  idsMain,\n  byId,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isMainHistoryEndReached,\n  isHistoryEndReachedBySlug,\n  alwaysShownSlugs,\n  activitiesUpdateStartedAt = 0,\n  theme,\n  isFirstTransactionsLoaded,\n  stakingStates,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const {\n    fetchTokenTransactions, fetchAllTransactions, showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isUpdating = useUpdateIndicator(activitiesUpdateStartedAt);\n\n  const appTheme = useAppTheme(theme);\n\n  const stakingStateBySlug = useMemo(() => {\n    return stakingStates ? buildCollectionByKey(stakingStates, 'tokenSlug') : {};\n  }, [stakingStates]);\n\n  const ids = useMemo(() => {\n    let idList: string[] | undefined;\n\n    const bySlug = idsBySlug ?? {};\n\n    if (byId) {\n      if (slug) {\n        idList = bySlug[slug] ?? [];\n        const lastTokenTxId = findLast(idList, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n\n        if (lastTokenTxId) {\n          const lastTokenTxTimestamp = byId[lastTokenTxId].timestamp - TIME_BETWEEN_SWAP_AND_TX;\n          idList = idList.filter((txId) => byId[txId].timestamp >= lastTokenTxTimestamp);\n        }\n      } else {\n        idList = idsMain;\n      }\n    }\n\n    if (!idList) {\n      return undefined;\n    }\n\n    return idList;\n  }, [byId, slug, idsBySlug, idsMain]);\n\n  const activityList = useMemo(() => {\n    if (!ids) {\n      return undefined;\n    }\n\n    const allActivities = ids\n      .map((id) => byId?.[id])\n      .filter((activity) => {\n        if (activity?.shouldHide) {\n          return false;\n        }\n        if (activity?.kind === 'swap') {\n          return Boolean(!slug || activity.from === slug || activity.to === slug);\n        } else {\n          return Boolean(\n            activity?.slug\n            && (!slug || activity.slug === slug)\n            && (\n              !areTinyTransfersHidden\n              || (slug && tokensBySlug[activity.slug]?.quote.priceUsd === 0)\n              || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n              || alwaysShownSlugs?.includes(activity.slug)\n            )\n            && !getIsTransactionWithPoisoning(activity),\n          );\n        }\n      }) as ApiActivity[];\n\n    if (!allActivities.length) {\n      return [];\n    }\n\n    return allActivities;\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, ids, slug, tokensBySlug]);\n\n  const { activityIds, activitiesById } = useMemo(() => {\n    const activityIdList: string[] = [];\n    const activityMap: Record<string, ApiActivity> = {};\n\n    activityList?.forEach((activity) => {\n      activityIdList.push(activity.id);\n      activityMap[activity.id] = activity;\n    });\n\n    return { activityIds: activityIdList, activitiesById: activityMap };\n  }, [activityList]);\n\n  const isHistoryEndReached = useMemo(() => {\n    if (slug) {\n      return !!isHistoryEndReachedBySlug?.[slug];\n    }\n\n    return !!isMainHistoryEndReached;\n  }, [isHistoryEndReachedBySlug, isMainHistoryEndReached, slug]);\n\n  const loadMore = useLastCallback(() => {\n    if (slug) {\n      fetchTokenTransactions({ slug, limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    } else {\n      fetchAllTransactions({ limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    }\n  });\n\n  const throttledLoadMore = useThrottledCallback(loadMore, [loadMore], THROTTLE_TIME, true);\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    throttledLoadMore, activityIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const isActivitiesEmpty = !activityList || !activityList.length;\n\n  const activityOffsetInfoById = useMemo(() => {\n    const offsetMap: Record<string, ActivityOffsetInfo> = {};\n\n    let dateCount = 0;\n    let nftCount = 0;\n    let commentCount = 0;\n    let lastActivityDayStart = 0;\n\n    activityIds.forEach((id, index) => {\n      const activity = activitiesById[id];\n      if (!activity) return;\n\n      offsetMap[id] = {\n        offset: 0,\n        offsetNext: 0,\n        dateCount: 0,\n        commentCount: 0,\n        nftCount: 0,\n        date: lastActivityDayStart,\n      };\n\n      const offsetTop = calculateOffset(index, dateCount, commentCount, nftCount);\n      const activityDayStart = getDayStartAt(activity.timestamp);\n      const isNewDay = lastActivityDayStart !== activityDayStart;\n      const isNftTransfer = activity.kind === 'transaction'\n        && (\n          activity.type === 'nftTransferred'\n          || activity.type === 'nftReceived'\n          || Boolean(activity.nft)\n        );\n      const canCountComment = activity.kind === 'transaction' && (!activity.type || isNftTransfer);\n      if (isNewDay) {\n        lastActivityDayStart = activityDayStart;\n        dateCount += 1;\n      }\n\n      if (canCountComment && (activity.comment || activity.encryptedComment) && !activity.metadata?.isScam) {\n        commentCount += 1;\n      }\n\n      if (isNftTransfer && activity.nft) {\n        nftCount += 1;\n      }\n\n      offsetMap[id] = {\n        ...offsetMap[id],\n        offset: offsetTop,\n        offsetNext: calculateOffset(index + 1, dateCount, commentCount, nftCount),\n        dateCount,\n        commentCount,\n        nftCount,\n      };\n    });\n\n    return offsetMap;\n  }, [activitiesById, activityIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      const lastViewportId = viewportIds![viewportIds!.length - 1];\n\n      return activityOffsetInfoById[lastViewportId]?.offsetNext || 0;\n    },\n    [activityOffsetInfoById, viewportIds],\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}px` });\n  }, [isLandscape, currentContainerHeight]);\n\n  useEffect(() => {\n    if (!isHistoryEndReached && ids && isActivitiesEmpty) {\n      throttledLoadMore();\n    }\n  }, [ids, isActivitiesEmpty, isHistoryEndReached, throttledLoadMore]);\n\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderActivity(activity: ApiActivity, isLast: boolean, isActivityActive: boolean) {\n    const isSwap = activity.kind === 'swap';\n\n    if (isSwap) {\n      return (\n        <Swap\n          key={activity.id}\n          activity={activity}\n          tokensBySlug={swapTokensBySlug}\n          isLast={isLast}\n          isActive={isActivityActive}\n          appTheme={appTheme}\n          addressByChain={addressByChain}\n          onClick={handleActivityClick}\n        />\n      );\n    } else {\n      return (\n        <Transaction\n          key={activity.id}\n          transaction={activity}\n          tokensBySlug={tokensBySlug}\n          isActive={isActivityActive}\n          annualYield={stakingStateBySlug[activity.slug]?.annualYield}\n          yieldType={stakingStateBySlug[activity.slug]?.yieldType}\n          isLast={isLast}\n          savedAddresses={savedAddresses}\n          withChainIcon={isMultichainAccount}\n          appTheme={appTheme}\n          onClick={handleActivityClick}\n        />\n      );\n    }\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    return viewportIds!.map((id, index) => {\n      const activityInfo = activityOffsetInfoById[id];\n\n      const nextActivityId = viewportIds![index + 1];\n      const activity = activitiesById[id];\n      const nextActivity = activitiesById[nextActivityId];\n      if (!activity) return undefined;\n\n      const activityDayStart = getDayStartAt(activity.timestamp);\n      const isNewDay = activityInfo.date !== activityDayStart;\n\n      const nextActivityDayStart = nextActivity ? getDayStartAt(nextActivity.timestamp) : 0;\n      const isFirst = index === 0;\n      const isLast = activityDayStart !== nextActivityDayStart;\n\n      const isActivityActive = activity.id === currentActivityId;\n\n      return (\n        <div\n          key={id}\n          style={`top: ${activityInfo.offset}px`}\n          className={buildClassName('ListItem', styles.listItem)}\n        >\n          {isNewDay && renderDate(activityDayStart, isFirst)}\n          {renderActivity(activity, isLast, isActivityActive)}\n        </div>\n      );\n    });\n  }\n\n  if (isActivitiesEmpty && !isFirstTransactionsLoaded) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (isNewWallet) {\n    return (\n      <div className={buildClassName(isLandscape && styles.greeting)}>\n        <NewWalletGreeting\n          isActive={isActive}\n          isMutlichainAccount={isMultichainAccount}\n          mode={isLandscape ? 'emptyList' : 'panel'}\n        />\n      </div>\n    );\n  }\n\n  if (isHistoryEndReached && isActivitiesEmpty) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const account = selectCurrentAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const isFirstTransactionsLoaded = selectIsFirstTransactionsLoaded(global, global.currentAccountId!);\n      const isNewWallet = selectIsNewWallet(global, isFirstTransactionsLoaded);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStates = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const {\n        idsBySlug, byId, isMainHistoryEndReached, isHistoryEndReachedBySlug, idsMain,\n      } = accountState?.activities ?? {};\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: global.currentAccountId!,\n        slug,\n        byId,\n        isNewWallet,\n        idsBySlug,\n        idsMain,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isMainHistoryEndReached,\n        isHistoryEndReachedBySlug,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        activitiesUpdateStartedAt: global.activitiesUpdateStartedAt,\n        theme: global.settings.theme,\n        isFirstTransactionsLoaded,\n        addressByChain: account?.addressByChain,\n        stakingStates,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n\nfunction calculateOffset(index: number, dateCount: number, commentCount: number, nftCount: number) {\n  const commentOffset = commentCount * TRANSACTION_COMMENT_HEIGHT;\n  const dateOffset = dateCount * DATE_HEADER_HEIGHT;\n  const nftOffset = nftCount * TRANSACTION_NFT_HEIGHT;\n  return index * TRANSACTION_HEIGHT + dateOffset + commentOffset + nftOffset;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiYieldType } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { AppTheme, UserToken } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  token: UserToken;\n  stakingId?: string;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\n\nfunction Token({\n  token,\n  amount,\n  stakingId,\n  stakingStatus,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  onClick,\n  yieldType,\n}: OwnProps) {\n  const {\n    name,\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const fullClassName = buildClassName(styles.container, isActive && styles.active, classNames);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n\n  const {\n    shouldRender: shouldRenderYield,\n    transitionClassNames: renderYieldClassNames,\n  } = useShowTransition(withYield);\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n      renderYieldClassNames,\n    );\n\n    return (\n      <span className={labelClassName}>\n        {yieldType} {annualYield}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  function renderInvestorView() {\n    return (\n      <Button className={fullClassName} isSimple style={style} onClick={handleClick}>\n        <TokenIcon token={token} withChainIcon={withChainIcon} className={styles.tokenIcon}>\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(\n            styles.secondaryValue,\n            stakingStatus && styles.secondaryValue_staked,\n            isVesting && styles.secondaryValue_vesting,\n            isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n          )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </div>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <div className={buildClassName(styles.change, changeClassName)}>\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </div>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button className={fullClassName} style={style} onClick={handleClick} isSimple>\n        <TokenIcon token={token} withChainIcon={withChainIcon} className={styles.tokenIcon}>\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(\n            styles.secondaryValue,\n            stakingStatus && styles.secondaryValue_staked,\n            isVesting && styles.secondaryValue_vesting,\n            isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n          )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </div>\n          <div className={styles.subtitle}>\n            {totalAmount.gt(0) ? '' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n      </Button>\n    );\n  }\n\n  return isInvestorView ? renderInvestorView() : renderDefaultView();\n}\n\nexport default memo(Token);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo,\n} from '../../../../api/types';\nimport type { Theme, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport { getIsActiveStakingState, getStakingStateStatus } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  states?: ApiStakingState[];\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  theme,\n  states,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const { shouldRender: shouldRenderStakedTokens, transitionClassNames: stakedTokenClassNames } = useShowTransition(\n    Boolean(Object.keys(stakedTokens).length),\n  );\n\n  const {\n    shouldRender: shouldRenderVestingToken,\n    transitionClassNames: vestingTokenClassNames,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM * REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}px` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        classNames={vestingTokenClassNames}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const {\n        annualYield, yieldType, balance: stakingBalance, id,\n      } = state;\n      const stakingStatus = getStakingStateStatus(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingId={id}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          classNames={stakedTokenClassNames}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(styles.wrapper, isSeparatePanel && !renderedTokens && styles.wrapperLoading)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n\n      return {\n        tokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        theme: global.settings.theme,\n        states,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting!, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting!) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'));\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n} from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  isTestnet?: boolean;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send All',\n  value: 'sendAll',\n}, {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n}, {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide All',\n  value: 'hideAll',\n}] : []), {\n  name: 'Burn All',\n  value: 'burnAll',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'selectAll',\n  withSeparator: true,\n}];\n\nfunction NftCollectionHeader({\n  isTestnet,\n  nfts,\n  currentCollectionAddress,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n\n  const nftFromCurrentCollection = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).find((nft) => nft.collectionAddress === currentCollectionAddress);\n  }, [currentCollectionAddress, nfts]);\n  const amount = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).reduce((acc, nft) => {\n      return nft.collectionAddress === currentCollectionAddress ? acc + 1 : acc;\n    }, 0);\n  }, [currentCollectionAddress, nfts]);\n  const renderedNft = useCurrentOrPrev(nftFromCurrentCollection, true);\n  const renderedAmount = useCurrentOrPrev(amount, true);\n\n  const isActive = Boolean(currentCollectionAddress);\n\n  useHistoryBack({\n    isActive,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(closeNftCollection) : undefined), [isActive]);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'sendAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n\n        startTransfer({\n          nfts: collectionNfts,\n          isPortrait: getIsPortrait(),\n        });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(`${getgemsBaseUrl}collection/${renderedNft?.collectionAddress}`);\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(renderedNft?.collectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n        break;\n      }\n\n      case 'selectAll': {\n        const addresses = Object.values(nfts || {})\n          .filter((nft) => nft.collectionAddress === currentCollectionAddress && !nft.isOnSale)\n          .map((nft) => nft.address);\n        selectNfts({ addresses });\n        break;\n      }\n\n      case 'burnAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n        burnNfts({ nfts: collectionNfts });\n\n        break;\n      }\n\n      case 'hideAll': {\n        const collectionNfts = Object.values(nfts!)\n          .filter((nft) => {\n            return nft.collectionAddress === currentCollectionAddress;\n          })\n          .map((nft) => nft.address);\n        openHideNftModal({ addresses: collectionNfts, isCollection: true });\n      }\n    }\n  });\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  if (!renderedNft) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={closeNftCollection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{renderedNft?.collectionName || lang('Unnamed Collection')}</div>\n        <div className={styles.amount}>\n          {renderedAmount! > 1 ? lang('%amount% NFTs', { amount: renderedAmount }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        withPortal\n        shouldTranslateOptions\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        items={MENU_ITEMS}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    nfts,\n    currentCollectionAddress,\n  };\n})(NftCollectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","import { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../config';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nconst ON_SALE_ITEM: DropdownItem = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst NOT_SCAM: DropdownItem = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem = {\n  name: 'Select',\n  value: 'select',\n  withSeparator: true,\n};\nconst INSTALL_CARD: DropdownItem = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\n\nexport default function useNftMenu({\n  nft,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n  } = getActions();\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    const { isTestnet } = getGlobal().settings;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl);\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n    }\n  });\n\n  const menuItems = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = nft.collectionAddress === TON_DNS_COLLECTION;\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return [\n      ...(isTonDns ? [TON_DNS_ITEM] : []),\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n      {\n        ...(isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n        ...(isCard && { withSeparator: true }),\n      },\n      ...(isOnFragment ? [FRAGMENT_ITEM] : []),\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n      ...(collectionAddress ? [COLLECTION_ITEM] : []),\n      ...(!IS_CORE_WALLET ? [\n        ...((!isScam && !isNftBlacklisted) || isNftWhitelisted ? [HIDE_ITEM] : []),\n        ...(isScam && !isNftWhitelisted ? [NOT_SCAM] : []),\n        ...(!isScam && isNftBlacklisted ? [UNHIDE] : []),\n      ] : []),\n      ...(!isOnSale ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n    ];\n  }, [nft, isNftInstalled, isNftAccentColorInstalled, isNftBlacklisted, isNftWhitelisted]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\"};","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  menuPosition?: IAnchorPosition;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n}\n\nfunction NftMenu({\n  nft,\n  menuPosition,\n  onOpen,\n  onClose,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const isOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const lang = useLang();\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={ref}\n        type=\"button\"\n        className={styles.button}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        withPortal\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        items={menuItems}\n        shouldTranslateOptions\n        className={styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        shouldCleanup\n        onClose={onClose}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition, MediaType } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({ nft, selectedAddresses, observeIntersection }: OwnProps) {\n  const { openMediaViewer, selectNfts, clearNftSelection } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuPosition);\n  const {\n    shouldRender: shouldRenderWarning,\n    transitionClassNames: warningTransitionClassNames,\n  } = useShowTransition(isSelectionEnabled && nft.isOnSale);\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openMediaViewer({ mediaId: nft.address, mediaType: MediaType.Nft });\n  }\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      data-nft-address={nft.address}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          menuPosition={menuPosition}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata!.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        />\n      )}\n      {shouldRenderWarning && (\n        <div className={buildClassName(styles.warning, warningTransitionClassNames)}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: React.RefObject<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import type { RefObject } from 'react';\nimport { useEffect, useRef, useState } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport {\n  debounce, throttle, throttleWith,\n} from '../util/schedulers';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: RefObject<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: RefObject<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useIsIntersecting(\n  targetRef: RefObject<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [isIntersecting, setIsIntersecting] = useState(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return isIntersecting;\n}\n","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n}: OwnProps & StateProps) {\n  const { clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter((nft) => {\n        if (!nft) return false;\n\n        return !currentCollectionAddress || nft.collectionAddress === currentCollectionAddress;\n      })\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address));\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n  ]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={nfts.length}\n      shouldCleanup\n      slideClassName={buildClassName(styles.list, isLandscape && styles.landscapeList)}\n    >\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </Transition>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  byAddress?: Record<string, ApiNft>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send',\n  value: 'send',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide',\n  value: 'hide',\n}] : []), {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'select-all',\n  withSeparator: true,\n}];\n\nfunction NftSelectionHeader({ selectedAddresses, byAddress, currentCollectionAddress }: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={clearNftsSelection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          withPortal\n          shouldTranslateOptions\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          items={MENU_ITEMS}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return { selectedAddresses, byAddress, currentCollectionAddress };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"portraitContainer\":\"joLgqn25\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsContainerStuck\":\"dFLD_EZz\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_TELEGRAM_APP,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  NOTCOIN_VOUCHERS_ADDRESS,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { getIsActiveStakingState } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getStatusBarHeight } from '../../../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport { IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport windowSize from '../../../../util/windowSize';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  isFullscreen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n}\n\nlet activeNftKey = 0;\n\nfunction Content({\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  isFullscreen,\n  currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const tabsRef = useRef<HTMLDivElement>(null);\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftCollectionClick = useLastCallback((address: string) => {\n    openNftCollection({ address }, { forceOnHeavyAnimation: true });\n  });\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      handleNftCollectionClick(value);\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n    const collections = Object.values(nfts ?? {})\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address))\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress) {\n          acc[nft.collectionAddress] = nft.collectionName || lang('Unnamed collection');\n        }\n\n        return acc;\n      }, {} as Record<string, string>);\n    const collentionAddresses = Object.keys(collections);\n    collentionAddresses.sort((left, right) => collections[left].localeCompare(collections[right]));\n\n    return collentionAddresses.map<DropdownItem>((key) => {\n      return {\n        id: key,\n        name: collections[key],\n        value: key,\n      };\n    });\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const tabs = useMemo(\n    () => [\n      ...(\n        !shouldShowSeparateAssetsPanel\n          ? [{ id: ContentTab.Assets, title: lang('Assets'), className: styles.tab }]\n          : []\n      ),\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      ...(!isPortrait && !IS_CORE_WALLET\n        ? [{ id: ContentTab.Explore, title: lang('Explore'), className: styles.tab }]\n        : []),\n      {\n        id: ContentTab.Nft,\n        title: lang('NFT'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withSeparator: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n      ...(nftCollections.some(({ value }) => value === NOTCOIN_VOUCHERS_ADDRESS) ? [{\n        id: ContentTab.NotcoinVouchers,\n        title: 'NOT Vouchers',\n        className: styles.tab,\n      }] : []),\n    ],\n    [lang, nftCollections, shouldShowSeparateAssetsPanel, shouldRenderHiddenNftsSection, isPortrait],\n  );\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab) => {\n    if (tab === ContentTab.NotcoinVouchers) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Nft });\n      handleNftCollectionClick(NOTCOIN_VOUCHERS_ADDRESS);\n\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  useEffect(() => {\n    const stickyElm = tabsRef.current;\n    if (!isPortrait || !stickyElm) return undefined;\n\n    const safeAreaTop = IS_CAPACITOR\n      ? getStatusBarHeight()\n      : IS_TELEGRAM_APP\n        ? getTelegramApp()!.safeAreaInset.top + getTelegramApp()!.contentSafeAreaInset.top\n        : windowSize.get().safeAreaTop;\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n    const observer = new IntersectionObserver(([e]) => {\n      requestMutation(() => {\n        e.target.classList.toggle(styles.tabsContainerStuck, e.intersectionRatio < 1);\n      });\n    }, {\n      rootMargin: `${rootMarginTop}px 0px 0px 0px`,\n      threshold: [1],\n    });\n    observer.observe(stickyElm);\n\n    return () => {\n      observer.unobserve(stickyElm);\n    };\n  }, [isPortrait, tabsRef, isFullscreen]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return <Assets isActive={isActive} onTokenClick={handleClickAsset} onStakedTokenClick={onStakedTokenClick} />;\n      case ContentTab.Activity:\n        return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} />;\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const activeKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div ref={tabsRef} className={styles.tabsContainer}>\n          <Transition activeKey={activeKey} name=\"slideFade\" className={styles.tabsContent}>\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={activeTabIndex}\n          renderCount={tabs.length}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        isFullscreen: global.isFullscreen,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"closeButton\":\"tQS1IhkF\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isRequired, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(!isSecurityWarningHidden, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({ isBackupRequired, isTestnet, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CAPACITOR, IS_CORE_WALLET } from '../../config';\nimport { getStakingStateStatus } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { getStatusBarHeight } from '../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { setStatusBarStyle } from '../../util/switchTheme';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD,\n} from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport StickyCard from './sections/Card/StickyCard';\nimport Content from './sections/Content';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const cardRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const portraitContainerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const landscapeContainerRef = useRef<HTMLDivElement>(null);\n  const [canRenderStickyCard, setCanRenderStickyCard] = useState(false);\n  const [shouldRenderDarkStatusBar, setShouldRenderDarkStatusBar] = useState(false);\n  const safeAreaTop = IS_CAPACITOR ? getStatusBarHeight() : windowSize.get().safeAreaTop;\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const {\n    shouldRender: shouldRenderStickyCard,\n    transitionClassNames: stickyCardTransitionClassNames,\n  } = useShowTransition(canRenderStickyCard);\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useEffect(() => {\n    setStatusBarStyle({\n      forceDarkBackground: shouldRenderDarkStatusBar,\n    });\n  }, [shouldRenderDarkStatusBar]);\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  useEffect(() => {\n    if (!isPortrait || !isActive) {\n      setCanRenderStickyCard(false);\n      return undefined;\n    }\n\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop;\n    const observer = new IntersectionObserver((entries) => {\n      const { isIntersecting, boundingClientRect: { left, width } } = entries[0];\n      setCanRenderStickyCard(entries.length > 0 && !isIntersecting && left < width);\n    }, { rootMargin: `${rootMarginTop}px 0px 0px` });\n\n    const cardTopSideObserver = new IntersectionObserver((entries) => {\n      const { isIntersecting } = entries[0];\n\n      setShouldRenderDarkStatusBar(!isIntersecting);\n    }, { rootMargin: `-${safeAreaTop}px 0px 0px`, threshold: [1] });\n    const cardElement = cardRef.current;\n\n    if (cardElement) {\n      observer.observe(cardElement);\n      cardTopSideObserver.observe(cardElement);\n    }\n\n    return () => {\n      if (cardElement) {\n        observer.unobserve(cardElement);\n        cardTopSideObserver.unobserve(cardElement);\n        setShouldRenderDarkStatusBar(false);\n      }\n    };\n  }, [isActive, isPortrait, safeAreaTop]);\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current!, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card\n            ref={cardRef}\n            forceCloseAccountSelector={shouldRenderStickyCard}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n          {shouldRenderStickyCard && (\n            <StickyCard\n              classNames={stickyCardTransitionClassNames}\n            />\n          )}\n          <PortraitActions\n            isTestnet={isTestnet}\n            stakingStatus={stakingStatus}\n            isLedger={isLedger}\n            isSwapDisabled={isSwapDisabled}\n            isOnRampDisabled={isOnRampDisabled}\n            onEarnClick={handleEarnClick}\n          />\n        </div>\n\n        <Content onStakedTokenClick={handleEarnClick} />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          <LandscapeActions stakingStatus={stakingStatus} isLedger={isLedger} theme={theme} />\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled,\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"modalText\":\"KUwFv7ti\",\"button\":\"LBe89K7I\",\"button_single\":\"MTmELA24\",\"buttonSingle\":\"MTmELA24\",\"modalButtons\":\"cYtg8tBc\",\"importText\":\"nnhxqZYR\",\"importButtons\":\"Gnbk4xJi\",\"importButtonsWithMargin\":\"yX8s5GFD\",\"sticker\":\"EZgbjNjA\",\"ledgerButton\":\"BB2l0HAn\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, type HardwareConnectState, SettingsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectFirstNonHardwareAccount, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n\n  firstNonHardwareAccount?: Account;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isOtherVersionsExist?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  firstNonHardwareAccount,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isOtherVersionsExist,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<number>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(false);\n  });\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(true);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector(isActive?: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n        <AnimatedIconWithPreview\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.forge}\n          previewUrl={ANIMATED_STICKERS_PATHS.forgePreview}\n        />\n        <p className={styles.modalText}>\n          {renderText(lang('$add_account_description1', { app_name: APP_NAME }))}\n        </p>\n\n        <div className={styles.modalButtons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleNewAccountClick}\n          >\n            {lang('Create Wallet')}\n          </Button>\n          <span className={styles.importText}>{lang('or import from')}</span>\n          <div className={buildClassName(\n            styles.importButtons,\n            !isOtherVersionsExist && styles.importButtonsWithMargin,\n          )}\n          >\n            <Button\n              className={buildClassName(styles.button, !IS_LEDGER_SUPPORTED && styles.button_single)}\n              onClick={handleImportAccountClick}\n            >\n              {lang('Secret Words')}\n            </Button>\n            {IS_LEDGER_SUPPORTED && (\n              <Button\n                className={buildClassName(styles.button, styles.ledgerButton)}\n                onClick={handleImportHardwareWalletClick}\n              >\n                {lang('Ledger')}\n              </Button>\n            )}\n          </div>\n          {isOtherVersionsExist && (\n            <div className={styles.walletVersionBlock}>\n              <span>\n                {lang('$wallet_switch_version_1', {\n                  action: (\n                    <div\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={handleOpenSettingWalletVersion}\n                      className={styles.walletVersionText}\n                    >\n                      {lang('$wallet_switch_version_2')}\n                    </div>\n                  ),\n                })}\n              </span>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector(isActive);\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={renderingKey === RenderingState.Initial ? RenderingState.Password : undefined}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const isOtherVersionsExist = !!versions?.length;\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n\n    accounts,\n    firstNonHardwareAccount,\n    hardwareState,\n    hardwareWallets,\n    isLedgerConnected,\n    isTonAppConnected,\n    isOtherVersionsExist,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Lets make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic![0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address!, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const scanSquareRef = useRef<HTMLDivElement>(null);\n\n  useEffectOnce(() => {\n    void BarcodeScanner\n      .isTorchAvailable()\n      .then((result) => {\n        setIsFlashlightAvailable(result.available);\n      });\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodeScanned',\n      async (event) => {\n        let { cornerPoints: qrCodeCoordinates } = event.barcode;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: event.barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {isFlashlightAvailable && (\n          <div\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | null): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    }, SECOND);\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return () => clearTimeout(timerId);\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  function renderTokenInfo(token?: UserSwapToken | ApiSwapAsset, amount = '0', isReceived = false) {\n    const amountWithSign = isReceived ? amount : -amount;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <span className={buildClassName(\n          styles.infoRowAmount,\n          isReceived && styles.infoRowAmountGreen,\n          isError && styles.infoRowAmountError,\n        )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </span>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} \n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"textFieldWrapperFullWidth\":\"gaMgEGEN\",\"changellyTextField\":\"A8497ra1\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"textField\":\"hufzN6qP\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\nimport type { FeePrecision } from '../../../util/fee/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport { selectCurrentAccount, selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getTransactionHashFromTxId } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Fee from '../../ui/Fee';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled,\n}: StateProps) {\n  const {\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    txIds,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from hangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status!);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('Swap On Hold');\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('Swap Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('Swap Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('Swap Failed');\n      }\n    } else if (isError) {\n      title = lang('Swap Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = getTransactionHashFromTxId('ton', txIds?.[0] || '');\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: renderedActivity!.id });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: activity!.id });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapperFullWidth}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapperFullWidth, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n                className={styles.changellyTextField}\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!Number(networkFee) || !fromToken) {\n      return undefined;\n    }\n\n    const precision: FeePrecision = activity?.status === 'pending' ? 'approximate' : 'exact';\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Fee')}\n        </span>\n        <div className={styles.textField}>\n          <span>\n            <Fee terms={terms} token={fromToken} precision={precision} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            className={styles.changellyTextField}\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme: global.settings.theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amount\":\"Qy2zkhK5\",\"withStatus\":\"MeZ5UFq3\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationScam\":\"zrLwT6fF\",\"wrapper\":\"U9_RaiXr\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  decimals?: number;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  tokenSymbol?: string;\n  status?: string;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  amount,\n  decimals,\n  tokenSymbol,\n  status,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', false, decimals).split('.');\n\n  function renderAmount() {\n    return (\n      <div className={buildClassName(\n        styles.amount,\n        status && styles.withStatus,\n        isIncoming && !isScam && styles.operationPositive,\n        isScam && styles.operationScam,\n        'rounded-font',\n      )}\n      >\n        {wholePart.trim().replace('\\u202F', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol || TONCOIN.symbol}</span>\n      </div>\n    );\n  }\n\n  if (!status) {\n    return renderAmount();\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      {renderAmount()}\n      <div className={buildClassName(\n        styles.status,\n        isIncoming && !isScam && styles.operationPositive,\n        isScam && styles.operationScam,\n      )}\n      >\n        {status}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiStakingCommonData,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../../config';\nimport { getIsTxIdLocal } from '../../../global/helpers';\nimport { getStakingStateStatus } from '../../../global/helpers/staking';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../global/selectors';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { toDecimal } from '../../../util/decimals';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getNativeToken, getTransactionHashFromTxId } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport NftInfo from '../../transfer/NftInfo';\nimport AmountWithFeeTextField from '../../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isTestnet?: boolean;\n  stakingInfo?: ApiStakingCommonData;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  stakingInfo,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n}: StateProps) {\n  const {\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + STAKING_CYCLE_DURATION_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n  } = renderedTransaction || {};\n  const isLocal = Boolean(id && getIsTxIdLocal(id));\n  const isStaking = renderedTransaction?.type === 'stake' || renderedTransaction?.type === 'unstake';\n  const isUnstaking = renderedTransaction?.type === 'unstake';\n  const isNftTransfer = (\n    renderedTransaction?.type === 'nftTransferred'\n    || renderedTransaction?.type === 'nftReceived'\n    || Boolean(renderedTransaction?.nft)\n  );\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = isTransactionWithPoisoning || Boolean(transaction?.metadata?.isScam);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? getTransactionHashFromTxId(chain, id) : undefined;\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const [withUnstakeTimer, setWithUnstakeTimer] = useState(false);\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    transitionClassNames: transactionIdClassNames,\n  } = useShowTransition(Boolean((!isLocal || chain === 'tron') && transactionUrl));\n\n  const state = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = state && getStakingStateStatus(state);\n  const startOfStakingCycle = state?.type === 'nominators' ? state.start : stakingInfo?.round?.start;\n  const endOfStakingCycle = state?.type === 'nominators' ? state.end : stakingInfo?.round?.end;\n\n  useEffect(() => {\n    if (transaction?.type !== 'unstakeRequest' || !startOfStakingCycle) {\n      return;\n    }\n\n    const shouldDisplayTimer = Boolean(stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle;\n    setWithUnstakeTimer(shouldDisplayTimer);\n  }, [stakingStatus, startOfStakingCycle, transaction, isLongUnstakeRequested]);\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    transitionClassNames: unstakeTimerClassNames,\n  } = useShowTransition(withUnstakeTimer);\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const openHiddenComment = useLastCallback(() => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function getTitle(inProgress: boolean) {\n    if (isUnstaking) {\n      return inProgress ? 'Unstaking' : 'Unstaked';\n    }\n    if (isIncoming) return 'Received';\n\n    return inProgress ? 'Sending' : 'Sent';\n  }\n\n  function renderHeader() {\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {lang(getTitle(isLocal))}\n            {isLocal && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n              />\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (isIncoming || !fee || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <AmountWithFeeTextField\n        label={lang('Fee')}\n        amount={toDecimal(fee, nativeToken.decimals)}\n        currency={nativeToken.symbol}\n      />\n    );\n  }\n\n  function renderComment() {\n    if ((!comment && !encryptedComment) || (transaction?.type && !isNftTransfer)) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? lang('Decrypt') : lang('Display')}\n          spoilerCallback={openHiddenComment}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={buildClassName(styles.textFieldWrapperFullWidth, transactionIdClassNames)}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, unstakeTimerClassNames)}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderTransactionContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <NftInfo nft={nft} withTonExplorer />\n        ) : (\n          <TransactionAmount\n            isIncoming={isIncoming}\n            isScam={isScam}\n            amount={amount ?? 0n}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            status={isUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n          />\n        )}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {!isUnstaking && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address!}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        <div className={styles.footer}>\n          {!isStaking && !isIncoming && !isNftTransfer && (\n            <Button onClick={handleSendClick} className={styles.button}>\n              {lang('Repeat')}\n            </Button>\n          )}\n          {!IS_CORE_WALLET && isStaking && (\n            <Button\n              onClick={handleStartStakingClick}\n              className={buildClassName(styles.button, isUnstaking && stakingStatus === 'active' && styles.buttonWide)}\n            >\n              {lang('Stake Again')}\n            </Button>\n          )}\n          {isUnstaking && stakingStatus === 'active' && (\n            <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n              {lang('Unstake More')}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n\n    const stakingInfo = global.stakingInfo;\n    const stakingStates = selectAccountStakingStates(global, accountId);\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isTestnet: global.settings.isTestnet,\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme: global.settings.theme,\n      stakingInfo,\n      stakingStates,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  // eslint-disable-next-line no-null/no-null\n  const timerRef = useRef<number | undefined>(null);\n\n  const { transitionClassNames } = useShowTransition(isOpen);\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        className={buildClassName(styles.notification, transitionClassNames)}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n          // eslint-disable-next-line react/jsx-no-bind\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nfts-container > .Transition_slide-active [data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: React.ReactNode;\n  ref?: React.LegacyRef<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<React.ReactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen && !isHidden,\n    undefined,\n    isFirstRender && !shouldAnimateFirstRender,\n    isCustom ? false : undefined,\n    noCloseTransition,\n  );\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={buildClassName(className, transitionClassNames)}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n};\n\nfunction Actions({\n  onClose, nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value === 'send') {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPosition=\"top\"\n        menuPositionHorizontal=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleOpenUrl}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement | null>(null);\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={styles.contentDescription} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: Function | undefined;\nlet cancelZoomAnimation: Function | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const activeSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const leftSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const rightSlideRef = useRef<HTMLDivElement>(null);\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n              || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n            || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo, useEffect, useLayoutEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useLayoutEffect(() => {\n    document.body.classList.toggle('is-media-viewer-open', isOpen);\n  }, [isOpen]);\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { shortenAddress } from '../../../util/shortenAddress';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, { title, addressByChain }]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: title || shortenAddress(addressByChain.ton)!,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET);\n    }\n  }, [isOpen]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n    const fullClassName = buildClassName(\n      styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!IS_CORE_WALLET && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"passcode\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n            previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n            noLoop={false}\n            nonInteractive\n            className={styles.stickerNativeBiometric}\n          />\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  handleBackClick,\n  animationLevel,\n  isInsideModal,\n  isTrayIconEnabled,\n  onTrayIconEnabledToggle,\n}: OwnProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n  } = getActions();\n  const lang = useLang();\n\n  const THEME_OPTIONS = [{\n    value: 'light',\n    name: lang('Light'),\n    icon: lightThemeImg,\n  }, {\n    value: 'system',\n    name: lang('System'),\n    icon: systemThemeImg,\n  }, {\n    value: 'dark',\n    name: lang('Dark'),\n    icon: darkThemeImg,\n  }];\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt={name} className={styles.themeImg} />\n          </div>\n          <span>{name}</span>\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAppearance);\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import type { RefObject } from 'react';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: React.ReactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: RefObject<HTMLDivElement>;\n  scrollRef?: RefObject<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const buttonRef = useRef<HTMLDivElement>(null);\n\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import type { RefObject } from 'react';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: RefObject<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const tokensRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sortableContainerRef = useRef<HTMLDivElement>(null);\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCY_LIST, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    setLocalBaseCurrency(currency as ApiBaseCurrency);\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={CURRENCY_LIST}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Investor View')}\n\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                tooltipClassName={styles.tooltip}\n                iconClassName={styles.iconQuestion}\n              />\n\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tiny Transfers')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tokens With No Cost')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ origin: dapp!.origin });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((origin: string) => {\n    const dapp = dapps.find((d) => d.origin === origin);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapp(dapp: ApiDapp) {\n    const {\n      iconUrl, name, url, origin,\n    } = dapp;\n\n    return (\n      <DappInfo\n        key={origin}\n        iconUrl={iconUrl}\n        name={name}\n        url={url}\n        origin={origin}\n        className={styles.dapp}\n        onDisconnect={handleDisconnectDapp}\n      />\n    );\n  }\n\n  function renderDapps() {\n    const dappList = dapps.map(renderDapp);\n\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dappList}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n| 'web'\n| 'extension'\n| 'firefox-extension'\n| 'opera-extension'\n| 'electron'\n| 'android'\n| 'android-air'\n| 'android-air-direct'\n| 'android-direct'\n| 'ios'\n| 'ios-air'\n| 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport {\n  APP_ENV,\n  APP_VERSION,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n}\n\nconst NETWORK_OPTIONS = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  onClose,\n  isTestnet,\n  isCopyStorageEnabled,\n  currentAccountId,\n  accountsById,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: string) => {\n    startChangingNetwork({ network: newNetwork as ApiNetwork });\n    onClose();\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (IS_EXTENSION) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!') as string, icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n    >\n      <div className={styles.developerTitle}>\n        {lang('Developer Options')}\n      </div>\n\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div\n        className={buildClassName(styles.settingsBlock, styles.logBlock)}\n        onClick={handleDownloadLogs}\n      >\n        <div className={buildClassName(styles.item, styles.item_small)}>\n          {\n            IS_EXTENSION\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n\n  const accountsById = global.accounts?.byId;\n\n  return {\n    currentAccountId,\n    accountsById,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString(\n  {\n    currentAccountId,\n    accountsById,\n  }: StateProps,\n) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, isHardware } = accountsById[accountId];\n    acc[accountId] = {\n      addressByChain,\n      isHardware,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  return JSON.stringify(\n    {\n      time: new Date(),\n      environment: APP_ENV,\n      version: APP_VERSION,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ].sort((a, b) => a.time.getTime() - b.time.getTime()),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const {\n    transitionClassNames,\n  } = useShowTransition(isNftHidden, handleUnhide);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.item, transitionClassNames)}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const onClick = () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && Object.keys(enabledAccounts).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT;\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then(m => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            { isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId!, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from 'native-dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport { Dialog } from 'native-dialog';\nimport React, {\n  memo, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTOLOCK_OPTIONS_LIST,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nconst DEFAULT_AUTOLOCK_OPTION: AutolockValueType = 'never';\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAuthLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    const mnemonic = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n    setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      await enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes dont match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: string) => {\n    setAppLockValue({ value: value as AutolockValueType, isEnabled: true });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n              <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n              {lang('$back_up_security')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(modalStyles.transitionContent, styles.content)}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype Token = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  isInsideSettings?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  token?: Token;\n  userTokens?: Token[];\n  popularTokens?: Token[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: { [K in ApiChain]?: unknown };\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  Token,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  isInsideSettings,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    importToken,\n    resetImportToken,\n    openSettingsWithState,\n    setSwapTokenIn,\n    setSwapTokenOut,\n    addToken,\n    addSwapToken,\n  } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<Token[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: Token[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug);\n  }, [pairsBySlug, tokenInSlug, isMultichain]);\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, availableChains, shouldHideNotSupportedTokens),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, availableChains, shouldHideNotSupportedTokens),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = isInsideSettings ? allTokens : swapTokensWithFilter;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, isInsideSettings, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.Token;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if (isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: Token) => {\n    searchInputRef.current?.blur();\n\n    if (isInsideSettings) {\n      addToken({ token: selectedToken as UserToken });\n    } else {\n      addSwapToken({ token: selectedToken as UserSwapToken });\n      const setToken = shouldFilter ? setSwapTokenOut : setSwapTokenIn;\n      setToken({ tokenSlug: selectedToken.slug });\n    }\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: Token) {\n    const isAvailable = !shouldFilter || currentToken.canSwap;\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n    const handleClick = isAvailable ? () => handleTokenClick(currentToken) : undefined;\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <div\n        key={currentToken.slug}\n        className={buildClassName(\n          styles.tokenContainer,\n          !isAvailable && styles.tokenContainerDisabled,\n        )}\n        onClick={handleClick}\n      >\n        <div className={styles.tokenLogoContainer}>\n          <TokenIcon\n            token={currentToken}\n            withChainIcon\n            className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n          />\n\n          <div className={styles.nameContainer}>\n            <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n              {currentToken.name}\n            </span>\n            <span\n              className={buildClassName(\n                styles.tokenNetwork,\n                !isAvailable && styles.tokenTextDisabled,\n              )}\n            >\n              {descriptionText}\n            </span>\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n          >\n            {formatCurrency(toDecimal(currentToken.amount, currentToken?.decimals), currentToken.symbol)}\n          </span>\n          <span className={buildClassName(\n            styles.tokenValue,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n          >\n            {tokenPrice}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTokenGroup(tokens: Token[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: Token[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: Token) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.Token:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { pairs: pairsBySlug, tokenInSlug } = global.currentSwap ?? {};\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug: pairsBySlug?.bySlug,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n  };\n})(TokenSelector));\n\nfunction filterAndSortTokens(\n  tokens: Token[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n    const canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends Token>(\n  tokens: T[],\n  availableChains: { [K in ApiChain]?: unknown },\n  isFilterActive: boolean,\n): T[] {\n  if (!isFilterActive) {\n    return tokens;\n  }\n  return tokens.filter((token) => token.chain in availableChains);\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        isInsideSettings\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              &thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletInfo } from '../../api/types';\nimport type {\n  Account, GlobalState, HardwareConnectState, UserToken,\n} from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  HELPCENTER_URL,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isHardwareAccount?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  arePushNotificationsAvailable?: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\nconst MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isHardwareAccount,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  arePushNotificationsAvailable,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions?.map((v) => {\n      const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n      const balanceInCurrency = formatCurrency(\n        toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n        shortBaseSymbol,\n      );\n\n      const accountTokens = [tonBalance];\n\n      return {\n        address: v.address,\n        version: v.version,\n        totalBalance: balanceInCurrency,\n        tokens: accountTokens,\n      } satisfies Wallet;\n    }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions]);\n\n  const {\n    transitionClassNames: telegramLinkClassNames,\n    shouldRender: isTelegramLinkRendered,\n  } = useShowTransition(isTonMagicEnabled);\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: IS_DELEGATED_BOTTOM_SHEET ? handleBackClick : handleBackOrCloseAction,\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n      },\n    });\n  }, [prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div className={buildClassName(styles.item, telegramLinkClassNames)} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {!isHardwareAccount && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              <div className={styles.block}>\n                <a\n                  href={MTW_CARDS_WEBSITE}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                  {lang('MyTonWallet Cards NFT')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n              </div>\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode as never] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={HELPCENTER_URL[langCode as never] ?? HELPCENTER_URL.en}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n        <SettingsDeveloperOptions\n          isOpen={isDeveloperModalOpen}\n          isTestnet={isTestnet}\n          isCopyStorageEnabled={isCopyStorageEnabled}\n          onClose={handlCloseDeveloperModal}\n        />\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET && !isInsideModal}\n              state={hardwareState}\n              isLedgerConnected={isLedgerConnected}\n              isTonAppConnected={isTonAppConnected}\n              isRemoteTab={isRemoteTab}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isHardwareAccount = selectIsHardwareAccount(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1 } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isHardwareAccount,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    hardwareWallets,\n    accounts,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: React.ReactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { IS_CLIPBOARDS_SUPPORTED } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut?.slug!,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = (lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-arrow-right', styles.swapArrowIconTitle)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[]);\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: <Countdown\n            timestamp={timestamp}\n            deadline={CHANGELLY_WAITING_DEADLINE}\n            onCompleted={handleTimeout}\n          />,\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('SwapTitle')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const savedAddressName = useMemo(() => {\n    return toAddress && savedAddresses?.find((item) => {\n      return item.address === toAddress && item.chain === chain;\n    })?.name;\n  }, [toAddress, chain, savedAddresses]);\n  const addressName = savedAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? 'Burn NFT'\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress!}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentTransfer: global.currentTransfer,\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  GlobalState, HardwareConnectState, SavedAddress, UserToken,\n} from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens, savedAddresses, hardwareState, isLedgerConnected, isTonAppConnected, isMediaViewerOpen, isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransferPassword({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransferHardware();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts!.length > 1 ? lang('%amount% NFTs', { amount: nfts!.length }) : nfts![0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove: Set<Confetti> = new Set([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width : number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen);\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div className={buildClassName(styles.root, transitionClassNames)} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" />\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\n\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './AppLocked';\nimport Auth from './auth/Auth';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  });\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen onClose={handleCloseBrowserTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && <SwapModal />}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          {!IS_DELEGATED_BOTTOM_SHEET && <Notifications />}\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && <Dialogs />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <ConfettiContainer />}\n          {IS_CAPACITOR && !IS_DELEGATED_BOTTOM_SHEET && <InAppBrowser />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <LoadingOverlay />}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n\nasync function handleCloseBrowserTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n  getActions().initApi();\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","CapacitorPlatforms","win","defaultPlatformMap","Map","set","name","capPlatforms","currentPlatform","platforms","addPlatform","platform","setPlatform","has","get","createCapacitorPlatforms","initPlatforms","globalThis","self","window","g","ExceptionCode","CapacitorException","Error","constructor","message","code","data","super","this","Capacitor","_a","_b","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","androidBridge","webkit","messageHandlers","bridge","getPlatformId","isNativePlatform","isPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","PluginHeaders","find","h","registerPlugin","jsImplementations","registeredPlugin","console","warn","proxy","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","args","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","m","rtype","options","nativePromise","toString","callback","nativeCallback","createPluginMethod","Object","defineProperty","value","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","Promise","resolve","Proxy","_","Set","keys","convertFileSrc","filePath","handleError","err","error","pluginMethodNoop","_target","reject","Exception","DEBUG","isLoggingEnabled","isNative","createCapacitor","initCapacitorGlobal","WebPlugin","config","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","push","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","length","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","addEventListener","removeEventListener","arg","encode","str","encodeURIComponent","replace","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","key","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","Date","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","assign","method","headers","type","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","includes","params","URLSearchParams","entries","FormData","form","append","Headers","delete","JSON","stringify","CapacitorHttpPluginWeb","request","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","Array","isArray","slice","substr","buildUrlParams","shouldEncodeUrlParams","response","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","result","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","Directory","Encoding","ImpactStyle","NotificationType","ONE_TON","TOKEN_TRANSFER_FORWARD_AMOUNT","NFT_TRANSFER_AMOUNT","NFT_TRANSFER_FORWARD_AMOUNT","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","TON_GAS_REAL","STAKE_COMMENT","UNSTAKE_COMMENT","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","WORKCHAIN","Workchain","BaseChain","TRANSFER_TIMEOUT_SEC","W5_MAX_MESSAGES","OpCode","ContractType","Wallet","Staking","JettonStakingOpCodes","GET_STATIC_DATA","REPORT_STATIC_DATA","GET_STORAGE_DATA","REPORT_STORAGE_DATA","EXCESSES","TRANSFER_JETTON","INTERNAL_TRANSFER","TRANSFER_NOTIFICATION","PROVIDE_WALLET_ADDRESS","TAKE_WALLET_ADDRESS","BURN_JETTON","ADD_REWARDS","SEND_CLAIMED_REWARDS","SEND_UNSTAKED_JETTONS","APPROVE_STAKE","CANCEL_STAKE","ADD_REWARD_JETTONS","CLAIM_COMMISSIONS","REQUEST_UPDATE_REWARDS","CLAIM_REWARDS","RECEIVE_JETTONS","UNSTAKE_REQUEST","CANCEL_UNSTAKE_REQUEST","UPDATE_REWARDS","CONFIRM_TRANSFER","DEPLOY_NEW_POOL","SEND_COMMISSIONS","SET_CODE","CHANGE_CREATION_FEE","CHANGE_CONTENT","UPDATE_CODES","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","Dividers","COMMISSION_DIVIDER","REWARDS_DIVIDER","DISTRIBUTION_SPEED_DIVIDER","BigInt","DISTRIBUTED_REWARDS_DIVIDER","ApiBaseError","displayError","ApiUserRejectsError","arguments","undefined","ApiServerError","statusCode","ApiCommonError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","ApiTransactionError","HardwareBlindSigningNotEnabled","handleServerError","callbackState","createWindowProvider","worker","api","channel","target","sendToOrigin","transferables","postMessage","e","_e$error","_e$error2","logDebugError","stack","_e$reason","_e$reason2","reason","handleErrors","onmessage","_message$data","onUpdate","origin","update","_api$init","promise","init","messageId","withCallback","_len","callbackArgs","_key","lastArg","obj","ArrayBuffer","ImageBitmap","arrayBuffer","isCanceled","onMessage","createPostMessageInterface","windowMethods","WINDOW_PROVIDER_CHANNEL","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","connector","isInitialized","initApi","initArgs","Worker","URL","createConnector","IS_IOS","ensureWorkerPing","setTimeout","callApi","fnName","logDebugApi","callApiWithThrow","_len2","_key2","startedAt","now","isResolved","race","pause","_worker","terminate","ApiAuthError","ApiTransactionDraftError","ApiLiquidUnstakeMode","APP_ENV","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","IS_PRODUCTION","IS_TEST","IS_EXTENSION","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONCENTER_MAINNET_URL","TONCENTER_MAINNET_KEY","TONCENTER_TESTNET_URL","TONCENTER_TESTNET_KEY","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","MTW_CARDS_BASE_URL","MYTONWALLET_PROMO_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","HELPCENTER_URL","EMPTY_HASH_VALUE","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","langCode","nativeName","rtl","IS_STAKING_DISABLED","STAKING_CYCLE_DURATION_MS","DEFAULT_FEE","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TONCOIN","symbol","slug","decimals","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","TRC20_USDT","TON_USDT","tokenAddress","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","TOKEN_INFO","toncoin","quote","price","priceUsd","percentChange24h","trx","image","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FISRT_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","SHORT_CURRENCY_SYMBOL_MAP","USD","EUR","RUB","CNY","CURRENCY_LIST","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","DEFAULT_NOMINATORS_STAKING_STATE","start","end","pendingDepositAmount","JVAULT_URL","ALL_TON_DNS_ZONES","suffixes","baseFormat","resolver","isTelemint","isUnofficial","TON_DNS_ZONES","filter","_ref","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","round","x","sd","rm","more","xc","c","RM","unshift","pop","doExponential","isNonzero","s","join","n","charAt","abs","cmp","y","isneg","yc","i","j","l","div","Big","a","b","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","shift","eq","gt","gte","lt","lte","minus","sub","t","xlty","plus","xe","ye","reverse","mod","ygtx","times","neg","add","pow","one","prec","sqrt","half","Math","toExponential","mul","toFixed","Symbol","for","toJSON","NE","PE","toNumber","Number","strict","toPrecision","valueOf","_Big_","TypeError","String","nl","test","search","substring","parse","prototype","roundDown","roundHalfUp","roundHalfEven","roundUp","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","safeExec","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttleWith","throttledFn","fastRaf","requestMeasure","cb","requestMutation","requestForcedReflow","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","apply","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","startsWith","clear","observe","childList","attributes","subtree","characterData","suppressStrict","_observer","disconnect","_ref2","propName","pv","array","f","o","d","naturalOrder","sum","max","MMCQ","getColorIndex","PQueue","comparator","contents","sorted","sort","peek","size","debug","VBox","r1","r2","g1","g2","b1","b2","histo","vbox","CMap","vboxes","count","volume","medianCutApply","rw","gw","bw","maxw","copy","total","partialsum","lookaheadsum","color","left","right","vbox1","vbox2","d2","dim1","dim2","count2","min","doCut","force","_volume","_count_set","npix","_count","avg","_avg","hval","ntot","rsum","gsum","bsum","pixel","rval","gval","bval","palette","vb","nearest","d1","pColor","forcebw","lowest","idx","highest","quantize","pixels","maxcolors","getHisto","rmin","rmax","gmin","gmax","bmin","bmax","vboxFromPixels","pq","iter","lh","ncolors","niters","pq2","cmap","module","exports","Deferred","_defineProperty","resolved","deferred","ConnectorClass","shouldUseJson","targetOrigin","destroy","messageData","requestStates","requestStatesByCallback","generateUniqueId","payload","requestState","catch","finally","cancelCallback","progressCallback","bigintReviver","_requestState$callbac","_data$error","_data$error2","rawData","handleMessage","parseAccountId","accountId","parts","network","buildAccountId","account","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","progress","applyStyles","element","css","style","AssertionError","metadata","BIGINT_PREFIX","bigintAbs","bigintDivideToNumber","num","fromDecimal","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","SECOND","MINUTE","DAY","formatDayToStringWithCache","withCache","dayStartAt","noYear","monthFormat","noDay","withTime","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","minutes","floor","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","daysPlural","daysValue","formatToParts","hoursPlural","hoursValue","minutesPlural","minutesValue","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","getHours","padStart","getMinutes","setHours","ten","toDecimal","noFloor","toBig","roundDecimal","isDnsDomain","zone","suffix","endsWith","base","getDnsDomainZone","IS_EXTENSION_PAGE_SCRIPT","location","protocol","random","userAgent","navigator","maxTouchPoints","shouldShowAlert","throttledAlert","throttle","alert","handleErrorEvent","ErrorEvent","preventDefault","buildCollectionByKey","collection","byKey","member","groupBy","groupKey","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","unique","compact","Boolean","areSortedArraysEqual","array1","array2","every","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","filterValues","MAX_COMMENT_SIZE","BROKEN_CONNECTION_ERRORS","isValidLedgerComment","comment","charCodeAt","isAscii","isLedgerCommentLengthValid","isLedgerConnectionBroken","MAX_LOG_LENGTH","logs","errorReplacer","addLog","log","time","getLogs","level","logDebug","obj1","obj2","dir","logSelfXssWarnings","selfXssWarnings","es","zh","language","SAFE_EXEC_ENABLED","rescue","always","shouldIgnoreError","debounce","ms","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","interval","isPending","_args","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","withTimeoutFallback","requestAnimationFrame","currentCallbacks","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","timeRemaining","concat","timeout","onBeforeUnload","isLast","waitFor","attempts","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","_window$chrome","chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","parseInt","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram$WebA","_window$Telegram","Telegram","WebApp","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","cache","WeakMap","fnCache","cacheKey","cached","newValue","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","base64","ieee754","customInspectSymbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","encodingOrOffset","allocUnsafe","string","encoding","isEncoding","actual","write","fromString","isView","arrayView","isInstance","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","isBuffer","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","val","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","Infinity","leadSurrogate","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","isNaN","LN2","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","create","def","current","getOwnPropertyNames","definition","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","values","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","useUniqueId","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","typed","TeactNContainer","useUnmountCleanup","React","_extends","getActions","addActionHandler","_actionHandlers$name","handleAction","withGlobal","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","isTestnet","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectCurrentAccountState","selectAccountState","byAccountId","selectFirstNonHardwareAccount","isHardware","selectAccountSettings","selectCurrentAccountSettings","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","selectAccountIdByAddress","address","requiredAccount","addressByChain","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","nfts","byAddress","selectIsMultichainAccount","_selectAccount","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","_amountsBySlug$tokenS","isScam","isDangerous","fullFee","nftCount","transaction","displayedAmount","selectCurrentDappTransferTotals","currentDappTransfer","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","tokenInfo","accountSettings","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","bySlug","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","_selectCurrentAccount2","balances","selectCurrentToncoinBalance","_selectAccountSetting","selectTokenAddress","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","_selectCurrentAccount3","token","maxToken","currentToken","getIsTinyOrScamTransaction","_transaction$metadata","_token$quote$priceUsd","getIsTxIdLocal","txId","getIsSwapId","resolveSwapAssetId","asset","_asset$tokenAddress","resolveSwapAsset","anyId","_bySlug$anyId","getIsSupportedChain","getIsInternalSwap","toAddress","isMultichain","selectNewestTxTimestamps","activities","newestTransactionsBySlug","timestamp","selectAccountTxTokenSlugs","_selectAccountState5","idsBySlug","AppState","AuthState","BiometricsState","TransferState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getTransactionHashFromTxId","localIdSign","transactionHash","getChainBySlug","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","_balancesBySlug$slug","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount4","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","_selectCurrentAccount5","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","_fullFee$token","_fullFee$native","getDieselTokenAmount","_diesel$amount","isValidAddressOrDomain","allowPrefix","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","_selectAccountState$s","staking","stakingDefault","selectAccountStakingState","_selectAccountState$s2","stakingId","shouldUseNominators","selectAccountStakingHistory","accountState","stakingHistory","_URLSearchParams$get","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestTxTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","randomBytes","crypto","getRandomValues","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","getWindowSize","innerWidth","height","screenHeight","screen","safeAreaTop","getSafeAreaTop","safeAreaBottom","getSafeAreaBottom","Keyboard","patchCapacitorAppVh","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","closeFullscreen","onFullscreenFailed","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","_getTelegramApp","updateBiometricToken","updated","verifyIdentity","_getTelegramApp2","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","_extensions$getCredBl","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","openUrl","isExternal","couldOpenApp","completed","openAppSafe","open","openBrowser","handleOpenUrl","currentTarget","resolveRenderPromise","renderPromise","TON_PROTOCOL","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","queriesMap","createQueryEntry","query","mql","dispatchers","passive","useMediaQuery","setState","_options$initializeWi","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","DeeplinkCommand","urlAfterSignIn","processDeeplink","isFromInAppBrowser","isTonConnectDeeplink","openLoadingOverlay","closeLoadingOverlay","returnUrl","processTonConnectDeeplink","isSelfDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","pathname","searchParams","command","isLedger","ledger","CheckinWithR","_pathname$match","match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","tab","host","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","isTonDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","param","_url$searchParams$get","PushNotifications","selectNotificationTonAddressesSlow","accountIds","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","notificationData","action","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","addresses","capture","INAPP_BROWSER_OPTIONS","launchUrl","statusBarHeight","updateSafeAreaValues","safeAreaInsets","insets","getStatusBarHeight","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","types","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","Light","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","_getTelegramApp3","textCopyEl","tabIndex","className","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","formatCurrencySimple","getShortCurrencySymbol","_SHORT_CURRENCY_SYMBO","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","zh-Hans","zh-Hant","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","_value$index","processTemplate","processedParts","currentString","valueNode","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","diff","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","useStateRef","ref","useLastCallback","_ref$current","blurCallbacks","focusCallbacks","isFocused","hasFocus","handleBlur","handleFocus","useBackgroundMode","onBlur","onFocus","lastOnBlur","lastOnFocus","isBackgroundModeActive","telegramApp","onEvent","BroadcastChannel","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","callActionInMain","callActionInNative","shortenAddress","fromRight","FILLER","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","INITIAL_STATE","appState","Auth","auth","none","biometrics","None","hardware","slippage","currentStaking","tokenPriceHistory","Initial","theme","animationLevel","areTinyTransfersHidden","canPlaySounds","dialogs","notifications","stateVersion","restrictions","isLimitedRegion","isSwapDisabled","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","node","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","_partial","partial","titlePostfix","shouldForceAccountEdit","_partial$title","RegExp","accountAmount","isMainnet","updateAccount","createAccountsFromGlobal","firstNetworkAccount","secondNetworkAccount","updateCurrentAccountState","updateAccountState","withDeepCompare","updateHardware","hardwareUpdate","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","_currentSwap$amountKe","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","networkFee","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","pairs","doesSwapChangeRequireEstimation","_ref4","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","isLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateActivitiesIsLoading","updateActivitiesIsHistoryEndReached","isReached","_activities$isHistory","isHistoryEndReachedBySlug","isMainHistoryEndReached","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","compareActivities","updateAccountSettingsBackgroundNft","nft","_settings$cardBackgro","cardBackgroundNft","updateVesting","switchAccount","newNetwork","switchAccountAndClearGlobal","clearSwapPairsCache","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref17","updateTokenInfo","Main","_mnemonic$length","isFirstAccount","firstNonHardwareAccount","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","tonAddress","tronAddress","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","_selectAccounts2","disclaimerAndBackup","_selectAccounts3","hardwareSelectedIndices","ledgerApi","wallets","wallet","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_selectAccounts4","hardwareState","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","connectLedger","transport","Failed","_selectAllHardwareAcc","waitLedgerTonApp","isRemoteTab","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","lastUsedTransport","isLedgerDisconnected","noRetry","connectHardwareWallet","_ref10","_global$hardware$hard","oldHardwareWallets","_ref11","Connect","_ref12","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","_ref13","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref14","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","_selectAccounts5","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref15","_global$accounts$byId","existAccountId","currentWalletTitle","ledgerInfo","_ref16","shouldLoadWithBudget","shouldFetchMore","fetchedActivities","tokenIds","toTxId","toTimestamp","filteredResult","newById","newOrderedIds","currentActivities","fetchTokenTransactions","_selectAccountTxToken","_selectAccountTxToken2","_selectAccountState3","_currentActivities$id","tonTokenSlugs","tronTokenSlugs","_selectAccountState4","idsMain","selectLastMainTxTimestamp","fetchAllTransactions","isMnemonicChecked","promiseId","isSigned","_global$tokenInfo","_settings$importedSlu","_accountSettings$orde","_token$price","_token$priceUsd","_token$change24h","importedSlugs","_global$tokenInfo$byS","_selectAccountState$b","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","getTonOperationFees","operation","gas","real","getTonStakingFees","stake","unstake","claim","BottomSheet","buildClassName","stopEvent","stopPropagation","listenOnce","handleEvent","useLang","useEffectOnce","langProvider","isOpen","onCloseTransitionEnd","noFirstOpenTransition","noCloseTransition","closeDuration","noOpenTransition","isClosed","setIsClosed","closeTimeoutRef","hasOpenClassName","setHasOpenClassName","exec","shouldHaveOpenClassName","isClosing","shouldRender","transitionClassNames","hasShownClass","hasOpenClass","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","tonConnectGetDeviceInfo","maxMessages","appName","appVersion","maxProtocolVersion","features","_navigator","userAgentData","devicePlatform","WebViewBridgeMessageType","getInjectableJsMessage","useDappBridge","endpoint","inAppBrowserRef","requestId","setRequestId","bridgeObject","deviceInfo","protocolVersion","isWalletBrowser","connect","_inAppBrowserRef$curr","_inAppBrowserRef$curr2","buildConnectError","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","hide","buildDappRequest","show","_inAppBrowserRef$curr3","UNKNOWN_ERROR","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","_inAppBrowserRef$curr4","_inAppBrowserRef$curr5","callResponse","applyScrollPatch","_inAppBrowserRef$curr6","_inAppBrowserRef$curr7","_inAppBrowserRef$curr8","bridgeInjectionCode","sendEvent","useWebViewBridge","bridgeObj","objectToInjection","funcs","funcName","invokeCapFunc","functionResponse","executeScript","openDeeplinkOrUrl","close","methodName","invocationId","inAppBrowser","currentBrowserOptions","closeBrowser","useShowTransition","handleBrowserClose","enable","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","originalHide","originalClose","closedPromise","getInAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","ASSET_LOGO_PATHS","btc","usdt","my","buildStakingDropdownItems","tokenBySlug","hasNominatorsStake","getIsActiveStakingState","hasLiquidStake","stateToken","logoPath","icon","getStakingStateStatus","isUnstakeRequested","unclaimedRewards","StakeInitial","UnstakeInitial","isUnstaking","resetHardwareWalletConnect","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","_global$stakingInfo","stakingInfo","liquid","available","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","UnstakeConfirmHardware","StakeConfirmHardware","_global$stakingInfo2","stakingBalance","submitLedgerUnstake","submitLedgerStake","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","stakingState","ClaimConfirmHardware","_getTonStakingFees$cl2","submitLedgerStakingClaim","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","_options$initialZoom","_options$minZoom","_options$maxZoom","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","closest","onMove","onRelease","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","_options$swipeThresho","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","Style","Animation","StatusBar","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","useEffectWithPrevDeps","prevDepsRef","prevDeps","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","next","shouldSkipUndefined","useSyncEffect","usePrevious","cleanupRef","_cleanupRef$current","_effect","_cleanupRef$current2","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","handleBackButtonClick","offClick","PATH_BASE","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","isDoubled","styles","ariaLabel","forFormId","isSubmit","isPrimary","isSimple","isText","isRound","isSmall","isDestructive","shouldStopPropagation","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","sizeSmall","primary","disabled","destructive","clicked","LoadingDots","loadingDots","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","fragment","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","_componentInstance$co","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","textContent","remount","getNextSibling","_componentInstance$co2","renderChildren","forceMoveToEnd","$currentAsReal","$newAsTag","processControlled","currentEntries","newEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","_extraClasses$get","setExtraStyles","standardStyles","$head","containerId","elementRef","TeactDOM","CLOSE_DURATION","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","dialogRef","dialogClassName","titleClassName","contentClassName","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onClose","onCloseAnimationEnd","modalRef","localDialogRef","swipeDownDateRef","useHideBrowser","animationDuration","isSlideUp","disableVerticalSwipes","enableVerticalSwipes","prevIsOpen","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","prevForceFullNative","blurTimeout","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","backdropFullClass","backdrop","contentFullClassName","content","contentCompact","Portal","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","explainSwapFee","shouldSwapBeGasless","_input$ourFee3","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","_input$ourFee4","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","_input$ourFee","_input$ourFee2","explainGasfullSwapFee","getMaxSwapAmount","_ourFeePercent","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","_fullNetworkFee$token","_fullNetworkFee$nativ","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","_terms$native","_terms$token","permissions","isPasswordRequired","getDapps","connectAccountId","proof","ConfirmHardware","signature","signLedgerProof","submitDappConnectHardware","vestingAddress","signedMessages","signLedgerTransactions","isTonConnect","submitDappTransferHardware2","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByOrigin","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","currentPromiseId","nextNewestTxTimestamps","closeDappTransfer","WarningHardware","connectionType","isSse","_global$dappConnectRe","pairsCache","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","currentDexLabel","tokenOut","fromAmount","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","_global$currentSwap$r","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","txIds","backendId","Complete","activityId","transfers","_account$addressByCha","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","swapTransactionRequest","swapItem","WaitTokens","activity","payinAddress","cex","payoutAddress","payinExtraId","transferOptions","transferResult","_transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","_global$currentSwap$p","_global$currentSwap$p2","pairsBySlug","_global$currentSwap$a2","_global$currentSwap$n","isFromAmountMax","_global$currentSwap$a","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","_SERVER_ERRORS_MAP","UnexpectedError","NotEnoughForFee","_estimate$other","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","_availableEstimates$f","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","_global$currentSwap$a3","onLine","txDraft","convertTransferFeesToSwapFees","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","_global$swapTokenInfo","_global$currentSwap$p4","shouldForceUpdate","assetId","_global$currentSwap$p3","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","ids","swaps","nonExistentIds","shouldHide","nonExistentSwaps","newEstimate","baseCurrency","updateTokenPriceHistory","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","InsufficientBalance","_global$currentTransf","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","_result3","_explainedFee$realFee2","rawPayload","parsedPayload","signedMessage","currentResult","submitLedgerNftTransfer","submitLedgerTransfer","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","isNotcoinVouchers","collectionAddress","submitTransferInitial","nftAddresses","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","unfreezeRequestedIds","isConfirmRequested","openVestingModal","unfreezeState","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","createResult","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","chainBalances","_selectAccountSetting2","currentBalances","updateBalances","common","totalProfit","updateStakingInfo","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","currentTokens","_currentTokens$token$","_currentTokens$token$2","updateTokens","updateSwapTokens","currentNfts","orderedAddresses","checkCardNftOwnership","newOwnerAddress","sentNft","_nfts$orderedAddresse2","_nfts$selectedAddress","_nfts$byAddress","selectedAddresses","removedNft","removeNft","ownerAddress","_nfts$orderedAddresse","addNft","isOnSale","updateNft","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","preload","assetPath","audioChannelNum","isUrl","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","playIncomingTransactionSound","play","createBufferSource","destination","_activities$idsMain","fromTokenIds","toTokenIds","isLocal","newestTx","tokenTxIds","updateActivity","_activities$localTran","_activities$byId","localTransactions","addLocalTransaction","fetchTransferDieselState","_selectLocalTransacti","_groups$localUpdates","noForward","updateActivitiesIsLoadingByAccount","_global$byAccountId","_accountState$activit","selectLocalTransactions","withLocalIndex","localIndex","groupName","isIncoming","normalizedAddress","inMsgHash","getRealTxIdFromLocal","groups","localUpdates","localTransaction","localTxId","replacedActivity","updatedIdsBySlug","indexOfTxId","indexOfTxIdMain","updatedByTxId","newestTransaction","replaceLocalTransaction","currentActivityId","_activities$localTran2","_activities$byId2","removeLocalTransaction","newActivities","_activities","_activities$idsMain2","_activities2","_activities4","_activities5","newIdsMain","newIdsBySlug","buildActivityIdsBySlug","replacedIdsBySlug","newIds","_activities3","currentActivityIds","newTxs","newNewestTxsBySlug","txs","newTx","addNewActivities","_byChain$chain","byChain","isFirstTransactionsLoaded","setIsFirstActivitiesLoadedTrue","dataHex","clearCurrentSignature","apiUpdateDappConnect","activeDappOrigin","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","BarcodeFormat","BarcodeValueType","LensFacing","GoogleBarcodeScannerModuleInstallState","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","InvalidAmount","InvalidToAddress","StateInitWithoutBin","InvalidStateInit","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","InactiveContract","NotSupportedHardwareOperation","DebugError","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","hex2rgb","hex","rgbToLab","rgb","z","ACCENT_COLORS","light","dark","useAccentColor","elementRefOrBody","appTheme","accentColor","getCachedImageUrl","cachedResponse","createObjectURL","statusText","clone","APP_VERSION_REGEX","ledgerTabId","preloadedImageUrls","setTheme","setValue","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","useMediaTransition","mediaData","isMediaReady","loading","imageClassName","isLoaded","markIsLoaded","useFlag","draggable","referrerPolicy","onLoad","handleLoad","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGrayWhite","iconClockLightGrayWhite","iconClockGreen","iconClockLightGreen","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGrayWhite","iconClockPreviewLightGreen","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGrayWhite","iconClockDarkGreen","iconClockDarkPurple","iconClockDarkPurpleWhite","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGrayWhite","iconClockPreviewDarkGreen","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","useFocusAfterAnimation","getHideCounter","setHideCounter","showBottomBar","currentCounter","getIsBottomBarHidden","isExploreOpen","areAssetsActive","Assets","openSettings","closeSiteCategory","closeExplore","isHidden","setIsHidden","isWalletTabActive","handleWalletClick","handleExploreClick","handleSettingsClick","useHideBottomBar","hideBottomBar","buildStyle","RLottie","ensureRLottie","default","getRLottie","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","onKeyDown","isPasswordVisible","setIsPasswordVisible","handleInput","finalType","inputFullClass","labelFullClass","htmlFor","scrollHeight","required","handleTogglePasswordVisibility","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","flat","currentTime","getTiming","extractPositionFromTransform","transformRule","onMouseDown","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","stickToFirst","resetStateDelayMs","isMinified","onBiometricsClick","onClearError","onSubmit","isFaceId","canRenderBackspace","isSuccess","prevIsPinAccepted","arePinButtonsDisabled","clearScrollPatch","timeoutId","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","STICKER_SIZE","isBiometricAuthEnabled","operationType","cancelLabel","submitLabel","stickerSize","help","containerClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleSubmit","getPinPadTitle","actionName","modalStyles","AnimatedIconWithPreview","PinPad","shouldRenderFullWidthButton","footerButtonsClassName","footerButtons","footerButtonFullWidth","transitionContent","renderingError","renderBiometricPrompt","Input","buttonHalfWidth","buttonFullWidth","Modal","buttons","forceReflow","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","render","rendered","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","autolockValue","isAppLockEnabled","isHardwareAccount","isNonNativeBiometricAuthEnabled","isManualLockActive","shouldHideBiometrics","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","useAppTheme","coreWalletLogoPath","logoLightPath","logoDarkPath","isLocked","lock","unlock","shouldRenderUi","showUi","hideUi","lastActivityTime","slideForBiometricAuth","setSlideForBiometricAuth","passwordForm","passwordError","setPasswordError","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","forceLockApp","_getInAppBrowser2","handleLock","handleChangeSlideForBiometricAuth","handleSubmitPassword","handlePasswordChange","handleLockScreenHotkey","renderLogo","Image","transitionKey","Transition","isFixedSlide","PasswordForm","getCardNftImageUrl","mtwCardId","APP_VERSION_URL","connectLedgerAndGetHardwareState","newHardwareState","WaitingForBrowser","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","availableTransports","initializeHardwareWalletConnection","shouldDelegateToNative","setHardwareStateToConnecting","tabs","active","windows","windowId","focused","createLedgerTab","popup","getCurrent","onRemoved","closedTabId","closeHardwareWalletModal","onLedgerTabClose","isHardwareModalOpen","LedgerConnectHardware","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref18","_ref19","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref20","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref21","_linkParams$toAddress","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref22","_ref23","chainForOnRampWidgetModal","_ref24","mediaId","mediaType","hiddenNfts","noGhostAnimation","isReceiveModalOpen","isInvoiceModalOpen","Ledger","isLoadingOverlayOpen","_ref25","_ref26","mtwCardType","mtwCardBorderShineType","cachedBlobUrl","img","imageData","canvas","naturalWidth","naturalHeight","ctx","getContext","drawImage","getImageData","extractImageData","pixelArray","imgData","pixelCount","createPixelArray","extractPaletteFromImage","dominantRgb","distances","ac","color1","color2","euclideanDistance","minDistance","extractAccentColorIndex","revokeObjectURL","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","ConnectHardware","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","prevSettings","currentCollectionAddress","_nfts$selectedAddress2","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","_nfts$selectedAddress3","removeFromSelectedAddresses","isVestingModalOpen","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","isExists","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","reducedGlobal","reduceByAccountId","reducedSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestTransactionsBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","initialState","timeEnd","_cached$tokenInfo","backupWallet","_accountState$balance","oldId","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","_scrollTarget$dataset","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","lastCallback","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useCurrentOrPrev","shouldForceCurrent","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","root","withNotch","closeClassName","onBackButtonClick","header_back","header_backIcon","handleBackClick","isInsideModal","handleContentScroll","aboutExtensionTitle","slide","ModalHeader","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","onScroll","logo","titleLink","rel","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","onSelect","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","blur","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","sticker","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","handleChange","containerFullSize","pinPadHeader","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneClassNames","twoClassNames","threeClassNames","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","Checkbox","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","isLogoReady","markLogoReady","btn_about","importButtonsBlock","importText","importButtons","RENDER_COUNT","_useCurrentOrPrev","closeAbout","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","AuthSafetyRules","AuthSecretWords","AuthCheckWords","transitionContainer","transitionSlide","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","accountName","accountFooter","iconLedger","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","usePrevDuringAnimationSimple","durationMs","setPrev","captureEscKeyListener","captureKeyboardListener","ANIMATION_DURATION","menuRef","bubbleClassName","positionX","positionY","transformOriginX","transformOriginY","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","bubbleRef","menu","useVirtualBackdrop","fullBubbleClassName","bubble","transformOriginYStyle","transformOriginXStyle","inPortal","selectedValue","anchorPosition","menuPosition","menuPositionHorizontal","menuStyle","shouldTranslateOptions","buttonClassName","iconClassName","fontIconClassName","menuLeft","setMenuLeft","menuWidth","windowWidth","prevMenuStyle","Menu","fullButtonClassName","item_with_icon","dangerous","withSeparator","separator","item_selected","handleItemClick","itemIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","spinner","inner","DEFAULT_ARROW","DEFAULT_MENU_POSITION_HORIZONTAL","itemClassName","menuClassName","arrow","isMenuOpen","openMenu","closeMenu","selectedItem","selectedItemName","_item$selectedName","handleSelect","buttonArrowIcon","buttonIcon","withMenu","isFullyInteractive","interactive","wide","buttonFullClassName","Spinner","insideButton","DropdownMenu","TRANSPORT_NAMES","usb","bluetooth","isStatic","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForBrowser","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsClassNames","handleConnected","isSingleWallet","handleCloseWithBrowserTab","closeAction","closeLedgerTab","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","settingsStyles","iconBlock","mobile","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","containerStatic","iconBlockSlideStatic","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","iconUrl","onDisconnect","shouldShowDisconnect","handleDisconnect","dappLogo","dappLogo_icon","dappIcon","dappInfo","dappName","dappUrl","dappDisconnect","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","cancelDappConnectRequestConfirm","setDappConnectRequestState","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","skeletonTransitionWrapper","dappInfoSkeleton","dapp_first","dappInfoIconSkeleton","dappInfoTextSkeleton","nameSkeleton","descSkeleton","accountWrapperSkeleton","DappInfo","dapp_push","footer","DappPassword","LedgerConnect","LedgerConfirmOperation","modalDialog","dappname","currentAccount","cancelDappTransfer","setDappTransferScreen","handleAgree","transactionDirection","transactionAccount","accountTitle","accountBalance","transactionDapp","descriptionContent","withTonExplorer","openMediaViewer","tonExplorerTitle","ton_explorer_name","Nft","thumbnail","collectionName","Filesystem","FilesystemWeb","Share","ShareWeb","tryCapacitorShare","share","tryNavigatorShare","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","isMultichainAccount","_addressUrl","addressUrl","isTransaction","spoiler","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","shareData","shareUrl","handleTonExplorerOpen","isActionsMenuOpen","menuItems","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPosition","isWalletAddress","_menuHandlers","changedTouches","clientX","getBoundingClientRect","useDropdownMenu","addressBook","shouldUseMenu","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","MEANINGFUL_CHAR_LENGTH","prefix","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImg","scamImage","chainIcon","shortAddress","onContextMenu","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","menuIcon","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","tokensBySlug","amountTerms","payloadFieldTerm","_token$decimals","_token$symbol","totalCost","getTotalCost","payloadField","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","UNKNOWN_TOKEN","TOKEN_ICONS","_findChainConfig$nati","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","_firstDefinedTerm","convertTermsObjectToList","symbolNode","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","Fee","full_fee","excess_symbol","chain_name","keepDetailsButtonWithoutFee","onDetailsClick","FeeLineContainer","detailsModalContent","detailsModalExplanation","fee_amount","received_amount","warningForPayload","isDetailsModalOpen","openDetailsModal","closeDetailsModal","FeeLine","FeeDetailsModal","explanationWarning","realReceived","DappReturnedDetailsModal","isPayloadExpanded","expandPayload","payloadElement","record","category","votingAddress","vote","renderPayload","NftInfo","InteractiveTextField","displayedToAddress","dataField","receivingAddress","DappAmountField","amountBySlug","renderAmount","_transaction$payload","renderPayloadLabel","payloadField_expanded","payloadFieldExpand","DappTransferFee","totalAmountsBySlug","totalFullFee","totalReceived","showDappTransfer","submitDappTransferConfirm","isSingleTransaction","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","renderTransactionRow","amountText","transactionRow","transactionRowAmount","transactionRowAddress","transactionRowChevron","DappTransfer","hasAmount","transactionList","renderTransactions","buttonsAfterFee","tonAmount","cost","isMediaViewerOpen","_transactions$length","withPayloadWarning","clearDappTransferError","submitDappTransferPassword","submitDappTransferHardware","isDappLoading","needsExtraHeight","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","renderRow","isLarge","rowContainerSkeleton","rowContainerLargeSkeleton","rowTextSkeleton","rowTextLargeSkeleton","rowSkeleton","rowLargeSkeleton","transactionDirectionLeftSkeleton","nameDappSkeleton","descDappSkeleton","transactionDirectionRightSkeleton","transactionDappIconSkeleton","dappInfoDataSkeleton","renderWaitForConnection","DappTransferInitial","DappLedgerWarning","renderSubTransaction","renderPassword","modalDialogExtraHeight","Dialog","DialogWeb","_dialog$title","dismissDialog","openModal","closeModal","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","handleClose","_window$electron5","_window$electron6","UpdateApp","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","clickArg","isSeparator","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","ORIGIN_REPLACEMENTS_BY_ORIGIN","originalUrl","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","renderIcon","HIDDEN_FROM_FEED_DAPP_ORIGINS","dappsFromState","openSettingsWithState","lastOpenedAt","compareDapps","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","extendedIcon","withBorder","badgeText","isTrending","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badge","_global$exploreData","categories","categoryId","CategoryHeader","Site","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","inputRef","suggestionsTimeoutRef","transitionRef","trendingContainerRef","searchValue","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","isSuggestionsVisible","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","searchSuggestions","historyResult","sitesResult","isEmpty","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","openSite","validProtocols","urlObject","isValidUrl","prevIsSearchFocused","handleSiteClick","handleSearchValueChange","handleMenuClose","_inputRef$current","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","suggestionsMenu","_searchSuggestions$hi","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","handleSiteClear","_searchSuggestions$si","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list$index","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialogInsideSettings","metaViewport","defaultViewportContent","allowedZoomViewportContent","formatTransferUrl","buildContentHtml","withRadix","hasDot","formattedWholePart","fractionStr","suffixStr","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","scrollWidth","clearText","_text$trim$replace$re","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","markHasFocus","unmarkHasFocus","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","labelTextClassName","cornerFullClass","_e$currentTarget$text","closeInvoiceModal","setAmount","setComment","hasAmountError","setHasAmountError","invoiceUrl","dropdownItems","handleAmountInput","stringValue","contentTitle","RichNumberInput","tokenDropdown","invoiceComment","labelForInvoice","invoiceLinkField","stopById","EMPTY_RECT","useMenuPosition","anchor","getTriggerElement","getRootElement","getMenuElement","getLayout","setPositionX","setPositionY","setTransformOriginX","setTransformOriginY","withScroll","setWithScroll","setMenuStyle","triggerEl","anchorX","anchorY","menuEl","rootEl","marginTop","menuElWidth","menuElHeight","menuRect","rootRect","horizontalPosition","verticalPosition","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","menuMaxHeight","offsetX","offsetY","previousActiveTab","onMenuItemClick","tabRef","contentRef","hasMenu","tabEl","prevTabEl","platformEl","prevPlatformEl","shiftLeft","offsetLeft","scaleFactor","SCROLL_DURATION","activeTab","big","onSwitchTab","activeTabElement","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","_CHAIN_ICON_MAP$netwo","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","margin","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","setActiveTab","TonContent","TronContent","_tabs$activeTab","TabList","tabsInModal","contentWrapper","contentStatic","modalTitle","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","imageUrl","secondText","TokenIcon","tokenIcon","nftIcon","bold","tokenSymbol","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","getNumberRegex","zeroValue","prevValueRef","renderValue","inputValue","noFallbackToPrev","contentEl","valueRegex","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","_nativeToken$amount","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","isIncorrectAmount","setIsIncorrectAmount","isInsufficientBalance","setIsInsufficientBalance","isInsufficientFee","setIsInsufficientFee","isBelowMinimumAmount","setIsBelowMinimumAmount","shouldUseAllBalance","setShouldUseAllBalance","stakingType","tvl","dailyReward","apr","calcJettonStakingApr","isNativeToken","nativeSlug","nativeBalance","minAmount","doubleNetworkFee","shouldLeaveForUnstake","validateAndSetAmount","newAmount","dropDownItems","handleMaxAmountClick","handleAmountChange","handleChangeStaking","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","annual_yield","textButton","balanceButton","balanceLink","amountTopRight","amountTopRight_static","amountTopRight_slide","balanceContainer","renderTopRight","inputRichStatic","amountInput","tokenDropdownItem","amountBottomWrapper","amountBottomWrapper_static","amountBottom","_nativeToken$symbol","minAmountValue","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","renderBottomRight","balanceResult","RichNumberField","balanceResultWrapper","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStakingPassword","submitStakingHardware","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","TransactionBanner","transactionBanner","renderTransactionBanner","TransferResult","renderComplete","submitStakingClaim","submitStakingClaimHardware","cancelStakingClaim","isNativeEnough","withModalHeader","handleHardwareSubmit","feeClassName","renderInfo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","tonToken","profit","endOfStakingCycle","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","hasHistory","shouldRenderSpinner","spinnerClassNames","useInterval","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","stakingInfo_modal","stakingInfoNoHistory","didUpdate","useTransitionActiveKey","stakingTransition","stakingInfoClose","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","tokenDropdownMenu","unstakeTime","unstakeTime_purple","unstakeTimeIcon","stakingInfoButtons","stakingInfoButtonsWithMargin","stakingInfoButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","_stakingInfo$round","_stakingInfo$liquid$a","_stakingInfo$liquid","isLongUnstake","setIsLongUnstake","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","shortBaseSymbol","isInstantUnstake","unstakeDate","setUnstakeDate","amountInCurrency","renderingAmountInCurrency","isUnstakeDisabled","shouldRenderCurrency","currencyClassNames","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","tonIcon","tonName","shouldShowInfo","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","initialAmount","isInteractive","endsAt","submitClaimingVesting","submitClaimingVestingHardware","cancelClaimingVesting","clearVestingError","claimAmount","shouldFilter","setSwapScreen","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","handleOpenSelectTokenModal","SelectTokenTo","SelectTokenFrom","buttonTransitionKeyRef","tokenToRender","useSignal","_signalRef$current","signalRef","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrDependency","_dependencies","isAsync","getValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","BUTTON_ANIMATION_DURATION","_limits$fromMin","_tokenIn$symbol","_limits$fromMax","_tokenIn$symbol2","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useDerivedSignal","useThrottledSignal","renderedText","useDerivedState","BTC","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","rate","DedustPath","StonfiPath","renderedDexItem","ARROW_WIDTH","GAP","emoji","tooltipClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","isSlippageFocused","markSlippageFocused","unmarkSlippageFocused","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","slippageList","renderSlippageValues","IconWithTooltip","ValuePlaceholder","renderRate","actualFee","feeElement","renderNetworkFee","percent","SwapSettingsModal","_nativeUserTokenIn$am","_tokenIn$amount","_explainedFee$fullFee2","_explainedFee$fullFee3","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","loadSwapPairs","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","tokenInTransitionKey","useTokenTransitionKey","accountIdPrev","nativeTokenInSlug","nativeUserTokenIn","amountInBigint","amountOutBigint","balanceIn","isEnoughBalance","_fullNetworkFee$nativ2","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","intervalId","handleAmountInChange","handleAmountOutChange","handleSwitchTokens","SwapSelectToken","AnimatedArrows","SwapDexChooser","renderFee","renderPriceImpactWarning","policy","kyc","renderChangellyInfo","SwapSubmitButton","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","COMMENT_DROPDOWN_ITEMS","AUTHORIZE_DIESEL_INTERVAL_MS","INPUT_CLEAR_BUTTON_ID","doesSavedAddressFitSearch","searchQuery","isMemoRequired","isEncryptedCommentSupported","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","setTransferShouldEncrypt","cancelTransfer","requestOpenQrScanner","toAddressRef","addressBookTimeoutRef","transferToken","shouldRenderPasteButton","setShouldRenderPasteButton","isAddressFocused","markAddressFocused","unmarkAddressFocused","isAddressBookOpen","openAddressBook","closeAddressBook","savedAddressForDeletion","setSavedAddressForDeletion","savedChainForDeletion","setSavedChainForDeletion","toAddressShort","SHORT_ADDRESS_SHIFT","isAddressValid","otherAccountIds","shouldUseAddressBook","shouldDisableClearButton","withPasteButton","withAddressClearButton","_fullFee$token2","_fullFee$native2","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","isDisabledDebounce","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","handleAddressBookClose","handleAddressFocus","caretPosition","newCaretPosition","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressInput","newToAddress","handleAddressClearClick","handleQrScanClick","handleClear","handlePasteClick","handleAddressBookItemClick","handleDeleteSavedAddressClick","handleCommentChange","trimStringByMaxBytes","hasToAddressError","isAmountGreaterThanBalance","isCommentRequired","_amount","handleCommentOptionsChange","isFeeModalOpen","closeFeeModal","useFeeModal","renderedSavedAddresses","renderAddressItem","deleteLabel","onDeleteClick","renderedOtherAccounts","_savedAddresses$map","addressesToBeIgnored","uniqueAddresses","currentAddress","addressChain","withButton","shouldIgnoreErrors","NftChips","renderAddressBook","renderBalance","maxBytes","decoder","TextDecoder","encoded","TextEncoder","isSavedAddress","handleDeleteClick","TABS","Receive","activeTransferKey","isTransferWithComment","activeTabIndex","stakingStatus","setActiveTabIndex","isStaking","renderedBgHelpers","transferSlideClassName","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","transferSlideContent","contentSlideStaked","isStakingAllowed","areNotAllTabs","isLastTab","transferKey","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","isPrev","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","tabDelimiter","tab_purple","tab_purpleText","inactive","unstakeRequested","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","calculateFullBalance","stakingStates","stakingStateBySlug","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","currentPrice","changeFactor","changePercent","changeClassName","changeCourseUp","changeCourseDown","changePrefix","useUpdateIndicator","updateStartedAt","setIsUpdating","timeElapsedSinceLastUpdateStarted","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","_prevText$length","textLength","prevTextLength","charIndex","prevTextCharIndex","_text$charIndex","_text$charIndex2","_text$charIndex3","renderAnimatedCharacters","currentWalletVersion","canEdit","forceClose","accountClassName","accountSelectorClassName","menuButtonClassName","noSettingsButton","withAccountSelector","isInsideSticky","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","setInputValue","noSettingsOrQrSupported","withAddW5Button","accountsAmount","prevShouldForceAccountEdit","handleSwitchAccount","handleSaveClick","handleAddV5WalletClick","WalletVersion","handleInputKeyDown","handleFullscreenToggle","exitFullscreen","handleManualLock","accountTitleClassName","handleOpenAccountSelector","_currentAccount$addre","dialogFullClassName","renderButton","renderAccountsSelector","chains","chainDropdownItems","handleCopyAddress","handleExplorerClick","addressContainer","menuStyles","menuItemName","menuFontIcon","menuExplorerIcon","explorerButton","currentCurrency","excludedCurrency","currencyList","handleBaseCurrencyChange","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","useAsync","setIsLoading","setResult","wasCancelled","useCachedImage","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","useLayoutEffectWithPrevDeps","useSyncEffectWithPrevDeps","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","green","orange","pink","purple","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","handleMouseLeave","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","_useMemo","_selectedHistoryPoint","onYieldClick","loadPriceHistory","isCurrencyMenuOpen","openCurrencyMenu","closeCurrencyMenu","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","tonUrl","refreshHistory","newPeriod","handleCurrencyChange","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","dateStr","initialPrice","_history$find","change","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","l2","a2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenLogo","tokenInfoHeader","tokenValue","currencySwitcher","iconCaretSmall","CurrencySwitcher","tokenInfoSubheader","tokenTitle","tokenName","apy","tokenChange","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","balanceUpdateStartedAt","forceCloseAccountSelector","onTokenCardClose","customCardClassName","setCustomCardClassName","setWithTextGradient","renderedToken","shouldRenderTokenCard","tokenCardTransitionClassNames","handleCardChange","hasGradient","dappDomain","renderingDappDomain","shouldRenderDappElement","dappClassNames","shouldRenderDapp","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","AccountSelector","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","AnimatedCounter","CardAddress","TokenCard","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","requestParamsRef","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","currentMiddleId","defaultOffsetId","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","_cex$status","_cex$status2","isError","isHold","isFromToncoin","isInternalSwap","swapIconClass","iconFullClass","amountSwapClass","cexStatus","renderErrorMessage","renderCurrency","encryptedComment","isStake","isUnstake","isUnstakeRequest","_savedAddresses$find","handleNftClick","stakeIconClass","waitingIconName","amountOtherClass","renderComment","THROTTLE_TIME","DATE_HEADER_HEIGHT","TRANSACTION_COMMENT_HEIGHT","TRANSACTION_NFT_HEIGHT","TRANSACTION_HEIGHT","_selectAccountState6","_byChain","selectIsFirstTransactionsLoaded","isNewWallet","selectIsNewWallet","swapTokensBySlug","activitiesUpdateStartedAt","totalTokensAmount","shouldShowSeparateAssetsPanel","idList","_bySlug$slug","lastTokenTxId","lastTokenTxTimestamp","activityList","allActivities","_tokensBySlug$activit","activityIds","activitiesById","activityIdList","activityMap","isHistoryEndReached","loadMore","FURTHER_SLICE","throttledLoadMore","useInfiniteScroll","isActivitiesEmpty","activityOffsetInfoById","offsetMap","dateCount","commentCount","lastActivityDayStart","_activity$metadata","offsetNext","calculateOffset","activityDayStart","isNewDay","canCountComment","currentContainerHeight","_activityOffsetInfoBy","lastViewportId","handleActivityClick","NewWalletGreeting","InfiniteScroll","activityInfo","nextActivityId","nextActivity","isFirst","isActivityActive","dateValue","formattedDate","dateWithLoader","renderDate","Transaction","_stakingStateBySlug$a","_stakingStateBySlug$a2","renderActivity","UNFREEZE_DANGER_DURATION","vestingStatus","unfreezeEndDate","isInvestorView","isVesting","renderedAmount","withYield","withLabel","shouldRenderYield","renderYieldClassNames","renderYield","renderChangeIcon","renderStakingIcon","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","_states$filter","stakedTokens","shouldRenderStakedTokens","stakedTokenClassNames","shouldRenderVestingToken","vestingTokenClassNames","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","tokenSlugs","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","Token","indexInViewport","renderToken","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","MENU_ITEMS","selectNfts","burnNfts","openHideNftModal","nftFromCurrentCollection","renderedNft","handleMenuItemClick","collectionNfts","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","useNftMenu","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","openUnhideNftModal","setCardBackgroundNft","clearCardBackgroundNft","installAccentColorFromNft","clearAccentColorFromNft","getgemsBaseUrl","fragmentUrl","isOnFragment","isTonDns","isCard","onOpen","observeIntersection","clearNftSelection","isLottie","shouldPlay","markHover","unmarkHover","lottie","isIntersecting","targetRef","setIsIntersecting","useOnIntersect","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","shouldRenderWarning","warningTransitionClassNames","handleOpenMenu","handleCloseMenu","Radio","NftMenu","clearNftsSelection","hasSelection","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","rootMargin","initController","controller","useIntersectionObserver","nft_marketplace","_selectedAddresses$le","selectAllNfts","handleSendClick","_map","handleBurnClick","_map2","handleHideClick","activeNftKey","_vesting$info","tokensCount","tabsRef","hasNftSelection","numberOfStaking","_states$filter$length","handleNftCollectionClick","handleNftsMenuButtonClick","HiddenNfts","nftCollections","collections","collentionAddresses","shouldRenderHiddenNftsSection","blacklistedAddressesSet","NotcoinVouchers","handleSwitchTab","stickyElm","rootMarginTop","intersectionRatio","handleClickAsset","Nfts","NftSelectionHeader","NftCollectionHeader","HideNftModal","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","closeSecurityWarning","IS_UNSAFE_WEB","BackupWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","canRenderStickyCard","setCanRenderStickyCard","shouldRenderDarkStatusBar","setShouldRenderDarkStatusBar","markIsFocused","unmarkIsFocused","usePreventPinchZoomGesture","shouldRenderStickyCard","stickyCardTransitionClassNames","boundingClientRect","cardTopSideObserver","cardElement","handleTokenCardClose","Warnings","Card","StickyCard","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","UpdateAvailable","RenderingState","versionById","isOtherVersionsExist","clearAccountError","closeAddAccountModal","clearAccountLoading","setRenderingKey","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleImportHardwareWalletClick","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","renderSelector","AddAccountPasswordModal","buttonLabel","transitionContentWrapper","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","confirm","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","allow","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","scanSquareRef","isTorchAvailable","isTorchEnabled","enabled","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","cornerPoints","qrCodeCoordinates","barcode","coordinates","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","renderPasswordForm","transitionContent_simple","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","_NETWORK_NAMES_EXCEPT","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","pad","remainingSeconds","formattedTime","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","chainLabel","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","closeActivityInfo","renderedActivity","shouldRenderCexInfo","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","cexErrorMessage","isCountdownFinished","transactionId","_renderedActivity$cex","transactionUrl","shouldShowQrCode","renderMemo","SwapTokensInfo","_fromToken$symbol","blockchain","Countdown","renderAddress","renderSwapInfo","email","livechat","isButtonVisible","_renderedActivity$cex2","renderFooterButton","feeText","_transaction$metadata2","_stakingInfo$round2","renderedTransaction","isTransactionWithPoisoning","decryptedComment","setDecryptedComment","withUnstakeTimer","setWithUnstakeTimer","shouldRenderTransactionId","transactionIdClassNames","startOfStakingCycle","shouldDisplayTimer","shouldRenderUnstakeTimer","unstakeTimerClassNames","clearPasswordError","openPasswordSlide","closePasswordSlide","openHiddenComment","handleStartStakingClick","handleUnstakeMoreClick","getTitle","TransactionAmount","AmountWithFeeTextField","nftName","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","handleMouseEnter","dismissNotification","Notification","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","prevChildren","fromChildrenRef","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","withAnimation","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","scale","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","steps","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","transformOrigin","animateClosing","ShowTransition","MediaInfo","Actions","Slides","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","shortButton","text_noExtraMargin","links","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","THEME_OPTIONS","lightThemeImg","systemThemeImg","darkThemeImg","handleThemeChange","newTheme","handleAnimationLevelToggle","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","buttonRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","scrollBy","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current$sc","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","clientY","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","_tokens$length","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","toggleTokenVisibility","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arr1","arr2","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","_state$orderedTokenSl3","_orderedSlugs$length","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","dot","deleteText","DeleteTokenModal","nftsByAddress","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","scrollContainerRef","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","blockWithTooltip","tooltip","iconQuestion","tooltip_wide","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","dappList","disconnectAllBlock","disconnectButton","blockDescription","renderDapps","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","environment","navigatorPlatform","build","flags","getLogsString","filename","toISOString","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","link","download","click","shareFile","developerTitle","logBlock","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","settingsBlockWithDescription","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","enteredPassword","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","okButtonTitle","cancelButtonTitle","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","DEFAULT_AUTOLOCK_OPTION","isPasswordPresent","selectIsPasswordPresent","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","Collapsible","passwordFormContent","passwordFormContentInModal","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","_global$settings$impo","_global$currentSwap","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","popularTokensProp","isInsideSettings","shouldHideMyTokens","shouldHideNotSupportedTokens","resetImportToken","setSwapTokenIn","setSwapTokenOut","addToken","addSwapToken","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","allTokens","filterSupportedTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","_tokensToFilter$filte","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","descriptionText","tokenPrice","tokenContainer","tokenContainerDisabled","tokenLogoContainer","tokenLogoDisabled","nameContainer","tokenTextDisabled","tokenNetwork","tokenPriceContainer","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","tokenNameSkeleton","tokenValueSkeleton","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","isFilterActive","withTopSpace","TokenSelector","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","v","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","isLogOutModalOpened","openLogOutModal","closeLogOutModal","isInitialScreen","activeLang","_versions$map","_tonToken$symbol","_tonToken$price","tonBalance","balanceInCurrency","telegramLinkClassNames","isTelegramLinkRendered","handleSlideAnimationStop","handleCloseSettings","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","renderHandleDeeplinkButton","tonLinksImg","hidden","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","_MTW_TIPS_CHANNEL_NAM","tipsImg","_HELPCENTER_URL","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsDeveloperOptions","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","LogOutModal","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","setHasToAddressError","canContinue","setCanContinue","handleCancelClick","validateToAddress","submitPassword","renderInputAddress","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","activityById","submitSwap","submitSwapCex","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","_tokenOut$symbol","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","ceil","submitBtnText","stars_symbol","buttonsInsideContentWithScroll","isInProgress","clearTransferError","submitTransferPassword","submitTransferHardware","setTransferScreen","renderedTransactionAmount","_nfts$","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","canvasRef","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","clearRect","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","fillStyle","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","handleCloseBrowserTab","AppInactive","ElectronHeader","SettingsModal","AppLocked","MediaViewer","BackupModal","TransferModal","SwapModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","Notifications","QrScannerModal","Dialogs","ConfettiContainer","LoadingOverlay","BottomBar","_await$App$getLaunchU","newPlatform","fadeOutDuration","canGoBack","exitApp","getLaunchUrl","initCapacitor","DEEPLINK","lockOrientation","MainButton","SecondaryButton","SettingsButton","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}