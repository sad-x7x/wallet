{"version":3,"file":"main.a814f9613cbb98498743.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/lib/quantize.js","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/util/stringFormat.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-splash-screen/dist/esm/index.js","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/components/explore/helpers.ts","webpack://mytonwallet/./src/components/explore/hooks/useDappBridge.ts","webpack://mytonwallet/./src/components/explore/hooks/useWebViewBridge.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/components/ui/InAppBrowser.module.scss?a7be","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/global/helpers/staking.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@sina_kh/mtw-capacitor-status-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/util/swap/buildSwapId.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/global/actions/api/transfer.ts","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/util/accentColor.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/components/AppLocked.module.scss?13ef","webpack://mytonwallet/./src/components/AppLocked.tsx","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getCardNftImageUrl.ts","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.module.scss?68a8","webpack://mytonwallet/./src/components/main/sections/Card/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/dapps/DappReturnedDetailsModal.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferFee.tsx","webpack://mytonwallet/./src/components/dapps/DappTransfer.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSelectToken.tsx","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.module.scss?f113","webpack://mytonwallet/./src/components/main/sections/Card/StickyCard.tsx","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.module.scss?ffe8","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!(config === null || config === void 0 ? void 0 : config.name)) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach(listener => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach(arg => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') ||\n        options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, buildRequestInit, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n/**\n * @deprecated Use `NotificationType`.\n * @since 1.0.0\n */\nexport const HapticsNotificationType = NotificationType;\n/**\n * @deprecated Use `ImpactStyle`.\n * @since 1.0.0\n */\nexport const HapticsImpactStyle = ImpactStyle;\n//# sourceMappingURL=definitions.js.map","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = \"m/44'/607'/0'\";\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 50000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 4; // TODO Replace to 1 after DEX support\nexport const W5_MAX_MESSAGES = 255;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n  megatonWtonMaster: {\n    name: 'megatonWtonMaster',\n    hash: '4c9790d808ea4470614e021f76c40529efe2fbce8138da4284a29b5f1943ef19',\n    isSwapAllowed: true,\n  },\n  megatonRouter: {\n    name: 'megatonRouter',\n    hash: '5d5f0e3ed9602d1ba96006ead98cb5e9b53f49ce4a5cf675e06e4d440b7d267c',\n    isSwapAllowed: true,\n  },\n};\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, Boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport class NotImplemented extends ApiBaseError {\n  constructor(message: string = 'Not implemented') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import type {\n  ApiUpdate,\n  CancellableCallback, OriginMessageData, OriginMessageEvent, WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { bigintReviver } from './bigint';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, Function>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  target.onmessage = (message: OriginMessageEvent) => {\n    if (message.data?.channel === channel) {\n      void onMessage(api, message.data, sendToOrigin);\n    }\n  };\n}\n\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    /**\n     * If the sender's URL includes the DETACHED_TAB_URL, we skip further processing\n     * This condition ensures that we don't interact with tabs that have already been closed.\n     */\n    const url = port.sender?.url;\n    if (url?.includes(DETACHED_TAB_URL)) {\n      return;\n    }\n\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      const json = JSON.stringify(data);\n      port.postMessage(json);\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      if (typeof data === 'string') {\n        data = JSON.parse(data, bigintReviver) as OriginMessageData;\n      }\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', name: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import type { WindowMethods } from './types';\n\nimport { WINDOW_PROVIDER_CHANNEL } from '../../config';\nimport { createPostMessageInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface((name: string, origin?: string, ...args: any[]) => {\n    const method = windowMethods[name as keyof WindowMethods];\n\n    // @ts-ignore\n    return method(...args as WindowMethodArgs<keyof WindowMethods>);\n  }, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider } from '../../../util/windowProvider';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    worker = new Worker(\n      /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n    );\n    connector = createConnector(worker, onUpdate);\n\n    createWindowProvider(worker!);\n  }\n\n  if (!isInitialized) {\n    if (IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as AllMethodResponse<T>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  StateInitWithoutBin = 'StateInitWithoutBin',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiAuthError | ApiTransactionDraftError | ApiTransactionError;\n","import type { ApiTonWalletVersion } from '../chains/ton/types';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiChain = 'ton' | 'tron';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron: boolean;\n  isNativeBottomSheet: boolean;\n  isIosApp: boolean;\n  isAndroidApp: boolean;\n  referrer?: string;\n}\n\nexport interface ApiToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n  isGaslessEnabled?: boolean;\n  isStarsEnabled?: boolean;\n  isTiny?: boolean;\n  customPayloadApiUrl?: string;\n  codeHash?: string;\n}\n\nexport interface ApiTokenWithPrice extends ApiToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  slug: string;\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport type ApiTxTimestamps = Record<string, number | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest' | 'swap'\n| 'nftTransferred' | 'nftReceived' | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string; // Only for TON now\n  inMsgHash?: string; // Only for TON\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport type ApiMtwCardType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\nexport type ApiMtwCardTextType = 'light' | 'dark';\nexport type ApiMtwCardBorderShineType = 'up' | 'down' | 'left' | 'right' | 'radioactive';\n\nexport interface ApiNftMetadata {\n  lottie?: string;\n  imageUrl?: string;\n  fragmentUrl?: string;\n  mtwCardId?: number;\n  mtwCardType?: ApiMtwCardType;\n  mtwCardTextType?: ApiMtwCardTextType;\n  mtwCardBorderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport interface ApiNft {\n  index: number;\n  ownerAddress?: string;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isScam?: boolean;\n  metadata: ApiNftMetadata;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\n\nexport type ApiStakingType = 'nominators' | 'liquid' | 'jetton';\n\ntype BaseStakingState = {\n  id: string;\n  tokenSlug: string;\n  annualYield: number;\n  yieldType: ApiYieldType;\n  balance: bigint;\n  pool: string;\n  isUnstakeRequested?: boolean;\n};\n\nexport type ApiNominatorsStakingState = BaseStakingState & {\n  type: 'nominators';\n  start: number;\n  end: number;\n  pendingDepositAmount: bigint;\n};\n\nexport type ApiLiquidStakingState = BaseStakingState & {\n  type: 'liquid';\n  tokenBalance: bigint;\n  unstakeRequestAmount: bigint;\n  instantAvailable: bigint;\n};\n\nexport type ApiJettonStakingState = BaseStakingState & {\n  type: 'jetton';\n  tokenAddress: string;\n  unclaimedRewards: bigint;\n  stakeWalletAddress: string;\n  tokenAmount: bigint;\n  period: number;\n  tvl: bigint;\n  dailyReward: bigint;\n  poolWallets?: string[];\n};\n\nexport type ApiYieldType = 'APY' | 'APR';\nexport type ApiStakingState = ApiNominatorsStakingState | ApiLiquidStakingState | ApiJettonStakingState;\nexport type ApiToncoinStakingState = ApiNominatorsStakingState | ApiLiquidStakingState;\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n  identifier?: string;\n  sseOptions?: ApiSseOptions;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiTransferToSign {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiDappTransfer extends ApiTransferToSign {\n  isScam?: boolean;\n  /** Whether the transfer should be treated with cautiousness, because its payload is unclear */\n  isDangerous: boolean;\n  normalizedAddress: string;\n  /** The transfer address to show in the UI */\n  displayedToAddress: string;\n  /**\n   * The transaction TON amount that should be shown in the UI.\n   * It may be less than `amount` because the difference is added to `fullFee`.\n   */\n  displayedAmount: bigint;\n  /** The transaction full fee to show in the UI. Includes the network fee and the TON amount used as a fee. */\n  fullFee: bigint;\n  /**\n   * The TON amount that will be returned back as a result of the transaction.\n   * - If `fullFee` ≥ `excess`, the UI should show the difference as the real fee;\n   * - Otherwise, the UI should show the difference as the returned amount.\n   */\n  received: bigint;\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  params: Omit<ApiLocalTransactionParams, 'inMsgHash'>;\n}\n\n/**\n * The `fee` field should contain the final (real) fee, because we want to show the real fee in local transactions\n */\nexport type ApiLocalTransactionParams = Omit<\nApiTransaction, 'txId' | 'timestamp' | 'isIncoming' | 'normalizedAddress'\n> & {\n  txId?: string;\n  normalizedAddress?: string;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  address: string;\n  version: ApiTonWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  lastTxId?: string;\n};\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n| 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n| 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n| 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n| 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n| 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n| 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n| 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n| 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n| 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n| 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n| 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n| 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n| 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n| 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n| 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n| 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n| 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n} from './api/types';\nimport type { LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet · My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line max-len\n  : 'The most feature-rich TON extension – with support of multi-accounts, tokens, NFT, TON DNS, TON Sites, TON Proxy, and TON Magic.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwalletorg/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ' '; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME = { en: 'MyTonWalletTips', ru: 'MyTonWalletTipsRu' };\nexport const MTW_CARDS_BASE_URL = 'https://static.mytonwallet.org/cards/';\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = 'GetGems';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const HELPCENTER_URL = { en: 'https://help.mytonwallet.io/', ru: 'https://help.mytonwallet.io/ru' };\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hour\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-178';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Español',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: 'Русский',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '简体',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '繁體',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Türkçe',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: 'ไทย',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: 'Українська',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const STAKING_CYCLE_DURATION_MS = 131_072_000; // 36.4 hours\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\n\nexport const NFT_FRAGMENT_COLLECTIONS = new Set([\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n]);\nexport const NFT_FRAGMENT_GIFT_IMAGE_URL_PREFIX = 'https://nft.fragment.com/gift/';\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\n\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nconst TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD₮',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    ...TONCOIN,\n    quote: {\n      slug: TONCOIN.slug,\n      price: 1.95,\n      priceUsd: 1.95,\n      percentChange24h: 0,\n    },\n  },\n  trx: {\n    ...TRX,\n    quote: {\n      slug: TRX.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    quote: {\n      slug: TRC20_USDT_MAINNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    quote: {\n      slug: TRC20_USDT_TESTNET_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    quote: {\n      slug: TON_USDT_SLUG,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    quote: {\n      slug: MYCOIN.slug,\n      price: 0,\n      priceUsd: 0,\n      percentChange24h: 0,\n    },\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD₮',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FISRT_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const SHORT_CURRENCY_SYMBOL_MAP = {\n  USD: '$',\n  EUR: '€',\n  RUB: '₽',\n  CNY: '¥',\n};\nexport const CURRENCY_LIST: { value: ApiBaseCurrency; name: string }[] = [\n  {\n    value: 'USD',\n    name: 'US Dollar',\n  }, {\n    value: 'EUR',\n    name: 'Euro',\n  }, {\n    value: 'RUB',\n    name: 'Ruble',\n  }, {\n    value: 'CNY',\n    name: 'Yuan',\n  }, {\n    value: 'BTC',\n    name: 'Bitcoin',\n  }, {\n    value: TONCOIN.symbol,\n    name: 'Toncoin',\n  },\n];\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\n// eslint-disable-next-line max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '⭐️';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '82566ad72b6568fe7276437d3b0c911aab65ed701c13601941b2917305e81c11', // Stonfi V1\n  'ec614ea4aaea3f7768606f1c1632b3374d3de096a1e7c4ba43c8009c487fee9d', // Stonfi V2\n  'c0f9d14fbc8e14f0d72cba2214165eee35836ab174130912baf9dbfa43ead562', // Dedust (for example, EQBkh7Mc411WTYF0o085MtwJpYpvGhZOMBphhIFzEpzlVODp)\n  '1275095b6da3911292406f4f4386f9e780099b854c6dee9ee2895ddce70927c1', // Dedust (for example, EQCm92zFBkLe_qcFDp7WBvI6JFSDsm4WbDPvZ7xNd7nPL_6M)\n  '5d01684bdf1d5c9be2682c4e36074202432628bd3477d77518d66b0976b78cca', // USDT Storm LP (for example, EQAzm06UMMsnFQrNKEubV1myIR-mm2ZOCnoic36frCgD8MLR)\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 2;\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nexport const TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n  },\n];\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        // eslint-disable-next-line func-names\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        // eslint-disable-next-line no-console\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","/* eslint-disable */\n\n/*\n * quantize.js Copyright 2008 Nick Rabinowitz\n * Ported to node.js by Olivier Lesnicki\n * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php\n */\n\n// fill out a couple protovis dependencies\n/*\n * Block below copied from Protovis: http://mbostock.github.com/protovis/\n * Copyright 2010 Stanford Visualization Group\n * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php\n */\nif (!pv) {\n    var pv = {\n        map: function(array, f) {\n            var o = {};\n            return f ? array.map(function(d, i) {\n                o.index = i;\n                return f.call(o, d);\n            }) : array.slice();\n        },\n        naturalOrder: function(a, b) {\n            return (a < b) ? -1 : ((a > b) ? 1 : 0);\n        },\n        sum: function(array, f) {\n            var o = {};\n            return array.reduce(f ? function(p, d, i) {\n                o.index = i;\n                return p + f.call(o, d);\n            } : function(p, d) {\n                return p + d;\n            }, 0);\n        },\n        max: function(array, f) {\n            return Math.max.apply(null, f ? pv.map(array, f) : array);\n        }\n    }\n}\n\n/**\n * Basic Javascript port of the MMCQ (modified median cut quantization)\n * algorithm from the Leptonica library (http://www.leptonica.com/).\n * Returns a color map you can use to map original pixels to the reduced\n * palette. Still a work in progress.\n *\n * @author Nick Rabinowitz\n * @example\n\n// array of pixels as [R,G,B] arrays\nvar myPixels = [[190,197,190], [202,204,200], [207,214,210], [211,214,211], [205,207,207]\n                // etc\n                ];\nvar maxColors = 4;\n\nvar cmap = MMCQ.quantize(myPixels, maxColors);\nvar newPalette = cmap.palette();\nvar newPixels = myPixels.map(function(p) {\n    return cmap.map(p);\n});\n\n */\nvar MMCQ = (function() {\n    // private constants\n    var sigbits = 5,\n        rshift = 8 - sigbits,\n        maxIterations = 1000,\n        fractByPopulations = 0.75;\n\n    // get reduced-space color index for a pixel\n\n    function getColorIndex(r, g, b) {\n        return (r << (2 * sigbits)) + (g << sigbits) + b;\n    }\n\n    // Simple priority queue\n\n    function PQueue(comparator) {\n        var contents = [],\n            sorted = false;\n\n        function sort() {\n            contents.sort(comparator);\n            sorted = true;\n        }\n\n        return {\n            push: function(o) {\n                contents.push(o);\n                sorted = false;\n            },\n            peek: function(index) {\n                if (!sorted) sort();\n                if (index === undefined) index = contents.length - 1;\n                return contents[index];\n            },\n            pop: function() {\n                if (!sorted) sort();\n                return contents.pop();\n            },\n            size: function() {\n                return contents.length;\n            },\n            map: function(f) {\n                return contents.map(f);\n            },\n            debug: function() {\n                if (!sorted) sort();\n                return contents;\n            }\n        };\n    }\n\n    // 3d color space box\n\n    function VBox(r1, r2, g1, g2, b1, b2, histo) {\n        var vbox = this;\n        vbox.r1 = r1;\n        vbox.r2 = r2;\n        vbox.g1 = g1;\n        vbox.g2 = g2;\n        vbox.b1 = b1;\n        vbox.b2 = b2;\n        vbox.histo = histo;\n    }\n    VBox.prototype = {\n        volume: function(force) {\n            var vbox = this;\n            if (!vbox._volume || force) {\n                vbox._volume = ((vbox.r2 - vbox.r1 + 1) * (vbox.g2 - vbox.g1 + 1) * (vbox.b2 - vbox.b1 + 1));\n            }\n            return vbox._volume;\n        },\n        count: function(force) {\n            var vbox = this,\n                histo = vbox.histo;\n            if (!vbox._count_set || force) {\n                var npix = 0,\n                    i, j, k, index;\n                for (i = vbox.r1; i <= vbox.r2; i++) {\n                    for (j = vbox.g1; j <= vbox.g2; j++) {\n                        for (k = vbox.b1; k <= vbox.b2; k++) {\n                            index = getColorIndex(i, j, k);\n                            npix += (histo[index] || 0);\n                        }\n                    }\n                }\n                vbox._count = npix;\n                vbox._count_set = true;\n            }\n            return vbox._count;\n        },\n        copy: function() {\n            var vbox = this;\n            return new VBox(vbox.r1, vbox.r2, vbox.g1, vbox.g2, vbox.b1, vbox.b2, vbox.histo);\n        },\n        avg: function(force) {\n            var vbox = this,\n                histo = vbox.histo;\n            if (!vbox._avg || force) {\n                var ntot = 0,\n                    mult = 1 << (8 - sigbits),\n                    rsum = 0,\n                    gsum = 0,\n                    bsum = 0,\n                    hval,\n                    i, j, k, histoindex;\n                for (i = vbox.r1; i <= vbox.r2; i++) {\n                    for (j = vbox.g1; j <= vbox.g2; j++) {\n                        for (k = vbox.b1; k <= vbox.b2; k++) {\n                            histoindex = getColorIndex(i, j, k);\n                            hval = histo[histoindex] || 0;\n                            ntot += hval;\n                            rsum += (hval * (i + 0.5) * mult);\n                            gsum += (hval * (j + 0.5) * mult);\n                            bsum += (hval * (k + 0.5) * mult);\n                        }\n                    }\n                }\n                if (ntot) {\n                    vbox._avg = [~~(rsum / ntot), ~~ (gsum / ntot), ~~ (bsum / ntot)];\n                } else {\n                    //console.log('empty box');\n                    vbox._avg = [~~(mult * (vbox.r1 + vbox.r2 + 1) / 2), ~~ (mult * (vbox.g1 + vbox.g2 + 1) / 2), ~~ (mult * (vbox.b1 + vbox.b2 + 1) / 2)];\n                }\n            }\n            return vbox._avg;\n        },\n        contains: function(pixel) {\n            var vbox = this,\n                rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            return (rval >= vbox.r1 && rval <= vbox.r2 &&\n                gval >= vbox.g1 && gval <= vbox.g2 &&\n                bval >= vbox.b1 && bval <= vbox.b2);\n        }\n    };\n\n    // Color map\n\n    function CMap() {\n        this.vboxes = new PQueue(function(a, b) {\n            return pv.naturalOrder(\n                a.vbox.count() * a.vbox.volume(),\n                b.vbox.count() * b.vbox.volume()\n            )\n        });;\n    }\n    CMap.prototype = {\n        push: function(vbox) {\n            this.vboxes.push({\n                vbox: vbox,\n                color: vbox.avg()\n            });\n        },\n        palette: function() {\n            return this.vboxes.map(function(vb) {\n                return vb.color\n            });\n        },\n        size: function() {\n            return this.vboxes.size();\n        },\n        map: function(color) {\n            var vboxes = this.vboxes;\n            for (var i = 0; i < vboxes.size(); i++) {\n                if (vboxes.peek(i).vbox.contains(color)) {\n                    return vboxes.peek(i).color;\n                }\n            }\n            return this.nearest(color);\n        },\n        nearest: function(color) {\n            var vboxes = this.vboxes,\n                d1, d2, pColor;\n            for (var i = 0; i < vboxes.size(); i++) {\n                d2 = Math.sqrt(\n                    Math.pow(color[0] - vboxes.peek(i).color[0], 2) +\n                    Math.pow(color[1] - vboxes.peek(i).color[1], 2) +\n                    Math.pow(color[2] - vboxes.peek(i).color[2], 2)\n                );\n                if (d2 < d1 || d1 === undefined) {\n                    d1 = d2;\n                    pColor = vboxes.peek(i).color;\n                }\n            }\n            return pColor;\n        },\n        forcebw: function() {\n            // XXX: won't  work yet\n            var vboxes = this.vboxes;\n            vboxes.sort(function(a, b) {\n                return pv.naturalOrder(pv.sum(a.color), pv.sum(b.color))\n            });\n\n            // force darkest color to black if everything < 5\n            var lowest = vboxes[0].color;\n            if (lowest[0] < 5 && lowest[1] < 5 && lowest[2] < 5)\n                vboxes[0].color = [0, 0, 0];\n\n            // force lightest color to white if everything > 251\n            var idx = vboxes.length - 1,\n                highest = vboxes[idx].color;\n            if (highest[0] > 251 && highest[1] > 251 && highest[2] > 251)\n                vboxes[idx].color = [255, 255, 255];\n        }\n    };\n\n    // histo (1-d array, giving the number of pixels in\n    // each quantized region of color space), or null on error\n\n    function getHisto(pixels) {\n        var histosize = 1 << (3 * sigbits),\n            histo = new Array(histosize),\n            index, rval, gval, bval;\n        pixels.forEach(function(pixel) {\n            rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            index = getColorIndex(rval, gval, bval);\n            histo[index] = (histo[index] || 0) + 1;\n        });\n        return histo;\n    }\n\n    function vboxFromPixels(pixels, histo) {\n        var rmin = 1000000,\n            rmax = 0,\n            gmin = 1000000,\n            gmax = 0,\n            bmin = 1000000,\n            bmax = 0,\n            rval, gval, bval;\n        // find min/max\n        pixels.forEach(function(pixel) {\n            rval = pixel[0] >> rshift;\n            gval = pixel[1] >> rshift;\n            bval = pixel[2] >> rshift;\n            if (rval < rmin) rmin = rval;\n            else if (rval > rmax) rmax = rval;\n            if (gval < gmin) gmin = gval;\n            else if (gval > gmax) gmax = gval;\n            if (bval < bmin) bmin = bval;\n            else if (bval > bmax) bmax = bval;\n        });\n        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, histo);\n    }\n\n    function medianCutApply(histo, vbox) {\n        if (!vbox.count()) return;\n\n        var rw = vbox.r2 - vbox.r1 + 1,\n            gw = vbox.g2 - vbox.g1 + 1,\n            bw = vbox.b2 - vbox.b1 + 1,\n            maxw = pv.max([rw, gw, bw]);\n        // only one pixel, no split\n        if (vbox.count() == 1) {\n            return [vbox.copy()]\n        }\n        /* Find the partial sum arrays along the selected axis. */\n        var total = 0,\n            partialsum = [],\n            lookaheadsum = [],\n            i, j, k, sum, index;\n        if (maxw == rw) {\n            for (i = vbox.r1; i <= vbox.r2; i++) {\n                sum = 0;\n                for (j = vbox.g1; j <= vbox.g2; j++) {\n                    for (k = vbox.b1; k <= vbox.b2; k++) {\n                        index = getColorIndex(i, j, k);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        } else if (maxw == gw) {\n            for (i = vbox.g1; i <= vbox.g2; i++) {\n                sum = 0;\n                for (j = vbox.r1; j <= vbox.r2; j++) {\n                    for (k = vbox.b1; k <= vbox.b2; k++) {\n                        index = getColorIndex(j, i, k);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        } else { /* maxw == bw */\n            for (i = vbox.b1; i <= vbox.b2; i++) {\n                sum = 0;\n                for (j = vbox.r1; j <= vbox.r2; j++) {\n                    for (k = vbox.g1; k <= vbox.g2; k++) {\n                        index = getColorIndex(j, k, i);\n                        sum += (histo[index] || 0);\n                    }\n                }\n                total += sum;\n                partialsum[i] = total;\n            }\n        }\n        partialsum.forEach(function(d, i) {\n            lookaheadsum[i] = total - d\n        });\n\n        function doCut(color) {\n            var dim1 = color + '1',\n                dim2 = color + '2',\n                left, right, vbox1, vbox2, d2, count2 = 0;\n            for (i = vbox[dim1]; i <= vbox[dim2]; i++) {\n                if (partialsum[i] > total / 2) {\n                    vbox1 = vbox.copy();\n                    vbox2 = vbox.copy();\n                    left = i - vbox[dim1];\n                    right = vbox[dim2] - i;\n                    if (left <= right)\n                        d2 = Math.min(vbox[dim2] - 1, ~~ (i + right / 2));\n                    else d2 = Math.max(vbox[dim1], ~~ (i - 1 - left / 2));\n                    // avoid 0-count boxes\n                    while (!partialsum[d2]) d2++;\n                    count2 = lookaheadsum[d2];\n                    while (!count2 && partialsum[d2 - 1]) count2 = lookaheadsum[--d2];\n                    // set dimensions\n                    vbox1[dim2] = d2;\n                    vbox2[dim1] = vbox1[dim2] + 1;\n                    // console.log('vbox counts:', vbox.count(), vbox1.count(), vbox2.count());\n                    return [vbox1, vbox2];\n                }\n            }\n\n        }\n        // determine the cut planes\n        return maxw == rw ? doCut('r') :\n            maxw == gw ? doCut('g') :\n            doCut('b');\n    }\n\n    function quantize(pixels, maxcolors) {\n        // short-circuit\n        if (!pixels.length || maxcolors < 2 || maxcolors > 256) {\n            // console.log('wrong number of maxcolors');\n            return false;\n        }\n\n        // XXX: check color content and convert to grayscale if insufficient\n\n        var histo = getHisto(pixels),\n            histosize = 1 << (3 * sigbits);\n\n        // check that we aren't below maxcolors already\n        var nColors = 0;\n        histo.forEach(function() {\n            nColors++\n        });\n        if (nColors <= maxcolors) {\n            // XXX: generate the new colors from the histo and return\n        }\n\n        // get the beginning vbox from the colors\n        var vbox = vboxFromPixels(pixels, histo),\n            pq = new PQueue(function(a, b) {\n                return pv.naturalOrder(a.count(), b.count())\n            });\n        pq.push(vbox);\n\n        // inner function to do the iteration\n\n        function iter(lh, target) {\n            var ncolors = 1,\n                niters = 0,\n                vbox;\n            while (niters < maxIterations) {\n                vbox = lh.pop();\n                if (!vbox.count()) { /* just put it back */\n                    lh.push(vbox);\n                    niters++;\n                    continue;\n                }\n                // do the cut\n                var vboxes = medianCutApply(histo, vbox),\n                    vbox1 = vboxes[0],\n                    vbox2 = vboxes[1];\n\n                if (!vbox1) {\n                    // console.log(\"vbox1 not defined; shouldn't happen!\");\n                    return;\n                }\n                lh.push(vbox1);\n                if (vbox2) { /* vbox2 can be null */\n                    lh.push(vbox2);\n                    ncolors++;\n                }\n                if (ncolors >= target) return;\n                if (niters++ > maxIterations) {\n                    // console.log(\"infinite loop; perhaps too few pixels!\");\n                    return;\n                }\n            }\n        }\n\n        // first set of colors, sorted by population\n        iter(pq, fractByPopulations * maxcolors);\n        // console.log(pq.size(), pq.debug().length, pq.debug().slice());\n\n        // Re-sort by the product of pixel occupancy times the size in color space.\n        var pq2 = new PQueue(function(a, b) {\n            return pv.naturalOrder(a.count() * a.volume(), b.count() * b.volume())\n        });\n        while (pq.size()) {\n            pq2.push(pq.pop());\n        }\n\n        // next set - generate the median cuts using the (npix * vol) sorting.\n        iter(pq2, maxcolors - pq2.size());\n\n        // calculate the actual colors\n        var cmap = new CMap();\n        while (pq2.size()) {\n            cmap.push(pq2.pop());\n        }\n\n        return cmap;\n    }\n\n    return {\n        quantize: quantize\n    }\n})();\n\nmodule.exports = MMCQ.quantize\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import { bigintReviver } from './bigint';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data, bigintReviver) as WorkerMessageData;\n      } catch (err: any) {\n        logDebugError('PostMessageConnector: Failed to parse message', err);\n        return;\n      }\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    let rawData: AnyLiteral | string = data;\n    if (this.shouldUseJson) {\n      rawData = JSON.stringify(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: Function, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance!.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: Function, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: Function, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    // eslint-disable-next-line no-bitwise\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`);\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`);\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`);\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { TON_DNS_ZONES } from '../config';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat } = zone;\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  // eslint-disable-next-line no-restricted-globals\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n        // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n        || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\n// eslint-disable-next-line no-alert\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('error', handleErrorEvent);\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey]!.push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: T[], array2: T[]): T[] {\n  const set2 = new Set(array2);\n\n  return array1.filter((element) => !set2.has(element));\n}\n\nexport function filterValues<M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n","import { isAscii } from '../stringFormat';\n\nconst MAX_COMMENT_SIZE = 120;\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function isValidLedgerComment(comment: string) {\n  return isAscii(comment) && isLedgerCommentLengthValid(comment);\n}\n\nexport function isLedgerCommentLengthValid(comment: string) {\n  return comment.length <= MAX_COMMENT_SIZE;\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","export function isAscii(str: string) {\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function insertSubstring(str: string, start: number, newSubStr: string) {\n  if (start < 0) {\n    start = str.length - start;\n  }\n  return str.slice(0, start) + newSubStr + str.slice(start);\n}\n\nexport function hexToString(hex: string): string {\n  let result = '';\n  for (let i = 0; i < hex.length; i += 2) {\n    result += String.fromCharCode(parseInt(hex.slice(i, i + 2), 16));\n  }\n\n  return result;\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\nimport { omit } from './iteratees';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: Date;\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: new Date(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logActionHandling(name: string, payload?: any) {\n  if (!DEBUG_API) return;\n  if (name === 'apiUpdate') {\n    if (typeof payload?.type === 'object' && payload.type !== 'updatingStatus') {\n      logDebugApi(`Update: ${payload.type}`, omit(payload, ['type']));\n    }\n  } else {\n    logDebugApi(`Action: ${name}`, payload);\n  }\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n        + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: 'ВНИМАНИЕ! Через эту консоль злоумышленники могут захватить ваш криптовалютный кошелёк с помощью так '\n        + 'называемой атаки Self-XSS. Поэтому не вводите и не вставляйте код, который вы не понимаете. Берегите себя!',\n    es: '¡ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n        + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n        + 'no introduzca ni pegue código que no comprenda. ¡Cuídese!',\n    zh: '警告！这个控制台可能成为坏人通过所谓的Self-XSS攻击来接管你的加密货币钱包的方式。因此，请不要输入或粘贴您不理解的代码。请保护自己！',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  // eslint-disable-next-line no-restricted-globals\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith('#detached');\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = -3.75 * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin'\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"82\":\"10cb53e3e4914ed789c7\",\"88\":\"7469cde2e48fcea342fb\",\"104\":\"337a5d5347e427590af0\",\"148\":\"c93ab213da47a1c69bbc\",\"168\":\"3ef51449bff845cd930a\",\"196\":\"62cfcca245779edde795\",\"201\":\"8f9951bc8d270f397709\",\"215\":\"a3b70a2b4c9e8aab47e4\",\"232\":\"f2635cf6cd72a03137ee\",\"283\":\"56e93ec75336cca60952\",\"408\":\"d7d8d41d5dce10d243c5\",\"432\":\"feac22f8d67028f0685a\",\"477\":\"473346bae74b64f8b62c\",\"494\":\"2a76b4246c2b484142fb\",\"513\":\"bc27336d82f09051f2ac\",\"542\":\"2d167587e3aa4f5d2b58\",\"564\":\"308caacb4e9cac966aff\",\"580\":\"4f7727668847f6a39dfc\",\"612\":\"5f5efe45c362ef7fd524\",\"642\":\"4019c935ee6610070ce7\",\"687\":\"f15973373fbd842fa90e\",\"749\":\"d19e49353d1aa9c41adf\",\"776\":\"28cf5f93438bdbe59349\",\"789\":\"293e03235c8d79348a71\",\"884\":\"ca0c5df5be9516ea7f6b\",\"895\":\"8f12ef95ea8874f9ec0b\",\"934\":\"bf9ab69d4ed2b12bef56\",\"941\":\"315e4a8844d05422d6d9\",\"956\":\"bc42ad757a7d6b976cd7\",\"988\":\"c70df95cb3aae0eab0d3\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\nconst BG_GREEN = ' style=\"background: lightgreen\"';\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.innerHTML += `${dateFormatted}: ${text}<br/>`;\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .map(([key, { value, lastUpdateAt }]) => ([\n      `<div style=\"background: #ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}\">`,\n      `  <span${lastUpdateAt > halfSecondAgo ? BG_GREEN : ''}>${key}: ${Math.round(value)}</span>`,\n      '</div>',\n    ].join('\\n')))\n    .join('\\n');\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.innerHTML = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 50px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '🔄';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n  once: (cb: AnyToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = any> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly any[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: any[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate!.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: any;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined as any;\n      hook.cleanup = undefined as any;\n      hook.releaseSignals = undefined as any;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined as any;\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined as any;\n      hook.onChange = undefined as any;\n    }\n  }\n\n  componentInstance.hooks = undefined as any;\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly any[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${prevValue} => ${newValue}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console, max-len\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly any[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T extends any>(\n  resolver: () => T,\n  dependencies: any[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            // eslint-disable-next-line max-len\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: any[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n// eslint-disable-next-line no-null/no-null\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\n\nexport default function useUniqueId() {\n  const idRef = useRef<string>();\n\n  if (!idRef.current) {\n    idRef.current = generateUniqueId();\n  }\n\n  return idRef.current;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: Function;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_currentRandomId: number | undefined;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: Function[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: Function) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: Function) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (!container.mappedProps || (\n        !arePropsShallowEqual(container.ownProps, props) && activateContainer(container, currentGlobal, props)\n      )) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stickTo && !stuckTo) {\n      container.stuckTo = stickTo;\n    }\n\n    return stickTo && (!stuckTo || stuckTo === stickTo);\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectIsNewWallet(global: GlobalState, isFirstTransactionsLoaded: boolean) {\n  const { activities } = selectCurrentAccountState(global) ?? {};\n\n  if (activities?.idsMain?.length) {\n    return false;\n  }\n\n  return isFirstTransactionsLoaded;\n}\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectFirstNonHardwareAccount(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).find((account) => !account.isHardware);\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const state = selectAccount(global, global.currentAccountId!);\n\n  return state?.isHardware;\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState) {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) {\n    return undefined;\n  }\n\n  return Object.values(accounts).filter((account) => account.isHardware);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState) {\n  const hardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return !!selectFirstNonHardwareAccount(global);\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  return Boolean(selectAccount(global, accountId)?.addressByChain.tron);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n","import type {\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n","import type { ApiDappTransfer } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let fullFee = 0n;\n  let received = 0n;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n    fullFee += transaction.fullFee;\n    received += transaction.received;\n\n    if (transaction.displayedAmount) {\n      addSlugAmount(TONCOIN.slug, transaction.displayedAmount);\n    }\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee, // In TON\n    received, // In TON\n    nftCount,\n  };\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const {\n        decimals, quote: {\n          priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash, quote: {\n          price, percentChange24h, priceUsd,\n        },\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type {\n  ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction,\n} from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (transaction.metadata?.isScam) return true;\n  if (!token || transaction.type === 'nftTransferred' || transaction.type === 'nftReceived') return false;\n\n  const decimals = token.decimals;\n  const cost = toBig(transaction.amount, decimals).abs().mul(token.quote.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.includes('|');\n}\n\nexport function getRealTxIdFromLocal(txId: string) {\n  return txId.endsWith('|') ? txId.replace('|', '') : undefined;\n}\n\nexport function getIsSwapId(id: string) {\n  return id.startsWith('swap:');\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n      && getIsSupportedChain(from.chain)\n      && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiChain, ApiTxTimestamps } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { findLast, mapValues } from '../../util/iteratees';\nimport { getIsSwapId, getIsTxIdLocal } from '../helpers';\nimport { selectAccount, selectAccountState } from './accounts';\n\nexport function selectNewestTxTimestamps(global: GlobalState, accountId: string): ApiTxTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestTransactionsBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastTxTimestamps(global: GlobalState, accountId: string): ApiTxTimestamps {\n  const txById = selectAccountState(global, accountId)?.activities?.byId ?? {};\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug || {};\n\n  return Object.entries(idsBySlug).reduce((result, [slug, ids]) => {\n    const txId = findLast(ids, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n    if (txId && txId in txById) {\n      result[slug] = txById[txId].timestamp;\n    }\n    return result;\n  }, {} as ApiTxTimestamps);\n}\n\nexport function selectLastMainTxTimestamp(global: GlobalState, accountId: string): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain = [] } = activities;\n  const txId = findLast(idsMain, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectAccountTxTokenSlugs(global: GlobalState, accountId: string, chain: ApiChain) {\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug;\n  if (!idsBySlug) return undefined;\n\n  return Object.keys(idsBySlug).filter((slug) => slug.startsWith(`${chain}-`));\n}\n\nexport function selectLocalTransactions(global: GlobalState, accountId: string) {\n  const accountState = global.byAccountId?.[accountId];\n\n  return accountState?.activities?.localTransactions;\n}\n\nexport function selectIsFirstTransactionsLoaded(global: GlobalState, accountId: string) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n  const { addressByChain } = selectAccount(global, accountId) ?? {};\n\n  if (!byChain || !addressByChain) {\n    return false;\n  }\n\n  return Object.keys(addressByChain).every((chain) => byChain[chain as ApiChain]?.isFirstTransactionsLoaded);\n}\n","import type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiHistoryList,\n  ApiLedgerDriver,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiParsedPayload,\n  ApiPriceHistoryPeriod,\n  ApiSignedTransfer,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingCommonData,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiTokenWithPrice,\n  ApiTransaction,\n  ApiTransactionActivity,\n  ApiUpdate,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\nexport type DialogType = {\n  title?: string;\n  message: string;\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForBrowser,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n  NotcoinVouchers,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | string;\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport interface Account {\n  title?: string;\n  addressByChain: Record<ApiChain, string>;\n  isHardware?: boolean;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport interface AssetPairs {\n  [slug: string]: {\n    isReverseProhibited?: boolean;\n    isMultichain?: boolean;\n  };\n}\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    isLoading?: boolean;\n    byId: Record<string, ApiActivity>;\n    idsBySlug?: Record<string, string[]>;\n    idsMain?: string[];\n    newestTransactionsBySlug?: Record<string, ApiTransaction>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localTransactions?: ApiTransactionActivity[];\n  };\n  byChain?: {\n    [chain in ApiChain]?: { isFirstTransactionsLoaded?: boolean };\n  };\n  nfts?: {\n    byAddress: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n  isBackupRequired?: boolean;\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    error?: string;\n    password?: string;\n    isBackupModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState?: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    hardwareSelectedIndices?: number[];\n    isRemoteTab?: boolean;\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    pairs?: {\n      bySlug: Record<string, AssetPairs>;\n    };\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingInfo?: ApiStakingCommonData;\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: { shouldDelegateToNative?: boolean };\n  initializeHardwareWalletConnection: { transport: LedgerTransport; shouldDelegateToNative?: boolean };\n  connectHardwareWallet: { transport?: LedgerTransport; noRetry?: boolean };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  showDialog: { title?: string; message: string };\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading?: boolean };\n\n  fetchTokenTransactions: { limit: number; slug: string; shouldLoadWithBudget?: boolean };\n  fetchAllTransactions: { limit: number; shouldLoadWithBudget?: boolean };\n  resetIsHistoryEndReached: { slug: string } | undefined;\n  fetchNfts: undefined;\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: undefined;\n  startUnstaking: undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  submitStakingHardware: { isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: { limit?: number; offset?: number } | undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: undefined;\n  submitStakingClaim: { password: string };\n  submitStakingClaimHardware: undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  openSettingsHardwareWallet: undefined;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  submitDappConnectRequestConfirmHardware: { accountId: string };\n  submitDappConnectHardware: { accountId: string; signature: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  showDappTransfer: { transactionIdx: number };\n  setDappTransferScreen: { state: TransferState };\n  clearDappTransferError: undefined;\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  submitDappTransferHardware2: { signedMessages: ApiSignedTransfer[] };\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { origin: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { origin: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  loadSwapPairs: { tokenSlug: string; shouldForceUpdate?: boolean };\n  clearSwapPairsCache: undefined;\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: undefined;\n  closeReceiveModal: undefined;\n  openInvoiceModal: undefined;\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password: string };\n  submitClaimingVestingHardware: undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getTransactionHashFromTxId(chain: ApiChain, txId: string) {\n  if (chain === 'tron') {\n    const localIdSign = txId.indexOf('|');\n\n    return localIdSign !== -1 ? txId.substring(0, localIdSign) : txId;\n  }\n\n  const [, transactionHash] = (txId || '').split(':');\n  return transactionHash;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FISRT_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport { selectCurrentAccount, selectCurrentAccountSettings, selectCurrentAccountState } from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD₮',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is ≤ the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestTxTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestTxTimestamps = selectNewestTxTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestTxTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T extends any>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  // eslint-disable-next-line no-restricted-globals\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await patchCapacitorAppVh(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void patchCapacitorAppVh(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n    patchVh();\n\n    currentWindowSize = {\n      ...getWindowSize(),\n      height: target.height,\n    };\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction patchCapacitorAppVh(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(toggleSafeAreaClasses, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  webApp.enableVerticalSwipes();\n  webApp.lockOrientation();\n  webApp.MainButton.hide();\n  webApp.SecondaryButton.hide();\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n  } else {\n    getActions().closeFullscreen();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()?.BiometricManager!;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: 'The bot requests biometrics for testing purposes.' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('submitTransferPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst SafeArea = registerPlugin('SafeArea', {\r\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { SafeArea };\r\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import type { ApiChain } from '../api/types';\n\nimport { EMPTY_HASH_VALUE } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { isTelegramUrl } from './url';\n\nexport async function openUrl(\n  url: string, options?: { isExternal?: boolean; title?: string; subtitle?: string },\n) {\n  if (IS_CAPACITOR && !options?.isExternal && url.startsWith('http') && !isTelegramUrl(url)) {\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nexport function handleOpenUrl(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href);\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: Function;\nconst renderPromise = new Promise((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line max-len, no-spaced-func\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait,\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport function openDeeplinkOrUrl(url: string, isExternal = false, isFromInAppBrowser = false) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    void processDeeplink(url, isFromInAppBrowser);\n  } else {\n    void openUrl(url, { isExternal });\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n\n    return {\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiChain, ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n): ApiNotificationAddress[] {\n  return accountIds.map((accountId) => {\n    const account = global.accounts!.byId[accountId];\n\n    return {\n      title: account.title,\n      address: account.addressByChain.ton,\n      chain: 'ton' as ApiChain,\n    };\n  });\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: selectNotificationTonAddressesSlow(global, notificationAccounts),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport { SplashScreen } from '@sina_kh/mtw-capacitor-splash-screen';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { processDeeplink } from '../deeplink';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet launchUrl: string | undefined;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom } }) => {\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    void processDeeplink(event.url);\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n\n  launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency } from '../api/types';\n\nimport {\n  DEFAULT_PRICE_CURRENCY,\n  SHORT_CURRENCY_SYMBOL_MAP,\n  WHOLE_PART_DELIMITER,\n} from '../config';\nimport { Big } from '../lib/big.js';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(Object.values(SHORT_CURRENCY_SYMBOL_MAP));\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  const bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  const rounded = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  return applyThousandsGrouping(rounded);\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number,\n) {\n  value = value.toString();\n\n  const prefix = !noSign ? (!value.startsWith('-') ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  return prefix + formatCurrency(noSign ? value : value.replace('-', ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return SHORT_CURRENCY_SYMBOL_MAP[currency as keyof typeof SHORT_CURRENCY_SYMBOL_MAP] ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\nconst PLURAL_RULES = {\n  /* eslint-disable max-len */\n  de: (n: number) => (n !== 1 ? 6 : 2),\n  en: (n: number) => (n !== 1 ? 6 : 2),\n  es: (n: number) => (n !== 1 ? 6 : 2),\n  pl: (n: number) => (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  ru: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  th: () => 6,\n  tr: (n: number) => (n > 1 ? 6 : 2),\n  uk: (n: number) => (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5),\n  'zh-Hans': () => 6,\n  'zh-Hant': () => 6,\n  /* eslint-enable max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\nfunction processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  const parts = template.split('%');\n  const processedParts: TeactNode[] = [];\n  let currentString = '';\n\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n\n    // Check if the current part is a token (between % symbols)\n    if (i % 2 === 1) {\n      const valueNode = value[part];\n\n      if (valueNode) {\n        if (typeof valueNode === 'string') {\n          currentString += valueNode;\n        } else {\n          // If the value is a component, process the accumulated string and add the component\n          if (currentString) {\n            processedParts.push(...renderText(currentString));\n            currentString = '';\n          }\n          processedParts.push(valueNode);\n        }\n      } else {\n        // If the token is not found, keep it as is (e.g., %unknown_token%)\n        currentString += `%${part}%`;\n      }\n    } else {\n      // If the part is a text segment, append it to the current string\n      currentString += part;\n    }\n  }\n\n  // Process any remaining text in the current string\n  if (currentString) {\n    processedParts.push(...renderText(currentString));\n  }\n\n  return processedParts;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T extends any>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1!.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T extends any>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  // eslint-disable-next-line no-underscore-dangle\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n      // eslint-disable-next-line no-underscore-dangle\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  // eslint-disable-next-line no-underscore-dangle\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    // eslint-disable-next-line no-underscore-dangle\n    if (!value?.__delete) {\n      // eslint-disable-next-line no-null/no-null\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createCallbackManager } from '../util/callbacks';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst blurCallbacks = createCallbackManager();\nconst focusCallbacks = createCallbackManager();\n\nlet isFocused = document.hasFocus();\n\nfunction handleBlur() {\n  if (!isFocused) return;\n\n  isFocused = false;\n  blurCallbacks.runCallbacks();\n}\n\nfunction handleFocus() {\n  isFocused = true;\n  focusCallbacks.runCallbacks();\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (!isFocused) {\n      lastOnBlur();\n    }\n\n    blurCallbacks.addCallback(lastOnBlur);\n    focusCallbacks.addCallback(lastOnFocus);\n\n    return () => {\n      focusCallbacks.removeCallback(lastOnFocus);\n      blurCallbacks.removeCallback(lastOnBlur);\n    };\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return !isFocused;\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallActionInMain<K extends keyof ActionPayloads> {\n  type: 'callActionInMain';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallActionInNative<K extends keyof ActionPayloads> {\n  type: 'callActionInNative';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n| BroadcastChannelCallActionInMain<keyof ActionPayloads>\n| BroadcastChannelCallActionInNative<keyof ActionPayloads>\n| BroadcastChannelNativeLogsRequest\n| BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  if (isBackgroundModeActive()) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nfunction handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callActionInMain': {\n      if (!IS_DELEGATING_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callActionInNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInMain',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInNative',\n    name,\n    options,\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '...';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache: Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}> = new Map();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  SettingsState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 32;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {},\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: undefined,\n  };\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n}: {\n  global: GlobalState;\n  accountId: string;\n  addressByChain: Record<ApiChain, string>;\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n}) {\n  let shouldForceAccountEdit = true;\n\n  if (!partial?.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n    const titlePrefix = isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n    let title = `${titlePrefix} ${accountAmount + 1}${postfix}`;\n\n    if (accountAmount === 0) {\n      title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n\n    partial = { ...partial, title };\n  } else if (titlePostfix) {\n    const title = partial.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    partial = { ...partial, title: `${title.trim()} ${titlePostfix}` };\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  return updateAccount(global, accountId, { ...partial, addressByChain });\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...selectAccount(global, accountId),\n          ...partial,\n        } as Account,\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, ...firstNetworkAccount! });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, ...secondNetworkAccount });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const balances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n\n  for (const [slug, balance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      balances[slug] = balance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manual imported tokens\n  for (const slug of [...importedSlugs, TON_USDT_SLUG]) {\n    if (!(slug in balances)) {\n      balances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: balances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].quote.price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      result[token.slug] = {\n        ...token,\n        quote: currentTokens?.[token.slug]?.quote ?? token.quote,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && currentTokens && isPartialDeepEqual(currentTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && (\n    !isSwapEstimateInputEqual(globalBefore, globalAfter)\n    || globalBefore.currentSwap.pairs !== globalAfter.currentSwap.pairs\n  );\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || swap1[amountKey] !== swap2[amountKey];\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nimport { selectAccountState, selectCurrentAccountState } from '../selectors';\nimport { updateAccountState, updateCurrentAccountId, updateCurrentAccountState } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function updateActivitiesIsLoading(global: GlobalState, isLoading: boolean) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function updateActivitiesIsHistoryEndReached(global: GlobalState, isReached: boolean, slug?: string) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  if (slug) {\n    const bySlug = activities?.isHistoryEndReachedBySlug ?? {};\n\n    return updateCurrentAccountState(global, {\n      activities: {\n        ...activities || { byId: {} },\n        isHistoryEndReachedBySlug: {\n          ...bySlug,\n          [slug]: isReached,\n        },\n      },\n    });\n  }\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isMainHistoryEndReached: isReached,\n    },\n  });\n}\n\nexport function updateActivitiesIsLoadingByAccount(global: GlobalState, accountId: string, isLoading: boolean) {\n  const { activities } = selectAccountState(global, accountId) || {};\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingInfo(global: GlobalState, stakingInfo: GlobalState['stakingInfo']) {\n  return {\n    ...global,\n    stakingInfo,\n  };\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByOrigin: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, origin: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByOrigin) delete dappLastOpenedDatesByOrigin[origin];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.origin !== origin),\n    dappLastOpenedDatesByOrigin,\n  });\n}\n","import type { ApiActivity } from '../api/types';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  let value = a.timestamp - b.timestamp;\n  if (value === 0) {\n    value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n  }\n  return isAsc ? value : -value;\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiChain, ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport {\n  AppState, AuthState, BiometricsState, HardwareConnectState,\n} from '../../types';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact, omitUndefined } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccountIdByAddress,\n  selectAccounts,\n  selectAllHardwareAccounts,\n  selectCurrentNetwork,\n  selectFirstNonHardwareAccount,\n  selectIsOneAccount,\n  selectLedgerAccountIndexToImport,\n  selectNetworkAccountsMemoized,\n  selectNewestTxTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestTxTimestamps = selectNewestTxTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestTxTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  actions.clearSwapPairsCache();\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const nextAuthState = firstNonHardwareAccount\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (Boolean(firstNonHardwareAccount) && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic'),\n    ...(!firstNonHardwareAccount ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const {\n    accountId, tonAddress, tronAddress, secondNetworkAccount,\n  } = result;\n\n  const addressByChain = omitUndefined({\n    ton: tonAddress,\n    tron: tronAddress,\n  }) as Record<ApiChain, string>;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = !Object.values(accounts).length;\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().hardware;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address } as Record<ApiChain, string>;\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      partial: {\n        isHardware: true,\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, {});\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  global = createAccountsFromGlobal(global);\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  setGlobal(global);\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const state = firstNonHardwareAccount && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!firstNonHardwareAccount && { state }),\n  });\n  setGlobal(global);\n\n  if (!firstNonHardwareAccount) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n\n  if (firstNonHardwareAccount) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  global = createAccountsFromGlobal(global);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('connectHardwareWallet', async (global, actions, params) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = !Object.values(accounts).length;\n  const { areSettingsOpen } = global;\n\n  if (IS_DELEGATING_BOTTOM_SHEET && !isFirstAccount && !areSettingsOpen) return;\n\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    hardwareSelectedIndices: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  const isLedgerConnected = await ledgerApi.connectLedger(params.transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(global, {\n    isLedgerConnected: true,\n  });\n  setGlobal(global);\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      global = updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      });\n      setGlobal(global);\n      return;\n    }\n\n    global = updateHardware(global, {\n      isTonAppConnected: true,\n    });\n    setGlobal(global);\n\n    global = getGlobal();\n    const { isRemoteTab } = global.hardware;\n    const network = selectCurrentNetwork(global);\n    const lastIndex = selectLedgerAccountIndexToImport(global);\n    const currentHardwareAccounts = selectAllHardwareAccounts(global) ?? [];\n    const currentHardwareAddresses = currentHardwareAccounts.map((account) => account.addressByChain.ton);\n    const hardwareWallets = isRemoteTab ? [] : await ledgerApi.getNextLedgerWallets(\n      network,\n      lastIndex,\n      currentHardwareAddresses,\n    );\n\n    global = getGlobal();\n\n    if ('error' in hardwareWallets) {\n      actions.showError({ error: hardwareWallets.error });\n      throw Error(hardwareWallets.error);\n    }\n\n    const nextHardwareState = isRemoteTab || hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    global = updateHardware(global, {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: params.transport,\n    });\n    setGlobal(global);\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !params.noRetry) {\n      actions.connectHardwareWallet({ ...params, noRetry: true });\n      return;\n    }\n\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n\n    logDebugError('connectHardwareWallet', err);\n  }\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  global = updateAuth(global, {\n    method: 'importHardwareWallet',\n    error: undefined,\n  });\n\n  global = updateHardware(global, {\n    hardwareSelectedIndices,\n  });\n\n  setGlobal(global);\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  global = updateHardware(global, {\n    hardwareState: HardwareConnectState.Connect,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = !Object.values(accounts).length;\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = await callApi('importNewWalletVersion', accountId, version);\n  global = getGlobal();\n\n  const existAccountId = selectAccountIdByAddress(global, 'ton', wallet!.address);\n\n  if (existAccountId) {\n    actions.switchAccount({ accountId: existAccountId });\n    return;\n  }\n\n  const { title: currentWalletTitle } = (global.accounts?.byId ?? {})[accountId];\n  const addressByChain = { ton: wallet!.address } as Record<ApiChain, string>;\n  global = updateCurrentAccountId(global, wallet!.accountId);\n\n  const ledgerInfo = wallet!.ledger ? {\n    isHardware: true,\n    ledger: wallet?.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet!.accountId,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet!.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet!.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { compareActivities } from '../../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, findLast, unique,\n} from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { onTickEnd, pause } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { getIsSwapId, getIsTinyOrScamTransaction, getIsTxIdLocal } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  changeBalance,\n  updateAccountState,\n  updateActivitiesIsHistoryEndReached,\n  updateActivitiesIsLoading,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccountState,\n  selectAccountTxTokenSlugs,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectLastMainTxTimestamp,\n  selectToken,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\n\naddActionHandler('fetchTokenTransactions', async (global, actions, { limit, slug, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  let { idsBySlug, byId } = selectAccountState(global, accountId)?.activities || {};\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n  let tokenIds = (idsBySlug && idsBySlug[slug]) || [];\n  const toTxId = findLast(tokenIds, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n  let toTimestamp = toTxId && byId ? byId[toTxId].timestamp : undefined;\n  const { chain } = selectToken(global, slug);\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchTokenActivitySlice', accountId, chain, slug, toTimestamp, limit);\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true, slug);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n\n    tokenIds = unique(tokenIds.concat(filteredResult.map((tx) => tx.id)));\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  fetchedActivities.sort(compareActivities);\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const newOrderedIds = Object.keys(newById);\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  idsBySlug = currentActivities?.idsBySlug || {};\n  tokenIds = unique((idsBySlug[slug] || []).concat(newOrderedIds));\n\n  tokenIds.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsBySlug: { ...idsBySlug, [slug]: tokenIds },\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchTokenTransactions({ limit, slug });\n    });\n  }\n});\n\naddActionHandler('fetchAllTransactions', async (global, actions, { limit, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  const tonTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'ton') ?? [];\n  const tronTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'tron') ?? [];\n  let toTimestamp = selectLastMainTxTimestamp(global, accountId)!;\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n\n  while (shouldFetchMore) {\n    const result = await callApi(\n      'fetchAllActivitySlice',\n      accountId,\n      limit,\n      toTimestamp,\n      tonTokenSlugs,\n      tronTokenSlugs,\n    );\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  const byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  fetchedActivities.sort(compareActivities);\n\n  const idsMain = unique((currentActivities?.idsMain ?? []).concat(extractKey(fetchedActivities, 'id')));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsMain,\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchAllTransactions({ limit });\n    });\n  }\n});\n\naddActionHandler('resetIsHistoryEndReached', (global, actions, payload) => {\n  global = updateActivitiesIsHistoryEndReached(global, false, payload?.slug);\n  setGlobal(global);\n});\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password!);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        quote: {\n          slug: token.slug,\n          price: token.price ?? 0,\n          priceUsd: token.priceUsd ?? 0,\n          percentChange24h: token.change24h ?? 0,\n        },\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug!];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        quote: {\n          slug: token.slug,\n          price: 0,\n          priceUsd: 0,\n          percentChange24h: 0,\n        },\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n  };\n}\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { BottomSheetPlugin } from './definitions';\n\nconst BottomSheet = registerPlugin<BottomSheetPlugin>('BottomSheet');\n\nexport * from './definitions';\nexport { BottomSheet };\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","import { useRef, useState } from '../lib/teact/teact';\n\nimport buildClassName from '../util/buildClassName';\n\nconst CLOSE_DURATION = 350;\n\nconst useShowTransition = (\n  isOpen = false,\n  onCloseTransitionEnd?: () => void,\n  noFirstOpenTransition = false,\n  className: string | false = 'fast',\n  noCloseTransition = false,\n  closeDuration = CLOSE_DURATION,\n  noOpenTransition = false,\n) => {\n  const [isClosed, setIsClosed] = useState(!isOpen);\n  const closeTimeoutRef = useRef<number>();\n  // СSS class should be added in a separate tick to turn on CSS transition.\n  const [hasOpenClassName, setHasOpenClassName] = useState(isOpen && noFirstOpenTransition);\n\n  if (isOpen) {\n    setIsClosed(false);\n    setHasOpenClassName(true);\n\n    if (closeTimeoutRef.current) {\n      window.clearTimeout(closeTimeoutRef.current);\n      closeTimeoutRef.current = undefined;\n    }\n  } else {\n    setHasOpenClassName(false);\n\n    if (!isClosed && !closeTimeoutRef.current) {\n      const exec = () => {\n        setIsClosed(true);\n\n        if (onCloseTransitionEnd) {\n          onCloseTransitionEnd();\n        }\n\n        closeTimeoutRef.current = undefined;\n      };\n\n      if (noCloseTransition) {\n        exec();\n      } else {\n        closeTimeoutRef.current = window.setTimeout(exec, closeDuration);\n      }\n    }\n  }\n\n  // `noCloseTransition`, when set to true, should remove the open class immediately\n  const shouldHaveOpenClassName = (hasOpenClassName && !(noCloseTransition && !isOpen)) || (noOpenTransition && isOpen);\n  const isClosing = Boolean(closeTimeoutRef.current);\n  const shouldRender = isOpen || isClosing;\n  const transitionClassNames = buildClassName(\n    className && 'opacity-transition',\n    className,\n    shouldHaveOpenClassName && 'open',\n    !shouldHaveOpenClassName && 'not-open',\n    shouldRender && 'shown',\n    !shouldRender && 'not-shown',\n    isClosing && 'closing',\n  );\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    hasShownClass: shouldRender,\n    hasOpenClass: shouldHaveOpenClassName,\n  };\n};\n\nexport default useShowTransition;\n","import type { CHAIN, ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SIGN_DATA_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES | SIGN_DATA_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { W5_MAX_MESSAGES } from '../api/chains/ton/constants';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(maxMessages = W5_MAX_MESSAGES): DeviceInfo {\n  return {\n    platform: getPlatform()!,\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features: [\n      'SendTransaction', // TODO DEPRECATED\n      { name: 'SendTransaction', maxMessages },\n    ],\n  };\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import { TONCONNECT_WALLET_JSBRIDGE_KEY } from '../../config';\n\nexport enum WebViewBridgeMessageType {\n  invokeCapFunc = 'invokeCapFunc',\n  functionResponse = 'functionResponse',\n  event = 'event',\n}\n\nexport interface WebViewBridgeMessage {\n  type: string;\n  invocationId: string;\n  name: string;\n  args: any[];\n}\n\nexport const objectToInjection = (obj: Record<string, any>, timeout?: number) => {\n  const funcKeys = Object.keys(obj).filter((key) => typeof obj[key] === 'function');\n\n  const funcs = funcKeys.reduce(\n    (acc, funcName) => `${acc}${funcName}: (...args) => {\n      return new Promise((resolve, reject) => window.invokeCapFunc('bridge:${funcName}', args, resolve, reject))\n    },`,\n    '',\n  );\n\n  return `\n    (() => {\n      if (window.${TONCONNECT_WALLET_JSBRIDGE_KEY}) return;\n      window.capPromises = {};\n      window.capEventListeners = [];\n      window.invokeCapFunc = (name, args, resolve, reject) => {\n        const invocationId = btoa(Math.random()).substring(0, 12);\n        const timeoutMs = ${timeout || 'undefined'};\n        const timeoutId = timeoutMs\n          ? setTimeout(() => reject(new Error(\\`bridge timeout for function with name: \\${name}\\`)), timeoutMs)\n          : null;\n        window.capPromises[invocationId] = { resolve, reject, timeoutId };\n        const target = 'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab;\n        target.postMessage(JSON.stringify({\n          type: '${WebViewBridgeMessageType.invokeCapFunc}',\n          invocationId: invocationId,\n          name,\n          args,\n        }));\n      };\n      window.open = (url) => {\n        window.invokeCapFunc('window:open', { url });\n      };\n      window.close = () => {\n        window.invokeCapFunc('window:close');\n      };\n      window.addEventListener('click', (e) => {\n        const { href, target } = e.target.closest('a') || {};\n        if (href && (target === '_blank' || !href.startsWith('http'))) {\n          e.preventDefault();\n          window.invokeCapFunc('window:open', { url: href });\n        }\n      }, false);\n      window.addEventListener('message', ({ data }) => {\n        try {\n          const message = JSON.parse(data);\n          if (message.type === '${WebViewBridgeMessageType.functionResponse}') {\n            const promise = window.capPromises[message.invocationId];\n            if (!promise) {\n              return;\n            }\n            if (promise.timeoutId) {\n              clearTimeout(promise.timeoutId);\n            }\n            if (message.status === 'fulfilled') {\n              promise.resolve(message.data);\n            } else {\n              promise.reject(new Error(message.data));\n            }\n            delete window.capPromises[message.invocationId];\n          }\n          if (message.type === '${WebViewBridgeMessageType.event}') {\n            window.capEventListeners.forEach((listener) => listener(message.event));\n          }\n        } catch {}\n      });\n      function listen(cb) {\n        window.capEventListeners.push(cb);\n        return function() {\n          const index = window.capEventListeners.indexOf(cb);\n          if (index > -1) {\n            window.capEventListeners.splice(index, 1);\n          }\n        };\n      }\n      window.${TONCONNECT_WALLET_JSBRIDGE_KEY} = {\n        tonconnect: Object.assign(\n          ${JSON.stringify(obj)},\n          {${funcs}},\n          { listen },\n        ),\n      };\n    })();\n  `;\n};\n\nexport const getInjectableJsMessage = (message: any) => {\n  return `\n    (function() {\n      window.dispatchEvent(new MessageEvent('message', {\n        data: ${JSON.stringify(message)}\n      }));\n    })();\n  `;\n};\n","import type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  DeviceInfo,\n  RpcMethod,\n  WalletEvent,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useMemo, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { CustomInAppBrowserObject } from './useWebViewBridge';\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { logDebugError } from '../../../util/logs';\nimport { tonConnectGetDeviceInfo } from '../../../util/tonConnectEnvironment';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { useWebViewBridge } from './useWebViewBridge';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\ninterface WebViewTonConnectBridge {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n  restoreConnection(): Promise<ConnectEvent>;\n  disconnect(): Promise<void>;\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\ninterface OwnProps {\n  endpoint?: string;\n}\n\nexport function useDappBridge({\n  endpoint,\n}: OwnProps) {\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inAppBrowserRef = useRef<CustomInAppBrowserObject>(null);\n  const [requestId, setRequestId] = useState(0);\n  const origin = useMemo(() => {\n    return endpoint ? new URL(endpoint).origin.toLowerCase() : undefined;\n  }, [endpoint]);\n\n  const bridgeObject = useMemo((): WebViewTonConnectBridge | undefined => {\n    if (!origin) return undefined;\n\n    return {\n      deviceInfo: tonConnectGetDeviceInfo(),\n      protocolVersion: TONCONNECT_PROTOCOL_VERSION,\n      isWalletBrowser: true,\n\n      connect: async (protocolVersion, request) => {\n        try {\n          if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n            return buildConnectError(\n              requestId,\n              'Unsupported protocol version',\n              CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n            );\n          }\n          verifyConnectRequest(request);\n\n          await inAppBrowserRef.current?.hide();\n\n          openLoadingOverlay();\n\n          const response = await callApi(\n            'tonConnect_connect',\n            buildDappRequest(origin),\n            request,\n            requestId,\n          );\n\n          closeLoadingOverlay();\n\n          inAppBrowserRef.current?.show();\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:connect', err);\n          inAppBrowserRef.current?.show();\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      restoreConnection: async () => {\n        try {\n          const response = await callApi(\n            'tonConnect_reconnect',\n            buildDappRequest(origin),\n            requestId,\n          );\n          setRequestId(requestId + 1);\n\n          return response;\n        } catch (err: any) {\n          logDebugError('useDAppBridge:reconnect', err);\n\n          if ('event' in err && 'id' in err && 'payload' in err) {\n            return err;\n          }\n\n          return buildConnectError(\n            requestId,\n            err?.message,\n            CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n          );\n        }\n      },\n\n      disconnect: async () => {\n        setRequestId(0);\n\n        await callApi(\n          'tonConnect_disconnect',\n          buildDappRequest(origin),\n          { id: requestId.toString(), method: 'disconnect', params: [] },\n        );\n      },\n\n      send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n        setRequestId(requestId + 1);\n        const global = getGlobal();\n        const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.origin === origin);\n\n        if (!isConnected) {\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n              message: 'Unknown app',\n            },\n            id: request.id.toString(),\n          };\n        }\n\n        const dappRequest = buildDappRequest(origin);\n\n        try {\n          switch (request.method) {\n            case 'sendTransaction': {\n              await inAppBrowserRef.current?.hide();\n\n              const callResponse = await callApi(\n                'tonConnect_sendTransaction',\n                dappRequest,\n                request,\n              );\n              if (IS_DELEGATED_BOTTOM_SHEET) {\n                void BottomSheet.applyScrollPatch();\n              }\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            case 'disconnect': {\n              const callResponse = await callApi(\n                'tonConnect_disconnect',\n                dappRequest,\n                request,\n              );\n\n              return callResponse!;\n            }\n\n            case 'signData': {\n              await inAppBrowserRef.current?.hide();\n              const callResponse = await callApi(\n                'tonConnect_signData',\n                dappRequest,\n                request,\n              );\n              inAppBrowserRef.current?.show();\n\n              return callResponse!;\n            }\n\n            default:\n              return {\n                error: {\n                  code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                  message: `Method \"${request!.method}\" is not supported`,\n                },\n                id: request!.id.toString(),\n              };\n          }\n        } catch (err: any) {\n          logDebugError('useDAppBridge:send', err);\n          inAppBrowserRef.current?.show();\n\n          return {\n            error: {\n              code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n              message: err?.message,\n            },\n            id: request!.id.toString(),\n          };\n        }\n      },\n    };\n  }, [origin, requestId]);\n\n  const [\n    bridgeInjectionCode,\n    onMessage,\n    sendEvent,\n  ] = useWebViewBridge<WebViewTonConnectBridge, WalletEvent>(inAppBrowserRef, bridgeObject);\n\n  const disconnect = useLastCallback(() => {\n    try {\n      // onDisconnect(endpoint, requestId);\n      sendEvent({ event: 'disconnect', payload: {}, id: requestId });\n    } catch (err: any) {\n      logDebugError('disconnect', err);\n    }\n  });\n\n  return {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    origin,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { useCallback, useMemo } from '../../../lib/teact/teact';\n\nimport type { WebViewBridgeMessage } from '../helpers';\n\nimport { openDeeplinkOrUrl } from '../../../util/deeplink';\nimport { getInjectableJsMessage, objectToInjection, WebViewBridgeMessageType } from '../helpers';\n\nexport type CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ntype UseWebViewBridgeReturnType<Event> = [\n  string,\n  (e: MessageEvent) => void,\n  (event: Event) => void,\n];\n\nexport const useWebViewBridge = <\n  BridgeObject extends { [key: string]: any } = {},\n  Event extends object = {},\n>(\n    inAppBrowserRef: React.RefObject<CustomInAppBrowserObject>,\n    bridgeObj?: BridgeObject,\n    timeout?: number,\n  ): UseWebViewBridgeReturnType<Event> => {\n  const bridgeInjectionCode = useMemo(\n    () => (bridgeObj ? objectToInjection(bridgeObj, timeout) : ''),\n    [bridgeObj, timeout],\n  );\n\n  const postMessage = useCallback((message: any) => {\n    void inAppBrowserRef.current?.executeScript({\n      code: getInjectableJsMessage(JSON.stringify(message)),\n    });\n  }, [inAppBrowserRef]);\n\n  const onMessage = useCallback(\n    async (event: MessageEvent) => {\n      if (!bridgeObj) return;\n\n      const message = typeof event.data === 'string'\n        ? JSON.parse(event.data)\n        : event.data as WebViewBridgeMessage;\n\n      if (message.type === WebViewBridgeMessageType.invokeCapFunc) {\n        try {\n          let result: any;\n          switch (message.name) {\n            case 'window:open': {\n              const { url } = message.args;\n              openDeeplinkOrUrl(url, true, true);\n              result = true;\n              break;\n            }\n\n            case 'window:close': {\n              void inAppBrowserRef.current?.close();\n\n              break;\n            }\n\n            default: {\n              const methodName = message.name.replace('bridge:', '');\n              result = await bridgeObj[methodName](...message.args);\n            }\n          }\n\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'fulfilled',\n            data: result,\n          });\n        } catch (err: any) {\n          postMessage({\n            type: WebViewBridgeMessageType.functionResponse,\n            invocationId: message.invocationId,\n            status: 'rejected',\n            data: err?.message,\n          });\n        }\n      }\n    },\n    [bridgeObj, inAppBrowserRef, postMessage],\n  );\n\n  const sendEvent = useCallback(\n    (event: any) => {\n      postMessage({ type: WebViewBridgeMessageType.event, event });\n    },\n    [postMessage],\n  );\n\n  return [bridgeInjectionCode, onMessage, sendEvent];\n};\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { CustomInAppBrowserObject } from '../explore/hooks/useWebViewBridge';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useDappBridge } from '../explore/hooks/useDappBridge';\n\nimport styles from './InAppBrowser.module.scss';\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const { hasOpenClass, hasShownClass } = useShowTransition(Boolean(url));\n\n  const lang = useLang();\n\n  const {\n    inAppBrowserRef,\n    bridgeInjectionCode,\n    onMessage,\n    disconnect,\n  } = useDappBridge({\n    endpoint: url,\n  });\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    disconnect();\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('message', onMessage);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    // eslint-disable-next-line no-null/no-null\n    inAppBrowserRef.current = null;\n    closeBrowser();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode);\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    inAppBrowserRef.current = inAppBrowser;\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('message', onMessage);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return;\n\n    void openBrowser();\n  }, [url, title, subtitle]);\n\n  return (\n    <div className={buildClassName(hasShownClass && styles.browserShown, hasOpenClass && styles.browserOpen)} />\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"browserShown\":\"HhiWhPVc\",\"browserOpen\":\"pNRv6m36\"};","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? ({} as Record<ApiChain, string>);\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(address: string, availableChains: Record<ApiChain, unknown>): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","import type { ApiStakingState, ApiToken } from '../../api/types';\nimport type { DropdownItem } from '../../components/ui/Dropdown';\n\nimport { MIN_ACTIVE_STAKING_REWARDS } from '../../config';\nimport { ASSET_LOGO_PATHS } from '../../components/ui/helpers/assetLogos';\n\nexport function buildStakingDropdownItems({\n  tokenBySlug, states, shouldUseNominators,\n}: {\n  tokenBySlug: Record<string, ApiToken>;\n  states: ApiStakingState[];\n  shouldUseNominators?: boolean;\n}) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  const res = states.filter((state) => tokenBySlug[state.tokenSlug]).map<DropdownItem>((state) => {\n    const stateToken = tokenBySlug[state.tokenSlug];\n    const logoPath = ASSET_LOGO_PATHS[stateToken.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n    return {\n      value: state.id,\n      icon: logoPath ?? stateToken.image,\n      name: stateToken.symbol,\n    };\n  });\n  return res;\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.isUnstakeRequested) {\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.isUnstakeRequested\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n","import type { ApiJettonStakingState, ApiTransactionError } from '../../../api/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { getIsActiveStakingState } from '../../helpers/staking';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccount, selectAccountStakingState } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount!,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId)!;\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        const account = selectAccount(global, currentAccountId)!;\n        if (account.isHardware) {\n          actions.resetHardwareWalletConnect();\n          global = updateCurrentStaking(getGlobal(), { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  if (isUnstaking) {\n    const instantAvailable = global.stakingInfo?.liquid?.available;\n\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n      state.type === 'liquid'\n      && instantAvailable\n      && instantAvailable < state.balance\n    ));\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later.',\n      });\n      global = getGlobal();\n\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later.',\n      });\n\n      global = getGlobal();\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingHardware', async (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  const state = selectAccountStakingState(global, currentAccountId!)!;\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: isUnstaking\n      ? StakingState.UnstakeConfirmHardware\n      : StakingState.StakeConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  const accountId = global.currentAccountId!;\n\n  try {\n    if (isUnstaking) {\n      const instantAvailable = global.stakingInfo?.liquid?.available;\n      const stakingBalance = state.balance;\n      const unstakeAmount = state.type === 'nominators' ? stakingBalance : tokenAmount!;\n\n      result = await ledgerApi.submitLedgerUnstake(\n        accountId,\n        state,\n        unstakeAmount,\n        getTonStakingFees(state.type).unstake.real,\n      );\n\n      const isLongUnstakeRequested = Boolean(state.type === 'nominators' || (\n        state.type === 'liquid'\n        && instantAvailable\n        && instantAvailable < stakingBalance\n      ));\n\n      global = getGlobal();\n      global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n      setGlobal(global);\n    } else {\n      result = await ledgerApi.submitLedgerStake(\n        accountId,\n        amount!,\n        state,\n        getTonStakingFees(state.type).stake.real,\n      );\n    }\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showDialog({\n      message: isUnstaking\n        ? 'Unstaking was unsuccessful. Try again later.'\n        : 'Staking was unsuccessful. Try again later.',\n    });\n  } else if (typeof result !== 'string' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isUnstaking ? StakingState.UnstakeComplete : StakingState.StakeComplete,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global, actions, payload) => {\n  const { limit, offset } = payload ?? {};\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!, limit, offset);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n\n  global = updateCurrentStaking(global, {\n    state: isHardware ? StakingState.ClaimConnectHardware : StakingState.ClaimPassword,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  const result = await callApi(\n    'submitStakingClaim',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: StakingState.None,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaimHardware', async (global, actions) => {\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: StakingState.ClaimConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const stakingState = selectAccountStakingState(global, accountId)! as ApiJettonStakingState;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n\n  try {\n    result = await ledgerApi.submitLedgerStakingClaim(\n      accountId,\n      stakingState,\n      getTonStakingFees(stakingState.type).claim?.real,\n    );\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingClaimHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: StakingState.None,\n    });\n    setGlobal(global);\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent!.pageX!,\n              centerY: captureEvent!.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll))\n          .forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = (e as RealTouchEvent).touches[0].pageX;\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n| 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","export var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     * On Android the default will be the one the app was launched with.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\nimport { StatusBar, Style } from '@sina_kh/mtw-capacitor-status-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes: Set<HTMLInputTypeAttribute> = new Set([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: React.RefObject<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T extends any>(next: T): T | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T extends any>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: VoidFunction;\n  onBack?: VoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go') as HistoryOperationGo[];\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go') as HistoryOperationState[];\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: VoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isActive);\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isDoubled && styles.doubled, className, transitionClassNames)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { RefObject } from 'react';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLButtonElement>;\n  children: React.ReactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isSmall?: boolean;\n  isDestructive?: boolean;\n  onClick?: NoneToVoidFunction;\n  shouldStopPropagation?: boolean;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isLoading,\n  isPrimary,\n  isSimple,\n  isText,\n  isDisabled,\n  isRound,\n  isSmall,\n  isDestructive,\n  onClick,\n  shouldStopPropagation,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isSimple && styles.isSimple,\n        isSmall && styles.sizeSmall,\n        isPrimary && styles.primary,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isText && styles.isText,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: { [k: string]: string } = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current!, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type !== VirtualType.Fragment) {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n        // eslint-disable-next-line no-underscore-dangle\n        e.currentTarget.dataset.__teactSelectionState = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      // eslint-disable-next-line no-underscore-dangle\n      const selectionStateJson = inputEl.dataset.__teactSelectionState;\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    // eslint-disable-next-line no-underscore-dangle\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_noClose\":\"rhAMo7kW\",\"headerNoClose\":\"rhAMo7kW\",\"title\":\"ZDSNp0nr\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { RefObject } from 'react';\nimport type { BottomSheetKeys } from 'native-bottom-sheet';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport { getTelegramApp } from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: React.ReactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const localDialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const swipeDownDateRef = useRef<number>(null);\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    getTelegramApp()?.disableVerticalSwipes();\n\n    return getTelegramApp()?.enableVerticalSwipes;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      return;\n    }\n    const browser = getInAppBrowser();\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose);\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    undefined,\n    false,\n    undefined,\n    animationDuration,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    transitionClassNames,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nexport default freezeWhenClosed(Modal);\n\nfunction getCanCloseModal(lastScrollRef: { current: number | null }, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from 'native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is ≤ the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import { DappConnectState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY, IS_CAPACITOR } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  ApiHardwareBlindSigningNotEnabled,\n  ApiUnsupportedVersionError,\n  ApiUserRejectsError,\n} from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  setIsPinAccepted,\n  updateConnectedDapps,\n  updateCurrentAccountId,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount, selectNewestTxTimestamps } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    global = updateDappConnectRequest(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappConnectRequestConfirm', { password, accountId });\n\n    return;\n  }\n\n  void vibrateOnSuccess();\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    password,\n  });\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler(\n  'submitDappConnectRequestConfirmHardware',\n  async (global, actions, { accountId: connectAccountId }) => {\n    const { proof } = global.dappConnectRequest!;\n\n    global = getGlobal();\n    global = updateDappConnectRequest(global, {\n      error: undefined,\n      state: DappConnectState.ConfirmHardware,\n    });\n    setGlobal(global);\n\n    const ledgerApi = await import('../../../util/ledger');\n\n    try {\n      const signature = await ledgerApi.signLedgerProof(connectAccountId!, proof!);\n      if (IS_DELEGATED_BOTTOM_SHEET) {\n        callActionInMain('submitDappConnectHardware', { accountId: connectAccountId, signature });\n\n        return;\n      }\n\n      actions.submitDappConnectHardware({ accountId: connectAccountId, signature });\n    } catch (err) {\n      setGlobal(updateDappConnectRequest(getGlobal(), {\n        error: 'Canceled by the user',\n      }));\n    }\n  },\n);\n\naddActionHandler('submitDappConnectHardware', async (global, actions, { accountId, signature }) => {\n  const { promiseId } = global.dappConnectRequest!;\n\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, { accountId, signature });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  const { promiseId } = global.dappConnectRequest || {};\n  if (!promiseId) {\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappConnectRequestConfirm');\n  } else {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('cancelDappTransfer');\n  } else if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateCurrentDappTransfer(global, {\n      error: 'Wrong password, please try again.',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappTransferPassword', { password });\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  void callApi('confirmDappRequest', promiseId, password);\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferHardware', async (global, actions) => {\n  const { promiseId, transactions, vestingAddress } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const ledgerApi = await import('../../../util/ledger');\n\n  try {\n    const signedMessages = await ledgerApi.signLedgerTransactions(accountId, transactions!, {\n      isTonConnect: true,\n      vestingAddress,\n    });\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      callActionInMain('submitDappTransferHardware2', { signedMessages });\n\n      return;\n    }\n\n    actions.submitDappTransferHardware2({ signedMessages });\n  } catch (err) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled',\n      }));\n      return;\n    } else if (err instanceof ApiUnsupportedVersionError) {\n      actions.showError({\n        error: '$ledger_unsupported_ton_connect',\n      });\n      void callApi('cancelDappRequest', promiseId, err.message);\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n    }\n\n    global = getGlobal();\n    global = clearCurrentDappTransfer(global);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitDappTransferHardware2', (global, actions, { signedMessages }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('confirmDappRequest', promiseId, signedMessages);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without origin\n  const brokenDapp = result.find(({ origin }) => !origin);\n  if (brokenDapp) {\n    actions.deleteDapp({ origin: brokenDapp.origin });\n    result = result.filter(({ origin }) => origin);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { origin }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { origin });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, origin);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, origin);\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, {\n  promiseId,\n  transactions,\n  accountId,\n  dapp,\n  vestingAddress,\n}) => {\n  const { currentAccountId, currentDappTransfer: { promiseId: currentPromiseId } } = global;\n  if (currentAccountId !== accountId) {\n    const nextNewestTxTimestamps = selectNewestTxTimestamps(global, accountId);\n    await callApi('activateAccount', accountId, nextNewestTxTimestamps);\n    global = getGlobal();\n    setGlobal(updateCurrentAccountId(global, accountId));\n  }\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    actions.closeDappTransfer();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when Dapp Transaction Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => getGlobal().currentDappTransfer.state !== TransferState.None, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  const state = selectIsHardwareAccount(global) && transactions.length > 1\n    ? TransferState.WarningHardware\n    : TransferState.Initial;\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  global = updateCurrentDappTransfer(global, {\n    state,\n    promiseId,\n    transactions,\n    dapp,\n    vestingAddress,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (connectionType === 'connect' && !!global.dappConnectRequest)\n        || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId && accountId !== global.currentAccountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => {\n      global = getGlobal();\n      return (Boolean(global.dappConnectRequest) || global.currentDappTransfer.state !== TransferState.None);\n    }, 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitTransferWithDieselResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n  ApiSwapPairAsset,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { buildSwapId } from '../../../util/swap/buildSwapId';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  clearCurrentSwap,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentSwap,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nlet pairsCache: Record<string, { data: ApiSwapPairAsset[]; timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FISRT_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug, pairs } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n      pairs,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    shouldResetOnClose: undefined,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n  global = getGlobal();\n\n  if (!buildResult || 'error' in buildResult) {\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    global = updateCurrentSwap(global, {\n      shouldResetOnClose: true,\n      isLoading: false,\n    });\n    setGlobal(global);\n\n    actions.showError({ error: buildResult?.error });\n\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pending',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    txIds: [],\n  };\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    isLoading: false,\n    state: SwapState.Complete,\n    activityId: buildSwapId(buildResult.id),\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (!result || 'error' in result) {\n    global = getGlobal();\n    global = updateCurrentSwap(global, { shouldResetOnClose: true });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n\n    setGlobal(global);\n    void vibrateOnError();\n\n    actions.showError({ error: result?.error });\n  }\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    error: undefined,\n    shouldResetOnClose: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  global = getGlobal();\n\n  if (!swapItem) {\n    global = updateCurrentSwap(global, {\n      isLoading: false,\n      shouldResetOnClose: true,\n    });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    setGlobal(global);\n\n    actions.showError({ error: ApiCommonError.Unexpected });\n\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    isLoading: false,\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  if (shouldSendTransaction) {\n    global = getGlobal();\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ((ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult) & { txId?: string }) | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('submitTransfer', 'ton', transferOptions, false);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('submitTransfer', 'tron', transferOptions, false);\n    }\n\n    if (!transferResult || 'error' in transferResult) {\n      global = getGlobal();\n      global = updateCurrentSwap(global, { shouldResetOnClose: true });\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n\n      setGlobal(global);\n      void vibrateOnError();\n      actions.showError({ error: transferResult?.error });\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo!.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo!.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo!.bySlug[newTokenOutSlug!];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo!.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently((global, shouldStop) => {\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    const pairsBySlug = global.currentSwap.pairs?.bySlug ?? {};\n    const isPairValid = global.currentSwap.tokenOutSlug! in pairsBySlug;\n    if (!isPairValid) {\n      return {\n        ...getSwapEstimateResetParams(global),\n        errorType: SwapErrorType.InvalidPair,\n      };\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo!.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo!.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account?.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('loadSwapPairs', async (global, actions, { tokenSlug, shouldForceUpdate }) => {\n  const tokenIn = global.swapTokenInfo?.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid && !shouldForceUpdate) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  if (!pairs) {\n    global = updateCurrentSwap(global, {\n      pairs: {\n        bySlug: {\n          ...global.currentSwap.pairs?.bySlug,\n          [tokenSlug]: {},\n        },\n      },\n    });\n    setGlobal(global);\n    return;\n  }\n\n  const isTonTokenIn = tokenIn.chain === 'ton';\n\n  const bySlug = pairs.reduce((acc, pair) => {\n    const isTonTokenOut = getIsTonToken(pair.slug, true);\n    const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n    const isMultichain = !(\n      (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n    );\n\n    acc[pair.slug] = {\n      ...(isMultichain && {\n        isMultichain,\n      }),\n      ...(pair.isReverseProhibited && {\n        isReverseProhibited: pair.isReverseProhibited,\n      }),\n    };\n    return acc;\n  }, {} as AssetPairs);\n\n  pairsCache[tokenSlug] = { data: pairs, timestamp: Date.now() };\n\n  global = updateCurrentSwap(global, {\n    pairs: {\n      bySlug: {\n        ...global.currentSwap.pairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapPairsCache', () => {\n  pairsCache = {};\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => activity.kind === 'swap' && activity.status === 'pending')\n    .map(({ id }) => id);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo!.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","export function buildSwapId(backendId: string) {\n  return `swap:${backendId}`;\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitMultiTransferResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport { ApiTransactionDraftError, type ApiTransactionError, type ApiTransferToSign } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { NFT_TRANSFER_AMOUNT } from '../../../api/chains/ton/constants';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport { selectAccountState, selectToken, selectTokenAddress } from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n  let { amount } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    // This assignment is needed only for the amount checking hack in the 'newLocalTransaction' handler in\n    // `src/global/actions/apiUpdates/activities.ts` to work.\n    amount = NFT_TRANSFER_AMOUNT;\n\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, { password }) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (promiseId) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = setIsPinAccepted(global);\n      setGlobal(global);\n    }\n\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitMultiTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = [];\n    for (let i = 0; i < nfts.length; i += NFT_BATCH_SIZE) {\n      chunks.push(nfts.slice(i, i + NFT_BATCH_SIZE));\n    }\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(global, {\n    isLoading: false,\n  });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n  } else {\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global, actions) => {\n  const {\n    toAddress,\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n    nfts,\n  } = global.currentTransfer;\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (promiseId) {\n    const message: ApiTransferToSign = {\n      toAddress: toAddress!,\n      amount: amount!,\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await ledgerApi.signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n      }\n    }\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  let error: string | undefined;\n\n  if (nfts?.length) {\n    for (const nft of nfts) {\n      const currentResult = await ledgerApi.submitLedgerNftTransfer({\n        accountId: global.currentAccountId!,\n        nftAddress: nft.address,\n        password: '',\n        toAddress: resolvedAddress!,\n        comment,\n        nft,\n        realFee: realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length),\n      });\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + 1,\n      });\n      setGlobal(global);\n      result = currentResult;\n    }\n  } else {\n    const tokenAddress = selectTokenAddress(global, tokenSlug);\n    const options = {\n      accountId: global.currentAccountId!,\n      password: '',\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment,\n      tokenAddress,\n      realFee: realNativeFee,\n    };\n\n    try {\n      result = await ledgerApi.submitLedgerTransfer(options, tokenSlug);\n    } catch (err: any) {\n      if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n        error = '$hardware_blind_sign_not_enabled';\n      }\n    }\n  }\n\n  if (!error && result === undefined) {\n    error = 'Declined';\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({\n      error: result.error,\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n","import {\n  BURN_ADDRESS, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN,\n} from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateAccountSettings, updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  TONCOIN,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateVesting,\n} from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateVesting(getGlobal(), accountId, { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateVesting(global, accountId, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('submitClaimingVestingHardware', async (global, actions) => {\n  global = updateVesting(global, global.currentAccountId!, {\n    isLoading: true,\n    error: undefined,\n    unfreezeState: VestingUnfreezeState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n  const options: ApiSubmitTransferOptions = {\n    accountId,\n    password: '',\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else {\n    global = getGlobal();\n    global = updateVesting(global, accountId, {\n      isConfirmRequested: undefined,\n      unfreezeRequestedIds,\n    });\n    setGlobal(global);\n    actions.openVestingModal();\n  }\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts, deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = Object.keys(selectAccounts(global) || {});\n  if (!pushNotifications.userToken && accounts.length) {\n    enabledAccounts = accounts.slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: selectNotificationTonAddressesSlow(global, enabledAccounts),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    if (global.accounts?.byId[accountId].addressByChain.ton) {\n      acc[accountId] = createResult.addressKeys[global.accounts?.byId[accountId].addressByChain.ton];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId]!;\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses: selectNotificationTonAddressesSlow(global, [accountId]) };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[global.accounts!.byId[accountId].addressByChain.ton],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let accountIds: string[];\n\n  if (isEnabled) {\n    accountIds = Object.keys(selectAccounts(global) || {})\n      .slice(0, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT);\n    for (const newAccountId of accountIds) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    accountIds = Object.keys(enabledAccounts);\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (!accountIds.length) {\n    return;\n  }\n\n  const props = { userToken, addresses: selectNotificationTonAddressesSlow(global, accountIds), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of accountIds) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const accountId of accountIds) {\n      const address = global.accounts!.byId[accountId].addressByChain.ton;\n\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import type { ApiChain, ApiLiquidStakingState } from '../../../api/types';\n\nimport { DEFAULT_STAKING_STATE, IS_CORE_WALLET, MTW_CARDS_COLLECTION } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addNft,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateStakingInfo,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport { selectAccountNftByAddress, selectAccountState, selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        common,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n        isUnstakeRequested: false,\n      });\n      global = updateStakingInfo(global, common);\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      global = getGlobal();\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: nfts,\n          orderedAddresses: Object.keys(nfts),\n        },\n      });\n\n      update.nfts.forEach((nft) => {\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          global = updateAccountSettingsBackgroundNft(global, nft);\n        }\n      });\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n        global = updateAccountSettingsBackgroundNft(global, nft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, partial } = update;\n      global = updateAccount(global, accountId, {\n        addressByChain: {\n          ton: partial.address,\n        } as Record<ApiChain, string>,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = { ...global, isAppUpdateRequired };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      if (isUpdating && global[key]) break;\n\n      setGlobal({\n        ...global,\n        [key]: isUpdating ? Date.now() : undefined,\n      });\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({ global, accountId, addressByChain: { ton: address } as Record<ApiChain, string> });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        addressByChain: { ton: secondAddress } as Record<ApiChain, string>,\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nfunction loadSound() {\n  if (IS_CAPACITOR) {\n    NativeAudio.preload({\n      assetId: 'incomingTransactionSound',\n      assetPath: 'public/incoming-transaction.mp3',\n      audioChannelNum: 1,\n      isUrl: false,\n    }).catch((err : any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nloadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiTransactionActivity } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { groupBy } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { getIsTonToken } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { getIsTinyOrScamTransaction, getRealTxIdFromLocal } from '../../helpers';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addLocalTransaction,\n  addNewActivities,\n  clearIsPinAccepted,\n  removeLocalTransaction,\n  replaceLocalTransaction,\n  setIsFirstActivitiesLoadedTrue,\n  updateAccountState,\n  updateActivitiesIsLoadingByAccount,\n  updateActivity,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState, selectLocalTransactions } from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'newLocalTransaction': {\n      const {\n        accountId,\n        transaction,\n        transaction: { amount, txId },\n      } = update;\n\n      global = updateActivity(global, accountId, transaction);\n      global = addLocalTransaction(global, accountId, transaction);\n\n      if (-amount === global.currentTransfer.amount) {\n        global = updateCurrentTransfer(global, {\n          txId,\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n        if (getDoesUsePinPad()) {\n          global = clearIsPinAccepted(global);\n        }\n\n        if (getIsTonToken(transaction.slug)) {\n          actions.fetchTransferDieselState({ tokenSlug: transaction.slug });\n        }\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities, chain } = update;\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n\n      const localTransactions = selectLocalTransactions(global, accountId) ?? [];\n      const withLocalIndex = activities.map((activity) => {\n        if (activity.kind !== 'transaction') {\n          return { activity, localIndex: -1, groupName: 'newActivities' };\n        }\n\n        const localIndex = localTransactions.findIndex(({\n          txId, amount, isIncoming, slug, normalizedAddress, inMsgHash,\n        }) => {\n          if (getRealTxIdFromLocal(txId) === activity.txId) {\n            return true;\n          } else if (slug === TONCOIN.slug) {\n            return inMsgHash === activity.inMsgHash && normalizedAddress === activity.normalizedAddress;\n          } else {\n            return amount === activity.amount && !isIncoming && slug === activity.slug\n              && normalizedAddress === activity.normalizedAddress;\n          }\n        });\n\n        return { activity, localIndex, groupName: localIndex >= 0 ? 'localUpdates' : 'newActivities' };\n      });\n\n      const groups = groupBy(withLocalIndex, 'groupName');\n\n      groups.localUpdates?.forEach(({ activity, localIndex }) => {\n        const [localTransaction] = localTransactions.splice(localIndex, 1);\n\n        const { txId } = activity as ApiTransactionActivity;\n        const localTxId = localTransaction.txId;\n        global = replaceLocalTransaction(global, accountId, localTxId, activity as ApiTransactionActivity);\n\n        if (global.currentTransfer.txId === localTxId) {\n          global = updateCurrentTransfer(global, { txId });\n        }\n\n        const { currentActivityId } = selectAccountState(global, accountId) || {};\n        if (currentActivityId === localTxId) {\n          global = updateAccountState(global, accountId, { currentActivityId: txId });\n        }\n\n        global = removeLocalTransaction(global, accountId, localTxId);\n      });\n\n      if (groups.newActivities) {\n        const newActivities = groups.newActivities.map(({ activity }) => activity);\n\n        global = addNewActivities(global, accountId, newActivities);\n\n        const shouldPlaySound = newActivities.some((activity) => {\n          return activity.kind === 'transaction'\n            && activity.isIncoming\n            && global.settings.canPlaySounds\n            && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n            && !(\n              global.settings.areTinyTransfersHidden\n              && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug!])\n            )\n            && !getIsTransactionWithPoisoning(activity);\n        });\n\n        if (shouldPlaySound) {\n          playIncomingTransactionSound();\n        }\n      }\n\n      if (chain) {\n        global = setIsFirstActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n","import type {\n  ApiActivity, ApiChain, ApiTransaction, ApiTransactionActivity,\n} from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { compareActivities } from '../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, groupBy, mapValues, unique,\n} from '../../util/iteratees';\nimport { getIsTxIdLocal } from '../helpers';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity): GlobalState {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const idsBySlug = activities?.idsBySlug || {};\n\n  const { id, timestamp, kind } = activity;\n\n  const idsMain = [id].concat(activities?.idsMain ?? []);\n\n  if (kind === 'swap') {\n    const { from, to } = activity;\n\n    let fromTokenIds = idsBySlug[from] || [];\n    let toTokenIds = idsBySlug[to] || [];\n\n    if (!fromTokenIds.includes(id)) {\n      fromTokenIds = [id].concat(fromTokenIds);\n    }\n    if (!toTokenIds.includes(id)) {\n      toTokenIds = [id].concat(toTokenIds);\n    }\n\n    return updateAccountState(global, accountId, {\n      activities: {\n        ...activities,\n        byId: { ...activities?.byId, [id]: activity },\n        idsBySlug: { ...idsBySlug, [from]: fromTokenIds, [to]: toTokenIds },\n        idsMain,\n      },\n    });\n  }\n\n  const { slug } = activity;\n  const isLocal = getIsTxIdLocal(id);\n  let newestTransactionsBySlug = activities?.newestTransactionsBySlug || {};\n\n  if (!isLocal) {\n    const newestTx = newestTransactionsBySlug[slug];\n    if (!newestTx || newestTx.timestamp < timestamp || (newestTx.timestamp === timestamp && newestTx.txId < id)) {\n      newestTransactionsBySlug = { ...newestTransactionsBySlug, [slug]: activity };\n    }\n  }\n\n  let tokenTxIds = idsBySlug[slug] || [];\n\n  if (!tokenTxIds.includes(id)) {\n    tokenTxIds = [id].concat(tokenTxIds);\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId: { ...activities?.byId, [id]: activity },\n      idsBySlug: { ...idsBySlug, [slug]: tokenTxIds },\n      newestTransactionsBySlug,\n    },\n  });\n}\n\nexport function addNewActivities(global: GlobalState, accountId: string, newActivities: ApiActivity[]) {\n  let { activities } = selectAccountState(global, accountId) || {};\n\n  const newById = buildCollectionByKey(newActivities, 'id');\n  const byId = { ...activities?.byId, ...newById };\n\n  const newIdsMain = extractKey(newActivities, 'id');\n  const idsMain = unique(newIdsMain.concat(activities?.idsMain ?? []));\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  const replacedIdsBySlug = mapValues(newIdsBySlug, (newIds, slug) => {\n    const currentActivityIds = activities?.idsBySlug?.[slug];\n\n    return currentActivityIds ? unique(newIds.concat(currentActivityIds)) : newIds;\n  });\n\n  const newTxs = newActivities.filter(({ kind }) => kind === 'transaction') as ApiTransactionActivity[];\n  const newNewestTxsBySlug: Record<string, ApiTransaction> = { ...activities?.newestTransactionsBySlug };\n\n  // The transaction that replaced the local one may be newer\n  for (const [slug, txs] of Object.entries(groupBy(newTxs, 'slug'))) {\n    const newTx = txs[0];\n    if (!(slug in newNewestTxsBySlug) || newTx.timestamp > newNewestTxsBySlug[slug].timestamp) {\n      newNewestTxsBySlug[slug] = newTx;\n    }\n  }\n\n  activities = {\n    ...activities,\n    idsMain,\n    byId,\n    idsBySlug: { ...activities?.idsBySlug, ...replacedIdsBySlug },\n    newestTransactionsBySlug: newNewestTxsBySlug,\n  };\n\n  return updateAccountState(global, accountId, { activities });\n}\n\nfunction buildActivityIdsBySlug(activities: ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    const { id } = activity;\n\n    if ('slug' in activity) {\n      if (!acc[activity.slug]) {\n        acc[activity.slug] = [id];\n      } else {\n        acc[activity.slug].push(id);\n      }\n    }\n\n    if ('from' in activity) {\n      if (!acc[activity.from]) {\n        acc[activity.from] = [id];\n      } else {\n        acc[activity.from].push(id);\n      }\n    }\n\n    if ('to' in activity) {\n      if (!acc[activity.to]) {\n        acc[activity.to] = [id];\n      } else {\n        acc[activity.to].push(id);\n      }\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function replaceLocalTransaction(\n  global: GlobalState,\n  accountId: string,\n  localTxId: string,\n  activity: ApiTransactionActivity,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId, idsBySlug } = activities || { byId: {}, idsBySlug: {} };\n  const replacedActivity: ApiActivity | undefined = byId[localTxId];\n\n  if (!replacedActivity || replacedActivity.kind !== 'transaction') return global;\n\n  const {\n    slug, amount, timestamp, txId, shouldHide, fee,\n  } = activity;\n  const updatedIdsBySlug = { ...idsBySlug };\n  let { idsMain = [], newestTransactionsBySlug = {} } = activities ?? {};\n\n  if (slug in updatedIdsBySlug) {\n    const indexOfTxId = updatedIdsBySlug[slug].indexOf(localTxId);\n    if (indexOfTxId === -1) return global;\n\n    updatedIdsBySlug[slug] = [\n      ...updatedIdsBySlug[slug].slice(0, indexOfTxId),\n      txId,\n      ...updatedIdsBySlug[slug].slice(indexOfTxId + 1),\n    ];\n\n    const indexOfTxIdMain = idsMain.indexOf(localTxId);\n    if (indexOfTxIdMain === -1) return global;\n\n    idsMain = [\n      ...idsMain.slice(0, indexOfTxIdMain),\n      txId,\n      ...idsMain.slice(indexOfTxIdMain + 1),\n    ];\n  }\n\n  const updatedByTxId = {\n    ...byId,\n    [txId]: {\n      ...replacedActivity,\n      id: txId,\n      txId,\n      amount,\n      shouldHide,\n      timestamp,\n      fee,\n    },\n  };\n\n  delete updatedByTxId[localTxId];\n\n  const newestTransaction = newestTransactionsBySlug[slug];\n\n  if (!newestTransaction || timestamp > newestTransaction.timestamp) {\n    newestTransactionsBySlug = {\n      ...newestTransactionsBySlug,\n      [slug]: activity,\n    };\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId: updatedByTxId,\n      idsBySlug: updatedIdsBySlug,\n      newestTransactionsBySlug,\n    },\n  });\n}\n\nexport function addLocalTransaction(global: GlobalState, accountId: string, transaction: ApiTransactionActivity) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const localTransactions = (activities?.localTransactions ?? []).concat(transaction);\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: activities?.byId ?? {},\n      localTransactions,\n    },\n  });\n}\n\nexport function removeLocalTransaction(global: GlobalState, accountId: string, txId: string) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  const localTransactions = (activities?.localTransactions ?? []).filter(({ id }) => id !== txId);\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: activities?.byId ?? {},\n      localTransactions,\n    },\n  });\n}\n\nexport function setIsFirstActivitiesLoadedTrue(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byChain } = selectAccountState(global, accountId) ?? {};\n\n  if (byChain && byChain[chain]?.isFirstTransactionsLoaded) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    byChain: {\n      ...byChain,\n      [chain]: {\n        ...byChain?.[chain],\n        isFirstTransactionsLoaded: true,\n      },\n    },\n  });\n}\n","import { TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateAccountState,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        realFee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount,\n        fee,\n        realFee,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateActiveDapp': {\n      const { accountId, origin } = update;\n\n      global = updateAccountState(global, accountId, {\n        activeDappOrigin: origin,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { accountId, origin } = update;\n      const accountState = selectAccountState(global, accountId);\n\n      if (accountState?.activeDappOrigin === origin) {\n        global = updateAccountState(global, accountId, {\n          activeDappOrigin: undefined,\n        });\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading');\n      }\n\n      actions.apiUpdateDappCloseLoading();\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n//# sourceMappingURL=definitions.js.map","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FISRT_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestTxTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n\n  actions.clearSwapPairsCache();\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const { message, title } = payload;\n\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push({ message, title });\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n    && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n    && (\n      (\n        global.currentSwap.tokenInSlug === DEFAULT_SWAP_FISRT_TOKEN_SLUG\n        && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n      )\n    || isDefaultFirstTokenOutSwap\n    );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n    && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.StateInitWithoutBin:\n      actions.showDialog({ message: '$state_init_requires_bin' });\n      break;\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      actions.showDialog({ message: '$state_init_invalid' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      actions.showDialog({\n        message: 'Invalid address format. Only URL Safe Base64 format is allowed.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later.' });\n      break;\n\n    case ApiTransactionDraftError.InactiveContract:\n      actions.showDialog({\n        message: '$transfer_inactive_contract_error',\n      });\n      break;\n\n    case ApiTransactionError.NotSupportedHardwareOperation:\n      actions.showDialog({\n        message: '$ledger_not_supported_operation',\n      });\n      break;\n\n    case ApiCommonError.ServerError:\n      actions.showDialog({\n        message: window.navigator.onLine\n          ? 'An error on the server side. Please try again.'\n          : 'No internet connection. Please check your connection and try again.',\n      });\n      break;\n\n    case ApiCommonError.DebugError:\n      actions.showDialog({ message: 'Unexpected error. Please let the support know.' });\n      break;\n\n    case ApiCommonError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestTxTimestamps = selectNewestTxTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestTxTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import type { RefObject } from '../lib/teact/teact';\nimport { useLayoutEffect } from '../lib/teact/teact';\nimport { setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { AppTheme } from '../global/types';\n\nimport quantize from '../lib/quantize';\nimport { euclideanDistance, hex2rgb } from './colors';\nimport { logDebugError } from './logs';\n\nconst COLOR_COUNT = 2;\nconst QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: RefObject | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport function extractAccentColorIndex(img: HTMLImageElement) {\n  try {\n    const palette = extractPaletteFromImage(img);\n    if (!palette?.length) {\n      return undefined;\n    }\n\n    const dominantRgb = palette[0];\n    const distances = ACCENT_COLORS.light.map((ac) => euclideanDistance(dominantRgb, hex2rgb(ac)));\n    const minDistance = Math.min(...distances);\n    const index = distances.indexOf(minDistance);\n\n    return index;\n  } catch (err) {\n    logDebugError('getAccentColorFromImage', err);\n    return undefined;\n  }\n}\n\nfunction extractPaletteFromImage(img: HTMLImageElement) {\n  const imageData = extractImageData(img);\n  const pixelArray = createPixelArray(imageData, img.naturalWidth * img.naturalHeight, QUALITY);\n  const cmap = quantize(pixelArray, COLOR_COUNT);\n  if (!cmap) return undefined;\n\n  const palette = cmap.palette() as [number, number, number][];\n\n  return palette;\n}\n\nfunction extractImageData(img: HTMLImageElement) {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.naturalWidth;\n  canvas.height = img.naturalHeight;\n\n  const ctx = canvas.getContext('2d')!;\n\n  ctx.drawImage(img, 0, 0);\n\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  return imageData.data;\n}\n\nfunction createPixelArray(imgData: Uint8ClampedArray, pixelCount: number, quality: number) {\n  const pixels = imgData;\n  const pixelArray = [];\n\n  for (let i = 0, offset, r, g, b, a; i < pixelCount; i += quality) {\n    offset = i * 4;\n    r = pixels[offset + 0];\n    g = pixels[offset + 1];\n    b = pixels[offset + 2];\n    a = pixels[offset + 3];\n\n    // If pixel is mostly opaque and not white\n    if (typeof a === 'undefined' || a >= 125) {\n      if (!(r > 250 && g > 250 && b > 250)) {\n        pixelArray.push([r, g, b]);\n      }\n    }\n  }\n  return pixelArray;\n}\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport async function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  await chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  chrome.tabs.onRemoved.addListener((closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n\n    onClose();\n  });\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId!, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import useShowTransition from './useShowTransition';\n\nexport default function useMediaTransition(mediaData?: any) {\n  const isMediaReady = Boolean(mediaData);\n  const { transitionClassNames } = useShowTransition(isMediaReady, undefined, isMediaReady, 'slow');\n\n  return transitionClassNames;\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  className?: string;\n  imageClassName?: string;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  className,\n  imageClassName,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLImageElement>(null);\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  return (\n    <div className={buildClassName(transitionClassNames, className)}>\n      <img\n        ref={ref}\n        src={url}\n        alt={alt}\n        loading={loading}\n        className={imageClassName}\n        draggable={false}\n        referrerPolicy=\"same-origin\"\n        onLoad={!isLoaded ? handleLoad : undefined}\n      />\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGrayWhite from '../../../assets/lottie/clock_dark_gray_white.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGrayWhite from '../../../assets/lottie/clock_light_gray_white.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGrayWhite from '../../../assets/lottiePreview/clock_dark_gray_white.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGrayWhite from '../../../assets/lottiePreview/clock_light_gray_white.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGrayWhite: iconClockLightGrayWhite,\n    iconClockGreen: iconClockLightGreen,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGrayWhite: iconClockPreviewLightGrayWhite,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGrayWhite: iconClockDarkGrayWhite,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGrayWhite: iconClockPreviewDarkGrayWhite,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n    },\n  },\n};\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: RefObject<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { createSignal } from '../../../../util/signals';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nconst [getHideCounter, setHideCounter] = createSignal(0);\n\nexport function hideBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(currentCounter + 1);\n}\n\nexport function showBottomBar() {\n  const currentCounter = getHideCounter();\n  setHideCounter(Math.max(0, currentCounter - 1));\n}\n\nfunction getIsBottomBarHidden() {\n  return getHideCounter() > 0;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const {\n    openSettings, closeSettings, setActiveContentTab, closeSiteCategory, selectToken, openExplore, closeExplore,\n  } = getActions();\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return getHideCounter.subscribe(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  const handleWalletClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n    if (!areAssetsActive && isWalletTabActive) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const handleExploreClick = useLastCallback(() => {\n    if (isExploreOpen) {\n      closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n    }\n\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    openExplore(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  const handleSettingsClick = useLastCallback(() => {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: handleWalletClick,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={handleWalletClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={handleExploreClick}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={handleSettingsClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { hideBottomBar, showBottomBar } from '../components/main/sections/Actions/BottomBar';\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass>;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO → `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: React.RefObject<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer!.unobserve(el);\n        observer!.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { RefObject } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const transitionClassNames = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      className={buildClassName(className, transitionClassNames)}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const transitionClassNames = useMediaTransition(isPreviewLoaded && !noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      className={buildClassName(className, styles.root, !noPreviewTransition && transitionClassNames)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"input_rich\":\"ijuURRdU\",\"inputRich\":\"ijuURRdU\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"input_large\":\"Vvta_r3C\",\"inputLarge\":\"Vvta_r3C\",\"isLoading\":\"oLkTqd0H\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\"};","import type {\n  ChangeEvent, FormEvent, KeyboardEvent, RefObject,\n} from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoComplete,\n  autoCorrect,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      {isMultiline ? (\n        <textarea\n          ref={ref as RefObject<HTMLTextAreaElement>}\n          id={id}\n          className={inputFullClass}\n          value={value}\n          disabled={isDisabled}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          onInput={handleInput}\n          onChange={handleChange}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      ) : (\n        <input\n          ref={ref as RefObject<HTMLInputElement>}\n          id={id}\n          className={inputFullClass}\n          type={finalType}\n          value={value}\n          disabled={isDisabled}\n          inputMode={inputMode}\n          maxLength={maxLength}\n          autoComplete={autoComplete}\n          autoCorrect={autoCorrect}\n          spellCheck={autoCorrect}\n          onInput={handleInput}\n          onKeyDown={onKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          tabIndex={0}\n          required={isRequired}\n          placeholder={placeholder}\n        />\n      )}\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: React.ReactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import { BottomSheet } from 'native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    isSuccess && styles.success,\n  );\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => {\n    return () => {\n      // Don't trust this effect 100%, because it won't give the desired result when PinPad unmounts after the NBS closing\n      clearIsPinAccepted();\n    };\n  }, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      isSuccess && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              isSuccess && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      <div className={titleClassName}>{title}</div>\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton\n          className={!canRenderBackspace && styles.buttonHidden}\n          isDisabled={!canRenderBackspace || isSuccess}\n          onClick={handleBackspaceClick}\n        >\n          <i className=\"icon icon-backspace\" aria-hidden />\n        </PinPadButton>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n  (global, _, stickToFirst) => {\n    const { isPinAccepted } = global;\n\n    return stickToFirst(isPinAccepted);\n  },\n)(PinPad));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { pause } from '../../util/schedulers';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n| 'unfreeze' | 'passcode' | 'unlock' | 'claim';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length;\n  const canUsePinPad = getDoesUsePinPad();\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        onSubmit(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if ((IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain) || !isActive || !isBiometricAuthEnabled) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled]);\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    onSubmit(password);\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    return (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n          type={hasError ? 'error' : undefined}\n          length={PIN_LENGTH}\n          resetStateDelayMs={resetStateDelayMs}\n          value={password}\n          onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n          onChange={setPassword}\n          onClearError={handleClearError}\n          onSubmit={onSubmit}\n        />\n      </>\n    );\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n      </>\n    );\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm()}\n\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {!isBiometricAuthEnabled && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n  };\n})(PasswordForm));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\"};","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import type { RefObject } from 'react';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => React.ReactNode;\nexport type TransitionProps = {\n  ref?: RefObject<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: React.ReactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, React.ReactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"ra8fobWi\",\"appLockedFixed\":\"v6O5aP3y\",\"unlockButtonHidden\":\"YltinIdz\",\"title\":\"BTI1cF2x\",\"passwordFormContent\":\"gUfrKRnP\",\"logo\":\"Ut7tq0ls\",\"passwordInputWrapper\":\"WLrzziXQ\",\"appLockedWrapper\":\"mbuGFcLr\"};","import { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { AutolockValueType, Theme } from '../global/types';\n\nimport {\n  APP_NAME, AUTOLOCK_OPTIONS_LIST, DEBUG, IS_CORE_WALLET, IS_TELEGRAM_APP,\n} from '../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsHardwareAccount,\n  selectIsNativeBiometricAuthEnabled,\n} from '../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../util/biometrics';\nimport buildClassName from '../util/buildClassName';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrateOnSuccess } from '../util/haptics';\nimport { createSignal } from '../util/signals';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../util/windowEnvironment';\nimport { callApi } from '../api';\n\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../hooks/useBackgroundMode';\nimport useEffectOnce from '../hooks/useEffectOnce';\nimport useFlag from '../hooks/useFlag';\nimport { useHotkeys } from '../hooks/useHotkeys';\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\nimport useShowTransition from '../hooks/useShowTransition';\nimport useThrottledCallback from '../hooks/useThrottledCallback';\n\nimport Button from './ui/Button';\nimport Image from './ui/Image';\nimport { getInAppBrowser } from './ui/InAppBrowser';\nimport PasswordForm from './ui/PasswordForm';\nimport Transition from './ui/Transition';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../assets/logoDark.svg';\nimport logoLightPath from '../assets/logoLight.svg';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst PINPAD_RESET_DELAY = 300;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isHardwareAccount?: boolean;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isHardwareAccount,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n}: StateProps): TeactJsx {\n  const {\n    setIsPinAccepted, clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive,\n  } = getActions();\n  const lang = useLang();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  const [isLocked, lock, unlock] = useFlag((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(\n    isBackgroundModeActive() ? SLIDES.button : SLIDES.passwordForm,\n  );\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(SLIDES.button);\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { transitionClassNames } = useShowTransition(isLocked, afterUnlockCallback, true, 'slow');\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(SLIDES.button);\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && !isHardwareAccount) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    unlock();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderLogo() {\n    return (\n      <div className={styles.logo}>\n        <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt=\"Logo\" />\n      </div>\n    );\n  }\n\n  function renderTransitionContent(isActive: boolean) {\n    const isFixedSlide = isNonNativeBiometricAuthEnabled && slideForBiometricAuth === SLIDES.button;\n\n    return (\n      <div\n        className={buildClassName(styles.appLocked, isNonNativeBiometricAuthEnabled && styles.appLockedFixed)}\n      >\n        {\n          isFixedSlide ? (\n            <>\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n              <Button\n                isPrimary\n                className={!isActive ? styles.unlockButtonHidden : undefined}\n                onClick={handleChangeSlideForBiometricAuth}\n              >\n                {lang('Unlock')}\n              </Button>\n            </>\n          ) : (\n            <PasswordForm\n              isActive={getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n              noAnimatedIcon\n              forceBiometricsInMain\n              error={passwordError}\n              resetStateDelayMs={PINPAD_RESET_DELAY}\n              operationType=\"unlock\"\n              containerClassName={styles.passwordFormContent}\n              inputWrapperClassName={styles.passwordInputWrapper}\n              submitLabel={lang('Unlock')}\n              onSubmit={handleSubmitPassword}\n              onUpdate={handlePasswordChange}\n            >\n              {renderLogo()}\n              <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n            </PasswordForm>\n          )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={isNonNativeBiometricAuthEnabled ? handleChangeSlideForBiometricAuth : undefined}\n      activeKey={transitionKey}\n      className={buildClassName(transitionClassNames, styles.appLockedWrapper)}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue: isAppLockEnabled ? autolockValue : undefined,\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isHardwareAccount,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import type { ApiNft } from '../../../../../api/types';\n\nimport { MTW_CARDS_BASE_URL } from '../../../../../config';\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata!.mtwCardId}.webp`;\n}\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { LedgerTransport } from '../../../util/ledger/types';\nimport type { GlobalState } from '../../types';\nimport {\n  AppState, AuthState, HardwareConnectState, SettingsState, SwapState, TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  extractAccentColorIndex,\n} from '../../../util/accentColor';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport { getCachedImageUrl } from '../../../util/getCachedImageUrl';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { preloadImage } from '../../../util/preloadImage';\nimport { pause } from '../../../util/schedulers';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateHardware,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectFirstNonHardwareAccount,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/AppLocked';\nimport { getCardNftImageUrl } from '../../../components/main/sections/Card/helpers/getCardNftImageUrl';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (firstNonHardwareAccount) {\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const authState = firstNonHardwareAccount\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !firstNonHardwareAccount) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, actions, props) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  return { ...global, isAddAccountModalOpen: undefined };\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const { isBluetoothAvailable, isUsbAvailable } = await ledgerApi.detectAvailableTransports();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  if (availableTransports.length === 0) {\n    actions.showNotification({\n      message: 'Ledger is not supported on this device.',\n    });\n  } else if (availableTransports.length === 1) {\n    actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n  } else {\n    global = updateHardware(getGlobal(), {\n      availableTransports,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  if (IS_DELEGATING_BOTTOM_SHEET && params.shouldDelegateToNative) {\n    callActionInNative('initializeHardwareWalletConnection', { transport: params.transport });\n    return;\n  }\n\n  const setHardwareStateToConnecting = () => {\n    global = getGlobal();\n    global = updateHardware(getGlobal(), {\n      hardwareState: HardwareConnectState.Connecting,\n    });\n    setGlobal(global);\n  };\n\n  setHardwareStateToConnecting();\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (await ledgerApi.connectLedger(params.transport)) {\n    actions.connectHardwareWallet({ transport: params.transport });\n    return;\n  }\n\n  if (!IS_EXTENSION) {\n    global = getGlobal();\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n    setGlobal(global);\n    return;\n  }\n\n  global = updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForBrowser,\n  });\n  setGlobal(global);\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  onLedgerTabClose(id, async () => {\n    await chrome.windows.update(popup.id!, { focused: true });\n\n    if (!await ledgerApi.connectLedger(params.transport)) {\n      actions.closeHardwareWalletModal();\n      return;\n    }\n\n    setHardwareStateToConnecting();\n    actions.connectHardwareWallet({ transport: params.transport });\n  });\n});\n\naddActionHandler('openHardwareWalletModal', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n\n  setGlobal({ ...global, isHardwareModalOpen: true });\n});\n\naddActionHandler('openSettingsHardwareWallet', async (global) => {\n  const hardwareState = await connectLedgerAndGetHardwareState();\n\n  global = updateHardware(getGlobal(), { hardwareState });\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  setGlobal({ ...global, isHardwareModalOpen: false });\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdatePrices');\n\n  await Promise.all([\n    callApi('tryUpdateTokens'),\n    callApi('tryUpdateSwapTokens'),\n  ]);\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('openReceiveModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal');\n    return;\n  }\n\n  setGlobal({ ...global, isReceiveModalOpen: true });\n});\n\naddActionHandler('closeReceiveModal', (global) => {\n  setGlobal({ ...global, isReceiveModalOpen: undefined });\n});\n\naddActionHandler('openInvoiceModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal');\n    return;\n  }\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('closeInvoiceModal', (global) => {\n  setGlobal({ ...global, isInvoiceModalOpen: undefined });\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('initLedgerPage', (global) => {\n  global = updateHardware(global, {\n    isRemoteTab: true,\n  });\n  setGlobal({ ...global, appState: AppState.Ledger });\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata!;\n\n  let accentColorIndex: number | undefined;\n  if (mtwCardBorderShineType === 'radioactive') {\n    accentColorIndex = ACCENT_RADIOACTIVE_INDEX;\n  } else if (mtwCardType === 'silver') {\n    accentColorIndex = ACCENT_SILVER_INDEX;\n  } else if (mtwCardType === 'gold') {\n    accentColorIndex = ACCENT_GOLD_INDEX;\n  } else if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    accentColorIndex = ACCENT_BNW_INDEX;\n  } else {\n    const src = getCardNftImageUrl(nft);\n    if (!src) return;\n\n    const cachedBlobUrl = await getCachedImageUrl(src);\n    const img = await preloadImage(cachedBlobUrl);\n    accentColorIndex = extractAccentColorIndex(img);\n    URL.revokeObjectURL(cachedBlobUrl);\n\n    if (!accentColorIndex) return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n});\n\nasync function connectLedgerAndGetHardwareState() {\n  const ledgerApi = await import('../../../util/ledger');\n  let newHardwareState;\n\n  // If not running in the Capacitor environment, try to instantly connect to the Ledger\n  const isConnected = !IS_CAPACITOR ? await ledgerApi.connectLedger() : false;\n\n  if (!isConnected && IS_EXTENSION) {\n    newHardwareState = HardwareConnectState.WaitingForBrowser;\n  } else {\n    newHardwareState = HardwareConnectState.Connect;\n  }\n\n  return newHardwareState;\n}\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\n\nimport { setLanguage } from '../../../util/langProvider';\nimport switchTheme from '../../../util/switchTheme';\nimport { addActionHandler } from '../..';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n","import { TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { unique } from '../../../util/iteratees';\nimport { callActionInMain } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError, updateCurrentAccountState, updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectAccount, selectCurrentAccountState } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransfer', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentDappTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { origin }) => {\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByOrigin,\n    [origin]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByOrigin: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openUrl(payload.url, payload);\n});\n","import { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (\n      collectionAddress !== undefined && nft.collectionAddress === collectionAddress\n    )\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { updateVesting } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  const { isHardware } = selectAccount(global, accountId)!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: true,\n    unfreezeState: isHardware ? VestingUnfreezeState.ConnectHardware : VestingUnfreezeState.Password,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const account = selectAccount(global, accountId)!;\n\n  if (account.isHardware) {\n    actions.resetHardwareWalletConnect();\n    global = updateCurrentTransfer(getGlobal(), { state: TransferState.ConnectHardware });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (\n    !isExists\n    && Object.keys(enabledAccounts || {}).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: selectNotificationTonAddressesSlow(global, accountIds),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n  UserToken,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { bigintReviver } from '../util/bigint';\nimport {\n  cloneDeep, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { getIsActiveStakingState } from './helpers/staking';\nimport { getIsTxIdLocal } from './helpers';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && Object.keys(cached.accounts).length > 0) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances!.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          // eslint-disable-next-line @typescript-eslint/no-loop-func\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion === 14) {\n    clearActivities();\n    cached.stateVersion = 15;\n  }\n\n  if (cached.stateVersion === 15) {\n    clearActivities();\n    cached.stateVersion = 16;\n  }\n\n  if (cached.stateVersion === 16) {\n    clearActivities();\n    cached.stateVersion = 17;\n  }\n\n  if (cached.stateVersion === 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion === 20) {\n    clearActivities();\n    cached.stateVersion = 21;\n  }\n\n  if (cached.stateVersion === 21) {\n    clearActivities();\n    cached.stateVersion = 22;\n  }\n\n  if (cached.stateVersion === 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestTransactionsBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n  if (newestTransactionsBySlug) {\n    Object.values(newestTransactionsBySlug).forEach((tx) => {\n      if (tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'tokenInfo',\n      'settings',\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: global.accounts?.byId || {},\n    },\n    byAccountId: reduceByAccountId(global),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    acc[accountId] = pick(state, [\n      'balances',\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'stakingHistory',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByOrigin',\n      'dapps',\n    ]);\n\n    const accountTokens = selectAccountTokens(global, accountId);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokens);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokens?: UserToken[]) {\n  const {\n    idsBySlug, newestTransactionsBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokens || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedSlugs = tokens.slice(0, ACTIVITY_TOKENS_LIMIT).map(({ slug }) => slug);\n  if (!reducedSlugs.includes(TONCOIN.slug)) {\n    reducedSlugs.push(TONCOIN.slug);\n  }\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, reducedSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestTransactionsBySlug = newestTransactionsBySlug\n    ? pick(newestTransactionsBySlug, reducedSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestTransactionsBySlug: reducedNewestTransactionsBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && Object.values(stateById).length) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => !getIsTxIdLocal(id) && Boolean(byId[id]))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","export enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  visualViewport!.addEventListener('resize', handleViewportResize);\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    const id = setTimeout(() => savedCallback(), delay);\n    return () => clearTimeout(id);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T extends any>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '🥷' | '🦄' | '⚠️';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '🥷': '1f977',\n  '🦄': '1f984',\n  '⚠️': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const transitionClassNames = useMediaTransition(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`], transitionClassNames)}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from './Button';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n};\n\nfunction ModalHeader({\n  title, className, withNotch, closeClassName, onClose, onBackButtonClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerTitle\":\"r6WClabQ\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"iconQuestion\":\"CLKLBCVt\",\"blockWithTooltip\":\"eqWsA9Ak\",\"tooltip\":\"DCWmLsBA\",\"tooltip_wide\":\"ESFWFyav\",\"tooltipWide\":\"ESFWFyav\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialog\":\"xRqyv_rX\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  theme: Theme;\n}\n\nfunction SettingsAbout({\n  isActive, handleBackClick, isInsideModal, theme,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"🥷\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"🦄\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"🥷\" />, unicorn: <Emoji from=\"🦄\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleOpenUrl}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  // eslint-disable-next-line no-null/no-null\n  const firstInputRef = useRef<HTMLInputElement>(null);\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useHideBottomBar(Boolean(isActive));\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\n// eslint-disable-next-line consistent-return\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneClassNames = useMediaTransition(one);\n  const twoClassNames = useMediaTransition(two);\n  const threeClassNames = useMediaTransition(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', oneClassNames)}>1</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', twoClassNames)}>2</b>\n        <b className={buildClassName(styles.counterDigit, 'rounded-font', threeClassNames)}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: React.ReactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const { transitionClassNames } = useShowTransition(isLogoReady, undefined, undefined, 'slow');\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          src={logoPath}\n          alt={APP_NAME}\n          className={buildClassName(styles.logo, transitionClassNames)}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={styles.importButtonsBlock}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n  | 'isBackupModalOpen'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<number | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return <SettingsAbout isActive={isActive} handleBackClick={closeAbout} theme={theme} />;\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n    'isBackupModalOpen',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\n\nimport { getCardNftImageUrl } from '../components/main/sections/Card/helpers/getCardNftImageUrl';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"accountTitle\":\"OmlnPb32\",\"accountTitleInteractive\":\"Fldd4MBh\",\"accountTitleInner\":\"YGITDXg2\",\"accountTitleShort\":\"qroBIVHK\",\"arrowIcon\":\"npqBgt0Z\",\"menuButton\":\"MelIpdSX\",\"edit\":\"k40niuQ5\",\"inputContainer\":\"XNPgjyNM\",\"input\":\"b5kkV6B7\",\"saveButton\":\"BIi0915d\",\"container\":\"PpBNJGXa\",\"dialog\":\"rSsbSpKy\",\"backdrop\":\"qHXAdLTy\",\"dialog_compact\":\"aMGXe7oo\",\"dialogCompact\":\"aMGXe7oo\",\"actionIcon\":\"wHon4UZ6\",\"button\":\"nW3c_nQf\",\"button_current\":\"ApT2_0sQ\",\"buttonCurrent\":\"ApT2_0sQ\",\"customCard\":\"q9ZqciDr\",\"accountName\":\"vSsIdneH\",\"accountAddressBlock\":\"HvcgH37L\",\"createAccountButton\":\"R6UTDxww\",\"createAccountIcon\":\"aB938ron\",\"menuButtons\":\"vqWRGYSE\",\"inStickyCard\":\"W68g0iId\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  isHardware?: boolean;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const HARDWARE_ACCOUNT_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  isHardware,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const addressOrMultichain = Object.keys(addressByChain).length > 1\n    ? lang('Multichain')\n    : shortenAddress(\n      addressByChain.ton,\n      isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.button_current,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"iconLedger\":\"fQt3UNlM\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, HARDWARE_ACCOUNT_ADDRESS_SHIFT } from '../main/sections/Card/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  isHardware?: boolean;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  isHardware,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    backgroundImageUrl && styles.customCard,\n    mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(backgroundImageUrl && `--bg: url(${backgroundImageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isHardware && <i className={buildClassName('icon-ledger', isHardware && styles.iconLedger)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? HARDWARE_ACCOUNT_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n      && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: React.ReactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"textIcon\":\"SOw0Xtct\",\"text\":\"GuAw_sFJ\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {renderText(lang(error!))}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({ onEsc: () => { handler(); } });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import type { FC, RefObject } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  menuRef?: RefObject<HTMLDivElement | null>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  style?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: () => void;\n  onClose?: () => void;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n};\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  style,\n  positionX = 'left',\n  positionY = 'top',\n  transformOriginX,\n  transformOriginY,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  let bubbleRef = useRef<HTMLDivElement>(null);\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen,\n    onCloseAnimationEnd,\n    shouldSkipTransition,\n    undefined,\n    shouldSkipTransition,\n  );\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, bubbleRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[positionY],\n    styles[positionX],\n    styles[type],\n    transitionClassNames,\n  );\n\n  const transformOriginYStyle = transformOriginY !== undefined ? `${transformOriginY}px` : undefined;\n  const transformOriginXStyle = transformOriginX !== undefined ? `${transformOriginX}px` : undefined;\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      style={style}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        style={`transform-origin: ${transformOriginXStyle || positionX} ${transformOriginYStyle || positionY}`}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { RefObject } from 'react';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: RefObject<HTMLElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"separator\":\"KUw9xH1F\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"insideButton\":\"rpgBhur3\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\nimport windowSize from '../../util/windowSize';\n\nimport useLang from '../../hooks/useLang';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\n\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  selectedValue?: string;\n  items: DropdownItem[];\n  withPortal?: boolean;\n  anchorPosition?: IAnchorPosition;\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  menuStyle?: string;\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SAFE_POSITION_PX = 6;\n\nfunction DropdownMenu({\n  isOpen,\n  selectedValue,\n  items,\n  withPortal,\n  anchorPosition,\n  menuPosition,\n  menuPositionHorizontal,\n  menuStyle,\n  transformOriginX,\n  transformOriginY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const menuRef = useRef<HTMLDivElement>(null);\n  const [menuLeft, setMenuLeft] = useState(anchorPosition?.x);\n\n  useEffect(() => {\n    if (isOpen && menuRef.current && anchorPosition) {\n      const menuWidth = menuRef.current.offsetWidth;\n      const windowWidth = windowSize.get().width;\n      let left = anchorPosition?.x;\n\n      left = Math.min(left, windowWidth - menuWidth - SAFE_POSITION_PX);\n      left = Math.max(left, SAFE_POSITION_PX);\n\n      setMenuLeft(left);\n    }\n  }, [anchorPosition, isOpen]);\n\n  if (anchorPosition) {\n    menuStyle = `${menuStyle || ''};left: ${menuLeft}px; top: ${anchorPosition.y}px;`;\n  }\n\n  const prevMenuStyle = usePrevDuringAnimationSimple(menuStyle);\n\n  const handleItemClick = (e: React.MouseEvent, value: string) => {\n    e.stopPropagation();\n    onSelect?.(value);\n    onClose();\n  };\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      style={menuStyle || prevMenuStyle}\n      withPortal={withPortal}\n      positionX={menuPositionHorizontal}\n      positionY={menuPosition}\n      transformOriginX={transformOriginX}\n      transformOriginY={transformOriginY}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          item.icon && styles.item_with_icon,\n          item.isDisabled && styles.disabled,\n          item.isDangerous && styles.dangerous,\n          item.withSeparator && index > 0 && styles.separator,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <button\n            key={item.value}\n            type=\"button\"\n            className={fullButtonClassName}\n            disabled={item.isDisabled}\n            onClick={(e) => handleItemClick(e, item.value)}\n          >\n            {item.icon && (\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', styles.itemIcon, iconClassName)} />\n            )}\n            {item.overlayIcon && (\n              <img src={item.overlayIcon} alt=\"\" className={buildClassName('icon', styles.itemOverlayIcon)} />\n            )}\n            {item.fontIcon && (\n              <i\n                className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n                aria-hidden\n              />\n            )}\n            <span className={buildClassName(styles.itemName, 'menuItemName')}>\n              {shouldTranslateOptions ? lang(item.name) : item.name}\n              {item.description && (\n                <span className={styles.itemDescription}>\n                  {shouldTranslateOptions ? lang(item.description) : item.description}\n                </span>\n              )}\n            </span>\n          </button>\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem {\n  value: string;\n  name: string;\n  selectedName?: string;\n  description?: string;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withSeparator?: boolean;\n}\n\ninterface OwnProps {\n  label?: string;\n  selectedValue?: string;\n  items: DropdownItem[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light';\n  arrow?: 'caret' | 'chevron';\n  menuPosition?: 'top' | 'bottom';\n  menuPositionHorizontal?: 'right' | 'left';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: string) => void;\n  isLoading?: boolean;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_HORIZONTAL = 'right';\n\nfunction Dropdown({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPosition,\n  menuPositionHorizontal = DEFAULT_MENU_POSITION_HORIZONTAL,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n}: OwnProps): TeactJsx {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const [selectedItem, selectedItemName] = useMemo(() => {\n    const item = items.find((i) => selectedValue !== undefined && i.value === selectedValue);\n    const selectedName = item?.selectedName ?? item?.name ?? '';\n    return [item, selectedName];\n  }, [items, selectedValue]);\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const buttonArrowIcon = buildClassName(\n    styles.buttonIcon,\n    arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n  );\n\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n  const fullClassName = buildClassName(\n    className,\n    theme && styles[theme],\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    !isFullyInteractive && disabled && styles.disabled,\n    withMenu && menuClassName,\n    itemClassName,\n  );\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <button\n          type=\"button\"\n          className={buttonFullClassName}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n          disabled={disabled}\n        >\n          {selectedItem?.icon && <img src={selectedItem.icon} alt=\"\" className={styles.itemIcon} />}\n          {selectedItem?.overlayIcon && (\n            <img\n              src={selectedItem?.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, styles.insideButton)}\n            />\n          )}\n          {selectedItem?.fontIcon && (\n            <i\n              className={buildClassName(`icon-${selectedItem.fontIcon}`, styles.fontIcon)}\n              aria-hidden\n            />\n          )}\n          <span className={buildClassName(styles.itemName, 'itemName', itemClassName)}>\n            {shouldTranslateOptions ? lang(selectedItemName) : selectedItemName}\n          </span>\n          {withMenu && <i className={buttonArrowIcon} aria-hidden />}\n        </button>\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionHorizontal={menuPositionHorizontal}\n          menuPosition={menuPosition}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport {\n  IS_ANDROID, IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  // All API method calls should be delegated from the main to the native copy of the app on iOS (NBS)\n  shouldDelegateToNative?: boolean;\n  state?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  shouldDelegateToNative,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    connectHardwareWallet,\n    resetHardwareWalletConnect,\n    initializeHardwareWalletModal,\n    initializeHardwareWalletConnection,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting || (\n    state === HardwareConnectState.Connect && !isLedgerFailed && !isTonAppFailed && availableTransports?.length === 1\n  );\n  const isWaitingForBrowser = state === HardwareConnectState.WaitingForBrowser;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    transitionClassNames: availableTransportsClassNames,\n  } = useShowTransition(Boolean(renderingAvailableTransports.length > 0 && selectedTransport));\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(isActive);\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (isRemoteTab || !isActive || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) return;\n\n    initializeHardwareWalletModal({ shouldDelegateToNative: IS_DELEGATING_BOTTOM_SHEET && shouldDelegateToNative });\n  }, [isActive, isRemoteTab, shouldDelegateToNative]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isRemoteTab || (IS_DELEGATING_BOTTOM_SHEET && !shouldDelegateToNative)) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n\n      setTimeout(() => {\n        resetHardwareWalletConnect();\n      }, NEXT_SLIDE_DELAY);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (\n      state === HardwareConnectState.ConnectedWithSingleWallet\n      || state === HardwareConnectState.ConnectedWithSeveralWallets\n    ) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [state, handleConnected]);\n\n  const handleCloseWithBrowserTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    void closeLedgerTab();\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (renderingAvailableTransports.length > 1) {\n      initializeHardwareWalletConnection({\n        transport: selectedTransport!,\n        shouldDelegateToNative,\n      });\n    } else {\n      connectHardwareWallet({ transport: availableTransports?.[0] });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div className={buildClassName(styles.dropdownBlock, availableTransportsClassNames)}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport!}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport as (value: string) => void}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (isRemoteTab && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderWaitingForBrowser() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleCloseWithBrowserTab : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleCloseWithBrowserTab} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={styles.container}>\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              styles.textBlock_gap,\n            )}\n          >\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Switch to the newly opened tab to connect Ledger.')}\n            </span>\n            <span className={styles.text}>\n              <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n              {lang('Once connected, switch back to this window to proceed.')}\n            </span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button\n              className={buildClassName(styles.button, styles.button_single)}\n              onClick={handleCloseWithBrowserTab}\n            >\n              {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderConnect() {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? onClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div className={buildClassName(\n          styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n        )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          <div\n            className={buildClassName(\n              styles.textBlock,\n              isConnected && styles.textBlock_success,\n            )}\n          >\n            <span\n              className={buildClassName(\n                styles.text,\n                isLedgerFailed && styles.text_failed,\n                isLedgerConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Connect your Ledger')}\n            </span>\n            <span\n              className={buildClassName(\n                styles.text,\n                isTonAppFailed && styles.text_failed,\n                isTonAppConnected && styles.text_connected,\n                isConnected && styles.text_success,\n              )}\n            >\n              <i\n                className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n                aria-hidden\n              />\n              {lang('Unlock it and open the TON App')}\n            </span>\n          </div>\n\n          {shouldRenderAvailableTransports && renderAvailableTransports()}\n          {renderButtons()}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent() {\n    if (isWaitingForBrowser) {\n      return renderWaitingForBrowser();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForBrowser ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { availableTransports, lastUsedTransport } = global.hardware;\n\n  return {\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappUrl\":\"Xz5xXLpO\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"shimmer\":\"IwL4cJVX\",\"transactionDappIconSkeleton\":\"Q9_OlVcf\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowContainerSkeleton\":\"XcidIimi\",\"rowContainerLargeSkeleton\":\"Lh4_AmEs\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowTextSkeleton\":\"iLWJ6ABT\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"warningForPayload\":\"fHoMTSia\",\"fee\":\"nBxdGGBZ\",\"buttonsAfterFee\":\"LNrikojg\",\"detailsModalContent\":\"O32mclho\",\"detailsModalExplanation\":\"tFBBFIVM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  iconUrl?: string;\n  name?: string;\n  url?: string;\n  origin?: string;\n  onDisconnect?: (origin: string) => void;\n  className?: string;\n}\n\nfunction DappInfo({\n  iconUrl,\n  name,\n  url,\n  origin,\n  onDisconnect,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const shouldShowDisconnect = Boolean(onDisconnect && origin);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(origin!);\n  });\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappUrl}>{url && new URL(url).host}</span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, HardwareConnectState } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  hardwareState,\n  settingsByAccountId,\n  isLedgerConnected,\n  isTonAppConnected,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = useMemo(() => {\n    return accounts && Object.keys(accounts).length > 1;\n  }, [accounts]);\n  const { iconUrl, name, url } = dapp || {};\n\n  const handleSubmit = useLastCallback(() => {\n    closeConfirm();\n    const { isHardware } = accounts![selectedAccount];\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      cancelDappConnectRequestConfirm();\n    } else if (isHardware) {\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const isActive = accountId === selectedAccount;\n    const onClick = isActive || isLoading ? undefined : () => setSelectedAccount(accountId);\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n\n        <div className={modalStyles.transitionContent}>\n          <DappInfo\n            iconUrl={iconUrl}\n            name={name}\n            url={url}\n            className={buildClassName(styles.dapp_first, styles.dapp_push)}\n          />\n          {shouldRenderAccounts && renderAccounts()}\n\n          <div className={styles.footer}>\n            <Button\n              isPrimary\n              onClick={openConfirm}\n            >\n              {lang('Connect')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        <div className={modalStyles.transitionContent}>\n          <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n            <div className={styles.dappInfoIconSkeleton} />\n            <div className={styles.dappInfoTextSkeleton}>\n              <div className={styles.nameSkeleton} />\n              <div className={styles.descSkeleton} />\n            </div>\n          </div>\n          <div className={styles.accountWrapperSkeleton}>\n            {shouldRenderAccounts && renderAccounts()}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    hardwareState,\n    settingsByAccountId: global.settings.byAccountId,\n    isLedgerConnected,\n    isTonAppConnected,\n  };\n})(DappConnectModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, type TeactNode, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as TeactNode[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved') as string, icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleOpenUrl, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const addressNameRef = useRef<HTMLInputElement>(null);\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, getExplorerName(chain!));\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    menuPosition,\n    isActionsMenuOpen,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            anchorPosition={menuPosition}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleOpenUrl}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div\n        className={buildClassName(styles.wrapper, className)}\n        /* eslint-disable-next-line react/jsx-props-no-spreading */\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n  },\n) {\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setMenuPosition(undefined));\n  const isActionsMenuOpen = Boolean(menuPosition);\n\n  const menuItems = useMemo<DropdownItem[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer,\n    } = options;\n\n    const items: DropdownItem[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      withSeparator: true,\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        withSeparator: true,\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        withSeparator: true,\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        withSeparator: true,\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    menuHandlers[value as MenuHandler]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = (e as React.TouchEvent);\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { bottom } = e.currentTarget.getBoundingClientRect();\n\n    setMenuPosition({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n  });\n\n  return {\n    isActionsMenuOpen,\n    menuPosition,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug];\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token?.decimals ?? 0), token?.symbol ?? '')}\n      </span>,\n    );\n  }\n\n  if (Object.keys(amountsBySlug).length > 0) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={styles.payloadField}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.quote.price;\n  }, 0);\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && ' · '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  /** In TON */\n  fullFee: bigint;\n  /** In TON */\n  received: bigint;\n};\n\nfunction DappReturnedDetailsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={lang('Dapp Fee Details')}\n      contentClassName={styles.detailsModalContent}\n    >\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(DappReturnedDetailsModal);\n\nfunction FeeDetailsContent({ onClose, fullFee, received }: Omit<OwnProps, 'isOpen'>) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={styles.detailsModalExplanation}>\n        <div>\n          {renderText(lang('$dapp_return_details', {\n            fee_amount: <b>{formatCurrency(toDecimal(fullFee, TONCOIN.decimals), TONCOIN.symbol, undefined, true)}</b>,\n            // Rounding down to make the actual result better than we predict\n            received_amount: <b>{'~ '}{formatCurrency(toDecimal(received, TONCOIN.decimals), TONCOIN.symbol)}</b>,\n          }))}\n        </div>\n        <div className={styles.warningForPayload}>\n          {lang('$dapp_return_disclaimer')}\n        </div>\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport FeeLine, { FeeLineContainer } from '../ui/FeeLine';\nimport DappReturnedDetailsModal from './DappReturnedDetailsModal';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = Pick<ApiDappTransfer, 'fullFee' | 'received'>;\n\nfunction DappTransferFee({\n  fullFee, received,\n}: OwnProps) {\n  const lang = useLang();\n  const [isDetailsModalOpen, openDetailsModal, closeDetailsModal] = useFlag();\n\n  if (received === 0n) {\n    return (\n      <FeeLine\n        terms={{ native: fullFee }}\n        token={TONCOIN}\n        precision=\"exact\"\n        className={styles.fee}\n      />\n    );\n  }\n\n  if (fullFee >= received) {\n    const realFee = fullFee - received;\n    const realFeePrecision = 'approximate';\n    return (\n      <>\n        <FeeLine\n          terms={{ native: realFee }}\n          token={TONCOIN}\n          precision=\"approximate\"\n          onDetailsClick={openDetailsModal}\n          className={styles.fee}\n        />\n        <FeeDetailsModal\n          isOpen={isDetailsModalOpen}\n          onClose={closeDetailsModal}\n          fullFee={{ native: fullFee }}\n          realFee={{ native: realFee }}\n          realFeePrecision={realFeePrecision}\n          excessFee={received}\n          excessFeePrecision=\"approximate\"\n          token={TONCOIN}\n          title={lang('Dapp Fee Details')}\n          extraContent={<div className={styles.explanationWarning}>{lang('$dapp_return_disclaimer')}</div>}\n        />\n      </>\n    );\n  }\n\n  const realReceived = received - fullFee;\n  return (\n    <>\n      <FeeLineContainer className={styles.fee} onDetailsClick={openDetailsModal}>\n        {lang('$returned_value', {\n          // Rounding down to make the actual result better than we predict\n          value: formatCurrency(toDecimal(realReceived, TONCOIN.decimals), TONCOIN.symbol),\n        })}\n      </FeeLineContainer>\n      <DappReturnedDetailsModal\n        isOpen={isDetailsModalOpen}\n        onClose={closeDetailsModal}\n        fullFee={fullFee}\n        received={received}\n      />\n    </>\n  );\n}\n\nexport default memo(DappTransferFee);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport DappAmountField from './DappAmountField';\nimport DappTransferFee from './DappTransferFee';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransfer({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  function renderAmount() {\n    if (isNftTransferPayload(transaction.payload)) {\n      if (transaction.displayedAmount === 0n) {\n        return undefined;\n      }\n\n      return (\n        <DappAmountField\n          label={lang('Additional Amount Sent')}\n          amountsBySlug={{ [TONCOIN.slug]: transaction.displayedAmount }}\n        />\n      );\n    }\n\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      amountBySlug[transaction.payload.slug] = transaction.payload.amount;\n    }\n    amountBySlug[TONCOIN.slug] = transaction.displayedAmount;\n\n    if (amountBySlug[TONCOIN.slug] === 0n && Object.keys(amountBySlug).length > 1) {\n      delete amountBySlug[TONCOIN.slug];\n    }\n\n    return <DappAmountField label={lang('Amount')} amountsBySlug={amountBySlug} />;\n  }\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {renderAmount()}\n\n      {payloadElement && (\n        <>\n          <p className={styles.label}>{renderPayloadLabel()}</p>\n          <div className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}>\n            {payloadElement}\n            {!isPayloadExpanded && (\n              <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n                {lang('View')}\n              </div>\n            )}\n          </div>\n          {transaction.isDangerous && (\n            <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n          )}\n        </>\n      )}\n\n      <DappTransferFee fullFee={transaction.fullFee} received={transaction.received} />\n    </>\n  );\n}\n\nexport default memo(DappTransfer);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp, ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentDappTransferTotals,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport DappAmountField from './DappAmountField';\nimport DappInfo from './DappInfo';\nimport DappTransfer from './DappTransfer';\nimport DappTransferFee from './DappTransferFee';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  totalFullFee: bigint;\n  totalReceived: bigint;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nfunction DappTransferInitial({\n  currentAccount,\n  toncoinBalance,\n  transactions,\n  totalAmountsBySlug,\n  totalFullFee,\n  totalReceived,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { showDappTransfer, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const isSingleTransaction = transactions?.length === 1;\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          iconUrl={dapp?.iconUrl}\n          name={dapp?.name}\n          url={dapp?.url}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  function renderTransaction() {\n    return (\n      <DappTransfer\n        transaction={renderingTransactions![0]}\n        tokensBySlug={tokensBySlug}\n      />\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    let amountText = '';\n    if (isNftTransferPayload(payload)) {\n      amountText = '1 NFT';\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const token = tokensBySlug[tokenSlug];\n      if (token) {\n        const { decimals, symbol } = token;\n        amountText = formatCurrency(toDecimal(amount, decimals), symbol);\n      }\n    }\n    if (!amountText || transaction.displayedAmount) {\n      if (amountText) amountText += ' + ';\n      amountText += formatCurrency(toDecimal(transaction.displayedAmount), TONCOIN.symbol);\n    }\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransfer({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    const hasAmount = nftCount > 0 || Object.keys(totalAmountsBySlug).length > 0;\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions?.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n        {isDangerous && (\n          <div className={styles.warningForPayload}>{lang('$hardware_payload_warning')}</div>\n        )}\n        <DappTransferFee fullFee={totalFullFee} received={totalReceived} />\n      </>\n    );\n  }\n\n  if (!renderingTransactions) {\n    return undefined;\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n      {isSingleTransaction ? renderTransaction() : renderTransactions()}\n\n      <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n        <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          isLoading={isLoading}\n          isDisabled={isScam}\n          className={modalStyles.button}\n          onClick={!isScam ? submitDappTransferConfirm : undefined}\n        >\n          {lang('Send')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions } = global.currentDappTransfer;\n\n  const accounts = selectNetworkAccounts(global);\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    fullFee: totalFullFee,\n    received: totalReceived,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    transactions,\n    totalAmountsBySlug,\n    totalFullFee,\n    totalReceived,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n  };\n})(DappTransferInitial));\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.displayedAmount + transaction.fullFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].quote.priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.quote.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { isNftTransferPayload } from '../../util/ton/transfer';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransfer from './DappTransfer';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nconst MAX_TRANSACTIONS_IN_SMALL_MODAL = 4;\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    dapp,\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    error,\n  },\n  tokensBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMediaViewerOpen,\n  isDangerous: withPayloadWarning,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const isDappLoading = dapp === undefined;\n  const needsExtraHeight = withPayloadWarning || (transactions?.length ?? 0) > MAX_TRANSACTIONS_IN_SMALL_MODAL;\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransferHardware();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderSubTransaction() {\n    const transaction = viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined;\n\n    return (\n      <>\n        <ModalHeader title={lang('Transaction Info')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          {Boolean(transaction) && (\n            <DappTransfer\n              transaction={transaction}\n              tokensBySlug={tokensBySlug}\n            />\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.buttonsAfterFee)}>\n            <Button onClick={handleBackClick}>{lang('Back')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderWaitForConnection() {\n    const renderRow = (isLarge?: boolean) => (\n      <div className={buildClassName(styles.rowContainerSkeleton, isLarge && styles.rowContainerLargeSkeleton)}>\n        <div className={buildClassName(styles.rowTextSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n        <div className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      </div>\n    );\n\n    return (\n      <>\n        <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.transactionDirection}>\n            <div className={styles.transactionDirectionLeftSkeleton}>\n              <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n              <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n            </div>\n            <div className={styles.transactionDirectionRightSkeleton}>\n              <div className={buildClassName(styles.dappInfoIconSkeleton, styles.transactionDappIconSkeleton)} />\n              <div className={styles.dappInfoDataSkeleton}>\n                <div className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n                <div className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n              </div>\n            </div>\n          </div>\n          {renderRow(true)}\n          {renderRow()}\n          {renderRow()}\n        </div>\n      </>\n    );\n  }\n\n  function renderTransferInitialWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        {isDappLoading ? renderWaitForConnection() : (\n          <>\n            <ModalHeader\n              title={lang(isNftTransferPayload(renderingTransactions?.[0].payload) ? 'Send NFT' : 'Send Transaction')}\n              onClose={closeDappTransfer}\n            />\n            <DappTransferInitial onClose={closeDappTransfer} />\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return renderTransferInitialWithSkeleton();\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n      case TransferState.Confirm:\n        return renderSubTransaction();\n      case TransferState.Password:\n        return renderPassword(isActive);\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isTonAppConnected={isTonAppConnected}\n            isLedgerConnected={isLedgerConnected}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      forceFullNative={needsExtraHeight || renderingKey === TransferState.Password}\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n","import { Dialog } from 'native-dialog';\nimport type { FC } from '../lib/teact/teact';\nimport React, { memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  useEffect(() => {\n    if (IS_CAPACITOR) {\n      if (dialog) {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message),\n        }).then(() => {\n          dismissDialog();\n        });\n      }\n    } else if (dialog) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [dialogs, lang, dialog, openModal, title]);\n\n  if (!dialog || IS_CAPACITOR) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {renderText(lang(dialog.message))}\n      </div>\n      <div className={modalStyles.footerButtons}>\n        <Button onClick={closeModal}>{lang('OK')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { transitionClassNames, shouldRender } = useShowTransition(isElectronUpdateDownloaded || isAppUpdateAvailable);\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.container,\n        transitionClassNames,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: React.ReactNode;\n  withTitle?: boolean;\n};\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import type { RefObject } from 'react';\nimport { useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: RefObject<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element: HTMLDivElement | null = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: React.RefObject<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T extends any>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"menuItem_separator\":\"qFOW6a6C\",\"menuItemSeparator\":\"qFOW6a6C\",\"destructive\":\"C84vY_ER\"};","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: React.ReactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n  isSeparator?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n    isSeparator,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n    isSeparator && styles.menuItem_separator,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div className={styles.folder}>\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={() => {\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)} onClick={handleCategoryClick}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  origin: string;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_ORIGIN_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst ORIGIN_REPLACEMENTS_BY_ORIGIN = POPULAR_DAPP_ORIGIN_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  origin,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    if (!iconUrl) {\n      return (\n        <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogo_icon, iconClassName)}>\n          <i className={buildClassName(dappStyles.dappIcon, 'icon-laptop')} aria-hidden />\n        </div>\n      );\n    }\n\n    return (\n      <div className={iconClassName}>\n        <Image\n          url={iconUrl}\n          className={iconClassName}\n          imageClassName={styles.icon}\n          alt={lang('Icon')}\n        />\n      </div>\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(ORIGIN_REPLACEMENTS_BY_ORIGIN[url] || url);\n\n    setTimeout(() => void updateDappLastOpenedAt({ origin }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badge\":\"PI6bQC1A\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByOrigin?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_ORIGINS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByOrigin = {} }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    return dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_ORIGINS.has(dapp.origin))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByOrigin[dapp.origin] }))\n      .sort(compareDapps);\n  }, [dappLastOpenedDatesByOrigin, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByOrigin } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByOrigin };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url, origin,\n  } = dapp;\n\n  return (\n    <DappFeedItem\n      key={origin}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      origin={origin}\n    />\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport { getHostnameFromUrl, isValidUrl } from '../../util/url';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\ninterface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    addSiteToBrowserHistory,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const trendingContainerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => {\n    return shouldRestrict\n      ? originalSites?.filter((site) => !site.canBeRestricted)\n      : originalSites;\n  }, [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(() => {\n    const search = searchValue.toLowerCase();\n    const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n    const sitesResult = search.length && filteredSites\n      ? filteredSites.filter(({ url, name, description }) => {\n        return url.toLowerCase().includes(search)\n          || name.toLowerCase().includes(search)\n          || description.toLowerCase().includes(search);\n      })\n      : undefined;\n\n    return {\n      history: historyResult,\n      sites: sitesResult,\n      isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n    };\n  }, [browserHistory, searchValue, filteredSites]);\n\n  const { trendingSites, allSites } = useMemo(() => {\n    return (filteredSites || []).reduce((acc, site) => {\n      if (site.isFeatured) {\n        acc.trendingSites.push(site);\n      }\n\n      if (!acc.allSites[site.categoryId!]) {\n        acc.allSites[site.categoryId!] = [];\n      }\n      acc.allSites[site.categoryId!].push(site);\n\n      return acc;\n    }, { trendingSites: [] as ApiSite[], allSites: {} as Record<number, ApiSite[]> });\n  }, [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: closeSiteCategory,\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n      },\n    });\n  }, [filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n    let url = originalUrl;\n    if (!url.startsWith('http:') && !url.startsWith('https:')) {\n      url = `https://${url}`;\n    }\n    if (!isValidUrl(url)) {\n      url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n    } else {\n      addSiteToBrowserHistory({ url });\n    }\n\n    void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n  }\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = originalSites?.find(({ url: currentUrl }) => currentUrl === url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  function handleSiteClear(e: React.MouseEvent, url: string) {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  }\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderSearchSuggestions() {\n    return (\n      <Menu\n        type=\"suggestion\"\n        noBackdrop\n        isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n        className={styles.suggestions}\n        bubbleClassName={styles.suggestionsMenu}\n        onClose={handleMenuClose}\n      >\n        {searchSuggestions?.history?.map((url) => (\n          <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={handleSiteClick} clickArg={url}>\n            <i\n              className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n              aria-hidden\n            />\n            <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n            <button\n              className={styles.clearSuggestion}\n              type=\"button\"\n              aria-label={lang('Clear')}\n              title={lang('Clear')}\n              onMouseDown={(e) => handleSiteClear(e, url)}\n              onClick={stopEvent}\n            >\n              <i className=\"icon-close\" aria-hidden />\n            </button>\n          </MenuItem>\n        ))}\n        {searchSuggestions?.sites?.map((site) => (\n          <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n        ))}\n      </Menu>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : undefined}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              {renderSearchSuggestions()}\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey!];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey!}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useHideBottomBar(Boolean(isActive));\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? []).map(({ addressByChain: { ton: address } }) => address),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, HardwareConnectState } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  onClose,\n  hardwareWallets,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const {\n    afterSelectHardwareWallets,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<number | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n    resetHardwareWalletConnect();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            isRemoteTab={isRemoteTab}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  suffix?: string,\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${formattedWholePart}${extraSpan}`;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: React.RefObject<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = (content: string) => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = content;\n      document.body.appendChild(measureEl.current);\n\n      let delta = 1;\n\n      while (delta > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--base-font-size', delta.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        delta -= 0.05;\n      }\n\n      isFontChangedRef.current = delta < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--base-font-size', delta.toString());\n    });\n  };\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: React.ReactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  suffix,\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, suffix, decimals);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (newText.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(html);\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [decimals, textRef, value]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    size === 'large' && styles.input_large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n        <div\n          ref={inputRef}\n          contentEditable={!disabled && !isLoading}\n          id={id}\n          role=\"textbox\"\n          aria-required\n          aria-placeholder={lang('Amount value')}\n          aria-labelledby={labelText ? `${id}Label` : undefined}\n          tabIndex={0}\n          inputMode=\"decimal\"\n          className={inputFullClass}\n          onKeyDown={handleKeyDown}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onClick={onInputClick}\n        />\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n    ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n","export function saveCaretPosition(context: HTMLElement, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = clearedValue?.[0]?.length || range.toString().length || 0;\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode();\n\n  return {\n    node: node || root,\n    position: index,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tab\":\"YpO46ybD\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenDropdown\":\"N9176Gyt\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { UserToken } from '../../global/types';\nimport type { DropdownItem } from '../ui/Dropdown';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountTokens } from '../../global/selectors';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown from '../ui/Dropdown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  address?: string;\n  tokens?: UserToken[];\n}\n\nfunction InvoiceModal({\n  address,\n  isOpen,\n  tokens,\n}: StateProps) {\n  const { closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n\n  const [amount, setAmount] = useState<bigint | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment) : '';\n  const decimals = TONCOIN.decimals; // TODO Change it after token selection is supported\n\n  const dropdownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if (token.slug === TONCOIN.slug) {\n        acc.push({\n          value: token.slug,\n          icon: token.image || ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS],\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [tokens]);\n\n  const handleAmountInput = useLastCallback((stringValue?: string) => {\n    setHasAmountError(false);\n\n    if (!stringValue) {\n      setAmount(undefined);\n      return;\n    }\n\n    const value = fromDecimal(stringValue, decimals);\n\n    if (value < 0) {\n      setHasAmountError(true);\n      return;\n    }\n\n    setAmount(value);\n  });\n\n  function renderTokens() {\n    return <Dropdown items={dropdownItems} selectedValue={TONCOIN.slug} className={styles.tokenDropdown} />;\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('Deposit Link')}\n      contentClassName={styles.content}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n    >\n      <div className={styles.contentTitle}>\n        {renderText(lang('$receive_invoice_description'))}\n      </div>\n      <RichNumberInput\n        key=\"amount\"\n        id=\"amount\"\n        hasError={hasAmountError}\n        value={amount === undefined ? undefined : toDecimal(amount)}\n        labelText={lang('Amount')}\n        onChange={handleAmountInput}\n      >\n        {renderTokens()}\n      </RichNumberInput>\n      <Input\n        value={comment}\n        label={lang('Comment')}\n        placeholder={lang('Optional')}\n        wrapperClassName={styles.invoiceComment}\n        onInput={setComment}\n      />\n\n      <p className={styles.labelForInvoice}>\n        {lang('Share this URL to receive TON')}\n      </p>\n      <InteractiveTextField\n        text={invoiceUrl}\n        copyNotification={lang('Invoice link was copied!')}\n        className={styles.invoiceLinkField}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      address,\n      tokens: selectCurrentAccountTokens(global),\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById: Map<string, VoidFunction> = new Map();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../global/types';\n\ninterface Layout {\n  withPortal?: boolean;\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  anchor: IAnchorPosition | undefined,\n  getTriggerElement: () => HTMLElement | null,\n  getRootElement: () => HTMLElement | null,\n  getMenuElement: () => HTMLElement | null,\n  getLayout?: () => Layout,\n) {\n  const [positionX, setPositionX] = useState<'right' | 'left'>('right');\n  const [positionY, setPositionY] = useState<'top' | 'bottom'>('bottom');\n  const [transformOriginX, setTransformOriginX] = useState<number>();\n  const [transformOriginY, setTransformOriginY] = useState<number>();\n  const [withScroll, setWithScroll] = useState(false);\n  const [style, setStyle] = useState('');\n  const [menuStyle, setMenuStyle] = useState('opacity: 0;');\n\n  useEffect(() => {\n    const triggerEl = getTriggerElement();\n    if (!anchor || !triggerEl) {\n      return;\n    }\n\n    let { x, y } = anchor;\n    const anchorX = x;\n    const anchorY = y;\n\n    const menuEl = getMenuElement();\n    const rootEl = getRootElement();\n\n    const {\n      withPortal = false,\n    } = getLayout?.() || {};\n\n    const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) : undefined;\n    const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n    const menuRect = menuEl ? {\n      width: menuElWidth,\n      height: menuElHeight + marginTop!,\n    } : EMPTY_RECT;\n\n    const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n    let horizontalPosition: 'left' | 'right';\n    let verticalPosition: 'top' | 'bottom';\n    if (x - menuRect.width - rootRect.left > 0) {\n      horizontalPosition = 'right';\n      x -= 3;\n    } else {\n      horizontalPosition = 'left';\n      x = 16;\n    }\n    setPositionX(horizontalPosition);\n\n    if (y + menuRect.height < rootRect.height + rootRect.top) {\n      verticalPosition = 'top';\n    } else {\n      verticalPosition = 'bottom';\n\n      if (y - menuRect.height < rootRect.top) {\n        y = rootRect.top + rootRect.height;\n      }\n    }\n\n    setPositionY(verticalPosition);\n\n    const triggerRect = triggerEl.getBoundingClientRect();\n\n    const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n    const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n    );\n    const left = (horizontalPosition === 'left'\n      ? (withPortal\n        ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n        : leftWithPossibleNegative)\n      : (x - triggerRect.left)) + addedXForPortalPositioning;\n    const top = y - triggerRect.top + addedYForPortalPositioning;\n\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n\n    setWithScroll(menuMaxHeight < menuRect.height);\n    setMenuStyle(`max-height: ${menuMaxHeight}px;`);\n    setStyle(`left: ${left}px; top: ${top}px`);\n    const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n    const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n    setTransformOriginX(horizontalPosition === 'left' ? offsetX : menuRect.width + offsetX);\n    setTransformOriginY(verticalPosition === 'bottom' ? menuRect.height + offsetY : offsetY);\n  }, [\n    anchor, getMenuElement, getRootElement, getTriggerElement, getLayout,\n  ]);\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    menuStyle,\n    withScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"platform\":\"QAOyOloL\",\"platform_animate\":\"K0kRAFlY\",\"platformAnimate\":\"K0kRAFlY\",\"menuItem\":\"tUY9MzOP\"};","import React, {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport forceReflow from '../../util/forceReflow';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMenuPosition from '../../hooks/useMenuPosition';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  title: string;\n  isActive?: boolean;\n  previousActiveTab?: number;\n  menuItems?: DropdownItem[];\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n};\n\nfunction Tab({\n  className,\n  title,\n  isActive,\n  previousActiveTab,\n  menuItems,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const tabRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuPosition(undefined));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) return;\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuPosition({ x, y: y + height });\n    }\n  });\n\n  useLayoutEffect(() => {\n    // Set initial active state\n    if (isActive && previousActiveTab === undefined && tabRef.current) {\n      addExtraClass(tabRef.current, styles.Tab_active);\n    }\n  }, [isActive, previousActiveTab]);\n\n  useEffect(() => {\n    if (!isActive || previousActiveTab === undefined) {\n      return;\n    }\n\n    const tabEl = tabRef.current!;\n    const prevTabEl = tabEl.parentElement!.children[previousActiveTab] as HTMLElement;\n    if (!prevTabEl) {\n      // The number of tabs in the parent component has decreased. It is necessary to add the active tab class name.\n      if (isActive && !tabEl.classList.contains(styles.Tab_active)) {\n        requestMutation(() => {\n          addExtraClass(tabEl, styles.Tab_active);\n        });\n      }\n      return;\n    }\n\n    const platformEl = tabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n    const prevPlatformEl = prevTabEl.querySelector<HTMLElement>(`.${styles.platform}`)!;\n\n    // We move and resize the platform, so it repeats the position and size of the previous one\n    const shiftLeft = prevPlatformEl.parentElement!.offsetLeft - platformEl.parentElement!.offsetLeft;\n    const scaleFactor = prevPlatformEl.clientWidth / platformEl.clientWidth;\n\n    requestMutation(() => {\n      removeExtraClass(prevPlatformEl, styles.platform_animate);\n      removeExtraClass(platformEl, styles.platform_animate);\n      setExtraStyles(platformEl, {\n        transform:\n        `translate3d(${shiftLeft}px, 0, 0) scale3d(${scaleFactor}, 1, 1)`,\n      });\n\n      requestForcedReflow(() => {\n        forceReflow(platformEl);\n\n        return () => {\n          addExtraClass(platformEl, styles.platform_animate);\n          setExtraStyles(platformEl, { transform: 'none' });\n\n          removeExtraClass(prevTabEl, styles.Tab_active);\n          addExtraClass(tabEl, styles.Tab_active);\n        };\n      });\n    });\n  }, [isActive, previousActiveTab]);\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n      ref={tabRef}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {title}\n        {hasMenu && isActive && <i className=\"icon-caret-down\" aria-hidden />}\n        <i className={styles.platform} aria-hidden />\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          items={menuItems!}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  big?: boolean;\n  className?: string;\n  withBorder?: boolean;\n  onSwitchTab: (index: number) => void;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\n\nfunction TabList({\n  tabs, activeTab, big, className, withBorder, onSwitchTab,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const previousActiveTab = usePrevious(activeTab);\n\n  const fullClassName = buildClassName(\n    styles.container,\n    big && styles.big,\n    withBorder && styles.withBorder,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  // Scroll container to place active tab in the center\n  useEffect(() => {\n    const container = containerRef.current!;\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          previousActiveTab={previousActiveTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(TabList);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"withBorder\":\"edZdDyi5\",\"big\":\"lM5X6ama\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: React.RefObject<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  // eslint-disable-next-line no-null/no-null\n  const qrCodeRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n      // eslint-disable-next-line no-underscore-dangle\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address!}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Record<ApiChain, string>;\n  isLedger?: boolean;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nconst TON_TAB_ID = 0;\nconst TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: styles.tab,\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: styles.tab,\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const [activeTab, setActiveTab] = useState<number>(tabs.length ? tabs[0].id : 0);\n\n  function renderActions() {\n    if (tabs[activeTab]?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          withBorder\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          onSwitchTab={setActiveTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'small' | 'middle';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"nftIcon\":\"kRGDvyHS\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string;\n  text: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    className,\n  );\n\n  function renderNftIcon() {\n    return (\n      <div className={styles.nftIcon}>\n        <img src={imageUrl} alt=\"\" className={styles.image} />\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !imageUrl && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {imageUrl && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? (\n            lang('%amount% to %address%', {\n              amount: <span className={styles.bold}>{text}</span>,\n              address: <span className={styles.bold}>{secondText}</span>,\n            }))\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <div className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}>\n        {wholePart.trim().replace('\\u202F', '').replace('-', '−')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </div>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const contentRef = useRef<HTMLInputElement | null>(null);\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    const content = buildContentHtml(inputValue, suffix, decimals, true);\n    contentEl.innerHTML = content;\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale(content);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.innerHTML = zeroValue;\n    }\n  }, [decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    styles.input_rich,\n    styles.input_large,\n    styles.disabled,\n    error && styles.error,\n    valueClassName,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div\n          ref={contentRef}\n          id={id}\n          className={inputFullClass}\n        />\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"ton\":\"dRmsmePr\",\"tonIcon\":\"nWRXjyrv\",\"tonName\":\"M_R_H7ar\",\"amountTopRight\":\"pJIvsCMH\",\"amountTopRight_static\":\"vETUxQf6\",\"amountTopRightStatic\":\"vETUxQf6\",\"amountTopRight_slide\":\"MiydIaDQ\",\"amountTopRightSlide\":\"MiydIaDQ\",\"Transition\":\"XV_Y5UzE\",\"transition\":\"XV_Y5UzE\",\"Transition_slide-from\":\"mUqK49u9\",\"transitionSlideFrom\":\"mUqK49u9\",\"Transition_slide-to\":\"PtgIoWPj\",\"transitionSlideTo\":\"PtgIoWPj\",\"amountBottomWrapper\":\"LEdLaJfa\",\"amountBottomWrapper_static\":\"u8l2R2oR\",\"amountBottomWrapperStatic\":\"u8l2R2oR\",\"amountBottom\":\"MgCN1q08\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"minAmountValue\":\"N25bZnkf\",\"amountInCurrency\":\"QVMu65Mz\",\"historyTotalValue\":\"ps_1E9fe\",\"balanceContainer\":\"uPQESumk\",\"balance\":\"n_5PvqB1\",\"balanceLink\":\"LhvBMVJI\",\"stakingBalance\":\"ZzjyhAIi\",\"amountInput\":\"CVWcZDbx\",\"inputStatic\":\"ckTzdegT\",\"inputRichStatic\":\"tsi7Leof\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButton\":\"ANY2XY_3\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfo\":\"m1LUZiWL\",\"tokenDropdown\":\"A1GMBD3_\",\"tokenDropdownItem\":\"sV49vdb8\",\"tokenDropdownMenu\":\"SMF4FqKo\"};","import { Dialog } from 'native-dialog';\nimport React, {\n  memo, type TeactNode, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  JVAULT_URL,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  SHORT_FRACTION_DIGITS,\n  STAKING_MIN_AMOUNT,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { throttle } from '../../util/schedulers';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  fee?: bigint;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  apiError,\n  tokens,\n  tokenBySlug,\n  fee,\n  stakingState,\n  states,\n  shouldUseNominators,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  const [isIncorrectAmount, setIsIncorrectAmount] = useState<boolean>(false);\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState<boolean>(false);\n  const [isInsufficientFee, setIsInsufficientFee] = useState(false);\n  const [isBelowMinimumAmount, setIsBelowMinimumAmount] = useState(false);\n  const [shouldUseAllBalance, setShouldUseAllBalance] = useState<boolean>(false);\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance = 0n,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const hasAmountError = Boolean(isInsufficientBalance || apiError);\n  const minAmount = stakingType === 'nominators' ? NOMINATORS_STAKING_MIN_AMOUNT : STAKING_MIN_AMOUNT;\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const validateAndSetAmount = useLastCallback((newAmount: bigint | undefined, noReset = false) => {\n    if (!noReset) {\n      setShouldUseAllBalance(false);\n      setIsIncorrectAmount(false);\n      setIsInsufficientBalance(false);\n      setIsBelowMinimumAmount(false);\n      setIsInsufficientFee(false);\n    }\n\n    if (newAmount === undefined) {\n      setAmount(undefined);\n      return;\n    }\n\n    if (Number.isNaN(newAmount) || newAmount < 0) {\n      setIsIncorrectAmount(true);\n      return;\n    }\n\n    if (newAmount < minAmount) {\n      setIsBelowMinimumAmount(true);\n    } else if (!maxAmount || newAmount > balance) {\n      setIsInsufficientBalance(true);\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      setIsInsufficientFee(true);\n    }\n\n    setAmount(newAmount);\n  });\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  useEffect(() => {\n    if (shouldUseAllBalance && maxAmount) {\n      const newAmount = maxAmount;\n\n      validateAndSetAmount(newAmount, true);\n    } else {\n      validateAndSetAmount(amount, true);\n    }\n  }, [amount, fee, shouldUseAllBalance, validateAndSetAmount, maxAmount]);\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      const text = stakingState && stakingState.type === 'jetton'\n        ? [\n          // We use `replace` instead of `lang` argument to avoid JSX output\n          `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n          `${lang('$safe_staking_description_jetton2')}`,\n        ]\n        : [\n          `1. ${lang('$safe_staking_description1')}`,\n          `2. ${lang('$safe_staking_description2')}`,\n          `3. ${lang('$safe_staking_description3')}`,\n        ];\n\n      void Dialog.alert({\n        title: lang('Why is staking safe?'),\n        message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n      })\n        .then(closeSafeInfoModal);\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState]);\n\n  const handleMaxAmountClick = useLastCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!maxAmount) {\n      return;\n    }\n\n    void vibrate();\n\n    setShouldUseAllBalance(true);\n  });\n\n  const canSubmit = amount\n    && maxAmount\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function getError() {\n    if (isInsufficientBalance) {\n      return lang('Insufficient balance');\n    }\n\n    if (isInsufficientFee) {\n      return lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') });\n    }\n\n    if (isBelowMinimumAmount) {\n      return lang('$min_value', {\n        value: (\n          <span className={styles.minAmountValue}>\n            {formatCurrency(toDecimal(minAmount), symbol ?? '')}\n          </span>\n        ),\n      });\n    }\n\n    return apiError ? lang(apiError) : undefined;\n  }\n\n  function renderTopRight() {\n    if (!symbol) return undefined;\n\n    const hasBalance = !!token;\n    const balanceButton = lang('$max_balance', {\n      balance: (\n        <div\n          role=\"button\"\n          tabIndex={0}\n          className={styles.balanceLink}\n          onClick={handleMaxAmountClick}\n        >\n          {hasBalance ? formatCurrency(toDecimal(maxAmount, decimals), symbol) : lang('Loading...')}\n        </div>\n      ),\n    });\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountTopRight, isStatic && styles.amountTopRight_static)}\n        slideClassName={styles.amountTopRight_slide}\n        name=\"fade\"\n        activeKey={0}\n      >\n        <div className={styles.balanceContainer}>\n          <span className={styles.balance}>\n            {balanceButton}\n          </span>\n        </div>\n      </Transition>\n    );\n  }\n\n  function renderBottomRight() {\n    const error = getError();\n\n    const activeKey = isInsufficientBalance ? 0\n      : isInsufficientFee ? 1\n        : isBelowMinimumAmount ? 2\n          : apiError ? 3\n            : !stakingBalance && !hasAmountError ? 4\n              : 5;\n\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isIncorrectAmount && styles.amountBottomRight_error)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang('Why is staking safe?')}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {stakingState && stakingState.type === 'jetton' ? renderJettonDescription() : renderTonDescription()}\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const balanceResult = amount\n      ? toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString()\n      : '0';\n\n    return (\n      <RichNumberField\n        labelText={lang('Est. balance in a year')}\n        zeroValue=\"...\"\n        value={balanceResult}\n        decimals={decimals}\n        className={styles.balanceResultWrapper}\n        inputClassName={buildClassName(styles.balanceResultInput, isStatic && styles.inputRichStatic)}\n        labelClassName={styles.balanceResultLabel}\n        valueClassName={styles.balanceResult}\n      />\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: `${annualYield}%` })}</div>\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang('Why this is safe')}\n          </Button>\n        </div>\n      </div>\n\n      {renderTopRight()}\n      <RichNumberInput\n        key=\"staking_amount\"\n        id=\"staking_amount\"\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        value={amount === undefined ? undefined : toDecimal(amount)}\n        labelText={lang('Amount')}\n        onChange={handleAmountChange}\n        onPressEnter={handleSubmit}\n        decimals={decimals}\n        inputClassName={isStatic ? styles.inputRichStatic : undefined}\n        className={styles.amountInput}\n      >\n        <Dropdown\n          items={dropDownItems}\n          selectedValue={stakingState?.id}\n          className={styles.tokenDropdown}\n          itemClassName={styles.tokenDropdownItem}\n          onChange={handleChangeStaking}\n        />\n      </RichNumberInput>\n      <div className={buildClassName(styles.amountBottomWrapper, isStatic && styles.amountBottomWrapper_static)}>\n        <div className={styles.amountBottom}>\n          {renderBottomRight()}\n        </div>\n      </div>\n\n      {renderStakingResult()}\n\n      <div className={modalStyles.buttons}>\n        <Button\n          isPrimary\n          isSubmit\n          isDisabled={!canSubmit}\n          isLoading={isLoading}\n        >\n          {lang('$stake_asset', { symbol: token?.symbol })}\n        </Button>\n      </div>\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n\n      const {\n        state,\n        isLoading,\n        fee,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        fee,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, HardwareConnectState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n    submitStakingHardware,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStakingHardware();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStakingPassword({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiJettonStakingState } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitStakingClaim,\n    submitStakingClaimHardware,\n    cancelStakingClaim,\n    clearStakingError,\n  } = getActions();\n\n  const {\n    tokenSlug,\n    unclaimedRewards = 0n,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees('jetton').claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaimHardware();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(toDecimal(unclaimedRewards, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Rewards Claim') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    stakingState: stakingState?.type === 'jetton' ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\"};","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n}\n\nfunction StakingProfitItem({ tonToken, timestamp, profit }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <div className={styles.amount}>\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport { buildStakingDropdownItems } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  endOfStakingCycle?: number;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  endOfStakingCycle,\n  theme,\n  onClose,\n  shouldUseNominators,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    isUnstakeRequested,\n  } = stakingState ?? {};\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    transitionClassNames: spinnerClassNames,\n  } = useShowTransition(isLoading && isActive);\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug)!, [tokens]);\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, isUnstakeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const dropDownItems = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    return buildStakingDropdownItems({ tokenBySlug, states, shouldUseNominators });\n  }, [tokenBySlug, states, shouldUseNominators]);\n\n  function renderUnstakeDescription() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {Boolean(endOfStakingCycle) && lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, endOfStakingCycle)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        <div className={styles.historyTotal}>\n          {lang('$total', {\n            value: (\n              <span className={styles.historyTotalValue}>\n                {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n              </span>\n            ),\n          })}\n        </div>\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          inputClassName={styles.balanceResultInput}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        <div className={styles.stakingInfoButtons}>\n          <Button\n            className={styles.stakingInfoButton}\n            isDisabled={isLoading}\n            onClick={handleClaimClick}\n          >\n            {lang('Claim')}\n          </Button>\n        </div>\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner className={buildClassName(styles.stakingInfoLoadingAnimation, spinnerClassNames)} />\n              )}\n            </div>\n\n            <Dropdown\n              items={dropDownItems}\n              selectedValue={stakingId}\n              className={styles.tokenDropdown}\n              itemClassName={styles.tokenDropdownItem}\n              menuClassName={styles.tokenDropdownMenu}\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {isUnstakeRequested\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  inputClassName={styles.balanceResultInput}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                <div\n                  className={\n                    buildClassName(styles.stakingInfoButtons, !!unclaimedRewards && styles.stakingInfoButtonsWithMargin)\n                  }\n                >\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isPrimary\n                    isDisabled={isLoading}\n                    onClick={handleStakeClick}\n                  >\n                    {lang('Stake More')}\n                  </Button>\n                  <Button\n                    className={styles.stakingInfoButton}\n                    isDisabled={isLoading}\n                    onClick={handleUnstakeClick}\n                  >\n                    {lang('Unstake')}\n                  </Button>\n                </div>\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : global.stakingInfo?.round.end;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug: global.tokenInfo.bySlug,\n    endOfStakingCycle,\n    theme: global.settings.theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n  };\n})(StakingInfoContent));\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: any[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type {\n  GlobalState, HardwareConnectState, Theme, UserToken,\n} from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  IS_CAPACITOR,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../config';\nimport { Big } from '../../lib/big.js';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport {\n  formatCurrency,\n  formatCurrencySimple,\n  getShortCurrencySymbol,\n} from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  tokens?: UserToken[];\n  stakingInfo: GlobalState['stakingInfo'];\n  baseCurrency?: ApiBaseCurrency;\n  isNominators?: boolean;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isLoading,\n  error,\n  tokens,\n  stakingInfo,\n  baseCurrency,\n  isNominators,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    submitStakingHardware,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const endOfStakingCycle = stakingState?.type === 'nominators'\n    ? stakingState.end\n    : stakingInfo?.round?.end;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingType === 'liquid' ? stakingInfo?.liquid?.available ?? 0n : 0n;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const logoPath = token\n    && (ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image);\n\n  const [hasAmountError, setHasAmountError] = useState<boolean>(false);\n\n  const [isLongUnstake, setIsLongUnstake] = useState(false);\n\n  const [isInsufficientBalance, setIsInsufficientBalance] = useState(false);\n\n  const [unstakeAmount, setUnstakeAmount] = useState(isNominators ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  useEffect(() => {\n    if (!stakingState) return;\n\n    let isInstantUnstake = true;\n\n    switch (stakingState.type) {\n      case 'nominators': {\n        isInstantUnstake = false;\n        break;\n      }\n      case 'liquid': {\n        isInstantUnstake = amount ? amount < instantAvailable : true;\n        break;\n      }\n      case 'jetton': {\n        isInstantUnstake = true;\n        break;\n      }\n    }\n\n    setIsLongUnstake(!isInstantUnstake);\n  }, [instantAvailable, amount, stakingState]);\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(endOfStakingCycle ?? Date.now() + STAKING_CYCLE_DURATION_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const amountInCurrency = token && token.price && unstakeAmount\n    ? toBig(unstakeAmount, token.decimals)\n      .mul(token.price)\n      .round(token.decimals, Big.roundHalfUp)\n      .toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isNominators ? stakingBalance : undefined);\n      setHasAmountError(false);\n      setIsInsufficientBalance(false);\n    }\n  }, [isOpen, fetchStakingHistory, isNominators, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStakingPassword({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStakingHardware({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  const validateAndSetAmount = useLastCallback(\n    (newAmount: bigint | undefined, noReset = false) => {\n      if (!noReset) {\n        setHasAmountError(false);\n        setIsInsufficientBalance(false);\n      }\n\n      if (newAmount === undefined) {\n        setUnstakeAmount(undefined);\n        return;\n      }\n\n      if (newAmount < 0) {\n        setHasAmountError(true);\n        return;\n      }\n\n      if (!stakingBalance || newAmount > stakingBalance) {\n        setHasAmountError(true);\n        setIsInsufficientBalance(true);\n      }\n\n      setUnstakeAmount(newAmount);\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      e.preventDefault();\n\n      if (!stakingBalance) {\n        return;\n      }\n\n      validateAndSetAmount(stakingBalance);\n    },\n  );\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, token?.decimals) : undefined;\n    validateAndSetAmount(value);\n  });\n\n  function renderBalance() {\n    return (\n      <div className={styles.balanceContainer}>\n        <span className={styles.balance}>\n          {lang('$all_balance', {\n            balance: (\n              <a href=\"#\" onClick={handleMaxAmountClick} className={styles.balanceLink}>\n                {\n                  stakingBalance !== undefined\n                    ? formatCurrencySimple(stakingBalance, token?.symbol!, token?.decimals!)\n                    : lang('Loading...')\n                }\n              </a>\n            ),\n          })}\n        </span>\n      </div>\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        ≈&thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol)}\n      </span>\n    );\n  }\n\n  function renderBottomRight() {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={styles.amountBottomRight}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGrayWhite}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGrayWhite}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition name=\"fade\" activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}>\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          {!isNominators && renderBalance()}\n          <RichNumberInput\n            key=\"unstaking_amount\"\n            id=\"unstaking_amount\"\n            hasError={hasAmountError}\n            value={unstakeAmount === undefined ? undefined : toDecimal(unstakeAmount, token?.decimals)}\n            labelText={lang('Amount to unstake')}\n            onChange={handleAmountChange}\n            className={styles.amountInput}\n            decimals={token?.decimals}\n            disabled={isNominators}\n          >\n            <div className={styles.ton}>\n              <img src={logoPath} alt=\"\" className={styles.tonIcon} />\n              <span className={styles.tonName}>{token?.symbol}</span>\n            </div>\n          </RichNumberInput>\n\n          <div className={styles.amountBottomWrapper}>\n            <div className={styles.amountBottom}>\n              {shouldRenderCurrency && renderCurrencyValue()}\n              {renderBottomRight()}\n            </div>\n          </div>\n\n          {renderUnstakeInfo()}\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              isLoading={isLoading}\n              isDisabled={isUnstakeDisabled}\n              onClick={handleStartUnstakeClick}\n            >\n              {lang('Unstake')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp() ? lang('Request is sent!') : lang('Request for unstaking is sent!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"green\"\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const baseCurrency = global.settings.baseCurrency;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    stakingInfo: global.stakingInfo,\n    baseCurrency,\n    isNominators,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n  );\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button type=\"button\" className={buildClassName(styles.wrapper, transitionClassNames)} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwalletorg/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport { selectCurrentAccountState, selectMycoin } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                <div className={styles.buttons}>\n                  <Button\n                    className={styles.button}\n                    isPrimary\n                    isDisabled={isDisabledUnfreeze}\n                    onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                  >\n                    {lang('Unfreeze')}\n                  </Button>\n                </div>\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { HardwareConnectState, UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitClaimingVesting,\n    submitClaimingVestingHardware,\n    cancelClaimingVesting,\n    clearVestingError,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVestingHardware();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={shortenAddress(address!)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"balanceContainer\":\"fwq9FYcS\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"balance\":\"UT26q2A_\",\"balanceLink\":\"aHx9_6_d\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"slippageLabel\":\"BCxUm5xP\",\"tokenSelectorWrapper\":\"lZebIDqX\",\"tokenSelectorSlide\":\"jBt5MAxL\",\"tokenSelector\":\"Wmj18JYJ\",\"tokenSelectorIcon\":\"TTCQtR6c\",\"tokenIcon\":\"op410kWk\",\"tokenContent\":\"VH09DZnr\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedTooltipMessage\":\"VLNF6T4k\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"swapArrowIcon\":\"Vzdj7mTH\",\"swapArrowIconTitle\":\"yFebB6BA\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import React, {\n  memo,\n  useLayoutEffect,\n  useRef,\n} from '../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport { SwapState, type UserSwapToken } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../../util/windowEnvironment';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TokenIcon from '../../common/TokenIcon';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  token?: UserSwapToken;\n  shouldFilter?: boolean;\n}\n\nfunction SwapSelectToken({ token, shouldFilter }: OwnProps) {\n  const { setSwapScreen } = getActions();\n\n  const { transitionRef } = useSelectorWidth(token);\n\n  const handleOpenSelectTokenModal = useLastCallback(() => {\n    setSwapScreen({\n      state: shouldFilter ? SwapState.SelectTokenTo : SwapState.SelectTokenFrom,\n    });\n  });\n\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function renderToken(tokenToRender: UserSwapToken | undefined) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={styles.tokenSelectorWrapper}\n        slideClassName={styles.tokenSelectorSlide}\n      >\n        <button\n          type=\"button\"\n          className={styles.tokenSelector}\n          onClick={handleOpenSelectTokenModal}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.tokenContent}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.tokenSelectorIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SwapSelectToken);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: UserSwapToken) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | TeactNode[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType];\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' });\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol });\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol });\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-arrow-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {renderedText}\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T extends any>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD₮']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const { shouldRender, transitionClassNames } = useShowTransition(\n    !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn,\n  );\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div className={buildClassName(styles.root, transitionClassNames)}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp;≈ {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, transitionClassNames)}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut!.symbol}</span>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"nLt5kPU7\",\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\"};","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: React.ReactNode;\n  emoji?: EmojiIcon;\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { transitionClassNames, shouldRender } = useShowTransition(isOpen);\n\n  // eslint-disable-next-line no-null/no-null\n  const iconRef = useRef<HTMLDivElement | null>(null);\n  // eslint-disable-next-line no-null/no-null\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\n\n  const tooltipStyle = useRef<string | undefined>();\n  const arrowStyle = useRef<string | undefined>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    if (emoji) {\n      return (\n        <div\n          ref={iconRef}\n          className={buildClassName(styles.icon, iconClassName)}\n          onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </div>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(styles.icon, 'icon-question', iconClassName)}\n        onClick={IS_TOUCH_ENV ? stopEvent : undefined}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.wrapper} data-tooltip-key={randomTooltipKey}>\n      {shouldRender && (\n        <Portal>\n          <div\n            className={buildClassName(styles.container, transitionClassNames)}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </div>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  const [isSlippageFocused, markSlippageFocused, unmarkSlippageFocused] = useFlag();\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol} ≈ ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <IconWithTooltip\n          message={(\n            <div className={styles.advancedTooltipMessage}>\n              <span>{lang('$swap_slippage_tooltip1')}</span>\n              <span>{lang('$swap_slippage_tooltip2')}</span>\n            </div>\n          )}\n          tooltipClassName={styles.advancedTooltipContainer}\n          iconClassName={buildClassName(\n            styles.advancedTooltip, slippageError && styles.advancedError,\n          )}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix={isSlippageFocused ? '' : '%'}\n            size=\"normal\"\n            onChange={handleInputChange}\n            onFocus={markSlippageFocused}\n            onBlur={unmarkSlippageFocused}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <IconWithTooltip\n                message={(\n                  <div className={styles.advancedTooltipMessage}>\n                    <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n                  </div>\n                )}\n                tooltipClassName={styles.advancedTooltipContainer}\n                iconClassName={styles.advancedTooltip}\n              />\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_price_impact_tooltip1')}</span>\n                      <span>{lang('$swap_price_impact_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={buildClassName(\n                    styles.advancedTooltip, priceImpactError && styles.advancedError,\n                  )}\n                />\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <IconWithTooltip\n                  message={(\n                    <div className={styles.advancedTooltipMessage}>\n                      <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                      <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                    </div>\n                  )}\n                  tooltipClassName={styles.advancedTooltipContainer}\n                  iconClassName={styles.advancedTooltip}\n                />\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\nimport SwapSelectToken from './components/SwapSelectToken';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  accountId?: string;\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    pairs,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  accountId,\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    loadSwapPairs,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const inputInRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputOutRef = useRef<HTMLDivElement>(null);\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const tokenInTransitionKey = useTokenTransitionKey(currentTokenInSlug ?? '');\n\n  const accountIdPrev = usePrevious(accountId, true);\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairs?.bySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  useEffect(() => {\n    const shouldForceUpdate = accountId !== accountIdPrev;\n\n    if (currentTokenInSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenInSlug, shouldForceUpdate });\n    }\n    if (currentTokenOutSlug) {\n      loadSwapPairs({ tokenSlug: currentTokenOutSlug, shouldForceUpdate });\n    }\n  }, [accountId, accountIdPrev, currentTokenInSlug, currentTokenOutSlug]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  };\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain] });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={tokenInTransitionKey}\n      >\n        {maxAmount !== undefined && (\n          <div className={styles.balanceContainer}>\n            <span className={styles.balance}>\n              {lang('$max_balance', {\n                balance: (\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={handleMaxAmountClick}\n                    className={styles.balanceLink}\n                  >\n                    {formatCurrency(toDecimal(maxAmount, tokenIn?.decimals), tokenIn!.symbol)}\n                  </div>\n                ),\n              })}\n            </span>\n          </div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-arrow-right-swap')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SwapSelectToken token={tokenIn} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SwapSelectToken token={tokenOut} shouldFilter />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        accountId: global.currentAccountId,\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useTokenTransitionKey(tokenSlug: string) {\n  const transitionKeyRef = useRef(0);\n\n  useSyncEffect(() => {\n    transitionKeyRef.current++;\n  }, [tokenSlug]);\n\n  return transitionKeyRef.current;\n}\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll')}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"inputButton\":\"AryS2PDZ\",\"inputButtonClear\":\"P0VxxOpY\",\"inputButtonTransition\":\"lRz9la7D\",\"inputButtonShifted\":\"KYWbK7EG\",\"amountInput\":\"lJJMNmjc\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"amountBottomWrapper\":\"pzJTzb6I\",\"amountBottom\":\"NwaO39Nr\",\"amountBottomRight\":\"Zkzr1Luh\",\"amountBottomRight_slide\":\"M4tMPnH0\",\"amountBottomRightSlide\":\"M4tMPnH0\",\"Transition\":\"xqhpp_RM\",\"transition\":\"xqhpp_RM\",\"Transition_slide-from\":\"VsOZiVJz\",\"transitionSlideFrom\":\"VsOZiVJz\",\"Transition_slide-to\":\"OKWgH5Dr\",\"transitionSlideTo\":\"OKWgH5Dr\",\"amountBottomRight_static\":\"EY9Piz6P\",\"amountBottomRightStatic\":\"EY9Piz6P\",\"balanceError\":\"Jag9KEHr\",\"balanceContainer\":\"E0ipzM4y\",\"balance\":\"Xbj3_5WF\",\"balanceLink\":\"GAcZr7Wf\",\"amountInCurrency\":\"GgT8dw74\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"tokenDropdown\":\"NHWRtRzL\",\"tokenDropdownItem\":\"Qkrt8RTy\",\"inputStatic\":\"RJsBtjCe\",\"inputRichStatic\":\"BrNIQCUa\",\"inputWithIcon\":\"uMO1BRcS\",\"commentLabel\":\"SXy2g5zj\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiChain, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport type { DropdownItem } from '../ui/Dropdown';\nimport { TransferState } from '../../global/types';\n\nimport { PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { SECOND } from '../../util/dateFormat';\nimport { fromDecimal, toBig, toDecimal } from '../../util/decimals';\nimport { isDnsDomain } from '../../util/dns';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee, getMaxTransferAmount, isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { IS_ANDROID, IS_CLIPBOARDS_SUPPORTED, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport FeeLine from '../ui/FeeLine';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Menu from '../ui/Menu';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId?: string;\n  accounts?: Record<string, Account>;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst SHORT_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n\nfunction TransferInitial({\n  isStatic,\n  tokenSlug,\n  toAddress = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    showNotification,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    requestOpenQrScanner,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const addressBookTimeoutRef = useRef<number>(null);\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const {\n    amount: balance,\n    decimals,\n    price,\n    symbol,\n    chain,\n    codeHash,\n  } = transferToken || {};\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [savedAddressForDeletion, setSavedAddressForDeletion] = useState<string | undefined>();\n  const [savedChainForDeletion, setSavedChainForDeletion] = useState<ApiChain | undefined>();\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const otherAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return otherAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [otherAccountIds.length, savedAddresses]);\n\n  const nativeToken = useMemo(() => {\n    return tokens?.find((token) => !token.tokenAddress && token.chain === chain);\n  }, [tokens, chain])!;\n\n  const isToncoin = tokenSlug === TONCOIN.slug;\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const amountInCurrency = price && amount\n    ? toBig(amount, decimals).mul(price).round(decimals, Big.roundHalfUp).toString()\n    : undefined;\n  const renderingAmountInCurrency = useCurrentOrPrev(amountInCurrency, true);\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n  const withAddressClearButton = !!toAddress.length;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance: nativeToken.amount,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const isDisabledDebounce = useRef(false);\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const { shouldRender: shouldRenderCurrency, transitionClassNames: currencyClassNames } = useShowTransition(\n    Boolean(amountInCurrency),\n  );\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  const dropDownItems = useMemo(() => {\n    if (!tokens) {\n      return [];\n    }\n\n    return tokens.reduce<DropdownItem[]>((acc, token) => {\n      if ((token.amount > 0 && !token.isDisabled) || token.slug === tokenSlug) {\n        acc.push({\n          value: token.slug,\n          icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || token.image,\n          overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n          name: token.symbol,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [isMultichainAccount, tokenSlug, tokens]);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (STAKED_TOKEN_SLUGS.has(tokenSlug) || PRICELESS_TOKEN_HASHES.has(codeHash ?? '')) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n      });\n    }\n  }, [tokenSlug, codeHash, lang]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkAddressFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n\n      return;\n    }\n\n    if (isDnsDomain(toAddress) && toAddress !== toAddress.toLowerCase()) {\n      setTransferToAddress({ toAddress: toAddress.toLowerCase().trim() });\n    } else if (toAddress !== toAddress.trim()) {\n      setTransferToAddress({ toAddress: toAddress.trim() });\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n    });\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const handleAddressClearClick = useLastCallback(() => {\n    setTransferToAddress({ toAddress: undefined });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelTransfer();\n  });\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      handleAddressClearClick();\n      setTransferAmount({ amount: undefined });\n      setTransferComment({ comment: undefined });\n      setTransferShouldEncrypt({ shouldEncrypt: false });\n    }\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        isDisabledDebounce.current = true;\n        setTransferToAddress({ toAddress: text.trim() });\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleAddressBookItemClick = useLastCallback(\n    (address: string) => {\n      isDisabledDebounce.current = true;\n      setTransferToAddress({ toAddress: address });\n      closeAddressBook();\n    },\n  );\n\n  const handleDeleteSavedAddressClick = useLastCallback(\n    (address: string) => {\n      setSavedAddressForDeletion(address);\n      setSavedChainForDeletion(chain);\n      closeAddressBook();\n    },\n  );\n\n  const closeDeleteSavedAddressModal = useLastCallback(() => {\n    setSavedAddressForDeletion(undefined);\n    setSavedChainForDeletion(undefined);\n  });\n\n  const handleAmountChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? fromDecimal(stringValue, decimals) : undefined;\n    if (value === undefined || value >= 0) {\n      setTransferAmount({ amount: value });\n    }\n  });\n\n  const handleMaxAmountClick = useLastCallback((e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    if (!balance) {\n      return;\n    }\n\n    void vibrate();\n    isDisabledDebounce.current = true;\n    setTransferAmount({ amount: maxAmount });\n  });\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const hasToAddressError = toAddress.length > 0 && !isAddressValid;\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        // NFT transfer is only available on the TON blockchain\n        return (!isNftTransfer || item.chain === 'ton') && doesSavedAddressFitSearch(item, toAddress);\n      })\n      .map((item) => renderAddressItem({\n        key: `saved-${item.address}-${item.chain}`,\n        address: item.address,\n        name: item.name,\n        chain: isMultichainAccount ? item.chain : undefined,\n        deleteLabel: lang('Delete'),\n        onClick: handleAddressBookItemClick,\n        onDeleteClick: handleDeleteSavedAddressClick,\n      }));\n  }, [savedAddresses, isNftTransfer, toAddress, isMultichainAccount, lang]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((currentChain) => {\n          const currentAddress = account.addressByChain[currentChain as ApiChain];\n          const key = `${currentChain}:${currentAddress}`;\n          if (\n            !uniqueAddresses.has(key)\n            // NFT transfer is only available on the TON blockchain\n            && (!isNftTransfer || currentChain === 'ton')\n            && (isMultichainAccount || currentChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${currentChain}:${currentAddress}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(currentAddress)!,\n              address: currentAddress,\n              chain: currentChain as ApiChain,\n              isHardware: account.isHardware,\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, toAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => renderAddressItem({\n      key: `address-${address}-${addressChain}`,\n      address,\n      name,\n      chain: isMultichainAccount ? addressChain : undefined,\n      isHardware,\n      onClick: handleAddressBookItemClick,\n    }));\n  }, [otherAccountIds, savedAddresses, accounts, isMultichainAccount, isNftTransfer, toAddress]);\n\n  const shouldRenderSuggestions = !!renderedSavedAddresses?.length || !!renderedOtherAccounts?.length;\n\n  function renderAddressBook() {\n    if (!shouldRenderSuggestions) return undefined;\n\n    return (\n      <Menu\n        positionX=\"right\"\n        type=\"suggestion\"\n        noBackdrop\n        bubbleClassName={styles.savedAddressBubble}\n        isOpen={isAddressBookOpen}\n        onClose={closeAddressBook}\n      >\n        {renderedSavedAddresses}\n        {renderedOtherAccounts}\n      </Menu>\n    );\n  }\n\n  function renderBottomRight() {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 1;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, isStatic && styles.amountBottomRight_static)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }\n\n  function renderInputActions() {\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={toAddress.length ? 0 : 1} name=\"fade\">\n        {toAddress.length ? (\n          <Button\n            isSimple\n            id={INPUT_CLEAR_BUTTON_ID}\n            className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n            onClick={handleAddressClearClick}\n            ariaLabel={lang('Clear')}\n          >\n            <i className=\"icon-close-filled\" aria-hidden />\n          </Button>\n        ) : (\n          <>\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderBalance() {\n    if (!symbol || isNftTransfer) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.balanceContainer}>\n        <span className={styles.balance}>\n          {lang('$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={handleMaxAmountClick}\n                className={styles.balanceLink}\n              >\n                {maxAmount !== undefined ? formatCurrency(toDecimal(maxAmount, decimals), symbol) : lang('Loading...')}\n              </div>\n            ),\n          })}\n        </span>\n      </div>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <Dropdown\n        items={dropDownItems}\n        selectedValue={tokenSlug}\n        className={styles.tokenDropdown}\n        itemClassName={styles.tokenDropdownItem}\n        onChange={handleTokenChange}\n      />\n    );\n  }\n\n  function renderCurrencyValue() {\n    return (\n      <span className={buildClassName(styles.amountInCurrency, currencyClassNames)}>\n        ≈&thinsp;{formatCurrency(renderingAmountInCurrency || '0', shortBaseSymbol, undefined, true)}\n      </span>\n    );\n  }\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : [COMMENT_DROPDOWN_ITEMS[0]]}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"light\"\n        disabled={chain === 'tron'}\n        menuPositionHorizontal=\"left\"\n        shouldTranslateOptions\n        className={styles.commentLabel}\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  function renderCommentField() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    return (\n      <Input\n        wrapperClassName={styles.commentInputWrapper}\n        className={isStatic ? styles.inputStatic : undefined}\n        label={renderCommentLabel()}\n        placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n        value={comment}\n        isMultiline\n        isDisabled={chain === 'tron'}\n        onInput={handleCommentChange}\n        isRequired={isCommentRequired}\n      />\n    );\n  }\n\n  const withButton = isQrScannerSupported || withPasteButton || withAddressClearButton;\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  const shouldIgnoreErrors = isAddressBookOpen && shouldRenderSuggestions;\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} />}\n        {Boolean(nfts?.length) && nfts!.length > 1 && <NftChips nfts={nfts!} isStatic={isStatic} />}\n\n        <Input\n          ref={toAddressRef}\n          className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n          isRequired\n          label={lang('Recipient Address')}\n          placeholder={lang('Wallet address or domain')}\n          value={isAddressFocused ? toAddress : toAddressShort}\n          error={hasToAddressError && !shouldIgnoreErrors ? (lang('Incorrect address') as string) : undefined}\n          autoCorrect={false}\n          onInput={handleAddressInput}\n          onFocus={handleAddressFocus}\n          onBlur={handleAddressBlur}\n        >\n          {renderInputActions()}\n        </Input>\n\n        {shouldUseAddressBook && renderAddressBook()}\n\n        {renderBalance()}\n        {!isNftTransfer && (\n          <>\n            <RichNumberInput\n              key=\"amount\"\n              id=\"amount\"\n              hasError={hasAmountError}\n              value={amount === undefined ? undefined : toDecimal(amount, decimals)}\n              labelText={lang('Amount')}\n              onChange={handleAmountChange}\n              onPressEnter={handleSubmit}\n              decimals={decimals}\n              className={styles.amountInput}\n              inputClassName={isStatic ? styles.inputRichStatic : undefined}\n            >\n              {renderTokens()}\n            </RichNumberInput>\n\n            <div className={styles.amountBottomWrapper}>\n              <div className={styles.amountBottom}>\n                {shouldRenderCurrency && renderCurrencyValue()}\n                {renderBottomRight()}\n              </div>\n            </div>\n          </>\n        )}\n\n        {chain === 'ton' && renderCommentField()}\n\n        <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n          {renderFee()}\n\n          <div className={styles.buttons}>\n            <Button\n              isDisabled={shouldDisableClearButton || isLoading}\n              className={styles.button}\n              onClick={handleClear}\n            >\n              {lang('Clear')}\n            </Button>\n            <Button\n              isPrimary\n              isSubmit\n              isDisabled={!canSubmit}\n              isLoading={isLoading}\n              className={styles.button}\n            >\n              {renderButtonText()}\n            </Button>\n          </div>\n        </div>\n      </form>\n      <DeleteSavedAddressModal\n        isOpen={Boolean(savedAddressForDeletion)}\n        address={savedAddressForDeletion}\n        chain={savedChainForDeletion}\n        onClose={closeDeleteSavedAddressModal}\n      />\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const baseCurrency = global.settings.baseCurrency;\n\n      return {\n        toAddress,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        baseCurrency,\n        currentAccountId: global.currentAccountId,\n        accounts: selectNetworkAccounts(global),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      };\n    },\n    (global, { isStatic }, stickToFirst) => {\n      if (!isStatic) {\n        return stickToFirst(global.currentAccountId);\n      }\n\n      const { nfts, tokenSlug = TONCOIN.slug } = global.currentTransfer;\n      const key = nfts?.length ? `${nfts[0].address}_${nfts.length}` : tokenSlug;\n\n      return stickToFirst(`${global.currentAccountId}_${key}`);\n    },\n  )(TransferInitial),\n);\n\nfunction trimStringByMaxBytes(str: string, maxBytes: number) {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n\n  return decoder.decode(encoded.slice(0, maxBytes)).replace(/\\uFFFD/g, '');\n}\n\nfunction renderAddressItem({\n  key,\n  address,\n  name,\n  chain,\n  isHardware,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: {\n  key: string;\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}) {\n  const isSavedAddress = !!onDeleteClick;\n  const handleDeleteClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      key={key}\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : () => onClick(address)}\n      onClick={IS_TOUCH_ENV ? () => onClick(address) : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && (\n        <span className={styles.savedAddressDelete}>\n          <span tabIndex={-1} role=\"button\" className={styles.savedAddressDeleteInner} onMouseDown={handleDeleteClick}>\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"transferSlideContent\":\"PkpRKi3Q\",\"spinner\":\"KCsGLTLM\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { Theme } from '../../../../global/types';\nimport { ActiveTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_ICON_PX,\n  DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  IS_STAKING_DISABLED,\n  TONCOIN,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { selectAccountState, selectCurrentAccountSettings } from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getChainBySlug } from '../../../../util/tokens';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  nfts?: ApiNft[];\n  tokenSlug: string;\n  isTransferWithComment: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nlet activeTransferKey = 0;\n\nfunction LandscapeActions({\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  nfts,\n  tokenSlug,\n  isTransferWithComment,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    styles.transferSlideContent,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const areNotAllTabs = !isSwapAllowed || !isStakingAllowed;\n  const isLastTab = (!isStakingAllowed && !isSwapAllowed && activeTabIndex === ActiveTab.Transfer)\n    || (!isStakingAllowed && isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n    || (isStakingAllowed && activeTabIndex === ActiveTab.Stake);\n  const transferKey = useMemo(() => nfts?.map((nft) => nft.address).join(',') || tokenSlug, [nfts, tokenSlug]);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useSyncEffect(() => {\n    activeTransferKey += 1;\n  }, [transferKey]);\n\n  useEffect(() => {\n    if (\n      (!isSwapAllowed && activeTabIndex === ActiveTab.Swap)\n      || (!isStakingAllowed && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapAllowed, isStakingAllowed]);\n\n  function renderCurrentTab(isActive: boolean, isPrev: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <Transition\n              activeKey={activeTransferKey}\n              name={isPrev ? 'semiFade' : 'none'}\n              direction={!isTransferWithComment ? 'inverse' : undefined}\n              shouldCleanup\n              slideClassName={styles.transferSlideContent}\n            >\n              <TransferInitial key={activeTransferKey} isStatic />\n            </Transition>\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Transfer && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isSendAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconSend}\n            iconPreviewClass=\"icon-action-send\"\n            onEnded={stopSendAnimation}\n          />\n          <span className={styles.tabText}>{lang('Send')}</span>\n          <span className={styles.tabDecoration} aria-hidden />\n          <span className={styles.tabDelimiter} aria-hidden />\n        </div>\n        {isSwapAllowed && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {isStakingAllowed && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>\n              {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: 'Unstaking' }[stakingStatus])}\n            </span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentBgRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const contentFooterRef = useRef<HTMLDivElement>(null);\n\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query)!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current!.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n      const { nfts, tokenSlug } = global.currentTransfer;\n      const isTransferWithComment = getChainBySlug(tokenSlug) === TONCOIN.chain;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        nfts,\n        tokenSlug,\n        isTransferWithComment,\n        isSwapDisabled,\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonIcon\":\"iQddp8Ac\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\n\nimport { IS_CORE_WALLET, IS_STAKING_DISABLED } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  stakingStatus: StakingStateStatus;\n  onEarnClick: NoneToVoidFunction;\n  isLedger?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  onEarnClick,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const isStakingAllowed = !isTestnet && !IS_STAKING_DISABLED;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleStartTransfer}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n          {lang('Send')}\n        </Button>\n        {isSwapAllowed && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {isStakingAllowed && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang({ inactive: 'Earn', active: 'Earning', unstakeRequested: 'Unstaking' }[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceTransition\":\"Q_lPdCwD\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"addressContainer\":\"Hscx8f3y\",\"address\":\"xtFe1Hpt\",\"icon\":\"Z4odaM4f\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"explorerButton\":\"a6nY4qXV\",\"change\":\"p0ADnah2\",\"changeCourseUp\":\"_4aE_WOLG\",\"changeCourseDown\":\"YOGTFZhO\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"dapp\":\"LHIzI0Gu\",\"dappIcon\":\"dwmUjn3W\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\n\nimport styles from '../Card.module.scss';\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      let stakingAmount = toBig(stakingState.balance, token.decimals);\n      if (stakingState.type === 'jetton') {\n        stakingAmount = stakingAmount.plus(toBig(stakingState.unclaimedRewards, token.decimals));\n      }\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changeClassName = changePercent > 0\n    ? styles.changeCourseUp\n    : (changePercent < 0 ? styles.changeCourseDown : undefined);\n  const changePrefix = changeValue > 0 ? '↑' : changeValue < 0 ? '↓' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changeClassName,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import { useState } from '../lib/teact/teact';\n\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAt?: number) {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={!isDisabled && styles.root} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: React.ReactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { Account, AccountSettings } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { selectNetworkAccounts } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport trapFocus from '../../../../util/trapFocus';\nimport { getIsMobileTelegramApp } from '../../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../hooks/useQrScannerSupport';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport AccountButton from './AccountButton';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  canEdit?: boolean;\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  menuButtonClassName?: string;\n  noSettingsButton?: boolean;\n  withAccountSelector?: boolean;\n  isInsideSticky?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  shouldForceAccountEdit?: boolean;\n  currentWalletVersion?: ApiTonWalletVersion;\n  isAppLockEnabled?: boolean;\n  isFullscreen?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  canEdit,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  menuButtonClassName,\n  noSettingsButton,\n  withAccountSelector,\n  accounts,\n  isInsideSticky,\n  shouldForceAccountEdit,\n  currentWalletVersion,\n  isAppLockEnabled,\n  isFullscreen,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    renameAccount,\n    openAddAccountModal,\n    openSettings,\n    requestOpenQrScanner,\n    openSettingsWithState,\n    setIsManualLockActive,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const lang = useLang();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(shouldForceAccountEdit);\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen && !isEdit, undefined, undefined, 'slow');\n  const [inputValue, setInputValue] = useState<string>(currentAccount?.title || '');\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const isMultichainAccount = Boolean(currentAccount?.addressByChain.tron);\n  const noSettingsOrQrSupported = noSettingsButton || (isInsideSticky && isQrScannerSupported);\n  const withAddW5Button = currentWalletVersion !== 'W5' && !currentAccount?.isHardware && !isMultichainAccount;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  useEffect(() => {\n    if (isOpen && forceClose) {\n      closeAccountSelector();\n    }\n  }, [forceClose, isOpen]);\n\n  useEffectWithPrevDeps(([prevShouldForceAccountEdit]) => {\n    if (prevShouldForceAccountEdit && !shouldForceAccountEdit) {\n      closeEdit();\n    }\n  }, [shouldForceAccountEdit]);\n\n  useEffect(\n    () => (shouldRender ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRender],\n  );\n  useEffect(\n    () => (isEdit ? captureEscKeyListener(closeEdit) : undefined),\n    [closeEdit, isEdit],\n  );\n  useEffect(() => (shouldRender && modalRef.current ? trapFocus(modalRef.current) : undefined), [shouldRender]);\n  useFocusAfterAnimation(inputRef, !isEdit);\n  useEffect(() => {\n    if (isEdit) {\n      setInputValue(currentAccount?.title || '');\n    }\n  }, [currentAccount?.title, isEdit]);\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleSaveClick = useLastCallback(() => {\n    renameAccount({ accountId: currentAccountId, title: inputValue.trim() });\n    closeAccountSelector();\n    closeEdit();\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n  useEffect(() => {\n    if (isEdit && isInsideSticky) { handleSaveClick(); }\n  }, [isEdit, isInsideSticky]);\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleInputKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.code === 'Enter') {\n      handleSaveClick();\n    } else {\n      setInputValue(e.currentTarget.value);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    closeAccountSelector();\n  });\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    isHardware?: boolean,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        isHardware={isHardware}\n        isActive={isActive}\n        title={title}\n        canEditAccount={canEdit}\n        cardBackgroundNft={cardBackgroundNft}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    transitionClassNames,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && styles.accountTitleInteractive,\n    accountClassName,\n    isQrScannerSupported && !noSettingsOrQrSupported && styles.accountTitleShort,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <>\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {currentAccount?.title || shortenAddress(currentAccount?.addressByChain?.ton || '')}\n          </span>\n          {withAccountSelector && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n        <div className={buildClassName(styles.menuButtons, isInsideSticky && styles.inStickyCard)}>\n          {isAppLockEnabled && !isInsideSticky && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('App Lock')}\n              onClick={handleManualLock}\n            >\n              <i className=\"icon-manual-lock\" aria-hidden />\n            </Button>\n          )}\n          {!noSettingsOrQrSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Main menu')}\n              onClick={openSettings}\n            >\n              <i className=\"icon-cog\" aria-hidden />\n            </Button>\n          )}\n          {isQrScannerSupported && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Scan QR Code')}\n              onClick={handleQrScanClick}\n            >\n              <i className=\"icon-qr-scanner\" aria-hidden />\n            </Button>\n          )}\n          {getIsMobileTelegramApp() && (\n            <Button\n              className={buildClassName(styles.menuButton, menuButtonClassName)}\n              isText\n              isSimple\n              kind=\"transparent\"\n              ariaLabel={lang('Toggle fullscreen')}\n              onClick={handleFullscreenToggle}\n            >\n              <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderInput() {\n    return (\n      <div className={buildClassName(styles.inputContainer, 'account-edit-input')}>\n        <input\n          ref={inputRef}\n          className={styles.input}\n          value={inputValue}\n          onKeyDown={handleInputKeyDown}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n        <Button isSimple className={styles.saveButton} onClick={handleSaveClick}>{lang('Done')}</Button>\n      </div>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, isHardware }]) => {\n              return renderButton(accountId, addressByChain, isHardware, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!isEdit && renderCurrentAccount()}\n      {isEdit && !isInsideSticky && renderInput()}\n\n      {shouldRender && renderAccountsSelector()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      shouldForceAccountEdit,\n      walletVersions,\n      settings: { isAppLockEnabled, byAccountId: settingsByAccountId },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n\n    return {\n      currentAccountId,\n      currentAccount: accounts?.[currentAccountId],\n      accounts,\n      shouldForceAccountEdit,\n      currentWalletVersion: walletVersions?.currentVersion,\n      isAppLockEnabled,\n      settingsByAccountId,\n      isFullscreen,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","import React, { memo, type TeactNode, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account } from '../../../../global/types';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isTestnet?: boolean;\n  isHardwareAccount?: boolean;\n  withTextGradient?: boolean;\n}\n\nfunction CardAddress({\n  addressByChain, isTestnet, isHardwareAccount, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag(false);\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    if (chains.length < 2) return undefined;\n\n    return chains.map((key) => ({\n      value: addressByChain![key],\n      name: shortenAddress(addressByChain![key])!,\n      icon: getChainNetworkIcon(key),\n      fontIcon: 'copy',\n      chain: key,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(key),\n      }) as TeactNode[]\n      ).join(''),\n    }));\n  }, [addressByChain, chains, lang]);\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!') as string, icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullButtonClassName = buildClassName(\n            menuStyles.button,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullButtonClassName}>\n              <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              <span\n                className={buildClassName(menuStyles.itemName, styles.menuItemName)}\n                tabIndex={0}\n                role=\"button\"\n                onClick={(e) => handleItemClick(e, item.value)}\n              >\n                {item.name}\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    return (\n      <div className={styles.addressContainer}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onClick={() => openMenu()}\n        >\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {lang('Multichain')}\n          </span>\n          <i className={buildClassName(styles.icon, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  return (\n    <div className={styles.addressContainer}>\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(addressByChain![chain])}\n      >\n        {shortenAddress(addressByChain![chain])}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, addressByChain![chain], isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain, isHardware } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    isTestnet: global.settings.isTestnet,\n    isHardwareAccount: isHardware,\n  };\n})(CardAddress));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\n\nimport { CURRENCY_LIST } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionHorizontal?: 'right' | 'left';\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcher({\n  isOpen,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionHorizontal,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const currencyList = useMemo(\n    () => CURRENCY_LIST.filter((item) => item.value !== excludedCurrency),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionHorizontal={menuPositionHorizontal}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from './helpers/getCardNftImageUrl';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const transitionClassNames = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div className={buildClassName(rootClassName, transitionClassNames)} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TRC20_USDT_MAINNET_SLUG]: 'green',\n  [TRC20_USDT_TESTNET_SLUG]: 'green',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleMouseMove}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionHorizontal=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET, TONCOIN } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleOpenUrl } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { ASSET_LOGO_PATHS } from '../../../ui/helpers/assetLogos';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcher from './CurrencySwitcher';\n\nimport styles from './Card.module.scss';\n\nimport tonUrl from '../../../../assets/coins/ton.svg';\n\ninterface OwnProps {\n  token: UserToken;\n  classNames: string;\n  isUpdating?: boolean;\n  onYieldClick: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  onYieldClick,\n  onClose,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, image, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const logoPath = slug === TONCOIN.slug\n    ? tonUrl\n    : image || ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS];\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const change = (initialPrice && price) ? price - initialPrice : 0;\n\n  const value = toBig(amount, decimals).mul(price).toString();\n  const changePrefix = change === undefined ? change : change > 0 ? '↑' : change < 0 ? '↓' : 0;\n\n  const changeValue = change ? Math.abs(round(change, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history![0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as TeactNode[]).join('');\n\n    return (\n      <>\n        {' · '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleOpenUrl}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <img className={styles.tokenLogo} src={logoPath} alt={token.name} />\n        <div className={styles.tokenInfoHeader}>\n          <b className={styles.tokenAmount}>{formatCurrency(toDecimal(amount, token.decimals), symbol)}</b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                ≈&thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n              </div>\n              <CurrencySwitcher\n                isOpen={isCurrencyMenuOpen}\n                menuPositionHorizontal=\"right\"\n                excludedCurrency={token.symbol}\n                onClose={closeCurrencyMenu}\n                onChange={handleCurrencyChange}\n              />\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span className={styles.apy} onClick={() => onYieldClick(stakingId)}>\n                {yieldType} {annualYield}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}\n              &thinsp;\n              {Math.abs(changePercent)}% · {formatCurrency(Math.abs(changeValue), currencySymbol)}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history!}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history![0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n    };\n  })(TokenCard),\n);\n","import type { Ref } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET, IS_EXTENSION } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport AccountSelector from './AccountSelector';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: Ref<HTMLDivElement>;\n  forceCloseAccountSelector?: boolean;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  activeDappOrigin?: string;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  balanceUpdateStartedAt?: number;\n  cardNft?: ApiNft;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  activeDappOrigin,\n  currentTokenSlug,\n  forceCloseAccountSelector,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  balanceUpdateStartedAt,\n  cardNft,\n}: OwnProps & StateProps) {\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const { isPortrait } = useDeviceScreen();\n\n  const isUpdating = useUpdateIndicator(balanceUpdateStartedAt);\n\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    transitionClassNames: tokenCardTransitionClassNames,\n  } = useShowTransition(Boolean(currentTokenSlug), undefined, true);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const dappDomain = useMemo(() => {\n    if (!activeDappOrigin) {\n      return undefined;\n    }\n\n    let value: string | undefined;\n    try {\n      value = new URL(activeDappOrigin).hostname;\n    } catch (err) {\n      value = shortenAddress(activeDappOrigin);\n    }\n\n    return value;\n  }, [activeDappOrigin]);\n  const renderingDappDomain = useCurrentOrPrev(dappDomain, true);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const {\n    shouldRender: shouldRenderDappElement,\n    transitionClassNames: dappClassNames,\n  } = useShowTransition(Boolean(dappDomain));\n\n  const shouldRenderDapp = IS_EXTENSION && shouldRenderDappElement;\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changeClassName, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.balanceTransition}>\n          <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n            <span\n              className={buildClassName(\n                styles.currencySwitcher,\n                isUpdating && 'glare-text',\n                !isUpdating && withTextGradient && 'gradientText',\n              )}\n              role=\"button\"\n              tabIndex={0}\n              onClick={openCurrencyMenu}\n            >\n              {shortBaseSymbol.length === 1 && shortBaseSymbol}\n              <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n              {primaryFractionPart && (\n                <span className={styles.primaryFractionPart}>\n                  <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                </span>\n              )}\n              {shortBaseSymbol.length > 1 && (\n                <span className={styles.primaryFractionPart}>\n                &nbsp;{shortBaseSymbol}\n                </span>\n              )}\n              <i className={iconCaretClassNames} aria-hidden />\n            </span>\n          </div>\n        </Transition>\n        <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n        {primaryValue !== '0' && (\n          <div className={buildClassName(styles.change, changeClassName, 'rounded-font')}>\n            {changePrefix}\n            &thinsp;\n            <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n            {' · '}\n            <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n          </div>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          <AccountSelector\n            withAccountSelector={!IS_CORE_WALLET}\n            noSettingsButton={isPortrait}\n            accountClassName={buildClassName(withTextGradient && 'gradientText')}\n            forceClose={forceCloseAccountSelector}\n            canEdit={!IS_CORE_WALLET}\n          />\n          {shouldRenderDapp && (\n            <div className={buildClassName(styles.dapp, dappClassNames)}>\n              <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n              {renderingDappDomain}\n            </div>\n          )}\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          classNames={tokenCardTransitionClassNames}\n          isUpdating={isUpdating}\n          onYieldClick={onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        activeDappOrigin: accountState?.activeDappOrigin,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        balanceUpdateStartedAt: global.balanceUpdateStartedAt,\n        cardNft,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"d8E3jNRv\",\"background\":\"sWp81HgH\",\"noNoise\":\"MHtSlPVW\",\"content\":\"duM9JHY8\",\"account\":\"NEB0Tl4P\",\"menuButton\":\"ucgPS0OB\",\"balance\":\"EDIvoE0D\",\"balanceFractionPart\":\"kBYrVlBo\",\"iconCaret\":\"EDC1Bcor\",\"iconCaretFraction\":\"uTPq0gij\",\"currencySwitcher\":\"JdDnaL44\",\"darkText\":\"raaB0_Hf\",\"lightText\":\"p4Ksvslm\",\"cardBackground\":\"NxJpWlzN\"};","import React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AccountSelector from './AccountSelector';\nimport CurrencySwitcher from './CurrencySwitcher';\nimport CustomCardManager from './CustomCardManager';\n\nimport styles from './StickyCard.module.scss';\n\ninterface OwnProps {\n  classNames?: string;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n}\n\nfunction StickyCard({\n  classNames,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  cardNft,\n}: OwnProps & StateProps) {\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = values || {};\n\n  const iconCaretClassNames = buildClassName(\n    'icon',\n    'icon-caret-down',\n    styles.iconCaret,\n    primaryFractionPart && styles.iconCaretFraction,\n  );\n\n  return (\n    <div className={styles.root}>\n      <div className={buildClassName(styles.background, cardNft && styles.noNoise, classNames)}>\n        {!IS_CORE_WALLET && (<CustomCardManager isSticky nft={cardNft} onCardChange={handleCardChange} />)}\n        <div className={buildClassName(styles.content, customCardClassName)}>\n          <AccountSelector\n            isInsideSticky\n            accountClassName={buildClassName(styles.account, withTextGradient && 'gradientText')}\n            accountSelectorClassName=\"sticky-card-account-selector\"\n            menuButtonClassName={styles.menuButton}\n            noSettingsButton\n            withAccountSelector={!(IS_ELECTRON && IS_MAC_OS) && !IS_CORE_WALLET}\n          />\n          <div className={styles.balance}>\n            <span\n              role=\"button\"\n              tabIndex={0}\n              className={buildClassName(styles.currencySwitcher, withTextGradient && 'gradientText')}\n              onClick={openCurrencyMenu}\n            >\n              {shortBaseSymbol.length === 1 && shortBaseSymbol}\n              {primaryWholePart}\n              {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n              {shortBaseSymbol.length > 1 && (\n                <span className={styles.balanceFractionPart}>&nbsp;{shortBaseSymbol}</span>\n              )}\n              <i className={iconCaretClassNames} aria-hidden />\n            </span>\n            <CurrencySwitcher isOpen={isCurrencyMenuOpen} onClose={closeCurrencyMenu} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n      return {\n        tokens: selectCurrentAccountTokens(global),\n        baseCurrency: global.settings.baseCurrency,\n        cardNft,\n        stakingStates,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StickyCard),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    requestParamsRef.current = {};\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    requestParamsRef.current = { direction, offsetId };\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nexport default useInfiniteScroll;\n","import type { RefObject, UIEvent } from 'react';\nimport type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  maxHeight?: number;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: React.ReactNode;\n  scrollContainerClosest?: string;\n  children: React.ReactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor!.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && `height: ${maxHeight}px`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"dtfXKrc1\",\"active\":\"s5rKiBWU\",\"itemLast\":\"Lj95SXyq\",\"iconArrow\":\"In7wjvJn\",\"icon\":\"_ICqu0z2\",\"icon_staking\":\"gTKLXaB3\",\"iconStaking\":\"gTKLXaB3\",\"icon_operationPositive\":\"GmWiDZkI\",\"iconOperationPositive\":\"GmWiDZkI\",\"icon_purple\":\"SQWZ9Oez\",\"iconPurple\":\"SQWZ9Oez\",\"icon_error\":\"Q65FM3J4\",\"iconError\":\"mGFBcSmx\",\"icon_swap\":\"ZfCaWqB1\",\"iconSwap\":\"ZfCaWqB1\",\"iconWaiting\":\"sjVip3sq\",\"iconWaitingStake\":\"g8fmH7H_\",\"header\":\"ysalRrTJ\",\"subheader\":\"mn7fmzAk\",\"operationName\":\"cQDrPzK7\",\"address\":\"Rymf6Lfn\",\"amount\":\"SFuQDDGL\",\"addressValue\":\"eBNgO37m\",\"chainIcon\":\"taalmW1o\",\"amount_operationPositive\":\"hOJqc3Zk\",\"amountOperationPositive\":\"hOJqc3Zk\",\"amount_operationNegative\":\"p3a9Uamy\",\"amountOperationNegative\":\"p3a9Uamy\",\"amount_stake\":\"WAuCiqJm\",\"amountStake\":\"WAuCiqJm\",\"commentIcon\":\"axmClUqA\",\"comment\":\"m3tsD5Lh\",\"comment_incoming\":\"RK0krKoG\",\"commentIncoming\":\"RK0krKoG\",\"comment_outgoing\":\"cSX4gOae\",\"commentOutgoing\":\"cSX4gOae\",\"scamImage\":\"TqSKLa3F\",\"swapAmount\":\"enfXRStc\",\"swapArrowRight\":\"ZcG2fXCw\",\"swapBuy\":\"Q2WugE4t\",\"swapError\":\"XhetBWmN\",\"swapSell\":\"tnzn3bEs\",\"swapHold\":\"LuAdiHBF\",\"isSwapErrorMessage\":\"shgP3pO5\",\"nft\":\"ak_LCBLa\",\"received\":\"x4oZwp8K\",\"nftWithComment\":\"KZh31z_P\",\"nftImage\":\"sjeAoWgh\",\"nftData\":\"qHIX_uIs\",\"nftName\":\"eCN9f1Sr\",\"nftCollection\":\"EoWXh7mx\"};","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Transaction.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  isLast: boolean;\n  activity: ApiSwapActivity;\n  isActive: boolean;\n  appTheme: AppTheme;\n  addressByChain?: Account['addressByChain'];\n  onClick: (id: string) => void;\n};\n\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(id);\n  });\n\n  const swapIconClass = buildClassName(\n    'icon-swap',\n    styles.icon_swap,\n    isError && styles.icon_error,\n  );\n\n  const iconFullClass = buildClassName(\n    styles.icon,\n    swapIconClass,\n  );\n\n  function renderAmount() {\n    const amountSwapClass = buildClassName(\n      styles.amount,\n      styles.swapAmount,\n    );\n\n    return (\n      <div className={amountSwapClass}>\n        <span className={buildClassName(styles.swapSell, isError && styles.swapError)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(\n            styles.swapArrowRight,\n            'icon-arrow-right',\n            isError && styles.swapError,\n            isHold && styles.swapHold,\n          )}\n          aria-hidden\n        />\n        <span className={buildClassName(\n          styles.swapBuy,\n          isError && styles.swapError,\n          isHold && styles.swapHold,\n        )}\n        >\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n      </div>\n    );\n  }\n\n  function renderErrorMessage() {\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from Сhangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={buildClassName(isError && styles.isSwapErrorMessage)}>\n        {date}{state ? `${WHOLE_PART_DELIMITER}∙${WHOLE_PART_DELIMITER}${state}` : ''}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError) {\n      return lang('SwapTitle');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={id}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n      )}\n      onClick={handleClick}\n      isSimple\n    >\n      <i className={iconFullClass} aria-hidden />\n      {isPending && (\n        <AnimatedIconWithPreview\n          play\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.iconWaiting}\n          nonInteractive\n          noLoop={false}\n          forceOnHeavyAnimation\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGreen}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGreen}\n        />\n      )}\n      {isError && (\n        <i\n          className={buildClassName(styles.iconError, 'icon-close-filled')}\n          aria-hidden\n        />\n      )}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderErrorMessage()}\n        {renderCurrency(activity, fromToken, toToken)}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nfunction renderCurrency(activity: ApiSwapActivity, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n  return (\n    <div className={styles.address}>\n      {\n        rate && (\n          <>\n            {rate.firstCurrencySymbol}{' ≈ '}\n            <span className={styles.addressValue}>\n              {rate.price}{' '}{rate.secondCurrencySymbol}\n            </span>\n          </>\n        )\n      }\n    </div>\n  );\n}\n","import type { Ref, RefObject } from 'react';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiTokenWithPrice, ApiTransactionActivity, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, SavedAddress } from '../../../../global/types';\nimport { MediaType } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, TONCOIN, TRANSACTION_ADDRESS_SHIFT } from '../../../../config';\nimport { getIsTxIdLocal } from '../../../../global/helpers';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Transaction.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast: boolean;\n  isActive: boolean;\n  withChainIcon?: boolean;\n  annualYield: number;\n  yieldType?: ApiYieldType;\n  appTheme: AppTheme;\n  savedAddresses?: SavedAddress[];\n  onClick: (id: string) => void;\n};\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  onClick,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n  } = transaction;\n\n  const isStake = type === 'stake';\n  const isUnstake = type === 'unstake';\n  const isUnstakeRequest = type === 'unstakeRequest';\n  const isStaking = isStake || isUnstake || isUnstakeRequest;\n  const isNftTransfer = type === 'nftTransferred' || type === 'nftReceived' || Boolean(nft);\n\n  const token = tokensBySlug?.[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || metadata?.name;\n  const isLocal = getIsTxIdLocal(txId);\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(transaction);\n  const isScam = isTransactionWithPoisoning || Boolean(metadata?.isScam);\n\n  const handleClick = useLastCallback(() => {\n    onClick(txId);\n  });\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft, txId });\n  });\n\n  function getOperationName() {\n    if (isStake) {\n      return 'Staked';\n    }\n\n    if (isUnstakeRequest) {\n      return 'Unstake Requested';\n    }\n\n    if (isUnstake) {\n      return 'Unstaked';\n    }\n\n    return isIncoming ? 'Received' : 'Sent';\n  }\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.nft,\n          isIncoming && styles.received,\n          comment && styles.nftWithComment,\n          'transaction-nft',\n        )}\n        onClick={handleNftClick}\n        data-nft-address={nft?.address}\n        data-tx-id={txId}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    if (isStaking || isScam || (!comment && !encryptedComment)) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(\n          styles.comment,\n          isIncoming ? styles.comment_incoming : styles.comment_outgoing,\n        )}\n      >\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  const stakeIconClass = buildClassName(\n    isStaking && 'icon-earn',\n    isStake && styles.icon_purple,\n    isStaking && styles.icon_staking,\n    !isStaking && (isIncoming ? 'icon-receive-alt' : 'icon-send-alt'),\n  );\n\n  const iconFullClass = buildClassName(\n    styles.icon,\n    isIncoming && styles.icon_operationPositive,\n    stakeIconClass,\n  );\n\n  function renderAmount() {\n    const amountOtherClass = buildClassName(\n      styles.amount,\n      isIncoming\n        ? styles.amount_operationPositive\n        : (isStake ? styles.amount_stake : styles.amount_operationNegative),\n    );\n\n    return (\n      <div className={amountOtherClass}>\n        {isNftTransfer ? 'NFT' : formatCurrencyExtended(\n          toDecimal(isStaking ? bigintAbs(amount) : amount, token!.decimals),\n          token?.symbol || TONCOIN.symbol,\n          isStaking,\n        )}\n      </div>\n    );\n  }\n\n  function renderAddress() {\n    return (\n      <div className={styles.address}>\n        {!isStaking && lang(isIncoming ? '$transaction_from' : '$transaction_to', {\n          address: (\n            <span className={styles.addressValue}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        })}\n        {isStake && lang('at %annual_yield%', {\n          annual_yield: <span className={styles.addressValue}>{yieldType} {annualYield}%</span>,\n        })}\n        {(isUnstake || isUnstakeRequest) && '\\u00A0'}\n      </div>\n    );\n  }\n\n  const waitingIconName = isStake ? 'iconClockPurpleWhite' : (isIncoming ? 'iconClockGreen' : 'iconClockGray');\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      key={txId}\n      className={buildClassName(styles.item, isLast && styles.itemLast, isActive && styles.active)}\n      onClick={handleClick}\n      isSimple\n    >\n      <i className={iconFullClass} aria-hidden />\n      {isLocal && (\n        <AnimatedIconWithPreview\n          play\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.iconWaiting}\n          nonInteractive\n          noLoop={false}\n          forceOnHeavyAnimation\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][waitingIconName]}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[waitingIconName]}\n        />\n      )}\n      <div className={styles.header}>\n        <div className={styles.operationName}>\n          {lang(getOperationName())}\n          {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {formatTime(timestamp)}\n        {renderAddress()}\n      </div>\n      {nft && renderNft()}\n      {renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\"};","import React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity, ApiStakingState, ApiSwapAsset, ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { getIsSwapId, getIsTinyOrScamTransaction, getIsTxIdLocal } from '../../../../global/helpers';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsFirstTransactionsLoaded,\n  selectIsMultichainAccount,\n  selectIsNewWallet,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt, SECOND } from '../../../../util/dateFormat';\nimport { buildCollectionByKey, findLast } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useThrottledCallback from '../../../../hooks/useThrottledCallback';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport NewWalletGreeting from './NewWalletGreeting';\nimport Swap from './Swap';\nimport Transaction from './Transaction';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isNewWallet: boolean;\n  isMultichainAccount: boolean;\n  addressByChain?: Account['addressByChain'];\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  idsBySlug?: Record<string, string[]>;\n  idsMain?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isMainHistoryEndReached?: boolean;\n  isHistoryEndReachedBySlug?: Record<string, boolean>;\n  alwaysShownSlugs?: string[];\n  activitiesUpdateStartedAt?: number;\n  theme: Theme;\n  isFirstTransactionsLoaded?: boolean;\n  stakingStates?: ApiStakingState[];\n};\n\ninterface ActivityOffsetInfo {\n  offset: number;\n  offsetNext: number;\n  dateCount: number;\n  commentCount: number;\n  nftCount: number;\n  date: number;\n}\n\nconst FURTHER_SLICE = 30;\nconst THROTTLE_TIME = SECOND;\n\nconst DATE_HEADER_HEIGHT = 2.5 * REM;\nconst TRANSACTION_COMMENT_HEIGHT = 2.1875 * REM;\nconst TRANSACTION_NFT_HEIGHT = 4 * REM;\nconst TRANSACTION_HEIGHT = 4 * REM;\n\nconst TIME_BETWEEN_SWAP_AND_TX = 3600000; // 1 hour\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isNewWallet,\n  isMultichainAccount,\n  addressByChain,\n  slug,\n  idsBySlug,\n  idsMain,\n  byId,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isMainHistoryEndReached,\n  isHistoryEndReachedBySlug,\n  alwaysShownSlugs,\n  activitiesUpdateStartedAt = 0,\n  theme,\n  isFirstTransactionsLoaded,\n  stakingStates,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const {\n    fetchTokenTransactions, fetchAllTransactions, showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isUpdating = useUpdateIndicator(activitiesUpdateStartedAt);\n\n  const appTheme = useAppTheme(theme);\n\n  const stakingStateBySlug = useMemo(() => {\n    return stakingStates ? buildCollectionByKey(stakingStates, 'tokenSlug') : {};\n  }, [stakingStates]);\n\n  const ids = useMemo(() => {\n    let idList: string[] | undefined;\n\n    const bySlug = idsBySlug ?? {};\n\n    if (byId) {\n      if (slug) {\n        idList = bySlug[slug] ?? [];\n        const lastTokenTxId = findLast(idList, (id) => !getIsTxIdLocal(id) && !getIsSwapId(id));\n\n        if (lastTokenTxId) {\n          const lastTokenTxTimestamp = byId[lastTokenTxId].timestamp - TIME_BETWEEN_SWAP_AND_TX;\n          idList = idList.filter((txId) => byId[txId].timestamp >= lastTokenTxTimestamp);\n        }\n      } else {\n        idList = idsMain;\n      }\n    }\n\n    if (!idList) {\n      return undefined;\n    }\n\n    return idList;\n  }, [byId, slug, idsBySlug, idsMain]);\n\n  const activityList = useMemo(() => {\n    if (!ids) {\n      return undefined;\n    }\n\n    const allActivities = ids\n      .map((id) => byId?.[id])\n      .filter((activity) => {\n        if (activity?.shouldHide) {\n          return false;\n        }\n        if (activity?.kind === 'swap') {\n          return Boolean(!slug || activity.from === slug || activity.to === slug);\n        } else {\n          return Boolean(\n            activity?.slug\n            && (!slug || activity.slug === slug)\n            && (\n              !areTinyTransfersHidden\n              || (slug && tokensBySlug[activity.slug]?.quote.priceUsd === 0)\n              || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n              || alwaysShownSlugs?.includes(activity.slug)\n            )\n            && !getIsTransactionWithPoisoning(activity),\n          );\n        }\n      }) as ApiActivity[];\n\n    if (!allActivities.length) {\n      return [];\n    }\n\n    return allActivities;\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, ids, slug, tokensBySlug]);\n\n  const { activityIds, activitiesById } = useMemo(() => {\n    const activityIdList: string[] = [];\n    const activityMap: Record<string, ApiActivity> = {};\n\n    activityList?.forEach((activity) => {\n      activityIdList.push(activity.id);\n      activityMap[activity.id] = activity;\n    });\n\n    return { activityIds: activityIdList, activitiesById: activityMap };\n  }, [activityList]);\n\n  const isHistoryEndReached = useMemo(() => {\n    if (slug) {\n      return !!isHistoryEndReachedBySlug?.[slug];\n    }\n\n    return !!isMainHistoryEndReached;\n  }, [isHistoryEndReachedBySlug, isMainHistoryEndReached, slug]);\n\n  const loadMore = useLastCallback(() => {\n    if (slug) {\n      fetchTokenTransactions({ slug, limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    } else {\n      fetchAllTransactions({ limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    }\n  });\n\n  const throttledLoadMore = useThrottledCallback(loadMore, [loadMore], THROTTLE_TIME, true);\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    throttledLoadMore, activityIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const isActivitiesEmpty = !activityList || !activityList.length;\n\n  const activityOffsetInfoById = useMemo(() => {\n    const offsetMap: Record<string, ActivityOffsetInfo> = {};\n\n    let dateCount = 0;\n    let nftCount = 0;\n    let commentCount = 0;\n    let lastActivityDayStart = 0;\n\n    activityIds.forEach((id, index) => {\n      const activity = activitiesById[id];\n      if (!activity) return;\n\n      offsetMap[id] = {\n        offset: 0,\n        offsetNext: 0,\n        dateCount: 0,\n        commentCount: 0,\n        nftCount: 0,\n        date: lastActivityDayStart,\n      };\n\n      const offsetTop = calculateOffset(index, dateCount, commentCount, nftCount);\n      const activityDayStart = getDayStartAt(activity.timestamp);\n      const isNewDay = lastActivityDayStart !== activityDayStart;\n      const isNftTransfer = activity.kind === 'transaction'\n        && (\n          activity.type === 'nftTransferred'\n          || activity.type === 'nftReceived'\n          || Boolean(activity.nft)\n        );\n      const canCountComment = activity.kind === 'transaction' && (!activity.type || isNftTransfer);\n      if (isNewDay) {\n        lastActivityDayStart = activityDayStart;\n        dateCount += 1;\n      }\n\n      if (canCountComment && (activity.comment || activity.encryptedComment) && !activity.metadata?.isScam) {\n        commentCount += 1;\n      }\n\n      if (isNftTransfer && activity.nft) {\n        nftCount += 1;\n      }\n\n      offsetMap[id] = {\n        ...offsetMap[id],\n        offset: offsetTop,\n        offsetNext: calculateOffset(index + 1, dateCount, commentCount, nftCount),\n        dateCount,\n        commentCount,\n        nftCount,\n      };\n    });\n\n    return offsetMap;\n  }, [activitiesById, activityIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      const lastViewportId = viewportIds![viewportIds!.length - 1];\n\n      return activityOffsetInfoById[lastViewportId]?.offsetNext || 0;\n    },\n    [activityOffsetInfoById, viewportIds],\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}px` });\n  }, [isLandscape, currentContainerHeight]);\n\n  useEffect(() => {\n    if (!isHistoryEndReached && ids && isActivitiesEmpty) {\n      throttledLoadMore();\n    }\n  }, [ids, isActivitiesEmpty, isHistoryEndReached, throttledLoadMore]);\n\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderActivity(activity: ApiActivity, isLast: boolean, isActivityActive: boolean) {\n    const isSwap = activity.kind === 'swap';\n\n    if (isSwap) {\n      return (\n        <Swap\n          key={activity.id}\n          activity={activity}\n          tokensBySlug={swapTokensBySlug}\n          isLast={isLast}\n          isActive={isActivityActive}\n          appTheme={appTheme}\n          addressByChain={addressByChain}\n          onClick={handleActivityClick}\n        />\n      );\n    } else {\n      return (\n        <Transaction\n          key={activity.id}\n          transaction={activity}\n          tokensBySlug={tokensBySlug}\n          isActive={isActivityActive}\n          annualYield={stakingStateBySlug[activity.slug]?.annualYield}\n          yieldType={stakingStateBySlug[activity.slug]?.yieldType}\n          isLast={isLast}\n          savedAddresses={savedAddresses}\n          withChainIcon={isMultichainAccount}\n          appTheme={appTheme}\n          onClick={handleActivityClick}\n        />\n      );\n    }\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    return viewportIds!.map((id, index) => {\n      const activityInfo = activityOffsetInfoById[id];\n\n      const nextActivityId = viewportIds![index + 1];\n      const activity = activitiesById[id];\n      const nextActivity = activitiesById[nextActivityId];\n      if (!activity) return undefined;\n\n      const activityDayStart = getDayStartAt(activity.timestamp);\n      const isNewDay = activityInfo.date !== activityDayStart;\n\n      const nextActivityDayStart = nextActivity ? getDayStartAt(nextActivity.timestamp) : 0;\n      const isFirst = index === 0;\n      const isLast = activityDayStart !== nextActivityDayStart;\n\n      const isActivityActive = activity.id === currentActivityId;\n\n      return (\n        <div\n          key={id}\n          style={`top: ${activityInfo.offset}px`}\n          className={buildClassName('ListItem', styles.listItem)}\n        >\n          {isNewDay && renderDate(activityDayStart, isFirst)}\n          {renderActivity(activity, isLast, isActivityActive)}\n        </div>\n      );\n    });\n  }\n\n  if (isActivitiesEmpty && !isFirstTransactionsLoaded) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (isNewWallet) {\n    return (\n      <div className={buildClassName(isLandscape && styles.greeting)}>\n        <NewWalletGreeting\n          isActive={isActive}\n          isMutlichainAccount={isMultichainAccount}\n          mode={isLandscape ? 'emptyList' : 'panel'}\n        />\n      </div>\n    );\n  }\n\n  if (isHistoryEndReached && isActivitiesEmpty) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const account = selectCurrentAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const isFirstTransactionsLoaded = selectIsFirstTransactionsLoaded(global, global.currentAccountId!);\n      const isNewWallet = selectIsNewWallet(global, isFirstTransactionsLoaded);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStates = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const {\n        idsBySlug, byId, isMainHistoryEndReached, isHistoryEndReachedBySlug, idsMain,\n      } = accountState?.activities ?? {};\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: global.currentAccountId!,\n        slug,\n        byId,\n        isNewWallet,\n        idsBySlug,\n        idsMain,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isMainHistoryEndReached,\n        isHistoryEndReachedBySlug,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        activitiesUpdateStartedAt: global.activitiesUpdateStartedAt,\n        theme: global.settings.theme,\n        isFirstTransactionsLoaded,\n        addressByChain: account?.addressByChain,\n        stakingStates,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n\nfunction calculateOffset(index: number, dateCount: number, commentCount: number, nftCount: number) {\n  const commentOffset = commentCount * TRANSACTION_COMMENT_HEIGHT;\n  const dateOffset = dateCount * DATE_HEADER_HEIGHT;\n  const nftOffset = nftCount * TRANSACTION_NFT_HEIGHT;\n  return index * TRANSACTION_HEIGHT + dateOffset + commentOffset + nftOffset;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiYieldType } from '../../../../api/types';\nimport type { StakingStateStatus } from '../../../../global/helpers/staking';\nimport type { AppTheme, UserToken } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  token: UserToken;\n  stakingId?: string;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\n\nfunction Token({\n  token,\n  amount,\n  stakingId,\n  stakingStatus,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  onClick,\n  yieldType,\n}: OwnProps) {\n  const {\n    name,\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const fullClassName = buildClassName(styles.container, isActive && styles.active, classNames);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n\n  const {\n    shouldRender: shouldRenderYield,\n    transitionClassNames: renderYieldClassNames,\n  } = useShowTransition(withYield);\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n      renderYieldClassNames,\n    );\n\n    return (\n      <span className={labelClassName}>\n        {yieldType} {annualYield}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  function renderInvestorView() {\n    return (\n      <Button className={fullClassName} isSimple style={style} onClick={handleClick}>\n        <TokenIcon token={token} withChainIcon={withChainIcon} className={styles.tokenIcon}>\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(\n            styles.secondaryValue,\n            stakingStatus && styles.secondaryValue_staked,\n            isVesting && styles.secondaryValue_vesting,\n            isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n          )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </div>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <div className={buildClassName(styles.change, changeClassName)}>\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </div>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button className={fullClassName} style={style} onClick={handleClick} isSimple>\n        <TokenIcon token={token} withChainIcon={withChainIcon} className={styles.tokenIcon}>\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <div className={buildClassName(\n            styles.secondaryValue,\n            stakingStatus && styles.secondaryValue_staked,\n            isVesting && styles.secondaryValue_vesting,\n            isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n          )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </div>\n          <div className={styles.subtitle}>\n            {totalAmount.gt(0) ? '≈' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n      </Button>\n    );\n  }\n\n  return isInvestorView ? renderInvestorView() : renderDefaultView();\n}\n\nexport default memo(Token);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo,\n} from '../../../../api/types';\nimport type { Theme, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport { getIsActiveStakingState, getStakingStateStatus } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  states?: ApiStakingState[];\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  theme,\n  states,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const { shouldRender: shouldRenderStakedTokens, transitionClassNames: stakedTokenClassNames } = useShowTransition(\n    Boolean(Object.keys(stakedTokens).length),\n  );\n\n  const {\n    shouldRender: shouldRenderVestingToken,\n    transitionClassNames: vestingTokenClassNames,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM * REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}px` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        classNames={vestingTokenClassNames}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const {\n        annualYield, yieldType, balance: stakingBalance, id,\n      } = state;\n      const stakingStatus = getStakingStateStatus(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingId={id}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          classNames={stakedTokenClassNames}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(styles.wrapper, isSeparatePanel && !renderedTokens && styles.wrapperLoading)}\n      scrollContainerClosest={!isLandscape && isActive ? '.app-slide-content' : undefined}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight}\n      onLoadMore={getMore}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n\n      return {\n        tokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        theme: global.settings.theme,\n        states,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting!, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting!) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'));\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    transitionClassNames,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n} from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  isTestnet?: boolean;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send All',\n  value: 'sendAll',\n}, {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n}, {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide All',\n  value: 'hideAll',\n}] : []), {\n  name: 'Burn All',\n  value: 'burnAll',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'selectAll',\n  withSeparator: true,\n}];\n\nfunction NftCollectionHeader({\n  isTestnet,\n  nfts,\n  currentCollectionAddress,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n\n  const nftFromCurrentCollection = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).find((nft) => nft.collectionAddress === currentCollectionAddress);\n  }, [currentCollectionAddress, nfts]);\n  const amount = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return undefined;\n    }\n\n    return Object.values(nfts).reduce((acc, nft) => {\n      return nft.collectionAddress === currentCollectionAddress ? acc + 1 : acc;\n    }, 0);\n  }, [currentCollectionAddress, nfts]);\n  const renderedNft = useCurrentOrPrev(nftFromCurrentCollection, true);\n  const renderedAmount = useCurrentOrPrev(amount, true);\n\n  const isActive = Boolean(currentCollectionAddress);\n\n  useHistoryBack({\n    isActive,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(closeNftCollection) : undefined), [isActive]);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'sendAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n\n        startTransfer({\n          nfts: collectionNfts,\n          isPortrait: getIsPortrait(),\n        });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(`${getgemsBaseUrl}collection/${renderedNft?.collectionAddress}`);\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(renderedNft?.collectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n        break;\n      }\n\n      case 'selectAll': {\n        const addresses = Object.values(nfts || {})\n          .filter((nft) => nft.collectionAddress === currentCollectionAddress && !nft.isOnSale)\n          .map((nft) => nft.address);\n        selectNfts({ addresses });\n        break;\n      }\n\n      case 'burnAll': {\n        const collectionNfts = Object.values(nfts!).filter((nft) => {\n          return nft.collectionAddress === currentCollectionAddress && !nft.isOnSale;\n        });\n        burnNfts({ nfts: collectionNfts });\n\n        break;\n      }\n\n      case 'hideAll': {\n        const collectionNfts = Object.values(nfts!)\n          .filter((nft) => {\n            return nft.collectionAddress === currentCollectionAddress;\n          })\n          .map((nft) => nft.address);\n        openHideNftModal({ addresses: collectionNfts, isCollection: true });\n      }\n    }\n  });\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  if (!renderedNft) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={closeNftCollection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{renderedNft?.collectionName || lang('Unnamed Collection')}</div>\n        <div className={styles.amount}>\n          {renderedAmount! > 1 ? lang('%amount% NFTs', { amount: renderedAmount }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        withPortal\n        shouldTranslateOptions\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        items={MENU_ITEMS}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    nfts,\n    currentCollectionAddress,\n  };\n})(NftCollectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","import { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../config';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nconst ON_SALE_ITEM: DropdownItem = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst NOT_SCAM: DropdownItem = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem = {\n  name: 'Select',\n  value: 'select',\n  withSeparator: true,\n};\nconst INSTALL_CARD: DropdownItem = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\n\nexport default function useNftMenu({\n  nft,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n  } = getActions();\n\n  const handleMenuItemSelect = useLastCallback((value: string) => {\n    const { isTestnet } = getGlobal().settings;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl);\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url);\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeMediaViewer();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n    }\n  });\n\n  const menuItems = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = nft.collectionAddress === TON_DNS_COLLECTION;\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return [\n      ...(isTonDns ? [TON_DNS_ITEM] : []),\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n      {\n        ...(isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n        ...(isCard && { withSeparator: true }),\n      },\n      ...(isOnFragment ? [FRAGMENT_ITEM] : []),\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n      ...(collectionAddress ? [COLLECTION_ITEM] : []),\n      ...(!IS_CORE_WALLET ? [\n        ...((!isScam && !isNftBlacklisted) || isNftWhitelisted ? [HIDE_ITEM] : []),\n        ...(isScam && !isNftWhitelisted ? [NOT_SCAM] : []),\n        ...(!isScam && isNftBlacklisted ? [UNHIDE] : []),\n      ] : []),\n      ...(!isOnSale ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n    ];\n  }, [nft, isNftInstalled, isNftAccentColorInstalled, isNftBlacklisted, isNftWhitelisted]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\"};","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  menuPosition?: IAnchorPosition;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n}\n\nfunction NftMenu({\n  nft,\n  menuPosition,\n  onOpen,\n  onClose,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const isOpen = Boolean(menuPosition);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const lang = useLang();\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={ref}\n        type=\"button\"\n        className={styles.button}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        withPortal\n        menuPositionHorizontal=\"right\"\n        menuPosition={positionY}\n        menuStyle={menuStyle}\n        transformOriginX={transformOriginX}\n        transformOriginY={transformOriginY}\n        items={menuItems}\n        shouldTranslateOptions\n        className={styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        shouldCleanup\n        onClose={onClose}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition, MediaType } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({ nft, selectedAddresses, observeIntersection }: OwnProps) {\n  const { openMediaViewer, selectNfts, clearNftSelection } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuPosition);\n  const {\n    shouldRender: shouldRenderWarning,\n    transitionClassNames: warningTransitionClassNames,\n  } = useShowTransition(isSelectionEnabled && nft.isOnSale);\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openMediaViewer({ mediaId: nft.address, mediaType: MediaType.Nft });\n  }\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      data-nft-address={nft.address}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          menuPosition={menuPosition}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata!.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        />\n      )}\n      {shouldRenderWarning && (\n        <div className={buildClassName(styles.warning, warningTransitionClassNames)}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: React.RefObject<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import type { RefObject } from 'react';\nimport { useEffect, useRef, useState } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport {\n  debounce, throttle, throttleWith,\n} from '../util/schedulers';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: RefObject<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: RefObject<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useIsIntersecting(\n  targetRef: RefObject<HTMLDivElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [isIntersecting, setIsIntersecting] = useState(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return isIntersecting;\n}\n","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n}: OwnProps & StateProps) {\n  const { clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter((nft) => {\n        if (!nft) return false;\n\n        return !currentCollectionAddress || nft.collectionAddress === currentCollectionAddress;\n      })\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address));\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n  ]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={nfts.length}\n      shouldCleanup\n      slideClassName={buildClassName(styles.list, isLandscape && styles.landscapeList)}\n    >\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </Transition>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMenuPosition from '../../../../hooks/useMenuPosition';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ninterface StateProps {\n  byAddress?: Record<string, ApiNft>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nconst MENU_ITEMS: DropdownItem[] = [{\n  name: 'Send',\n  value: 'send',\n},\n...(!IS_CORE_WALLET ? [{\n  name: 'Hide',\n  value: 'hide',\n}] : []), {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n}, {\n  name: 'Select All',\n  value: 'select-all',\n  withSeparator: true,\n}];\n\nfunction NftSelectionHeader({ selectedAddresses, byAddress, currentCollectionAddress }: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuPosition, setMenuPosition] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuPosition);\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLButtonElement>(null);\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuPosition({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuPosition(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => document.querySelector('#portals .menu-bubble'));\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const {\n    positionY, transformOriginX, transformOriginY, style: menuStyle,\n  } = useMenuPosition(\n    menuPosition,\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    getLayout,\n  );\n\n  const handleMenuItemClick = useLastCallback((value: string) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button className={styles.backButton} isSimple isText onClick={clearNftsSelection}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          withPortal\n          shouldTranslateOptions\n          menuPositionHorizontal=\"right\"\n          menuPosition={positionY}\n          menuStyle={menuStyle}\n          transformOriginX={transformOriginX}\n          transformOriginY={transformOriginY}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          items={MENU_ITEMS}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return { selectedAddresses, byAddress, currentCollectionAddress };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"portraitContainer\":\"joLgqn25\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsContainerStuck\":\"dFLD_EZz\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\"};","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_TELEGRAM_APP,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  NOTCOIN_VOUCHERS_ADDRESS,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport { getIsActiveStakingState } from '../../../../global/helpers/staking';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getStatusBarHeight } from '../../../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport { IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport windowSize from '../../../../util/windowSize';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  isFullscreen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n}\n\nlet activeNftKey = 0;\n\nfunction Content({\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  isFullscreen,\n  currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const tabsRef = useRef<HTMLDivElement>(null);\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftCollectionClick = useLastCallback((address: string) => {\n    openNftCollection({ address }, { forceOnHeavyAnimation: true });\n  });\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      handleNftCollectionClick(value);\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n    const collections = Object.values(nfts ?? {})\n      .filter((nft) => (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && !blacklistedNftAddressesSet.has(nft.address))\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress) {\n          acc[nft.collectionAddress] = nft.collectionName || lang('Unnamed collection');\n        }\n\n        return acc;\n      }, {} as Record<string, string>);\n    const collentionAddresses = Object.keys(collections);\n    collentionAddresses.sort((left, right) => collections[left].localeCompare(collections[right]));\n\n    return collentionAddresses.map<DropdownItem>((key) => {\n      return {\n        id: key,\n        name: collections[key],\n        value: key,\n      };\n    });\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const tabs = useMemo(\n    () => [\n      ...(\n        !shouldShowSeparateAssetsPanel\n          ? [{ id: ContentTab.Assets, title: lang('Assets'), className: styles.tab }]\n          : []\n      ),\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      ...(!isPortrait && !IS_CORE_WALLET\n        ? [{ id: ContentTab.Explore, title: lang('Explore'), className: styles.tab }]\n        : []),\n      {\n        id: ContentTab.Nft,\n        title: lang('NFT'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withSeparator: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n      ...(nftCollections.some(({ value }) => value === NOTCOIN_VOUCHERS_ADDRESS) ? [{\n        id: ContentTab.NotcoinVouchers,\n        title: 'NOT Vouchers',\n        className: styles.tab,\n      }] : []),\n    ],\n    [lang, nftCollections, shouldShowSeparateAssetsPanel, shouldRenderHiddenNftsSection, isPortrait],\n  );\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab) => {\n    if (tab === ContentTab.NotcoinVouchers) {\n      selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n      setActiveContentTab({ tab: ContentTab.Nft });\n      handleNftCollectionClick(NOTCOIN_VOUCHERS_ADDRESS);\n\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  useEffect(() => {\n    const stickyElm = tabsRef.current;\n    if (!isPortrait || !stickyElm) return undefined;\n\n    const safeAreaTop = IS_CAPACITOR\n      ? getStatusBarHeight()\n      : IS_TELEGRAM_APP\n        ? getTelegramApp()!.safeAreaInset.top + getTelegramApp()!.contentSafeAreaInset.top\n        : windowSize.get().safeAreaTop;\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n    const observer = new IntersectionObserver(([e]) => {\n      requestMutation(() => {\n        e.target.classList.toggle(styles.tabsContainerStuck, e.intersectionRatio < 1);\n      });\n    }, {\n      rootMargin: `${rootMarginTop}px 0px 0px 0px`,\n      threshold: [1],\n    });\n    observer.observe(stickyElm);\n\n    return () => {\n      observer.unobserve(stickyElm);\n    };\n  }, [isPortrait, tabsRef, isFullscreen]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return <Assets isActive={isActive} onTokenClick={handleClickAsset} onStakedTokenClick={onStakedTokenClick} />;\n      case ContentTab.Activity:\n        return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} />;\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const activeKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div ref={tabsRef} className={styles.tabsContainer}>\n          <Transition activeKey={activeKey} name=\"slideFade\" className={styles.tabsContent}>\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={activeTabIndex}\n          renderCount={tabs.length}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        isFullscreen: global.isFullscreen,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"closeButton\":\"tQS1IhkF\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, transitionClassNames } = useShowTransition(isRequired, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(!isSecurityWarningHidden, undefined, true);\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape, transitionClassNames)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({ isBackupRequired, isTestnet, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CAPACITOR, IS_CORE_WALLET } from '../../config';\nimport { getStakingStateStatus } from '../../global/helpers/staking';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { getStatusBarHeight } from '../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { setStatusBarStyle } from '../../util/switchTheme';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD,\n} from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport StickyCard from './sections/Card/StickyCard';\nimport Content from './sections/Content';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const cardRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const portraitContainerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const landscapeContainerRef = useRef<HTMLDivElement>(null);\n  const [canRenderStickyCard, setCanRenderStickyCard] = useState(false);\n  const [shouldRenderDarkStatusBar, setShouldRenderDarkStatusBar] = useState(false);\n  const safeAreaTop = IS_CAPACITOR ? getStatusBarHeight() : windowSize.get().safeAreaTop;\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const {\n    shouldRender: shouldRenderStickyCard,\n    transitionClassNames: stickyCardTransitionClassNames,\n  } = useShowTransition(canRenderStickyCard);\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useEffect(() => {\n    setStatusBarStyle({\n      forceDarkBackground: shouldRenderDarkStatusBar,\n    });\n  }, [shouldRenderDarkStatusBar]);\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  useEffect(() => {\n    if (!isPortrait || !isActive) {\n      setCanRenderStickyCard(false);\n      return undefined;\n    }\n\n    const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop;\n    const observer = new IntersectionObserver((entries) => {\n      const { isIntersecting, boundingClientRect: { left, width } } = entries[0];\n      setCanRenderStickyCard(entries.length > 0 && !isIntersecting && left < width);\n    }, { rootMargin: `${rootMarginTop}px 0px 0px` });\n\n    const cardTopSideObserver = new IntersectionObserver((entries) => {\n      const { isIntersecting } = entries[0];\n\n      setShouldRenderDarkStatusBar(!isIntersecting);\n    }, { rootMargin: `-${safeAreaTop}px 0px 0px`, threshold: [1] });\n    const cardElement = cardRef.current;\n\n    if (cardElement) {\n      observer.observe(cardElement);\n      cardTopSideObserver.observe(cardElement);\n    }\n\n    return () => {\n      if (cardElement) {\n        observer.unobserve(cardElement);\n        cardTopSideObserver.unobserve(cardElement);\n        setShouldRenderDarkStatusBar(false);\n      }\n    };\n  }, [isActive, isPortrait, safeAreaTop]);\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current!, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card\n            ref={cardRef}\n            forceCloseAccountSelector={shouldRenderStickyCard}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n          {shouldRenderStickyCard && (\n            <StickyCard\n              classNames={stickyCardTransitionClassNames}\n            />\n          )}\n          <PortraitActions\n            isTestnet={isTestnet}\n            stakingStatus={stakingStatus}\n            isLedger={isLedger}\n            isSwapDisabled={isSwapDisabled}\n            isOnRampDisabled={isOnRampDisabled}\n            onEarnClick={handleEarnClick}\n          />\n        </div>\n\n        <Content onStakedTokenClick={handleEarnClick} />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          <LandscapeActions stakingStatus={stakingStatus} isLedger={isLedger} theme={theme} />\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled,\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"modalText\":\"KUwFv7ti\",\"button\":\"LBe89K7I\",\"button_single\":\"MTmELA24\",\"buttonSingle\":\"MTmELA24\",\"modalButtons\":\"cYtg8tBc\",\"importText\":\"nnhxqZYR\",\"importButtons\":\"Gnbk4xJi\",\"importButtonsWithMargin\":\"yX8s5GFD\",\"sticker\":\"EZgbjNjA\",\"ledgerButton\":\"BB2l0HAn\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, type HardwareConnectState, SettingsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectFirstNonHardwareAccount, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n\n  firstNonHardwareAccount?: Account;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isOtherVersionsExist?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  firstNonHardwareAccount,\n  accounts,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isOtherVersionsExist,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<number>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(false);\n  });\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!firstNonHardwareAccount) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setRenderingKey(RenderingState.Password);\n    setIsNewAccountImporting(true);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector(isActive?: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n        <AnimatedIconWithPreview\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.forge}\n          previewUrl={ANIMATED_STICKERS_PATHS.forgePreview}\n        />\n        <p className={styles.modalText}>\n          {renderText(lang('$add_account_description1', { app_name: APP_NAME }))}\n        </p>\n\n        <div className={styles.modalButtons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleNewAccountClick}\n          >\n            {lang('Create Wallet')}\n          </Button>\n          <span className={styles.importText}>{lang('or import from')}</span>\n          <div className={buildClassName(\n            styles.importButtons,\n            !isOtherVersionsExist && styles.importButtonsWithMargin,\n          )}\n          >\n            <Button\n              className={buildClassName(styles.button, !IS_LEDGER_SUPPORTED && styles.button_single)}\n              onClick={handleImportAccountClick}\n            >\n              {lang('Secret Words')}\n            </Button>\n            {IS_LEDGER_SUPPORTED && (\n              <Button\n                className={buildClassName(styles.button, styles.ledgerButton)}\n                onClick={handleImportHardwareWalletClick}\n              >\n                {lang('Ledger')}\n              </Button>\n            )}\n          </div>\n          {isOtherVersionsExist && (\n            <div className={styles.walletVersionBlock}>\n              <span>\n                {lang('$wallet_switch_version_1', {\n                  action: (\n                    <div\n                      role=\"button\"\n                      tabIndex={0}\n                      onClick={handleOpenSettingWalletVersion}\n                      className={styles.walletVersionText}\n                    >\n                      {lang('$wallet_switch_version_2')}\n                    </div>\n                  ),\n                })}\n              </span>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector(isActive);\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={renderingKey === RenderingState.Initial ? RenderingState.Password : undefined}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const firstNonHardwareAccount = selectFirstNonHardwareAccount(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const isOtherVersionsExist = !!versions?.length;\n\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n\n    accounts,\n    firstNonHardwareAccount,\n    hardwareState,\n    hardwareWallets,\n    isLedgerConnected,\n    isTonAppConnected,\n    isOtherVersionsExist,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Let’s make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"⚠️\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic![0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address!, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const scanSquareRef = useRef<HTMLDivElement>(null);\n\n  useEffectOnce(() => {\n    void BarcodeScanner\n      .isTorchAvailable()\n      .then((result) => {\n        setIsFlashlightAvailable(result.available);\n      });\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodeScanned',\n      async (event) => {\n        let { cornerPoints: qrCodeCoordinates } = event.barcode;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: event.barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {isFlashlightAvailable && (\n          <div\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | null): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    }, SECOND);\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return () => clearTimeout(timerId);\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  function renderTokenInfo(token?: UserSwapToken | ApiSwapAsset, amount = '0', isReceived = false) {\n    const amountWithSign = isReceived ? amount : -amount;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <span className={buildClassName(\n          styles.infoRowAmount,\n          isReceived && styles.infoRowAmountGreen,\n          isError && styles.infoRowAmountError,\n        )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </span>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} ≈\n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"textFieldWrapperFullWidth\":\"gaMgEGEN\",\"changellyTextField\":\"A8497ra1\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"textField\":\"hufzN6qP\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\nimport type { FeePrecision } from '../../../util/fee/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport { selectCurrentAccount, selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getTransactionHashFromTxId } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Fee from '../../ui/Fee';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled,\n}: StateProps) {\n  const {\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    txIds,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from Сhangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status!);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('Swap On Hold');\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('Swap Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('Swap Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('Swap Failed');\n      }\n    } else if (isError) {\n      title = lang('Swap Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = getTransactionHashFromTxId('ton', txIds?.[0] || '');\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: renderedActivity!.id });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: activity!.id });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapperFullWidth}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapperFullWidth, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n                className={styles.changellyTextField}\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!Number(networkFee) || !fromToken) {\n      return undefined;\n    }\n\n    const precision: FeePrecision = activity?.status === 'pending' ? 'approximate' : 'exact';\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Fee')}\n        </span>\n        <div className={styles.textField}>\n          <span>\n            <Fee terms={terms} token={fromToken} precision={precision} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            className={styles.changellyTextField}\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme: global.settings.theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amount\":\"Qy2zkhK5\",\"withStatus\":\"MeZ5UFq3\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationScam\":\"zrLwT6fF\",\"wrapper\":\"U9_RaiXr\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  decimals?: number;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  tokenSymbol?: string;\n  status?: string;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  amount,\n  decimals,\n  tokenSymbol,\n  status,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', false, decimals).split('.');\n\n  function renderAmount() {\n    return (\n      <div className={buildClassName(\n        styles.amount,\n        status && styles.withStatus,\n        isIncoming && !isScam && styles.operationPositive,\n        isScam && styles.operationScam,\n        'rounded-font',\n      )}\n      >\n        {wholePart.trim().replace('\\u202F', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol || TONCOIN.symbol}</span>\n      </div>\n    );\n  }\n\n  if (!status) {\n    return renderAmount();\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      {renderAmount()}\n      <div className={buildClassName(\n        styles.status,\n        isIncoming && !isScam && styles.operationPositive,\n        isScam && styles.operationScam,\n      )}\n      >\n        {status}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiStakingCommonData,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  STAKING_CYCLE_DURATION_MS,\n  TONCOIN,\n} from '../../../config';\nimport { getIsTxIdLocal } from '../../../global/helpers';\nimport { getStakingStateStatus } from '../../../global/helpers/staking';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../global/selectors';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { toDecimal } from '../../../util/decimals';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getNativeToken, getTransactionHashFromTxId } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport NftInfo from '../../transfer/NftInfo';\nimport AmountWithFeeTextField from '../../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isTestnet?: boolean;\n  stakingInfo?: ApiStakingCommonData;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  stakingInfo,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n}: StateProps) {\n  const {\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + STAKING_CYCLE_DURATION_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n  } = renderedTransaction || {};\n  const isLocal = Boolean(id && getIsTxIdLocal(id));\n  const isStaking = renderedTransaction?.type === 'stake' || renderedTransaction?.type === 'unstake';\n  const isUnstaking = renderedTransaction?.type === 'unstake';\n  const isNftTransfer = (\n    renderedTransaction?.type === 'nftTransferred'\n    || renderedTransaction?.type === 'nftReceived'\n    || Boolean(renderedTransaction?.nft)\n  );\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const savedAddressName = useMemo(() => {\n    return address && chain && savedAddresses?.find((item) => item.address === address && item.chain === chain)?.name;\n  }, [address, chain, savedAddresses]);\n  const addressName = savedAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = isTransactionWithPoisoning || Boolean(transaction?.metadata?.isScam);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? getTransactionHashFromTxId(chain, id) : undefined;\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const [withUnstakeTimer, setWithUnstakeTimer] = useState(false);\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    transitionClassNames: transactionIdClassNames,\n  } = useShowTransition(Boolean((!isLocal || chain === 'tron') && transactionUrl));\n\n  const state = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = state && getStakingStateStatus(state);\n  const startOfStakingCycle = state?.type === 'nominators' ? state.start : stakingInfo?.round?.start;\n  const endOfStakingCycle = state?.type === 'nominators' ? state.end : stakingInfo?.round?.end;\n\n  useEffect(() => {\n    if (transaction?.type !== 'unstakeRequest' || !startOfStakingCycle) {\n      return;\n    }\n\n    const shouldDisplayTimer = Boolean(stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle;\n    setWithUnstakeTimer(shouldDisplayTimer);\n  }, [stakingStatus, startOfStakingCycle, transaction, isLongUnstakeRequested]);\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    transitionClassNames: unstakeTimerClassNames,\n  } = useShowTransition(withUnstakeTimer);\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const openHiddenComment = useLastCallback(() => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function getTitle(inProgress: boolean) {\n    if (isUnstaking) {\n      return inProgress ? 'Unstaking' : 'Unstaked';\n    }\n    if (isIncoming) return 'Received';\n\n    return inProgress ? 'Sending' : 'Sent';\n  }\n\n  function renderHeader() {\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {lang(getTitle(isLocal))}\n            {isLocal && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n              />\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (isIncoming || !fee || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <AmountWithFeeTextField\n        label={lang('Fee')}\n        amount={toDecimal(fee, nativeToken.decimals)}\n        currency={nativeToken.symbol}\n      />\n    );\n  }\n\n  function renderComment() {\n    if ((!comment && !encryptedComment) || (transaction?.type && !isNftTransfer)) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? lang('Decrypt') : lang('Display')}\n          spoilerCallback={openHiddenComment}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={buildClassName(styles.textFieldWrapperFullWidth, transactionIdClassNames)}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div className={buildClassName(styles.unstakeTime, unstakeTimerClassNames)}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderTransactionContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <NftInfo nft={nft} withTonExplorer />\n        ) : (\n          <TransactionAmount\n            isIncoming={isIncoming}\n            isScam={isScam}\n            amount={amount ?? 0n}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            status={isUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n          />\n        )}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {!isUnstaking && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address!}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        <div className={styles.footer}>\n          {!isStaking && !isIncoming && !isNftTransfer && (\n            <Button onClick={handleSendClick} className={styles.button}>\n              {lang('Repeat')}\n            </Button>\n          )}\n          {!IS_CORE_WALLET && isStaking && (\n            <Button\n              onClick={handleStartStakingClick}\n              className={buildClassName(styles.button, isUnstaking && stakingStatus === 'active' && styles.buttonWide)}\n            >\n              {lang('Stake Again')}\n            </Button>\n          )}\n          {isUnstaking && stakingStatus === 'active' && (\n            <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n              {lang('Unstake More')}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n\n    const stakingInfo = global.stakingInfo;\n    const stakingStates = selectAccountStakingStates(global, accountId);\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isTestnet: global.settings.isTestnet,\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme: global.settings.theme,\n      stakingInfo,\n      stakingStates,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  // eslint-disable-next-line no-null/no-null\n  const timerRef = useRef<number | undefined>(null);\n\n  const { transitionClassNames } = useShowTransition(isOpen);\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        className={buildClassName(styles.notification, transitionClassNames)}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n          // eslint-disable-next-line react/jsx-no-bind\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nfts-container > .Transition_slide-active [data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: React.ReactNode;\n  ref?: React.LegacyRef<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<React.ReactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen && !isHidden,\n    undefined,\n    isFirstRender && !shouldAnimateFirstRender,\n    isCustom ? false : undefined,\n    noCloseTransition,\n  );\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={buildClassName(className, transitionClassNames)}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { selectCurrentAccountSettings, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n};\n\nfunction Actions({\n  onClose, nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft, isNftBlacklisted, isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: string) => {\n    if (value === 'send') {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPosition=\"top\"\n        menuPositionHorizontal=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n\n  return {\n    nft, blacklistedNftAddresses, whitelistedNftAddresses, cardBackgroundNft, accentColorNft,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleOpenUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleOpenUrl}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement | null>(null);\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={styles.contentDescription} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: Function | undefined;\nlet cancelZoomAnimation: Function | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const activeSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const leftSlideRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const rightSlideRef = useRef<HTMLDivElement>(null);\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n              || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n            || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo, useEffect, useLayoutEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useLayoutEffect(() => {\n    document.body.classList.toggle('is-media-viewer-open', isOpen);\n  }, [isOpen]);\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { shortenAddress } from '../../../util/shortenAddress';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, { title, addressByChain }]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: title || shortenAddress(addressByChain.ton)!,\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET);\n    }\n  }, [isOpen]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n    const fullClassName = buildClassName(\n      styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!IS_CORE_WALLET && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"passcode\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n            previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n            noLoop={false}\n            nonInteractive\n            className={styles.stickerNativeBiometric}\n          />\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  handleBackClick,\n  animationLevel,\n  isInsideModal,\n  isTrayIconEnabled,\n  onTrayIconEnabledToggle,\n}: OwnProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n  } = getActions();\n  const lang = useLang();\n\n  const THEME_OPTIONS = [{\n    value: 'light',\n    name: lang('Light'),\n    icon: lightThemeImg,\n  }, {\n    value: 'system',\n    name: lang('System'),\n    icon: systemThemeImg,\n  }, {\n    value: 'dark',\n    name: lang('Dark'),\n    icon: darkThemeImg,\n  }];\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt={name} className={styles.themeImg} />\n          </div>\n          <span>{name}</span>\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAppearance);\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import type { RefObject } from 'react';\nimport { BottomSheet } from 'native-bottom-sheet';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: React.ReactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: RefObject<HTMLDivElement>;\n  scrollRef?: RefObject<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const buttonRef = useRef<HTMLDivElement>(null);\n\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import type { RefObject } from 'react';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: RefObject<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const tokensRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const sortableContainerRef = useRef<HTMLDivElement>(null);\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCY_LIST, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    setLocalBaseCurrency(currency as ApiBaseCurrency);\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={CURRENCY_LIST}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Investor View')}\n\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                tooltipClassName={styles.tooltip}\n                iconClassName={styles.iconQuestion}\n              />\n\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tiny Transfers')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div className={styles.blockWithTooltip}>\n              {lang('Hide Tokens With No Cost')}\n\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.tooltip, styles.tooltip_wide)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ origin: dapp!.origin });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((origin: string) => {\n    const dapp = dapps.find((d) => d.origin === origin);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapp(dapp: ApiDapp) {\n    const {\n      iconUrl, name, url, origin,\n    } = dapp;\n\n    return (\n      <DappInfo\n        key={origin}\n        iconUrl={iconUrl}\n        name={name}\n        url={url}\n        origin={origin}\n        className={styles.dapp}\n        onDisconnect={handleDisconnectDapp}\n      />\n    );\n  }\n\n  function renderDapps() {\n    const dappList = dapps.map(renderDapp);\n\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dappList}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n| 'web'\n| 'extension'\n| 'firefox-extension'\n| 'opera-extension'\n| 'electron'\n| 'android'\n| 'android-air'\n| 'android-air-direct'\n| 'android-direct'\n| 'ios'\n| 'ios-air'\n| 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport {\n  APP_ENV,\n  APP_VERSION,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n}\n\nconst NETWORK_OPTIONS = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  onClose,\n  isTestnet,\n  isCopyStorageEnabled,\n  currentAccountId,\n  accountsById,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: string) => {\n    startChangingNetwork({ network: newNetwork as ApiNetwork });\n    onClose();\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (IS_EXTENSION) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!') as string, icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n    >\n      <div className={styles.developerTitle}>\n        {lang('Developer Options')}\n      </div>\n\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div\n        className={buildClassName(styles.settingsBlock, styles.logBlock)}\n        onClick={handleDownloadLogs}\n      >\n        <div className={buildClassName(styles.item, styles.item_small)}>\n          {\n            IS_EXTENSION\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n\n  const accountsById = global.accounts?.byId;\n\n  return {\n    currentAccountId,\n    accountsById,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString(\n  {\n    currentAccountId,\n    accountsById,\n  }: StateProps,\n) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, isHardware } = accountsById[accountId];\n    acc[accountId] = {\n      addressByChain,\n      isHardware,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  return JSON.stringify(\n    {\n      time: new Date(),\n      environment: APP_ENV,\n      version: APP_VERSION,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ].sort((a, b) => a.time.getTime() - b.time.getTime()),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const {\n    transitionClassNames,\n  } = useShowTransition(isNftHidden, handleUnhide);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      className={buildClassName(styles.item, transitionClassNames)}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(accountId: string, address: string, title?: string, isHardware?: boolean) {\n    const onClick = () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && Object.keys(enabledAccounts).length >= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT;\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        isHardware={isHardware}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, isHardware }]) => {\n            return renderAccount(accountId, addressByChain.ton, title, isHardware);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then(m => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            { isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId!, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from 'native-dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport { Dialog } from 'native-dialog';\nimport React, {\n  memo, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTOLOCK_OPTIONS_LIST,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nconst DEFAULT_AUTOLOCK_OPTION: AutolockValueType = 'never';\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAuthLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<number>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<number | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    const mnemonic = await callApi('fetchMnemonic', currentAccountId!, enteredPassword);\n\n    setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      await enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes don’t match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: string) => {\n    setAppLockValue({ value: value as AutolockValueType, isEnabled: true });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n              <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n              {lang('$back_up_security')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(modalStyles.transitionContent, styles.content)}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId!}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype Token = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  isInsideSettings?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  token?: Token;\n  userTokens?: Token[];\n  popularTokens?: Token[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: { [K in ApiChain]?: unknown };\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  Token,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  isInsideSettings,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    importToken,\n    resetImportToken,\n    openSettingsWithState,\n    setSwapTokenIn,\n    setSwapTokenOut,\n    addToken,\n    addSwapToken,\n  } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<Token[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: Token[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug);\n  }, [pairsBySlug, tokenInSlug, isMultichain]);\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, availableChains, shouldHideNotSupportedTokens),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, availableChains, shouldHideNotSupportedTokens),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = isInsideSettings ? allTokens : swapTokensWithFilter;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, isInsideSettings, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.Token;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if (isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: Token) => {\n    searchInputRef.current?.blur();\n\n    if (isInsideSettings) {\n      addToken({ token: selectedToken as UserToken });\n    } else {\n      addSwapToken({ token: selectedToken as UserSwapToken });\n      const setToken = shouldFilter ? setSwapTokenOut : setSwapTokenIn;\n      setToken({ tokenSlug: selectedToken.slug });\n    }\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: Token) {\n    const isAvailable = !shouldFilter || currentToken.canSwap;\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n    const handleClick = isAvailable ? () => handleTokenClick(currentToken) : undefined;\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <div\n        key={currentToken.slug}\n        className={buildClassName(\n          styles.tokenContainer,\n          !isAvailable && styles.tokenContainerDisabled,\n        )}\n        onClick={handleClick}\n      >\n        <div className={styles.tokenLogoContainer}>\n          <TokenIcon\n            token={currentToken}\n            withChainIcon\n            className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n          />\n\n          <div className={styles.nameContainer}>\n            <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n              {currentToken.name}\n            </span>\n            <span\n              className={buildClassName(\n                styles.tokenNetwork,\n                !isAvailable && styles.tokenTextDisabled,\n              )}\n            >\n              {descriptionText}\n            </span>\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n          >\n            {formatCurrency(toDecimal(currentToken.amount, currentToken?.decimals), currentToken.symbol)}\n          </span>\n          <span className={buildClassName(\n            styles.tokenValue,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n          >\n            {tokenPrice}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTokenGroup(tokens: Token[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: Token[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: Token) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.Token:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { pairs: pairsBySlug, tokenInSlug } = global.currentSwap ?? {};\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug: pairsBySlug?.bySlug,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n  };\n})(TokenSelector));\n\nfunction filterAndSortTokens(\n  tokens: Token[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n    const canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends Token>(\n  tokens: T[],\n  availableChains: { [K in ApiChain]?: unknown },\n  isFilterActive: boolean,\n): T[] {\n  if (!isFilterActive) {\n    return tokens;\n  }\n  return tokens.filter((token) => token.chain in availableChains);\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        isInsideSettings\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              ≈&thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletInfo } from '../../api/types';\nimport type {\n  Account, GlobalState, HardwareConnectState, UserToken,\n} from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  HELPCENTER_URL,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isHardwareAccount?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isRemoteTab?: boolean;\n  arePushNotificationsAvailable?: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\nconst MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isHardwareAccount,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  hardwareState,\n  isLedgerConnected,\n  isTonAppConnected,\n  isRemoteTab,\n  arePushNotificationsAvailable,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions?.map((v) => {\n      const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n      const balanceInCurrency = formatCurrency(\n        toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n        shortBaseSymbol,\n      );\n\n      const accountTokens = [tonBalance];\n\n      return {\n        address: v.address,\n        version: v.version,\n        totalBalance: balanceInCurrency,\n        tokens: accountTokens,\n      } satisfies Wallet;\n    }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions]);\n\n  const {\n    transitionClassNames: telegramLinkClassNames,\n    shouldRender: isTelegramLinkRendered,\n  } = useShowTransition(isTonMagicEnabled);\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: IS_DELEGATED_BOTTOM_SHEET ? handleBackClick : handleBackOrCloseAction,\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n      },\n    });\n  }, [prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div className={buildClassName(styles.item, telegramLinkClassNames)} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {!isHardwareAccount && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              <div className={styles.block}>\n                <a\n                  href={MTW_CARDS_WEBSITE}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                  {lang('MyTonWallet Cards NFT')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n              </div>\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode as never] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={HELPCENTER_URL[langCode as never] ?? HELPCENTER_URL.en}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n        <SettingsDeveloperOptions\n          isOpen={isDeveloperModalOpen}\n          isTestnet={isTestnet}\n          isCopyStorageEnabled={isCopyStorageEnabled}\n          onClose={handlCloseDeveloperModal}\n        />\n      </div>\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isSlideActive}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              shouldDelegateToNative={IS_DELEGATING_BOTTOM_SHEET && !isInsideModal}\n              state={hardwareState}\n              isLedgerConnected={isLedgerConnected}\n              isTonAppConnected={isTonAppConnected}\n              isRemoteTab={isRemoteTab}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isHardwareAccount = selectIsHardwareAccount(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1 } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const {\n    hardwareWallets,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n  } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isHardwareAccount,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isRemoteTab,\n    hardwareWallets,\n    accounts,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: React.ReactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { IS_CLIPBOARDS_SUPPORTED } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  // eslint-disable-next-line no-null/no-null\n  const toAddressRef = useRef<HTMLInputElement>(null);\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut?.slug!,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = (lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-arrow-right', styles.swapArrowIconTitle)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[]);\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: <Countdown\n            timestamp={timestamp}\n            deadline={CHANGELLY_WAITING_DEADLINE}\n            onCompleted={handleTimeout}\n          />,\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('SwapTitle')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const savedAddressName = useMemo(() => {\n    return toAddress && savedAddresses?.find((item) => {\n      return item.address === toAddress && item.chain === chain;\n    })?.name;\n  }, [toAddress, chain, savedAddresses]);\n  const addressName = savedAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? 'Burn NFT'\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"⚠️\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress!}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentTransfer: global.currentTransfer,\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts!.length === 1 ? <NftInfo nft={nfts![0]} /> : <NftChips nfts={nfts!} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  GlobalState, HardwareConnectState, SavedAddress, UserToken,\n} from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  hardwareState?: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens, savedAddresses, hardwareState, isLedgerConnected, isTonAppConnected, isMediaViewerOpen, isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransferPassword({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransferHardware();\n  });\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts!.length > 1 ? lang('%amount% NFTs', { amount: nfts!.length }) : nfts![0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            state={hardwareState}\n            isLedgerConnected={isLedgerConnected}\n            isTonAppConnected={isTonAppConnected}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n  } = global.hardware;\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove: Set<Confetti> = new Set([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width : number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const { shouldRender, transitionClassNames } = useShowTransition(isOpen);\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div className={buildClassName(styles.root, transitionClassNames)} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" />\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\n\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './AppLocked';\nimport Auth from './auth/Auth';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  });\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  // eslint-disable-next-line consistent-return\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen onClose={handleCloseBrowserTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && <SwapModal />}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          {!IS_DELEGATED_BOTTOM_SHEET && <Notifications />}\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && <Dialogs />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <ConfettiContainer />}\n          {IS_CAPACITOR && !IS_DELEGATED_BOTTOM_SHEET && <InAppBrowser />}\n          {!IS_DELEGATED_BOTTOM_SHEET && <LoadingOverlay />}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n\nasync function handleCloseBrowserTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n  getActions().initApi();\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '₽';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","CapacitorPlatforms","win","defaultPlatformMap","Map","set","name","capPlatforms","currentPlatform","platforms","addPlatform","platform","setPlatform","has","get","createCapacitorPlatforms","initPlatforms","globalThis","self","window","g","ExceptionCode","CapacitorException","Error","constructor","message","code","data","super","this","Capacitor","_a","_b","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","androidBridge","webkit","messageHandlers","bridge","getPlatformId","isNativePlatform","isPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","PluginHeaders","find","h","registerPlugin","jsImplementations","registeredPlugin","console","warn","proxy","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","args","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","m","rtype","options","nativePromise","toString","callback","nativeCallback","createPluginMethod","Object","defineProperty","value","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","Promise","resolve","Proxy","_","Set","keys","convertFileSrc","filePath","handleError","err","error","pluginMethodNoop","_target","reject","Exception","DEBUG","isLoggingEnabled","isNative","createCapacitor","initCapacitorGlobal","WebPlugin","config","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","push","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","length","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","addEventListener","removeEventListener","arg","encode","str","encodeURIComponent","replace","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","key","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","Date","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","assign","method","headers","type","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","includes","params","URLSearchParams","entries","FormData","form","append","Headers","delete","JSON","stringify","CapacitorHttpPluginWeb","request","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","Array","isArray","slice","substr","buildUrlParams","shouldEncodeUrlParams","response","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","result","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","Directory","Encoding","ImpactStyle","NotificationType","ONE_TON","TOKEN_TRANSFER_FORWARD_AMOUNT","NFT_TRANSFER_AMOUNT","NFT_TRANSFER_FORWARD_AMOUNT","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","TON_GAS_REAL","STAKE_COMMENT","UNSTAKE_COMMENT","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","WORKCHAIN","Workchain","BaseChain","TRANSFER_TIMEOUT_SEC","W5_MAX_MESSAGES","OpCode","ContractType","Wallet","Staking","JettonStakingOpCodes","GET_STATIC_DATA","REPORT_STATIC_DATA","GET_STORAGE_DATA","REPORT_STORAGE_DATA","EXCESSES","TRANSFER_JETTON","INTERNAL_TRANSFER","TRANSFER_NOTIFICATION","PROVIDE_WALLET_ADDRESS","TAKE_WALLET_ADDRESS","BURN_JETTON","ADD_REWARDS","SEND_CLAIMED_REWARDS","SEND_UNSTAKED_JETTONS","APPROVE_STAKE","CANCEL_STAKE","ADD_REWARD_JETTONS","CLAIM_COMMISSIONS","REQUEST_UPDATE_REWARDS","CLAIM_REWARDS","RECEIVE_JETTONS","UNSTAKE_REQUEST","CANCEL_UNSTAKE_REQUEST","UPDATE_REWARDS","CONFIRM_TRANSFER","DEPLOY_NEW_POOL","SEND_COMMISSIONS","SET_CODE","CHANGE_CREATION_FEE","CHANGE_CONTENT","UPDATE_CODES","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","Dividers","COMMISSION_DIVIDER","REWARDS_DIVIDER","DISTRIBUTION_SPEED_DIVIDER","BigInt","DISTRIBUTED_REWARDS_DIVIDER","ApiBaseError","displayError","ApiUserRejectsError","arguments","undefined","ApiServerError","statusCode","ApiCommonError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","ApiTransactionError","HardwareBlindSigningNotEnabled","handleServerError","callbackState","createWindowProvider","worker","api","channel","target","sendToOrigin","transferables","postMessage","e","_e$error","_e$error2","logDebugError","stack","_e$reason","_e$reason2","reason","handleErrors","onmessage","_message$data","onUpdate","origin","update","_api$init","promise","init","messageId","withCallback","_len","callbackArgs","_key","lastArg","obj","ArrayBuffer","ImageBitmap","arrayBuffer","isCanceled","onMessage","createPostMessageInterface","windowMethods","WINDOW_PROVIDER_CHANNEL","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","connector","isInitialized","initApi","initArgs","Worker","URL","createConnector","IS_IOS","ensureWorkerPing","setTimeout","callApi","fnName","logDebugApi","callApiWithThrow","_len2","_key2","startedAt","now","isResolved","race","pause","_worker","terminate","ApiAuthError","ApiTransactionDraftError","ApiLiquidUnstakeMode","APP_ENV","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","IS_PRODUCTION","IS_TEST","IS_EXTENSION","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONCENTER_MAINNET_URL","TONCENTER_MAINNET_KEY","TONCENTER_TESTNET_URL","TONCENTER_TESTNET_KEY","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","MTW_CARDS_BASE_URL","MYTONWALLET_PROMO_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","HELPCENTER_URL","EMPTY_HASH_VALUE","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","langCode","nativeName","rtl","IS_STAKING_DISABLED","STAKING_CYCLE_DURATION_MS","DEFAULT_FEE","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TONCOIN","symbol","slug","decimals","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","TRC20_USDT","TON_USDT","tokenAddress","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","TOKEN_INFO","toncoin","quote","price","priceUsd","percentChange24h","trx","image","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FISRT_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","SHORT_CURRENCY_SYMBOL_MAP","USD","EUR","RUB","CNY","CURRENCY_LIST","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","DEFAULT_NOMINATORS_STAKING_STATE","start","end","pendingDepositAmount","JVAULT_URL","TON_DNS_ZONES","suffixes","baseFormat","resolver","isTelemint","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","round","x","sd","rm","more","xc","c","RM","unshift","pop","doExponential","isNonzero","s","join","n","charAt","abs","cmp","y","isneg","yc","i","j","l","div","Big","a","b","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","shift","eq","gt","gte","lt","lte","minus","sub","t","xlty","plus","xe","ye","reverse","mod","ygtx","times","neg","add","pow","one","prec","sqrt","half","Math","toExponential","mul","toFixed","Symbol","for","toJSON","NE","PE","toNumber","Number","strict","toPrecision","valueOf","_Big_","TypeError","String","nl","test","search","substring","parse","prototype","roundDown","roundHalfUp","roundHalfEven","roundUp","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","safeExec","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttleWith","throttledFn","fastRaf","requestMeasure","cb","requestMutation","requestForcedReflow","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","_ref","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","apply","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","startsWith","clear","observe","childList","attributes","subtree","characterData","suppressStrict","_observer","disconnect","_ref2","propName","pv","array","f","o","d","naturalOrder","sum","max","MMCQ","getColorIndex","PQueue","comparator","contents","sorted","sort","peek","size","debug","VBox","r1","r2","g1","g2","b1","b2","histo","vbox","CMap","vboxes","count","volume","medianCutApply","rw","gw","bw","maxw","copy","total","partialsum","lookaheadsum","color","left","right","vbox1","vbox2","d2","dim1","dim2","count2","min","doCut","force","_volume","_count_set","npix","_count","avg","_avg","hval","ntot","rsum","gsum","bsum","pixel","rval","gval","bval","palette","vb","nearest","d1","pColor","forcebw","lowest","idx","highest","quantize","pixels","maxcolors","getHisto","rmin","rmax","gmin","gmax","bmin","bmax","vboxFromPixels","pq","iter","lh","ncolors","niters","pq2","cmap","module","exports","Deferred","_defineProperty","resolved","deferred","ConnectorClass","shouldUseJson","targetOrigin","destroy","messageData","requestStates","requestStatesByCallback","generateUniqueId","payload","requestState","catch","finally","cancelCallback","progressCallback","bigintReviver","_requestState$callbac","_data$error","_data$error2","rawData","handleMessage","parseAccountId","accountId","parts","network","buildAccountId","account","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","progress","applyStyles","element","css","style","AssertionError","metadata","BIGINT_PREFIX","bigintAbs","bigintDivideToNumber","num","fromDecimal","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","SECOND","MINUTE","DAY","formatDayToStringWithCache","withCache","dayStartAt","noYear","monthFormat","noDay","withTime","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","minutes","floor","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","daysPlural","daysValue","formatToParts","hoursPlural","hoursValue","minutesPlural","minutesValue","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","getHours","padStart","getMinutes","setHours","ten","toDecimal","noFloor","toBig","roundDecimal","isDnsDomain","zone","suffix","endsWith","base","getDnsDomainZone","IS_EXTENSION_PAGE_SCRIPT","location","protocol","random","userAgent","navigator","maxTouchPoints","shouldShowAlert","throttledAlert","throttle","alert","handleErrorEvent","ErrorEvent","preventDefault","buildCollectionByKey","collection","byKey","member","groupBy","groupKey","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","filter","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","unique","compact","Boolean","areSortedArraysEqual","array1","array2","every","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","filterValues","MAX_COMMENT_SIZE","BROKEN_CONNECTION_ERRORS","isValidLedgerComment","comment","charCodeAt","isAscii","isLedgerCommentLengthValid","isLedgerConnectionBroken","MAX_LOG_LENGTH","logs","errorReplacer","addLog","log","time","getLogs","level","logDebug","obj1","obj2","dir","logSelfXssWarnings","selfXssWarnings","es","zh","language","SAFE_EXEC_ENABLED","rescue","always","shouldIgnoreError","debounce","ms","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","interval","isPending","_args","setInterval","clearInterval","throttleWithTickEnd","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","withTimeoutFallback","requestAnimationFrame","currentCallbacks","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","timeRemaining","concat","timeout","onBeforeUnload","isLast","waitFor","attempts","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","_window$chrome","chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","parseInt","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram$WebA","_window$Telegram","Telegram","WebApp","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","cache","WeakMap","fnCache","cacheKey","cached","newValue","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","base64","ieee754","customInspectSymbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","encodingOrOffset","allocUnsafe","string","encoding","isEncoding","actual","write","fromString","isView","arrayView","isInstance","fromArrayBuffer","buffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","isBuffer","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","val","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","fill","allocUnsafeSlow","_isBuffer","compare","list","pos","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","Infinity","leadSurrogate","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","isNaN","LN2","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","create","def","current","getOwnPropertyNames","definition","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","values","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","useUniqueId","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","typed","TeactNContainer","useUnmountCleanup","React","_extends","getActions","addActionHandler","_actionHandlers$name","handleAction","withGlobal","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","isTestnet","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectCurrentAccountState","selectAccountState","byAccountId","selectFirstNonHardwareAccount","isHardware","selectAccountSettings","selectCurrentAccountSettings","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","selectAccountIdByAddress","address","requiredAccount","addressByChain","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","nfts","byAddress","selectIsMultichainAccount","_selectAccount","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","_amountsBySlug$tokenS","isScam","isDangerous","fullFee","nftCount","transaction","displayedAmount","selectCurrentDappTransferTotals","currentDappTransfer","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","tokenInfo","accountSettings","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","bySlug","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","_selectCurrentAccount2","balances","selectCurrentToncoinBalance","_selectAccountSetting","selectTokenAddress","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","_selectCurrentAccount3","token","maxToken","currentToken","getIsTinyOrScamTransaction","_transaction$metadata","_token$quote$priceUsd","getIsTxIdLocal","txId","getIsSwapId","resolveSwapAssetId","asset","_asset$tokenAddress","resolveSwapAsset","anyId","_bySlug$anyId","getIsSupportedChain","getIsInternalSwap","toAddress","isMultichain","selectNewestTxTimestamps","activities","newestTransactionsBySlug","timestamp","selectAccountTxTokenSlugs","_selectAccountState5","idsBySlug","AppState","AuthState","BiometricsState","TransferState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getTransactionHashFromTxId","localIdSign","transactionHash","getChainBySlug","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","_balancesBySlug$slug","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount4","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","_selectCurrentAccount5","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","_fullFee$token","_fullFee$native","getDieselTokenAmount","_diesel$amount","isValidAddressOrDomain","allowPrefix","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","_selectAccountState$s","staking","stakingDefault","selectAccountStakingState","_selectAccountState$s2","stakingId","shouldUseNominators","selectAccountStakingHistory","accountState","stakingHistory","_URLSearchParams$get","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestTxTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","randomBytes","crypto","getRandomValues","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","getWindowSize","innerWidth","height","screenHeight","screen","safeAreaTop","getSafeAreaTop","safeAreaBottom","getSafeAreaBottom","Keyboard","patchCapacitorAppVh","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","closeFullscreen","onFullscreenFailed","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","_getTelegramApp","updateBiometricToken","updated","verifyIdentity","_getTelegramApp2","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","_extensions$getCredBl","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","openUrl","isExternal","couldOpenApp","completed","openAppSafe","open","openBrowser","handleOpenUrl","currentTarget","resolveRenderPromise","renderPromise","TON_PROTOCOL","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","queriesMap","createQueryEntry","query","mql","dispatchers","passive","useMediaQuery","setState","_options$initializeWi","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","DeeplinkCommand","urlAfterSignIn","processDeeplink","isFromInAppBrowser","isTonConnectDeeplink","openLoadingOverlay","closeLoadingOverlay","returnUrl","processTonConnectDeeplink","isSelfDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","pathname","searchParams","command","isLedger","ledger","CheckinWithR","_pathname$match","match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","tab","host","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","isTonDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","param","_url$searchParams$get","PushNotifications","selectNotificationTonAddressesSlow","accountIds","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","notificationData","action","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","addresses","capture","INAPP_BROWSER_OPTIONS","launchUrl","statusBarHeight","updateSafeAreaValues","safeAreaInsets","insets","getStatusBarHeight","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","types","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","Light","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","_getTelegramApp3","textCopyEl","tabIndex","className","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","formatCurrencySimple","getShortCurrencySymbol","_SHORT_CURRENCY_SYMBO","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","zh-Hans","zh-Hant","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","_value$index","processTemplate","processedParts","currentString","valueNode","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","diff","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","useStateRef","ref","useLastCallback","_ref$current","blurCallbacks","focusCallbacks","isFocused","hasFocus","handleBlur","handleFocus","useBackgroundMode","onBlur","onFocus","lastOnBlur","lastOnFocus","isBackgroundModeActive","telegramApp","onEvent","BroadcastChannel","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","callActionInMain","callActionInNative","shortenAddress","fromRight","FILLER","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","INITIAL_STATE","appState","Auth","auth","none","biometrics","None","hardware","slippage","currentStaking","tokenPriceHistory","Initial","theme","animationLevel","areTinyTransfersHidden","canPlaySounds","dialogs","notifications","stateVersion","restrictions","isLimitedRegion","isSwapDisabled","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","node","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","_partial","partial","titlePostfix","shouldForceAccountEdit","_partial$title","RegExp","accountAmount","isMainnet","updateAccount","createAccountsFromGlobal","firstNetworkAccount","secondNetworkAccount","updateCurrentAccountState","updateAccountState","withDeepCompare","updateHardware","hardwareUpdate","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","_currentSwap$amountKe","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","networkFee","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","pairs","doesSwapChangeRequireEstimation","_ref4","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","isLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateActivitiesIsLoading","updateActivitiesIsHistoryEndReached","isReached","_activities$isHistory","isHistoryEndReachedBySlug","isMainHistoryEndReached","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","compareActivities","updateAccountSettingsBackgroundNft","nft","_settings$cardBackgro","cardBackgroundNft","updateVesting","switchAccount","newNetwork","switchAccountAndClearGlobal","clearSwapPairsCache","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref17","updateTokenInfo","Main","_mnemonic$length","isFirstAccount","firstNonHardwareAccount","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","tonAddress","tronAddress","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","_selectAccounts2","disclaimerAndBackup","_selectAccounts3","hardwareSelectedIndices","ledgerApi","wallets","wallet","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_selectAccounts4","hardwareState","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","connectLedger","transport","Failed","_selectAllHardwareAcc","waitLedgerTonApp","isRemoteTab","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","lastUsedTransport","isLedgerDisconnected","noRetry","connectHardwareWallet","_ref10","_global$hardware$hard","oldHardwareWallets","_ref11","Connect","_ref12","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","_ref13","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref14","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","_selectAccounts5","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref15","_global$accounts$byId","existAccountId","currentWalletTitle","ledgerInfo","_ref16","shouldLoadWithBudget","shouldFetchMore","fetchedActivities","tokenIds","toTxId","toTimestamp","filteredResult","newById","newOrderedIds","currentActivities","fetchTokenTransactions","_selectAccountTxToken","_selectAccountTxToken2","_selectAccountState3","_currentActivities$id","tonTokenSlugs","tronTokenSlugs","_selectAccountState4","idsMain","selectLastMainTxTimestamp","fetchAllTransactions","isMnemonicChecked","promiseId","isSigned","_global$tokenInfo","_settings$importedSlu","_accountSettings$orde","_token$price","_token$priceUsd","_token$change24h","importedSlugs","_global$tokenInfo$byS","_selectAccountState$b","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","getTonOperationFees","operation","gas","real","getTonStakingFees","stake","unstake","claim","BottomSheet","buildClassName","stopEvent","stopPropagation","listenOnce","handleEvent","useLang","useEffectOnce","langProvider","isOpen","onCloseTransitionEnd","noFirstOpenTransition","noCloseTransition","closeDuration","noOpenTransition","isClosed","setIsClosed","closeTimeoutRef","hasOpenClassName","setHasOpenClassName","exec","shouldHaveOpenClassName","isClosing","shouldRender","transitionClassNames","hasShownClass","hasOpenClass","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","tonConnectGetDeviceInfo","maxMessages","appName","appVersion","maxProtocolVersion","features","_navigator","userAgentData","devicePlatform","WebViewBridgeMessageType","getInjectableJsMessage","useDappBridge","endpoint","inAppBrowserRef","requestId","setRequestId","bridgeObject","deviceInfo","protocolVersion","isWalletBrowser","connect","_inAppBrowserRef$curr","_inAppBrowserRef$curr2","buildConnectError","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","hide","buildDappRequest","show","_inAppBrowserRef$curr3","UNKNOWN_ERROR","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","_inAppBrowserRef$curr4","_inAppBrowserRef$curr5","callResponse","applyScrollPatch","_inAppBrowserRef$curr6","_inAppBrowserRef$curr7","_inAppBrowserRef$curr8","bridgeInjectionCode","sendEvent","useWebViewBridge","bridgeObj","objectToInjection","funcs","funcName","invokeCapFunc","functionResponse","executeScript","openDeeplinkOrUrl","close","methodName","invocationId","inAppBrowser","currentBrowserOptions","closeBrowser","useShowTransition","handleBrowserClose","enable","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","originalHide","originalClose","closedPromise","getInAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","ASSET_LOGO_PATHS","btc","usdt","my","buildStakingDropdownItems","tokenBySlug","hasNominatorsStake","getIsActiveStakingState","hasLiquidStake","stateToken","logoPath","icon","getStakingStateStatus","isUnstakeRequested","unclaimedRewards","StakeInitial","UnstakeInitial","isUnstaking","resetHardwareWalletConnect","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","_global$stakingInfo","stakingInfo","liquid","available","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","UnstakeConfirmHardware","StakeConfirmHardware","_global$stakingInfo2","stakingBalance","submitLedgerUnstake","submitLedgerStake","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","stakingState","ClaimConfirmHardware","_getTonStakingFees$cl2","submitLedgerStakingClaim","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","_options$initialZoom","_options$minZoom","_options$maxZoom","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","closest","onMove","onRelease","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","_options$swipeThresho","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","Style","Animation","StatusBar","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","useEffectWithPrevDeps","prevDepsRef","prevDeps","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","next","shouldSkipUndefined","useSyncEffect","usePrevious","cleanupRef","_cleanupRef$current","_effect","_cleanupRef$current2","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","handleBackButtonClick","offClick","PATH_BASE","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","isDoubled","styles","ariaLabel","forFormId","isSubmit","isPrimary","isSimple","isText","isRound","isSmall","isDestructive","shouldStopPropagation","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","sizeSmall","primary","disabled","destructive","clicked","LoadingDots","loadingDots","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","fragment","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","_componentInstance$co","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","textContent","remount","getNextSibling","_componentInstance$co2","renderChildren","forceMoveToEnd","$currentAsReal","$newAsTag","processControlled","currentEntries","newEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","__teactSelectionState","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","_extraClasses$get","setExtraStyles","standardStyles","$head","containerId","elementRef","TeactDOM","CLOSE_DURATION","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","dialogRef","dialogClassName","titleClassName","contentClassName","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onClose","onCloseAnimationEnd","modalRef","localDialogRef","swipeDownDateRef","useHideBrowser","animationDuration","isSlideUp","disableVerticalSwipes","enableVerticalSwipes","prevIsOpen","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","prevForceFullNative","blurTimeout","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","backdropFullClass","backdrop","contentFullClassName","content","contentCompact","Portal","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","explainSwapFee","shouldSwapBeGasless","_input$ourFee3","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","_input$ourFee4","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","_input$ourFee","_input$ourFee2","explainGasfullSwapFee","getMaxSwapAmount","_ourFeePercent","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","_fullNetworkFee$token","_fullNetworkFee$nativ","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","_terms$native","_terms$token","permissions","isPasswordRequired","getDapps","connectAccountId","proof","ConfirmHardware","signature","signLedgerProof","submitDappConnectHardware","vestingAddress","signedMessages","signLedgerTransactions","isTonConnect","submitDappTransferHardware2","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByOrigin","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","currentPromiseId","nextNewestTxTimestamps","closeDappTransfer","WarningHardware","connectionType","isSse","_global$dappConnectRe","pairsCache","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","currentDexLabel","tokenOut","fromAmount","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","_global$currentSwap$r","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","txIds","backendId","Complete","activityId","transfers","_account$addressByCha","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","swapTransactionRequest","swapItem","WaitTokens","activity","payinAddress","cex","payoutAddress","payinExtraId","transferOptions","transferResult","_transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","_global$currentSwap$p","_global$currentSwap$p2","pairsBySlug","_global$currentSwap$a2","_global$currentSwap$n","isFromAmountMax","_global$currentSwap$a","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","_SERVER_ERRORS_MAP","UnexpectedError","NotEnoughForFee","_estimate$other","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","_availableEstimates$f","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","_global$currentSwap$a3","onLine","txDraft","convertTransferFeesToSwapFees","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","_global$swapTokenInfo","_global$currentSwap$p4","shouldForceUpdate","assetId","_global$currentSwap$p3","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","ids","swaps","nonExistentIds","shouldHide","nonExistentSwaps","newEstimate","baseCurrency","updateTokenPriceHistory","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","InsufficientBalance","_global$currentTransf","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","_result3","_explainedFee$realFee2","rawPayload","parsedPayload","signedMessage","currentResult","submitLedgerNftTransfer","submitLedgerTransfer","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","isNotcoinVouchers","collectionAddress","submitTransferInitial","nftAddresses","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","unfreezeRequestedIds","isConfirmRequested","openVestingModal","unfreezeState","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","createResult","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","chainBalances","_selectAccountSetting2","currentBalances","updateBalances","common","totalProfit","updateStakingInfo","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","currentTokens","_currentTokens$token$","_currentTokens$token$2","updateTokens","updateSwapTokens","currentNfts","orderedAddresses","checkCardNftOwnership","newOwnerAddress","sentNft","_nfts$orderedAddresse2","_nfts$selectedAddress","_nfts$byAddress","selectedAddresses","removedNft","removeNft","ownerAddress","_nfts$orderedAddresse","addNft","isOnSale","updateNft","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","preload","assetPath","audioChannelNum","isUrl","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","playIncomingTransactionSound","play","createBufferSource","destination","_activities$idsMain","fromTokenIds","toTokenIds","isLocal","newestTx","tokenTxIds","updateActivity","_activities$localTran","_activities$byId","localTransactions","addLocalTransaction","fetchTransferDieselState","_selectLocalTransacti","_groups$localUpdates","noForward","updateActivitiesIsLoadingByAccount","_global$byAccountId","_accountState$activit","selectLocalTransactions","withLocalIndex","localIndex","groupName","isIncoming","normalizedAddress","inMsgHash","getRealTxIdFromLocal","groups","localUpdates","localTransaction","localTxId","replacedActivity","updatedIdsBySlug","indexOfTxId","indexOfTxIdMain","updatedByTxId","newestTransaction","replaceLocalTransaction","currentActivityId","_activities$localTran2","_activities$byId2","removeLocalTransaction","newActivities","_activities","_activities$idsMain2","_activities2","_activities4","_activities5","newIdsMain","newIdsBySlug","buildActivityIdsBySlug","replacedIdsBySlug","newIds","_activities3","currentActivityIds","newTxs","newNewestTxsBySlug","txs","newTx","addNewActivities","_byChain$chain","byChain","isFirstTransactionsLoaded","setIsFirstActivitiesLoadedTrue","dataHex","clearCurrentSignature","apiUpdateDappConnect","activeDappOrigin","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","BarcodeFormat","BarcodeValueType","LensFacing","GoogleBarcodeScannerModuleInstallState","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","InvalidAmount","InvalidToAddress","StateInitWithoutBin","InvalidStateInit","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","InactiveContract","NotSupportedHardwareOperation","DebugError","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","hex2rgb","hex","rgbToLab","rgb","z","ACCENT_COLORS","light","dark","useAccentColor","elementRefOrBody","appTheme","accentColor","getCachedImageUrl","cachedResponse","createObjectURL","statusText","clone","APP_VERSION_REGEX","ledgerTabId","preloadedImageUrls","setTheme","setValue","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","useMediaTransition","mediaData","isMediaReady","loading","imageClassName","isLoaded","markIsLoaded","useFlag","draggable","referrerPolicy","onLoad","handleLoad","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGrayWhite","iconClockLightGrayWhite","iconClockGreen","iconClockLightGreen","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGrayWhite","iconClockPreviewLightGreen","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGrayWhite","iconClockDarkGreen","iconClockDarkPurple","iconClockDarkPurpleWhite","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGrayWhite","iconClockPreviewDarkGreen","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","useFocusAfterAnimation","getHideCounter","setHideCounter","showBottomBar","currentCounter","getIsBottomBarHidden","isExploreOpen","areAssetsActive","Assets","openSettings","closeSiteCategory","closeExplore","isHidden","setIsHidden","isWalletTabActive","handleWalletClick","handleExploreClick","handleSettingsClick","useHideBottomBar","hideBottomBar","buildStyle","RLottie","ensureRLottie","default","getRLottie","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","onKeyDown","isPasswordVisible","setIsPasswordVisible","handleInput","finalType","inputFullClass","labelFullClass","htmlFor","scrollHeight","required","handleTogglePasswordVisibility","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","flat","currentTime","getTiming","extractPositionFromTransform","transformRule","onMouseDown","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","stickToFirst","resetStateDelayMs","isMinified","onBiometricsClick","onClearError","onSubmit","isFaceId","canRenderBackspace","isSuccess","prevIsPinAccepted","arePinButtonsDisabled","clearScrollPatch","timeoutId","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","STICKER_SIZE","isBiometricAuthEnabled","operationType","cancelLabel","submitLabel","stickerSize","help","containerClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleSubmit","getPinPadTitle","actionName","modalStyles","AnimatedIconWithPreview","PinPad","shouldRenderFullWidthButton","footerButtonsClassName","footerButtons","footerButtonFullWidth","transitionContent","renderingError","renderBiometricPrompt","Input","buttonHalfWidth","buttonFullWidth","Modal","buttons","forceReflow","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","render","rendered","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","autolockValue","isAppLockEnabled","isHardwareAccount","isNonNativeBiometricAuthEnabled","isManualLockActive","shouldHideBiometrics","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","useAppTheme","coreWalletLogoPath","logoLightPath","logoDarkPath","isLocked","lock","unlock","shouldRenderUi","showUi","hideUi","lastActivityTime","slideForBiometricAuth","setSlideForBiometricAuth","passwordForm","passwordError","setPasswordError","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","forceLockApp","_getInAppBrowser2","handleLock","handleChangeSlideForBiometricAuth","handleSubmitPassword","handlePasswordChange","handleLockScreenHotkey","renderLogo","Image","transitionKey","Transition","isFixedSlide","PasswordForm","getCardNftImageUrl","mtwCardId","APP_VERSION_URL","connectLedgerAndGetHardwareState","newHardwareState","WaitingForBrowser","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","availableTransports","initializeHardwareWalletConnection","shouldDelegateToNative","setHardwareStateToConnecting","tabs","active","windows","windowId","focused","createLedgerTab","popup","getCurrent","onRemoved","closedTabId","closeHardwareWalletModal","onLedgerTabClose","isHardwareModalOpen","LedgerConnectHardware","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref18","_ref19","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref20","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref21","_linkParams$toAddress","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref22","_ref23","chainForOnRampWidgetModal","_ref24","mediaId","mediaType","hiddenNfts","noGhostAnimation","isReceiveModalOpen","isInvoiceModalOpen","Ledger","isLoadingOverlayOpen","_ref25","_ref26","mtwCardType","mtwCardBorderShineType","cachedBlobUrl","img","imageData","canvas","naturalWidth","naturalHeight","ctx","getContext","drawImage","getImageData","extractImageData","pixelArray","imgData","pixelCount","createPixelArray","extractPaletteFromImage","dominantRgb","distances","ac","color1","color2","euclideanDistance","minDistance","extractAccentColorIndex","revokeObjectURL","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","ConnectHardware","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","prevSettings","currentCollectionAddress","_nfts$selectedAddress2","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","_nfts$selectedAddress3","removeFromSelectedAddresses","isVestingModalOpen","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","isExists","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","reducedGlobal","reduceByAccountId","reducedSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestTransactionsBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","initialState","timeEnd","_cached$tokenInfo","backupWallet","_accountState$balance","oldId","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","_scrollTarget$dataset","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","lastCallback","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useCurrentOrPrev","shouldForceCurrent","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","root","withNotch","closeClassName","onBackButtonClick","header_back","header_backIcon","handleBackClick","isInsideModal","handleContentScroll","aboutExtensionTitle","slide","ModalHeader","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","onScroll","logo","titleLink","rel","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","onSelect","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","blur","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","sticker","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","handleChange","containerFullSize","pinPadHeader","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneClassNames","twoClassNames","threeClassNames","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","Checkbox","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","isLogoReady","markLogoReady","btn_about","importButtonsBlock","importText","importButtons","RENDER_COUNT","_useCurrentOrPrev","closeAbout","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","AuthSafetyRules","AuthSecretWords","AuthCheckWords","transitionContainer","transitionSlide","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","accountName","accountFooter","iconLedger","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","usePrevDuringAnimationSimple","durationMs","setPrev","captureEscKeyListener","captureKeyboardListener","ANIMATION_DURATION","menuRef","bubbleClassName","positionX","positionY","transformOriginX","transformOriginY","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","bubbleRef","menu","useVirtualBackdrop","fullBubbleClassName","bubble","transformOriginYStyle","transformOriginXStyle","inPortal","selectedValue","anchorPosition","menuPosition","menuPositionHorizontal","menuStyle","shouldTranslateOptions","buttonClassName","iconClassName","fontIconClassName","menuLeft","setMenuLeft","menuWidth","windowWidth","prevMenuStyle","Menu","fullButtonClassName","item_with_icon","dangerous","withSeparator","separator","item_selected","handleItemClick","itemIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","spinner","inner","DEFAULT_ARROW","DEFAULT_MENU_POSITION_HORIZONTAL","itemClassName","menuClassName","arrow","isMenuOpen","openMenu","closeMenu","selectedItem","selectedItemName","_item$selectedName","handleSelect","buttonArrowIcon","buttonIcon","withMenu","isFullyInteractive","interactive","wide","buttonFullClassName","Spinner","insideButton","DropdownMenu","TRANSPORT_NAMES","usb","bluetooth","isStatic","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForBrowser","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsClassNames","handleConnected","isSingleWallet","handleCloseWithBrowserTab","closeAction","closeLedgerTab","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","settingsStyles","iconBlock","mobile","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","containerStatic","iconBlockSlideStatic","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","iconUrl","onDisconnect","shouldShowDisconnect","handleDisconnect","dappLogo","dappLogo_icon","dappIcon","dappInfo","dappName","dappUrl","dappDisconnect","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","cancelDappConnectRequestConfirm","setDappConnectRequestState","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","skeletonTransitionWrapper","dappInfoSkeleton","dapp_first","dappInfoIconSkeleton","dappInfoTextSkeleton","nameSkeleton","descSkeleton","accountWrapperSkeleton","DappInfo","dapp_push","footer","DappPassword","LedgerConnect","LedgerConfirmOperation","modalDialog","dappname","currentAccount","cancelDappTransfer","setDappTransferScreen","handleAgree","transactionDirection","transactionAccount","accountTitle","accountBalance","transactionDapp","descriptionContent","withTonExplorer","openMediaViewer","tonExplorerTitle","ton_explorer_name","Nft","thumbnail","collectionName","Filesystem","FilesystemWeb","Share","ShareWeb","tryCapacitorShare","share","tryNavigatorShare","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","isMultichainAccount","_addressUrl","addressUrl","isTransaction","spoiler","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","shareData","shareUrl","handleTonExplorerOpen","isActionsMenuOpen","menuItems","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPosition","isWalletAddress","_menuHandlers","changedTouches","clientX","getBoundingClientRect","useDropdownMenu","addressBook","shouldUseMenu","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","MEANINGFUL_CHAR_LENGTH","prefix","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImg","scamImage","chainIcon","shortAddress","onContextMenu","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","menuIcon","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","tokensBySlug","amountTerms","payloadFieldTerm","_token$decimals","_token$symbol","totalCost","getTotalCost","payloadField","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","UNKNOWN_TOKEN","TOKEN_ICONS","_findChainConfig$nati","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","_firstDefinedTerm","convertTermsObjectToList","symbolNode","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","Fee","full_fee","excess_symbol","chain_name","keepDetailsButtonWithoutFee","onDetailsClick","FeeLineContainer","detailsModalContent","detailsModalExplanation","fee_amount","received_amount","warningForPayload","isDetailsModalOpen","openDetailsModal","closeDetailsModal","FeeLine","FeeDetailsModal","explanationWarning","realReceived","DappReturnedDetailsModal","isPayloadExpanded","expandPayload","payloadElement","record","category","votingAddress","vote","renderPayload","NftInfo","InteractiveTextField","displayedToAddress","dataField","receivingAddress","DappAmountField","amountBySlug","renderAmount","_transaction$payload","renderPayloadLabel","payloadField_expanded","payloadFieldExpand","DappTransferFee","totalAmountsBySlug","totalFullFee","totalReceived","showDappTransfer","submitDappTransferConfirm","isSingleTransaction","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","renderTransactionRow","amountText","transactionRow","transactionRowAmount","transactionRowAddress","transactionRowChevron","DappTransfer","hasAmount","transactionList","renderTransactions","buttonsAfterFee","tonAmount","cost","isMediaViewerOpen","_transactions$length","withPayloadWarning","clearDappTransferError","submitDappTransferPassword","submitDappTransferHardware","isDappLoading","needsExtraHeight","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","renderRow","isLarge","rowContainerSkeleton","rowContainerLargeSkeleton","rowTextSkeleton","rowTextLargeSkeleton","rowSkeleton","rowLargeSkeleton","transactionDirectionLeftSkeleton","nameDappSkeleton","descDappSkeleton","transactionDirectionRightSkeleton","transactionDappIconSkeleton","dappInfoDataSkeleton","renderWaitForConnection","DappTransferInitial","DappLedgerWarning","renderSubTransaction","renderPassword","modalDialogExtraHeight","Dialog","DialogWeb","_dialog$title","dismissDialog","openModal","closeModal","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","handleClose","_window$electron5","_window$electron6","UpdateApp","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","clickArg","isSeparator","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","ORIGIN_REPLACEMENTS_BY_ORIGIN","originalUrl","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","renderIcon","HIDDEN_FROM_FEED_DAPP_ORIGINS","dappsFromState","openSettingsWithState","lastOpenedAt","compareDapps","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","extendedIcon","withBorder","badgeText","isTrending","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badge","_global$exploreData","categories","categoryId","CategoryHeader","Site","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","inputRef","suggestionsTimeoutRef","transitionRef","trendingContainerRef","searchValue","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","isSuggestionsVisible","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","searchSuggestions","historyResult","sitesResult","isEmpty","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","openSite","validProtocols","urlObject","isValidUrl","prevIsSearchFocused","handleSiteClick","handleSearchValueChange","handleMenuClose","_inputRef$current","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","suggestionsMenu","_searchSuggestions$hi","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","handleSiteClear","_searchSuggestions$si","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list$index","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialogInsideSettings","metaViewport","defaultViewportContent","allowedZoomViewportContent","formatTransferUrl","buildContentHtml","withRadix","hasDot","formattedWholePart","fractionStr","suffixStr","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","scrollWidth","clearText","_text$trim$replace$re","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","markHasFocus","unmarkHasFocus","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","labelTextClassName","cornerFullClass","_e$currentTarget$text","closeInvoiceModal","setAmount","setComment","hasAmountError","setHasAmountError","invoiceUrl","dropdownItems","handleAmountInput","stringValue","contentTitle","RichNumberInput","tokenDropdown","invoiceComment","labelForInvoice","invoiceLinkField","stopById","EMPTY_RECT","useMenuPosition","anchor","getTriggerElement","getRootElement","getMenuElement","getLayout","setPositionX","setPositionY","setTransformOriginX","setTransformOriginY","withScroll","setWithScroll","setMenuStyle","triggerEl","anchorX","anchorY","menuEl","rootEl","marginTop","menuElWidth","menuElHeight","menuRect","rootRect","horizontalPosition","verticalPosition","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","menuMaxHeight","offsetX","offsetY","previousActiveTab","onMenuItemClick","tabRef","contentRef","hasMenu","tabEl","prevTabEl","platformEl","prevPlatformEl","shiftLeft","offsetLeft","scaleFactor","SCROLL_DURATION","activeTab","big","onSwitchTab","activeTabElement","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","_CHAIN_ICON_MAP$netwo","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","margin","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","setActiveTab","TonContent","TronContent","_tabs$activeTab","TabList","tabsInModal","contentWrapper","contentStatic","modalTitle","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","imageUrl","secondText","TokenIcon","tokenIcon","nftIcon","bold","tokenSymbol","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","getNumberRegex","zeroValue","prevValueRef","renderValue","inputValue","noFallbackToPrev","contentEl","valueRegex","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","_nativeToken$amount","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","isIncorrectAmount","setIsIncorrectAmount","isInsufficientBalance","setIsInsufficientBalance","isInsufficientFee","setIsInsufficientFee","isBelowMinimumAmount","setIsBelowMinimumAmount","shouldUseAllBalance","setShouldUseAllBalance","stakingType","tvl","dailyReward","apr","calcJettonStakingApr","isNativeToken","nativeSlug","nativeBalance","minAmount","doubleNetworkFee","shouldLeaveForUnstake","validateAndSetAmount","newAmount","dropDownItems","handleMaxAmountClick","handleAmountChange","handleChangeStaking","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","annual_yield","textButton","balanceButton","balanceLink","amountTopRight","amountTopRight_static","amountTopRight_slide","balanceContainer","renderTopRight","inputRichStatic","amountInput","tokenDropdownItem","amountBottomWrapper","amountBottomWrapper_static","amountBottom","_nativeToken$symbol","minAmountValue","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","renderBottomRight","balanceResult","RichNumberField","balanceResultWrapper","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStakingPassword","submitStakingHardware","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","TransactionBanner","transactionBanner","renderTransactionBanner","TransferResult","renderComplete","submitStakingClaim","submitStakingClaimHardware","cancelStakingClaim","isNativeEnough","withModalHeader","handleHardwareSubmit","feeClassName","renderInfo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","tonToken","profit","endOfStakingCycle","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","hasHistory","shouldRenderSpinner","spinnerClassNames","useInterval","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","stakingInfo_modal","stakingInfoNoHistory","didUpdate","useTransitionActiveKey","stakingTransition","stakingInfoClose","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","tokenDropdownMenu","unstakeTime","unstakeTime_purple","unstakeTimeIcon","stakingInfoButtons","stakingInfoButtonsWithMargin","stakingInfoButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","_stakingInfo$round","_stakingInfo$liquid$a","_stakingInfo$liquid","isLongUnstake","setIsLongUnstake","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","shortBaseSymbol","isInstantUnstake","unstakeDate","setUnstakeDate","amountInCurrency","renderingAmountInCurrency","isUnstakeDisabled","shouldRenderCurrency","currencyClassNames","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","tonIcon","tonName","shouldShowInfo","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","initialAmount","isInteractive","endsAt","submitClaimingVesting","submitClaimingVestingHardware","cancelClaimingVesting","clearVestingError","claimAmount","shouldFilter","setSwapScreen","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","handleOpenSelectTokenModal","SelectTokenTo","SelectTokenFrom","buttonTransitionKeyRef","tokenToRender","useSignal","_signalRef$current","signalRef","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrDependency","_dependencies","isAsync","getValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","BUTTON_ANIMATION_DURATION","_limits$fromMin","_tokenIn$symbol","_limits$fromMax","_tokenIn$symbol2","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useDerivedSignal","useThrottledSignal","renderedText","useDerivedState","BTC","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","rate","DedustPath","StonfiPath","renderedDexItem","ARROW_WIDTH","GAP","emoji","tooltipClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","isSlippageFocused","markSlippageFocused","unmarkSlippageFocused","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","slippageList","renderSlippageValues","IconWithTooltip","ValuePlaceholder","renderRate","actualFee","feeElement","renderNetworkFee","percent","SwapSettingsModal","_nativeUserTokenIn$am","_tokenIn$amount","_explainedFee$fullFee2","_explainedFee$fullFee3","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","loadSwapPairs","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","tokenInTransitionKey","useTokenTransitionKey","accountIdPrev","nativeTokenInSlug","nativeUserTokenIn","amountInBigint","amountOutBigint","balanceIn","isEnoughBalance","_fullNetworkFee$nativ2","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","intervalId","handleAmountInChange","handleAmountOutChange","handleSwitchTokens","SwapSelectToken","AnimatedArrows","SwapDexChooser","renderFee","renderPriceImpactWarning","policy","kyc","renderChangellyInfo","SwapSubmitButton","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","COMMENT_DROPDOWN_ITEMS","AUTHORIZE_DIESEL_INTERVAL_MS","INPUT_CLEAR_BUTTON_ID","doesSavedAddressFitSearch","searchQuery","isMemoRequired","isEncryptedCommentSupported","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","setTransferShouldEncrypt","cancelTransfer","requestOpenQrScanner","toAddressRef","addressBookTimeoutRef","transferToken","shouldRenderPasteButton","setShouldRenderPasteButton","isAddressFocused","markAddressFocused","unmarkAddressFocused","isAddressBookOpen","openAddressBook","closeAddressBook","savedAddressForDeletion","setSavedAddressForDeletion","savedChainForDeletion","setSavedChainForDeletion","toAddressShort","SHORT_ADDRESS_SHIFT","isAddressValid","otherAccountIds","shouldUseAddressBook","shouldDisableClearButton","withPasteButton","withAddressClearButton","_fullFee$token2","_fullFee$native2","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","isDisabledDebounce","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","handleAddressBookClose","handleAddressFocus","caretPosition","newCaretPosition","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressInput","newToAddress","handleAddressClearClick","handleQrScanClick","handleClear","handlePasteClick","handleAddressBookItemClick","handleDeleteSavedAddressClick","handleCommentChange","trimStringByMaxBytes","hasToAddressError","isAmountGreaterThanBalance","isCommentRequired","_amount","handleCommentOptionsChange","isFeeModalOpen","closeFeeModal","useFeeModal","renderedSavedAddresses","renderAddressItem","deleteLabel","onDeleteClick","renderedOtherAccounts","_savedAddresses$map","addressesToBeIgnored","uniqueAddresses","currentAddress","addressChain","withButton","shouldIgnoreErrors","NftChips","renderAddressBook","renderBalance","maxBytes","decoder","TextDecoder","encoded","TextEncoder","isSavedAddress","handleDeleteClick","TABS","Receive","activeTransferKey","isTransferWithComment","activeTabIndex","stakingStatus","setActiveTabIndex","isStaking","renderedBgHelpers","transferSlideClassName","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","transferSlideContent","contentSlideStaked","isStakingAllowed","areNotAllTabs","isLastTab","transferKey","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","isPrev","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","tabDelimiter","tab_purple","tab_purpleText","inactive","unstakeRequested","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","calculateFullBalance","stakingStates","stakingStateBySlug","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","currentPrice","changeFactor","changePercent","changeClassName","changeCourseUp","changeCourseDown","changePrefix","useUpdateIndicator","updateStartedAt","setIsUpdating","timeElapsedSinceLastUpdateStarted","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","_prevText$length","textLength","prevTextLength","charIndex","prevTextCharIndex","_text$charIndex","_text$charIndex2","_text$charIndex3","renderAnimatedCharacters","currentWalletVersion","canEdit","forceClose","accountClassName","accountSelectorClassName","menuButtonClassName","noSettingsButton","withAccountSelector","isInsideSticky","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","setInputValue","noSettingsOrQrSupported","withAddW5Button","accountsAmount","prevShouldForceAccountEdit","handleSwitchAccount","handleSaveClick","handleAddV5WalletClick","WalletVersion","handleInputKeyDown","handleFullscreenToggle","exitFullscreen","handleManualLock","accountTitleClassName","handleOpenAccountSelector","_currentAccount$addre","dialogFullClassName","renderButton","renderAccountsSelector","chains","chainDropdownItems","handleCopyAddress","handleExplorerClick","addressContainer","menuStyles","menuItemName","menuFontIcon","menuExplorerIcon","explorerButton","currentCurrency","excludedCurrency","currencyList","handleBaseCurrencyChange","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","useAsync","setIsLoading","setResult","wasCancelled","useCachedImage","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","useLayoutEffectWithPrevDeps","useSyncEffectWithPrevDeps","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","green","orange","pink","purple","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","handleMouseLeave","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","_useMemo","_selectedHistoryPoint","onYieldClick","loadPriceHistory","isCurrencyMenuOpen","openCurrencyMenu","closeCurrencyMenu","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","tonUrl","refreshHistory","newPeriod","handleCurrencyChange","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","dateStr","initialPrice","_history$find","change","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","l2","a2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenLogo","tokenInfoHeader","tokenValue","currencySwitcher","iconCaretSmall","CurrencySwitcher","tokenInfoSubheader","tokenTitle","tokenName","apy","tokenChange","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","balanceUpdateStartedAt","forceCloseAccountSelector","onTokenCardClose","customCardClassName","setCustomCardClassName","setWithTextGradient","renderedToken","shouldRenderTokenCard","tokenCardTransitionClassNames","handleCardChange","hasGradient","dappDomain","renderingDappDomain","shouldRenderDappElement","dappClassNames","shouldRenderDapp","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","AccountSelector","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","AnimatedCounter","CardAddress","TokenCard","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","requestParamsRef","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","currentMiddleId","defaultOffsetId","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","_cex$status","_cex$status2","isError","isHold","isFromToncoin","isInternalSwap","swapIconClass","iconFullClass","amountSwapClass","cexStatus","renderErrorMessage","renderCurrency","encryptedComment","isStake","isUnstake","isUnstakeRequest","_savedAddresses$find","handleNftClick","stakeIconClass","waitingIconName","amountOtherClass","renderComment","THROTTLE_TIME","DATE_HEADER_HEIGHT","TRANSACTION_COMMENT_HEIGHT","TRANSACTION_NFT_HEIGHT","TRANSACTION_HEIGHT","_selectAccountState6","_byChain","selectIsFirstTransactionsLoaded","isNewWallet","selectIsNewWallet","swapTokensBySlug","activitiesUpdateStartedAt","totalTokensAmount","shouldShowSeparateAssetsPanel","idList","_bySlug$slug","lastTokenTxId","lastTokenTxTimestamp","activityList","allActivities","_tokensBySlug$activit","activityIds","activitiesById","activityIdList","activityMap","isHistoryEndReached","loadMore","FURTHER_SLICE","throttledLoadMore","useInfiniteScroll","isActivitiesEmpty","activityOffsetInfoById","offsetMap","dateCount","commentCount","lastActivityDayStart","_activity$metadata","offsetNext","calculateOffset","activityDayStart","isNewDay","canCountComment","currentContainerHeight","_activityOffsetInfoBy","lastViewportId","handleActivityClick","NewWalletGreeting","InfiniteScroll","activityInfo","nextActivityId","nextActivity","isFirst","isActivityActive","dateValue","formattedDate","dateWithLoader","renderDate","Transaction","_stakingStateBySlug$a","_stakingStateBySlug$a2","renderActivity","UNFREEZE_DANGER_DURATION","vestingStatus","unfreezeEndDate","isInvestorView","isVesting","renderedAmount","withYield","withLabel","shouldRenderYield","renderYieldClassNames","renderYield","renderChangeIcon","renderStakingIcon","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","_states$filter","stakedTokens","shouldRenderStakedTokens","stakedTokenClassNames","shouldRenderVestingToken","vestingTokenClassNames","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","tokenSlugs","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","Token","indexInViewport","renderToken","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","MENU_ITEMS","selectNfts","burnNfts","openHideNftModal","nftFromCurrentCollection","renderedNft","handleMenuItemClick","collectionNfts","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","useNftMenu","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","openUnhideNftModal","setCardBackgroundNft","clearCardBackgroundNft","installAccentColorFromNft","clearAccentColorFromNft","getgemsBaseUrl","fragmentUrl","isOnFragment","isTonDns","isCard","onOpen","observeIntersection","clearNftSelection","isLottie","shouldPlay","markHover","unmarkHover","lottie","isIntersecting","targetRef","setIsIntersecting","useOnIntersect","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","shouldRenderWarning","warningTransitionClassNames","handleOpenMenu","handleCloseMenu","Radio","NftMenu","clearNftsSelection","hasSelection","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","rootMargin","initController","controller","useIntersectionObserver","nft_marketplace","_selectedAddresses$le","selectAllNfts","handleSendClick","_map","handleBurnClick","_map2","handleHideClick","activeNftKey","_vesting$info","tokensCount","tabsRef","hasNftSelection","numberOfStaking","_states$filter$length","handleNftCollectionClick","handleNftsMenuButtonClick","HiddenNfts","nftCollections","collections","collentionAddresses","shouldRenderHiddenNftsSection","blacklistedAddressesSet","NotcoinVouchers","handleSwitchTab","stickyElm","rootMarginTop","intersectionRatio","handleClickAsset","Nfts","NftSelectionHeader","NftCollectionHeader","HideNftModal","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","closeSecurityWarning","IS_UNSAFE_WEB","BackupWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","canRenderStickyCard","setCanRenderStickyCard","shouldRenderDarkStatusBar","setShouldRenderDarkStatusBar","markIsFocused","unmarkIsFocused","usePreventPinchZoomGesture","shouldRenderStickyCard","stickyCardTransitionClassNames","boundingClientRect","cardTopSideObserver","cardElement","handleTokenCardClose","Warnings","Card","StickyCard","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","UpdateAvailable","RenderingState","versionById","isOtherVersionsExist","clearAccountError","closeAddAccountModal","clearAccountLoading","setRenderingKey","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleImportHardwareWalletClick","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","renderSelector","AddAccountPasswordModal","buttonLabel","transitionContentWrapper","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","confirm","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","allow","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","scanSquareRef","isTorchAvailable","isTorchEnabled","enabled","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","cornerPoints","qrCodeCoordinates","barcode","coordinates","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","renderPasswordForm","transitionContent_simple","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","_NETWORK_NAMES_EXCEPT","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","pad","remainingSeconds","formattedTime","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","chainLabel","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","closeActivityInfo","renderedActivity","shouldRenderCexInfo","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","cexErrorMessage","isCountdownFinished","transactionId","_renderedActivity$cex","transactionUrl","shouldShowQrCode","renderMemo","SwapTokensInfo","_fromToken$symbol","blockchain","Countdown","renderAddress","renderSwapInfo","email","livechat","isButtonVisible","_renderedActivity$cex2","renderFooterButton","feeText","_transaction$metadata2","_stakingInfo$round2","renderedTransaction","isTransactionWithPoisoning","decryptedComment","setDecryptedComment","withUnstakeTimer","setWithUnstakeTimer","shouldRenderTransactionId","transactionIdClassNames","startOfStakingCycle","shouldDisplayTimer","shouldRenderUnstakeTimer","unstakeTimerClassNames","clearPasswordError","openPasswordSlide","closePasswordSlide","openHiddenComment","handleStartStakingClick","handleUnstakeMoreClick","getTitle","TransactionAmount","AmountWithFeeTextField","nftName","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","handleMouseEnter","dismissNotification","Notification","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","prevChildren","fromChildrenRef","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","withAnimation","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","scale","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","steps","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","transformOrigin","animateClosing","ShowTransition","MediaInfo","Actions","Slides","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","shortButton","text_noExtraMargin","links","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","THEME_OPTIONS","lightThemeImg","systemThemeImg","darkThemeImg","handleThemeChange","newTheme","handleAnimationLevelToggle","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","buttonRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","scrollBy","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current$sc","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","clientY","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","_tokens$length","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","toggleTokenVisibility","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arr1","arr2","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","_state$orderedTokenSl3","_orderedSlugs$length","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","dot","deleteText","DeleteTokenModal","nftsByAddress","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","scrollContainerRef","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","blockWithTooltip","tooltip","iconQuestion","tooltip_wide","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","dappList","disconnectAllBlock","disconnectButton","blockDescription","renderDapps","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","environment","navigatorPlatform","build","flags","getLogsString","filename","toISOString","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","link","download","click","shareFile","developerTitle","logBlock","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","settingsBlockWithDescription","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","enteredPassword","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","okButtonTitle","cancelButtonTitle","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","DEFAULT_AUTOLOCK_OPTION","isPasswordPresent","selectIsPasswordPresent","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","Collapsible","passwordFormContent","passwordFormContentInModal","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","_global$settings$impo","_global$currentSwap","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","popularTokensProp","isInsideSettings","shouldHideMyTokens","shouldHideNotSupportedTokens","resetImportToken","setSwapTokenIn","setSwapTokenOut","addToken","addSwapToken","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","allTokens","filterSupportedTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","_tokensToFilter$filte","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","descriptionText","tokenPrice","tokenContainer","tokenContainerDisabled","tokenLogoContainer","tokenLogoDisabled","nameContainer","tokenTextDisabled","tokenNetwork","tokenPriceContainer","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","tokenNameSkeleton","tokenValueSkeleton","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","isFilterActive","withTopSpace","TokenSelector","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","v","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","isLogOutModalOpened","openLogOutModal","closeLogOutModal","isInitialScreen","activeLang","_versions$map","_tonToken$symbol","_tonToken$price","tonBalance","balanceInCurrency","telegramLinkClassNames","isTelegramLinkRendered","handleSlideAnimationStop","handleCloseSettings","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","renderHandleDeeplinkButton","tonLinksImg","hidden","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","_MTW_TIPS_CHANNEL_NAM","tipsImg","_HELPCENTER_URL","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsDeveloperOptions","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","LogOutModal","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","setHasToAddressError","canContinue","setCanContinue","handleCancelClick","validateToAddress","submitPassword","renderInputAddress","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","activityById","submitSwap","submitSwapCex","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","_tokenOut$symbol","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","ceil","submitBtnText","stars_symbol","buttonsInsideContentWithScroll","isInProgress","clearTransferError","submitTransferPassword","submitTransferHardware","setTransferScreen","renderedTransactionAmount","_nfts$","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","canvasRef","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","clearRect","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","fillStyle","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","handleCloseBrowserTab","AppInactive","ElectronHeader","SettingsModal","AppLocked","MediaViewer","BackupModal","TransferModal","SwapModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","Notifications","QrScannerModal","Dialogs","ConfettiContainer","LoadingOverlay","BottomBar","_await$App$getLaunchU","newPlatform","fadeOutDuration","canGoBack","exitApp","getLaunchUrl","initCapacitor","DEEPLINK","lockOrientation","MainButton","SecondaryButton","SettingsButton","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}