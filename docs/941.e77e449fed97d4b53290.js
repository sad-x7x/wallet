/*! For license information please see 941.e77e449fed97d4b53290.js.LICENSE.txt */
(()=>{var t,e,n={61995:(t,e,n)=>{"use strict";n.d(e,{Hc:()=>o,Hx:()=>r,xT:()=>a});const r={GET_STATIC_DATA:801842850,REPORT_STATIC_DATA:2339837749,GET_STORAGE_DATA:1535698380,REPORT_STORAGE_DATA:2863966447,EXCESSES:3576854235,TRANSFER_JETTON:260734629,INTERNAL_TRANSFER:395134233,TRANSFER_NOTIFICATION:1935855772,PROVIDE_WALLET_ADDRESS:745978227,TAKE_WALLET_ADDRESS:3513996288,BURN_JETTON:1499400124,STAKE_JETTONS:3818940809,ADD_REWARDS:3675696277,SEND_CLAIMED_REWARDS:1153179619,SEND_UNSTAKED_JETTONS:4213386179,APPROVE_STAKE:2443044737,CANCEL_STAKE:2662179289,ADD_REWARD_JETTONS:275213031,CLAIM_COMMISSIONS:3165188199,REQUEST_UPDATE_REWARDS:4123376291,CLAIM_REWARDS:2027548937,RECEIVE_JETTONS:3599387329,UNSTAKE_JETTONS:1234866786,UNSTAKE_REQUEST:23647415,CANCEL_UNSTAKE_REQUEST:2760970010,UPDATE_REWARDS:2928871374,CONFIRM_TRANSFER:3162893073,DEPLOY_NEW_POOL:3666222871,SEND_COMMISSIONS:3110787818,SET_CODE:3805467153,CHANGE_CREATION_FEE:1725256331,CHANGE_CONTENT:247632384,UPDATE_CODES:2244551631},a={MIN_RESERVE:20000000n,DEPLOY_POOL:340000000n,NOTIFICATION:340000000n,JETTON_TRANSFER:55000000n,BURN_JETTONS:340000000n,STAKE_JETTONS:300000000n,UNSTAKE_JETTONS:340000000n,CANCEL_UNSTAKE:340000000n,SEND_COMMISSIONS:340000000n,SIMPLE_UPDATE_REQUEST:340000000n,ADD_REWARDS:340000000n,APPROVE_TRANSFER:340000000n,SAVE_UPDATED_REWARDS:340000000n,MIN_EXCESS:10000000n,SEND_STAKED_JETTONS:630000000n},o={COMMISSION_DIVIDER:10000n,REWARDS_DIVIDER:1e3,DISTRIBUTION_SPEED_DIVIDER:BigInt(86400),DISTRIBUTED_REWARDS_DIVIDER:100000000000000000000000000000000000000n}},39989:(t,e,n)=>{"use strict";n.d(e,{K$:()=>s,KB:()=>o,QS:()=>c,Ww:()=>i,aU:()=>a});var r=n(23174);class a extends Error{constructor(t,e){super(t),this.displayError=e,this.name=this.constructor.name}}class o extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Canceled by the user")}}class s extends a{constructor(t,e){super(t,r.QD.ServerError),this.statusCode=e}}class i extends a{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Abort operation")}}function c(t){if(t instanceof s)return{error:t.displayError};throw t}},22100:(t,e,n)=>{"use strict";var r={};n.r(r),n.d(r,{Workchain:()=>Ht,buildWallet:()=>Zn,checkApiAvailability:()=>Zs,checkMultiTransactionDraft:()=>ps,checkNftOwnership:()=>Bs,checkNftTransferDraft:()=>Rs,checkStakeDraft:()=>Ws,checkTransactionDraft:()=>ts,checkUnstakeDraft:()=>Ks,decryptComment:()=>bs,fetchAccountTransactionSlice:()=>cs,fetchEstimateDiesel:()=>Is,fetchPrivateKey:()=>mr,fetchToken:()=>qo,fetchTokenTransactionSlice:()=>ds,fixTokenActivitiesAddressForm:()=>Ss,generateMnemonic:()=>dr,getAccountBalance:()=>tr,getAccountNewestTxId:()=>is,getAccountNfts:()=>Ts,getAccountTokenBalances:()=>No,getAllTransactionSlice:()=>us,getBackendStakingState:()=>Vs,getContractInfo:()=>Yn,getNftUpdates:()=>Cs,getStakingStates:()=>Js,getTokenBalances:()=>Fo,getTonWallet:()=>cr,getToncoinAmountForTransfer:()=>Jo,getWalletBalance:()=>er,getWalletFromBip39Mnemonic:()=>hr,getWalletFromMnemonic:()=>yr,getWalletFromPrivateKey:()=>gr,getWalletInfo:()=>Xn,getWalletSeqno:()=>nr,getWalletStateInit:()=>sr,getWalletVersionInfos:()=>ar,getWalletVersions:()=>or,importNewWalletVersion:()=>br,insertMintlessPayload:()=>Mo,isActiveSmartContract:()=>Qn,isAddressInitialized:()=>$n,normalizeAddress:()=>Uo,oneCellFromBoc:()=>Ie,packPayloadToBoc:()=>Gs,parsePayloadBase64:()=>Ca,pickBestWallet:()=>rr,pickWalletByAddress:()=>ir,publicKeyToAddress:()=>Gn,rawSign:()=>wr,resolveTokenAddress:()=>be,resolveTokenWalletAddress:()=>Ae,resolveWalletVersion:()=>ur,sendSignedMessage:()=>vs,sendSignedMessages:()=>As,setupInactiveAccountsBalancePolling:()=>ji,setupPolling:()=>Mi,submitMultiTransfer:()=>ws,submitNftTransfers:()=>_s,submitStake:()=>js,submitStakingClaim:()=>$s,submitTransfer:()=>ns,submitTransferWithDiesel:()=>rs,submitUnstake:()=>qs,swapReplaceTransactions:()=>mi,validateDexSwapTransfers:()=>fi,validateMnemonic:()=>lr,waitUntilTransactionAppears:()=>Es});var a={};n.r(a),n.d(a,{checkApiAvailability:()=>dc,checkTransactionDraft:()=>ic,getAllTransactionSlice:()=>Qi,getTokenTransactionSlice:()=>$i,getWalletBalance:()=>Zi,getWalletFromBip39Mnemonic:()=>uc,setupPolling:()=>ec,submitTransfer:()=>cc});var o={};n.r(o),n.d(o,{connect:()=>gl,deactivate:()=>Il,disconnect:()=>bl,fetchDappMetadata:()=>Bl,initTonConnect:()=>yl,reconnect:()=>vl,sendTransaction:()=>El,signData:()=>Sl});var s={};n.r(s),n.d(s,{activateAccount:()=>Mc,buildTokenSlug:()=>Sa,cancelDappRequest:()=>wu,cancelPendingTransfer:()=>Wu,changePassword:()=>eu,checkApiAvailability:()=>fd,checkNftOwnership:()=>Vu,checkNftTransferDraft:()=>zu,checkStakeDraft:()=>nd,checkTransactionDraft:()=>Uu,checkUnstakeDraft:()=>rd,confirmDappRequest:()=>mu,confirmDappRequestConnect:()=>pu,createAccountWithSecondNetwork:()=>Gc,createLocalTransaction:()=>ju,createWallet:()=>Vc,deactivateAllAccounts:()=>Kc,deactivateCurrentAccount:()=>jc,deactivateDapp:()=>vc,decryptComment:()=>Ku,deleteAllDapps:()=>Dc,deleteDapp:()=>kc,fetchAccountConfigForDebugPurposesOnly:()=>pd,fetchAddress:()=>yu,fetchAllActivitySlice:()=>Ou,fetchBackendStakingState:()=>cd,fetchEstimateDiesel:()=>qu,fetchLedgerAccount:()=>Lc,fetchMnemonic:()=>du,fetchNfts:()=>Ju,fetchPriceHistory:()=>Ll,fetchPrivateKey:()=>uu,fetchSwaps:()=>kd,fetchToken:()=>Su,fetchTokenActivitySlice:()=>Pu,fetchTokenBalances:()=>Du,fetchTokenBalancesByAddress:()=>Tu,fetchTonWallet:()=>qc,generateMnemonic:()=>Hc,getActiveDapp:()=>gc,getAmountForTokenTransfer:()=>Bu,getBackendAuthToken:()=>md,getBaseCurrency:()=>$u,getCardsInfo:()=>gd,getContractInfo:()=>Au,getDapps:()=>Tc,getDappsByOrigin:()=>Bc,getLogs:()=>B.ao,getMnemonicWordList:()=>lu,getMoonpayOnrampUrl:()=>yd,getStakingHistory:()=>sd,getTokenBySlug:()=>Aa,getWalletBalance:()=>vu,getWalletInfo:()=>bu,getWalletSeqno:()=>hu,importLedgerWallet:()=>Zc,importMnemonic:()=>Qc,importNewWalletVersion:()=>br,initAccounts:()=>Fc,initDapps:()=>hc,initPolling:()=>Wd,initStaking:()=>ed,initSwap:()=>bd,initTransactions:()=>xu,isWalletInitialized:()=>gu,loadExploreSites:()=>Pc,ping:()=>wd,removeAccount:()=>tu,removeNetworkAccounts:()=>Xc,resetAccounts:()=>Yc,resolveDataPreloadPromise:()=>Xu,resolveTokenAddress:()=>ku,resolveTokenWalletAddress:()=>Iu,sendSignedTransferMessage:()=>Mu,setBaseCurrency:()=>Qu,setIsAppFocused:()=>vi,setupBackendPolling:()=>Kd,setupLongBackendPolling:()=>jd,startSseConnection:()=>Kl,submitNftTransfers:()=>Hu,submitStake:()=>ad,submitStakingClaim:()=>ud,submitTransfer:()=>Nu,submitUnstake:()=>od,subscribeNotifications:()=>Jl,swapBuild:()=>Td,swapBuildTransfer:()=>Ed,swapCexCreateTransaction:()=>Pd,swapCexEstimate:()=>_d,swapCexValidateAddress:()=>xd,swapEstimate:()=>Dd,swapGetAssets:()=>Bd,swapGetPairs:()=>Rd,swapGetTonCurrencies:()=>Cd,swapSubmit:()=>Sd,tryUpdateConfig:()=>zd,tryUpdatePrices:()=>qd,tryUpdateStakingCommonData:()=>id,tryUpdateSwapTokens:()=>Jd,tryUpdateTokens:()=>Ld,unsubscribeNotifications:()=>zl,updateAccountMemoryCache:()=>hd,validateMnemonic:()=>$c,verifyPassword:()=>fu,waitAndCreateTonPendingTransfer:()=>Fu,waitDataPreload:()=>Yu});var i=n(31481),c=1e6,u="[big.js] ",d=u+"Invalid ",l=d+"decimal places",f=d+"rounding mode",m=u+"Division by zero",p={},w=void 0,h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function y(t,e,n,r){var a=t.c;if(n===w&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(f);if(e<1)r=3===n&&(r||!!a[0])||0===e&&(1===n&&a[0]>=5||2===n&&(a[0]>5||5===a[0]&&(r||a[1]!==w))),a.length=1,r?(t.e=t.e-e+1,a[0]=1):a[0]=t.e=0;else if(e<a.length){if(r=1===n&&a[e]>=5||2===n&&(a[e]>5||5===a[e]&&(r||a[e+1]!==w||1&a[e-1]))||3===n&&(r||!!a[0]),a.length=e,r)for(;++a[--e]>9;)if(a[e]=0,0===e){++t.e,a.unshift(1);break}for(e=a.length;!a[--e];)a.pop()}return t}function g(t,e,n){var r=t.e,a=t.c.join(""),o=a.length;if(e)a=a.charAt(0)+(o>1?"."+a.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)a="0"+a;a="0."+a}else if(r>0)if(++r>o)for(r-=o;r--;)a+="0";else r<o&&(a=a.slice(0,r)+"."+a.slice(r));else o>1&&(a=a.charAt(0)+"."+a.slice(1));return t.s<0&&n?"-"+a:a}p.abs=function(){var t=new this.constructor(this);return t.s=1,t},p.cmp=function(t){var e,n=this,r=n.c,a=(t=new n.constructor(t)).c,o=n.s,s=t.s,i=n.e,c=t.e;if(!r[0]||!a[0])return r[0]?o:a[0]?-s:0;if(o!=s)return o;if(e=o<0,i!=c)return i>c^e?1:-1;for(s=(i=r.length)<(c=a.length)?i:c,o=-1;++o<s;)if(r[o]!=a[o])return r[o]>a[o]^e?1:-1;return i==c?0:i>c^e?1:-1},p.div=function(t){var e=this,n=e.constructor,r=e.c,a=(t=new n(t)).c,o=e.s==t.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>c)throw Error(l);if(!a[0])throw Error(m);if(!r[0])return t.s=o,t.c=[t.e=0],t;var i,u,d,f,p,h=a.slice(),g=i=a.length,v=r.length,A=r.slice(0,i),b=A.length,E=t,S=E.c=[],I=0,k=s+(E.e=e.e-t.e)+1;for(E.s=o,o=k<0?0:k,h.unshift(0);b++<i;)A.push(0);do{for(d=0;d<10;d++){if(i!=(b=A.length))f=i>b?1:-1;else for(p=-1,f=0;++p<i;)if(a[p]!=A[p]){f=a[p]>A[p]?1:-1;break}if(!(f<0))break;for(u=b==i?a:h;b;){if(A[--b]<u[b]){for(p=b;p&&!A[--p];)A[p]=9;--A[p],A[b]+=10}A[b]-=u[b]}for(;!A[0];)A.shift()}S[I++]=f?d:++d,A[0]&&f?A[b]=r[g]||0:A=[r[g]]}while((g++<v||A[0]!==w)&&o--);return S[0]||1==I||(S.shift(),E.e--,k--),I>k&&y(E,k,n.RM,A[0]!==w),E},p.eq=function(t){return 0===this.cmp(t)},p.gt=function(t){return this.cmp(t)>0},p.gte=function(t){return this.cmp(t)>-1},p.lt=function(t){return this.cmp(t)<0},p.lte=function(t){return this.cmp(t)<1},p.minus=p.sub=function(t){var e,n,r,a,o=this,s=o.constructor,i=o.s,c=(t=new s(t)).s;if(i!=c)return t.s=-c,o.plus(t);var u=o.c.slice(),d=o.e,l=t.c,f=t.e;if(!u[0]||!l[0])return l[0]?t.s=-c:u[0]?t=new s(o):t.s=1,t;if(i=d-f){for((a=i<0)?(i=-i,r=u):(f=d,r=l),r.reverse(),c=i;c--;)r.push(0);r.reverse()}else for(n=((a=u.length<l.length)?u:l).length,i=c=0;c<n;c++)if(u[c]!=l[c]){a=u[c]<l[c];break}if(a&&(r=u,u=l,l=r,t.s=-t.s),(c=(n=l.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>i;){if(u[--n]<l[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=l[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t},p.mod=function(t){var e,n=this,r=n.constructor,a=n.s,o=(t=new r(t)).s;if(!t.c[0])throw Error(m);return n.s=t.s=1,e=1==t.cmp(n),n.s=a,t.s=o,e?new r(n):(a=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=a,r.RM=o,this.minus(n.times(t)))},p.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},p.plus=p.add=function(t){var e,n,r,a=this,o=a.constructor;if(t=new o(t),a.s!=t.s)return t.s=-t.s,a.minus(t);var s=a.e,i=a.c,c=t.e,u=t.c;if(!i[0]||!u[0])return u[0]||(i[0]?t=new o(a):t.s=a.s),t;if(i=i.slice(),e=s-c){for(e>0?(c=s,r=u):(e=-e,r=i),r.reverse();e--;)r.push(0);r.reverse()}for(i.length-u.length<0&&(r=u,u=i,i=r),e=u.length,n=0;e;i[e]%=10)n=(i[--e]=i[e]+u[e]+n)/10|0;for(n&&(i.unshift(n),++c),e=i.length;0===i[--e];)i.pop();return t.c=i,t.e=c,t},p.pow=function(t){var e=this,n=new e.constructor("1"),r=n,a=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(d+"exponent");for(a&&(t=-t);1&t&&(r=r.times(e)),t>>=1;)e=e.times(e);return a?n.div(r):r},p.prec=function(t,e){if(t!==~~t||t<1||t>c)throw Error(d+"precision");return y(new this.constructor(this),t,e)},p.round=function(t,e){if(t===w)t=0;else if(t!==~~t||t<-c||t>c)throw Error(l);return y(new this.constructor(this),t+this.e+1,e)},p.sqrt=function(){var t,e,n,r=this,a=r.constructor,o=r.s,s=r.e,i=new a("0.5");if(!r.c[0])return new a(r);if(o<0)throw Error(u+"No square root");0===(o=Math.sqrt(r+""))||o===1/0?((e=r.c.join("")).length+s&1||(e+="0"),s=((s+1)/2|0)-(s<0||1&s),t=new a(((o=Math.sqrt(e))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):t=new a(o+""),s=t.e+(a.DP+=4);do{n=t,t=i.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return y(t,(a.DP-=4)+t.e+1,a.RM)},p.times=p.mul=function(t){var e,n=this,r=n.constructor,a=n.c,o=(t=new r(t)).c,s=a.length,i=o.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!a[0]||!o[0])return t.c=[t.e=0],t;for(t.e=c+u,s<i&&(e=a,a=o,o=e,u=s,s=i,i=u),e=new Array(u=s+i);u--;)e[u]=0;for(c=i;c--;){for(i=0,u=s+c;u>c;)i=e[u]+o[c]*a[u-c-1]+i,e[u--]=i%10,i=i/10|0;e[u]=i}for(i?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},p.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==w){if(t!==~~t||t<0||t>c)throw Error(l);for(n=y(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return g(n,!0,!!r)},p.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==w){if(t!==~~t||t<0||t>c)throw Error(l);for(t=t+(n=y(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return g(n,!1,!!r)},p[Symbol.for("nodejs.util.inspect.custom")]=p.toJSON=p.toString=function(){var t=this,e=t.constructor;return g(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},p.toNumber=function(){var t=Number(g(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(u+"Imprecise conversion");return t},p.toPrecision=function(t,e){var n=this,r=n.constructor,a=n.c[0];if(t!==w){if(t!==~~t||t<1||t>c)throw Error(d+"precision");for(n=y(new r(n),t,e);n.c.length<t;)n.c.push(0)}return g(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!a)},p.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(u+"valueOf disallowed");return g(t,t.e<=e.NE||t.e>=e.PE,!0)};var v=function t(){function e(n){var r=this;if(!(r instanceof e))return n===w?t():new e(n);if(n instanceof e)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(d+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,r,a;if(!h.test(e))throw Error(d+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),a=e.length,r=0;r<a&&"0"==e.charAt(r);)++r;if(r==a)t.c=[t.e=0];else{for(;a>0&&"0"==e.charAt(--a););for(t.e=n-r-1,t.c=[],n=0;r<=a;)t.c[n++]=+e.charAt(r++)}}(r,n)}r.constructor=e}return e.prototype=p,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}();v.RM=0,v.NE=-1e5,v.PE=1e5;const A=v(10);function b(t,e){return BigInt(v(t).mul(A.pow(null!=e?e:i.Tu9.decimals)).round().toString())}function E(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Tu9.decimals,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(t.toString()).div(A.pow(e)).round(e,n?v.roundHalfUp:void 0)}function S(t){return self.crypto.getRandomValues(new Uint8Array(t))}const I="bigint:";function k(t,e){return"string"==typeof e&&e.startsWith(I)?BigInt(e.slice(7)):e}function D(t,e){return t*i.X1K/b(e)}function T(t,e){return t*b(e)/i.X1K}var B=n(55029);const C=new Map;BigInt.prototype.toJSON=function(){return`${I}${this}`};var R=n(23174);function _(t){const e=t.split("-"),[n,r="mainnet"]=3===e.length?[e[0],e[2]]:e;return{id:Number(n),network:r}}function x(t){const{id:e,network:n}=t;return`${e}-${n}`}function P(t){return 1===t.length&&t[0].length===i.PcM}var O=n(98629),U=n(90749),N=n(88947),F=n.n(N),M=n(83507),W=n.n(M),K=n(48287).Buffer;const j=/^m(\/[0-9]+')+$/;function q(t){return t.replace("'","")}const L=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(t=>!!j.test(t)&&!t.split("/").slice(1).map(q).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:r,chainCode:a}=(t=>{const e=W()("sha512","ed25519 seed").update(K.from(t,"hex")).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(q).map((t=>parseInt(t,10))).reduce(((t,e)=>((t,e)=>{let{key:n,chainCode:r}=t;const a=K.allocUnsafe(4);a.writeUInt32BE(e,0);const o=K.concat([K.alloc(1,0),n,a]),s=W()("sha512",r).update(o).digest();return{key:s.slice(0,32),chainCode:s.slice(32)}})(t,e+n)),{key:r,chainCode:a})};var J=n(1307),z=n(94471),H=n(90746),V=n(3273),$=n(71902),Q=n(99579),G=n(79145),Z=n(28784),X=n(7941),Y=n(8387);function tt(t){for(const e of i.gs5){const{suffixes:n,baseFormat:r}=e;for(let a=n.length-1;a>=0;a--){const o=n[a];if(!t.endsWith(`.${o}`))continue;const s=t.slice(0,-o.length-1);if(r.test(s))return{base:s,zone:e}}}}function et(t,e){return t.reduce(((t,n)=>(t[n[e]]=n,t)),{})}function nt(t,e){return Object.keys(t).reduce(((n,r,a)=>(n[r]=e(t[r],r,a,t),n)),{})}function rt(t,e){return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}function at(t,e){const n=new Set(e.map(String));return rt(t,Object.keys(t).filter((t=>!n.has(t))))}function ot(t){return Object.keys(t).reduce(((e,n)=>{const r=n;return void 0!==t[r]&&(e[r]=t[r]),e}),{})}function st(t,e){const n=[];for(let r=t;r<e;)n.push(r++);return n}function it(t,e){return t.reduce(((t,n,r)=>(t[n]=Array.isArray(e)?e[r]:e,t)),{})}function ct(t,e){return t.map((t=>t[e]))}var ut=n(69780);class dt{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new dt(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,J.beginCell)().endCell()};return new dt((0,J.contractAddress)(n,r),r)}async getDomain(t){return(await t.get("get_domain",[])).stack.readString()}async getTelemintDomain(t){const e=(await t.get("get_domain_full",[])).stack.readString().replace(/\\u0000/g,".").replace(/\.$/,"").split(".");return e.reverse(),e.join(".")}async getNftData(t){const e=await t.get("get_nft_data",[]);return{index:e.stack.readBigNumber(),collectionAddress:e.stack.readAddress(),owner:e.stack.readAddressOpt()}}}var lt=n(97935),ft=n(61995),mt=n(84752),pt=n(86972),wt=n(67132),ht=n(48287).Buffer;function yt(t){return crypto.subtle.digest("SHA-256",t)}function gt(t){return ht.from(t).toString("hex")}function vt(t){return Uint8Array.from(ht.from(t,"hex"))}function At(t){return Uint8Array.from(ht.from(t,"base64"))}function bt(t){return i.aPk.some((e=>t.endsWith(e)))}let Et;function St(t){var e;return Et={...t,isDappSupported:i.hL1||i.UMQ||t.isElectron,isSseSupported:t.isElectron||i.UMQ&&!t.isNativeBottomSheet,apiHeaders:{"X-App-Origin":t.isElectron?"file://":null===(e=self)||void 0===e?void 0:e.origin},toncenterMainnetKey:t.isElectron?i.xlJ:i.Irq,toncenterTestnetKey:t.isElectron?i.Q$0:i.HGV},Et}function It(){return Et}const kt="m/44'/607'/0'",Dt=1000000000n,Tt=50000000n,Bt=18000000n,Ct=32100000n,Rt=8000000n,_t=3000000n,xt=1n,Pt=20000000n,Ot=100000000n,Ut=5000000n,Nt=1n,Ft=112,Mt={stakeNominators:Dt,unstakeNominators:Dt,stakeLiquid:Dt,unstakeLiquid:Dt,stakeJettonsForward:ft.xT.STAKE_JETTONS,stakeJettons:ft.xT.STAKE_JETTONS+Tt,unstakeJettons:ft.xT.UNSTAKE_JETTONS,claimJettons:ft.xT.JETTON_TRANSFER+ft.xT.SIMPLE_UPDATE_REQUEST},Wt="d",Kt="w",jt=5,qt=9,Lt=!0,Jt=1.05,zt=["simpleR1","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R2","W5"];let Ht=function(t){return t[t.MasterChain=-1]="MasterChain",t[t.BaseChain=0]="BaseChain",t}({});const Vt=Ht.BaseChain,$t=600,Qt=4,Gt=4,Zt=255;let Xt=function(t){return t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted",t}({}),Yt=function(t){return t[t.Transfer=260734629]="Transfer",t[t.TransferNotification=1935855772]="TransferNotification",t[t.InternalTransfer=395134233]="InternalTransfer",t[t.Excesses=3576854235]="Excesses",t[t.Burn=1499400124]="Burn",t[t.BurnNotification=2078119902]="BurnNotification",t}({}),te=function(t){return t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned",t}({}),ee=function(t){return t[t.RequestLoan=3863136613]="RequestLoan",t[t.LoanRepayment=3755778683]="LoanRepayment",t[t.Deposit=1205158801]="Deposit",t[t.Withdraw=832244956]="Withdraw",t[t.Withdrawal=175592284]="Withdrawal",t[t.DeployController=2994658477]="DeployController",t[t.Touch=1271382751]="Touch",t[t.Donate=1940913697]="Donate",t[t.DistributedAsset=3678112445]="DistributedAsset",t[t.Vote=1778069612]="Vote",t}({}),ne=function(t){return t[t.AddWhitelist=1918412443]="AddWhitelist",t}({}),re=function(t){return t[t.Withdraw=4096]="Withdraw",t[t.ChangeValidator=4097]="ChangeValidator",t}({}),ae=function(t){return t[t.ChangeRecord=1320284409]="ChangeRecord",t}({}),oe=function(t){return t[t.TokenBridgePaySwap=8]="TokenBridgePaySwap",t}({}),se=function(t){return t.Wallet="wallet",t.Staking="staking",t}({}),ie=function(t){return t.DnsNextResolver="dns_next_resolver",t.Wallet="wallet",t.Site="site",t.BagId="storage",t.Unknown="unknown",t}({});const ce={dns_next_resolver:"19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff",wallet:"e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b",site:"fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe",storage:"49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7"},ue={simpleR1:{name:"simpleR1",hash:"3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd",type:se.Wallet},simpleR2:{name:"simpleR2",hash:"672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df",type:se.Wallet},simpleR3:{name:"simpleR3",hash:"d95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52",type:se.Wallet},v2R1:{name:"v2R1",hash:"fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029",type:se.Wallet},v2R2:{name:"v2R2",hash:"b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983",type:se.Wallet},v3R1:{name:"v3R1",hash:"11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6",type:se.Wallet},v3R2:{name:"v3R2",hash:"df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14",type:se.Wallet},v4R1:{name:"v4R1",hash:"1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf",type:se.Wallet},v4R2:{name:"v4R2",hash:"5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1",type:se.Wallet},W5:{name:"W5",hash:"7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5",type:se.Wallet},highloadV2:{name:"highloadV2",hash:"fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e",type:se.Wallet},nominatorPool:{name:"nominatorPool",hash:"26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff",type:se.Staking},multisig:{name:"multisig",hash:"45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2",type:se.Wallet},multisigV2:{name:"multisigV2",hash:"eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97",type:se.Wallet},vesting:{name:"vesting",hash:"69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83",type:se.Wallet},multisigNew:{name:"multisigNew",hash:"7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f",type:se.Wallet},dedustPool:{name:"dedustPool",hash:"f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62",isSwapAllowed:!0},dedustVaultNative:{name:"dedustVaultNative",hash:"64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb",isSwapAllowed:!0},dedustVaultJetton:{name:"dedustVaultJetton",hash:"5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307",isSwapAllowed:!0},stonPtonWallet:{name:"stonPtonWallet",hash:"6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880",isSwapAllowed:!0},stonRouter:{name:"stonRouter",hash:"14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da",isSwapAllowed:!0},stonRouterV2_1:{name:"stonRouterV2_1",hash:"d61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd",isSwapAllowed:!0},stonPoolV2_1:{name:"stonPoolV2_1",hash:"16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c",isSwapAllowed:!0},stonRouterV2_2:{name:"stonRouterV2_2",hash:"094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102",isSwapAllowed:!0},stonPoolV2_2:{name:"stonPoolV2_2",hash:"11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4",isSwapAllowed:!0},stonPtonWalletV2:{name:"stonPtonWalletV2",hash:"2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6",isSwapAllowed:!0},megatonWtonMaster:{name:"megatonWtonMaster",hash:"4c9790d808ea4470614e021f76c40529efe2fbce8138da4284a29b5f1943ef19",isSwapAllowed:!0},megatonRouter:{name:"megatonRouter",hash:"5d5f0e3ed9602d1ba96006ead98cb5e9b53f49ce4a5cf675e06e4d440b7d267c",isSwapAllowed:!0}};function de(t){let{lt:e,hash:n}=t;return`${e}:${n}`}function le(t){const[e,n]=t.split(":");return{lt:Number(e),hash:n}}function fe(){return function(){let t=BigInt(0);for(const e of S(8)){const n=BigInt(e);t=(t<<BigInt(8))+n}return t}()}var me=n(77744),pe=n(48287).Buffer;const we=127;let he;const ye={simpleR1:z.m,simpleR2:H.t,simpleR3:V.A,v2R1:$.H,v2R2:Q.a,v3R1:G.G,v3R2:Z.N,v4R2:X.U,W5:Y.WalletContractV5R1};function ge(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return he||(he={mainnet:new me.x({endpoint:`${i._J8}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:i.Irq,headers:It().apiHeaders}),testnet:new me.x({endpoint:`${i.pyR}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:i.HGV,headers:It().apiHeaders})}),he[t]}function ve(t,e){const n=ye[e];if(!n)throw new Error("Unsupported wallet contract version");const r=pe.from(vt(t));return n.create({workchain:Vt,publicKey:r})}const Ae=(0,ut.A)((async(t,e,n)=>{const r=ge(t).open(new lt.Sr(J.Address.parse(n)));return ke(await r.getWalletAddress(J.Address.parse(e)),!0,t)})),be=(0,ut.A)((async(t,e)=>{const n=ge(t).open(new wt.K(J.Address.parse(e)));return ke((await n.getWalletData()).minter,!0,t)})),Ee=(0,ut.A)((async(t,e)=>{try{return vt((await ge(t).callGetMethod(J.Address.parse(e),"get_public_key")).stack.readBigNumber().toString(16).padStart(64,"0"))}catch(t){return void(0,B.SJ)("getWalletPublicKey",t)}})),Se=(0,ut.A)((async(t,e,n,r)=>{const a=ge(t),o=a.open(pt.Ml.createFromAddress(J.Address.parse(e))),s=await o.getWalletAddress(J.Address.parse(r),n);return a.open(mt.sH.createFromAddress(s))}));function Ie(t){return J.Cell.fromBoc(pe.from(t))}function ke(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(t=J.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:"testnet"===n})}function De(t){return"string"==typeof t&&(t=J.Address.parse(t)),t.toRawString()}function Te(t){const{queryId:e,tokenAmount:n,toAddress:r,responseAddress:a,forwardAmount:o,customPayload:s}=t;let i=t.forwardPayload,c=(new J.Builder).storeUint(Yt.Transfer,32).storeUint(e||fe(),64).storeCoins(n).storeAddress(J.Address.parse(r)).storeAddress(J.Address.parse(a)).storeMaybeRef(s).storeCoins(null!=o?o:0n);return i instanceof Uint8Array&&(i=Ce(i,Math.round(c.availableBits/8))),i?c="string"==typeof i?c.storeBit(!1).storeUint(0,32).storeBuffer(pe.from(i)):i instanceof Uint8Array?c.storeBit(!1).storeBuffer(pe.from(i)):c.storeBit(!0).storeRef(i):c.storeBit(!1),c.endCell()}function Be(t){const e=pe.from(t),n=new Uint8Array(e.length+4),r=pe.alloc(4);return r.writeUInt32BE(Xt.Comment),n.set(r,0),n.set(e,4),n}function Ce(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we;return pe.from(t).length<=e?t:Re(t)}function Re(t){var e;const n=we;let r;for(let e=Math.ceil(t.length/n)-1;e>=0;e--){const a=e*n,o=Math.min(n,t.length-a),s=pe.from(t.buffer,t.byteOffset+a,o),i=(new J.Builder).storeBuffer(s);r&&i.storeRef(r),r=i.endCell()}return null!==(e=r)&&void 0!==e?e:J.Cell.EMPTY}function _e(t){if(t.length>39+16*we)throw new Error("Input text is too long");return(new J.Builder).storeBuffer(pe.from(t.subarray(0,39))).storeRef(Re(t.subarray(39))).endCell()}function xe(t){return(new J.Builder).storeUint(ee.Deposit,32).storeUint(t||0,64).asCell()}function Pe(t,e){return ge(t).open(new wt.K(J.Address.parse(e))).getJettonBalance()}function Oe(t){try{if(J.Address.isRaw(t))return{address:J.Address.parseRaw(t),isRaw:!0,isValid:!0};if(J.Address.isFriendly(t))return{...J.Address.parseFriendly(t),isUserFriendly:!0,isValid:!0}}catch(t){}return{isValid:!1}}function Ue(t){return Boolean(Oe(t).isRaw)}function Ne(t,e,n){return(0,J.beginCell)().storeUint(ft.Hx.UNSTAKE_JETTONS,32).storeUint(null!=n?n:0,64).storeCoins(t).storeBit(null!=e&&e).endCell()}function Fe(t,e){const n=J.Dictionary.empty(J.Dictionary.Keys.Address(),J.Dictionary.Values.Bool());for(const e of t)n.set(J.Address.parse(e),!0);return(0,J.beginCell)().storeUint(ft.Hx.CLAIM_REWARDS,32).storeUint(null!=e?e:0,64).storeDict(n,J.Dictionary.Keys.Address(),J.Dictionary.Values.Bool()).endCell()}function Me(t){return We(t)?nt(t,(t=>t instanceof J.Dictionary?Me(it(t.keys(),t.values())):We(t)?Me(t):t)):t}function We(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype}let Ke,je=function(t){return t[t.IndexedDb=0]="IndexedDb",t[t.LocalStorage=1]="LocalStorage",t[t.ExtensionLocal=2]="ExtensionLocal",t[t.CapacitorStorage=3]="CapacitorStorage",t}({});function qe(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}function Le(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Je{constructor(t,e,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*";this.target=t,this.onUpdate=e,this.channel=n,this.shouldUseJson=r,this.targetOrigin=a,Le(this,"requestStates",new Map),Le(this,"requestStatesByCallback",new Map)}destroy(){}init(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.postMessage({type:"init",args:e})}request(t){const{requestStates:e,requestStatesByCallback:n}=this,r=qe(),a={type:"callMethod",messageId:r,...t},o={messageId:r},s=new Promise(((t,e)=>{Object.assign(o,{resolve:t,reject:e})}));if("function"==typeof a.args[a.args.length-1]){a.withCallback=!0;const t=a.args.pop();o.callback=t,n.set(t,o)}return e.set(r,o),s.catch((()=>{})).finally((()=>{e.delete(r),o.callback&&n.delete(o.callback)})),this.postMessage(a),s}cancelCallback(t){t.isCanceled=!0;const{messageId:e}=this.requestStatesByCallback.get(t)||{};e&&this.postMessage({type:"cancelProgress",messageId:e})}onMessage(t){if("string"==typeof t)try{t=JSON.parse(t,k)}catch(t){return void(0,B.SJ)("PostMessageConnector: Failed to parse message",t)}const{requestStates:e,channel:n}=this;if(t.channel===n)if("update"===t.type&&this.onUpdate&&this.onUpdate(t.update),"methodResponse"===t.type){const n=e.get(t.messageId);n&&(t.error?n.reject(t.error):n.resolve(t.response))}else if("methodCallback"===t.type){var r;const n=e.get(t.messageId);null==n||null===(r=n.callback)||void 0===r||r.call(n,...t.callbackArgs)}else if("unhandledError"===t.type){var a,o;const e=new Error(null===(a=t.error)||void 0===a?void 0:a.message);throw null!==(o=t.error)&&void 0!==o&&o.stack&&(e.stack=t.error.stack),e}}postMessage(t){t.channel=this.channel;let e=t;this.shouldUseJson&&(e=JSON.stringify(t)),"open"in this.target?this.target.postMessage(e,this.targetOrigin):this.target.postMessage(e)}}function ze(t){if(!Ke)throw new Error("API is not initialized");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ke.request({name:t,args:n})}let He={};const Ve={async getItem(t,e){if(It().isAndroidApp&&t in He&&!e)return He[t];const n=await ze("capacitorStorageGetItem",t),r=n?JSON.parse(n,k):void 0;return It().isAndroidApp&&(void 0===r?delete He[t]:He[t]=r),r},async setItem(t,e){await ze("capacitorStorageSetItem",t,JSON.stringify(e)),It().isAndroidApp&&(He[t]=e)},async removeItem(t){await ze("capacitorStorageRemoveItem",t),It().isAndroidApp&&delete He[t]},async clear(){await ze("capacitorStorageClear"),It().isAndroidApp&&(He={})},async getKeys(){const t=await ze("capacitorStorageKeys");return null==t?void 0:t.value}},$e=i.hL1?self.chrome.storage.local:void 0,Qe=$e&&{getItem:async t=>{var e;return null===(e=await $e.get(t))||void 0===e?void 0:e[t]},setItem:(t,e)=>$e.set({[t]:e}),removeItem:$e.remove.bind($e),clear:$e.clear.bind($e),getAll:$e.get.bind($e),setMany:$e.set.bind($e),getMany:$e.get.bind($e)}||{};var Ge=n(77783);const Ze=Ge.y$(i.vPi,i.rQT),Xe={getItem:t=>Ge.Jt(t,Ze),setItem:(t,e)=>Ge.hZ(t,e,Ze),removeItem:t=>Ge.yH(t,Ze),clear:()=>Ge.IU(Ze),getAll:async()=>{const t=await Ge.HP(Ze);return it(t,await Ge.qy(t,Ze))},getMany:async t=>it(t,await Ge.qy(t,Ze)),setMany:t=>Ge._y(Object.entries(t),Ze)};function Ye(t){return function(){return Promise.resolve(t(...arguments))}}const tn="object"==typeof localStorage?{getItem:Ye(localStorage.getItem),setItem:Ye(localStorage.setItem),removeItem:Ye(localStorage.removeItem),clear:Ye(localStorage.clear),getAll:Ye((()=>({...localStorage}))),getMany:Ye((t=>rt(localStorage,t))),setMany:Ye((t=>{Object.assign(localStorage,t)}))}:{getItem:t=>ze("localStorageGetItem",t),setItem:(t,e)=>ze("localStorageSetItem",t,e),removeItem:t=>ze("localStorageRemoveItem",t),clear:()=>ze("localStorageClear"),getAll:()=>ze("localStorageGetAll"),getMany:t=>ze("localStorageGetMany",t),setMany:t=>ze("localStorageSetMany",t)},en=i.hL1?Qe:i.UMQ?Ve:Xe,nn=(je.IndexedDb,je.LocalStorage,je.ExtensionLocal,je.CapacitorStorage,0);let rn;const an=new Promise((t=>{rn=t}));let on;function sn(){return on}function cn(t){on=t}async function un(t){const e=(await async function(){return Object.keys(await en.getItem("accounts")||{})}()).map((t=>_(t).id));return x({id:0===e.length?nn:Math.max(...e)+1,network:t})}async function dn(t,e){return(await mn(t))[e].address}async function ln(t){return(await mn(t)).ton}async function fn(t){return(await mn(t)).tron}function mn(t){return yn(t,"accounts")}function pn(){return en.getItem("accounts")}async function wn(t,e){return vn(t,"accounts",{...await mn(t),...e})}async function hn(t,e){return wn(t,{ton:{...await ln(t),...e}})}async function yn(t,e){var n;return null===(n=await en.getItem(e))||void 0===n?void 0:n[t]}async function gn(t,e){const n=await en.getItem(e);if(!n)return;const{[t]:r,...a}=n;await en.setItem(e,a)}async function vn(t,e,n){const r=await en.getItem(e);await en.setItem(e,{...r,[t]:n})}async function An(t,e){const n=await en.getItem(e);if(n){for(const e of Object.keys(n))_(e).network===t&&delete n[e];await en.setItem(e,n)}}async function bn(){const t=await En();if(t)return _(t).network}function En(){return en.getItem("currentAccountId")}const Sn=[{name:"PBKDF2"},!1,["deriveBits","deriveKey"]],In={name:"PBKDF2",iterations:1e5,hash:"SHA-256"},kn={name:"AES-GCM",length:256};function Dn(t){return U.JB(t.join(" "))}async function Tn(t,e){const n=t.join(","),r=crypto.getRandomValues(new Uint8Array(16)),a=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...Sn),o=await crypto.subtle.deriveKey({salt:r,...In},a,kn,!1,["encrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),i=(new TextEncoder).encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},o,i),u=Array.from(new Uint8Array(c)),d=btoa(String.fromCharCode(...u)),l=Array.from(s).map((t=>`00${t.toString(16)}`.slice(-2))).join("");return`${Array.from(r).map((t=>`00${t.toString(16)}`.slice(-2))).join("")}:${l}:${d}`}async function Bn(t,e){if(!t.includes(":"))return async function(t,e){const n=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",n),a=t.slice(0,24).match(/.{2}/g).map((t=>parseInt(t,16))),o={name:"AES-GCM",iv:new Uint8Array(a)},s=await crypto.subtle.importKey("raw",r,o,!1,["decrypt"]),i=atob(t.slice(24)),c=new Uint8Array(i.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),u=await crypto.subtle.decrypt(o,s,c);return(new TextDecoder).decode(u).split(",")}(t,e);const[n,r,a]=t.split(":"),o=new Uint8Array(n.match(/.{2}/g).map((t=>parseInt(t,16)))),s=new Uint8Array(r.match(/.{2}/g).map((t=>parseInt(t,16)))),i=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...Sn),c=await crypto.subtle.deriveKey({salt:o,...In},i,kn,!1,["decrypt"]),u=atob(a),d=new Uint8Array(u.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},c,d);return(new TextDecoder).decode(l).split(",")}async function Cn(t,e,n){try{const{mnemonicEncrypted:r}=n,a=await Bn(r,e);return r.includes(":")||await async function(t,e,n){try{const r=await Tn(e,n),a=await Bn(r,n).catch((()=>{}));if(!n||!a)return{error:R.QD.DebugError};await wn(t,{mnemonicEncrypted:r})}catch(t){console.error(t)}}(t,a,e),a}catch(t){return void console.error(t)}}var Rn=n(45232);const _n=128,xn={"wallet v1 r1":"simpleR1","wallet v1 r2":"simpleR2","wallet v1 r3":"simpleR3","wallet v2 r1":"v2R1","wallet v2 r2":"v2R2","wallet v3 r1":"v3R1","wallet v3 r2":"v3R2","wallet v4 r2":"v4R2","wallet v5 r1":"W5"};async function Pn(t){const{network:e,address:n,limit:r,toTimestamp:a,fromTimestamp:o,shouldIncludeFrom:s,shouldIncludeTo:c}=t,u=await Mn(e,"/transactions",{account:n,limit:r,start_utime:o&&Wn(o)+(s?0:1),end_utime:a&&Wn(a)-(c?0:1),sort:"desc"}),{transactions:d,address_book:l}=u;return d.length?d.map((t=>function(t,e,n){const{now:r,lt:a,hash:o,total_fees:s,description:{compute_ph:{exit_code:c}}}=e,u=de({lt:a,hash:o}),d=1e3*r,l=!!e.in_msg.source,f=e.in_msg.hash,m=l?[e.in_msg]:e.out_msgs;if(!m.length)return[];const p=BigInt(s)/BigInt(m.length);return m.map(((e,r)=>{const{source:a,destination:o,value:s,fwd_fee:w}=e,h=n[a].user_friendly,y=n[o].user_friendly,g=ke(l?a:o,!0,t),v=p+BigInt(null!=w?w:0);return ot({txId:m.length>1?`${u}:${r+1}`:u,timestamp:d,isIncoming:l,fromAddress:h,toAddress:y,amount:l?BigInt(s):-BigInt(s),slug:i.Tu9.slug,fee:v,inMsgHash:f,normalizedAddress:g,shouldHide:!!c||void 0,extraData:{body:Un(e)}})}))}(e,t,l))).flat():[]}async function On(t,e){const{transactions:n}=await Mn(t,"/transactions",{account:e,limit:1,sort:"desc"});if(!n.length)return;const{lt:r,hash:a}=n[0];return de({lt:r,hash:a})}function Un(t){if(t.message_content)return t.message_content.body}async function Nn(t,e){const n=function(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}(e,_n);return(await Promise.all(n.map((e=>Mn(t,"/addressBook",{address:e}))))).reduce(((t,e)=>Object.assign(t,e)),{})}async function Fn(t,e){return(await Mn(t,"/addressBook",{address:e})).address_book[e]}function Mn(t,e,n){const{apiHeaders:r,toncenterMainnetKey:a,toncenterTestnetKey:o}=It(),s=`${"testnet"===t?i.pyR:i._J8}/api/v3${e}`,c="testnet"===t?o:a;return(0,Rn.x6)(s,n,{headers:{...c&&{"X-Api-Key":c},...r}})}function Wn(t){return Math.floor(t/1e3)}var Kn=n(68354);const jn=500,qn=100;let Ln;function Jn(t){if(!Ln){const t={...It().apiHeaders,"Content-Type":"application/json"};Ln={mainnet:new Kn.jI(new Kn.Qq({baseUrl:i.lHX,baseApiParams:{headers:t},customFetch:Rn.J5})),testnet:new Kn.jI(new Kn.Qq({baseUrl:i.SKs,baseApiParams:{headers:t},customFetch:Rn.J5}))}}return Ln[t]}async function zn(t,e){return(await Jn(t).accounts.getAccountJettonsBalances(e,{supported_extensions:["custom_payload"]})).balances}async function Hn(t,e){return(await Jn(t).nft.getNftItemsByAddresses({account_ids:e})).nft_items}var Vn=n(48287).Buffer;const $n=(0,ut.A)((async(t,e)=>(await Xn(t,e)).isInitialized)),Qn=(0,ut.A)((async(t,e)=>{const{isInitialized:n,isWallet:r}=await Xn(t,e);return n?!r:void 0}),(t=>void 0!==t));function Gn(t,e,n){return ke(Zn(t,e,n).address,!1,t)}function Zn(t,e,n){"string"==typeof e&&(e=vt(e));const r=ge(t),a=ye[n];return r.open(a.create({publicKey:Vn.from(e),workchain:Vt}))}async function Xn(t,e){const n="string"==typeof e?e:ke(e.address,void 0,t),{account_state:r,wallet:a,seqno:o=0,balance:s,last_transaction_id:{lt:i,hash:c}}=await ge(t).getWalletInfo(n);return{isInitialized:"active"===r,isWallet:a,seqno:o,balance:BigInt(s||"0"),lastTxId:"0"===i?void 0:de({lt:i,hash:c})}}async function Yn(t,e){const n=await ge(t).getAddressInfo(e),{code:r,state:a}=n,o=Vn.from(await yt(At(r))).toString("hex"),s=Object.values(ue).find((t=>t.hash===o)),i=r&&J.Cell.fromBase64(r).hash().toString("hex");return{isInitialized:"active"===a,isWallet:"active"===a?"wallet"===(null==s?void 0:s.type):void 0,isSwapAllowed:null==s?void 0:s.isSwapAllowed,contractInfo:s,codeHash:i}}async function tr(t){const{network:e}=_(t),{address:n}=await ln(t);return er(e,n)}async function er(t,e){return(await Xn(t,e)).balance}async function nr(t,e){const{seqno:n}=await Xn(t,e);return n||0}async function rr(t,e){const n=await ar(t,e),r=n.filter((t=>{let{version:e}=t;return e===i.RoE}))[0];if(r.lastTxId)return r;const a=n.reduce(((t,e)=>{var n;return e.balance>(null!==(n=null==t?void 0:t.balance)&&void 0!==n?n:0n)?e:t}),void 0);if(a)return a;const o=function(t,e){let n=t.length;for(;n--;)if(e(t[n]))return t[n]}(n,(t=>{let{lastTxId:e}=t;return!!e}));if(o)return o;const s=n.find((t=>{let{version:e}=t;return"v4R2"===e}));return(await zn(t,s.address)).length>0?s:r}async function ar(t,e){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt).map((n=>{const r=Zn(t,e,n);return{wallet:r,address:ke(r.address,!1,t),version:n}})),r=await async function(t,e){const n=await async function(t,e){const{wallets:n}=await Mn(t,"/walletStates",{address:e.join(",")}),r=Object.fromEntries(e.map((t=>[De(t).toUpperCase(),t])));for(const t of n)t.address=r[t.address];return et(n,"address")}(t,e);return nt(n,(t=>({address:ke(t.address,!1),version:xn[t.wallet_type],balance:BigInt(t.balance),isInitialized:"active"===t.status,lastTxId:t.last_transaction_lt&&t.last_transaction_hash?de({lt:t.last_transaction_lt,hash:t.last_transaction_hash}):void 0})))}(t,ct(n,"address"));return n.map((t=>{var e;return{...null!==(e=r[t.address])&&void 0!==e?e:{balance:0n,isInitialized:!1},...t}}))}function or(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt).map((n=>{const r=Zn(t,e,n);return{wallet:r,address:ke(r.address,!1,t),version:n}}))}async function sr(t,e){const n=await cr(t,e);return(0,J.beginCell)().storeWritable((0,J.storeStateInit)(n.init)).endCell()}function ir(t,e,n){return n=ke(n,!1,t),or(t,e).find((t=>t.address===n))}async function cr(t,e){const{network:n}=_(t),{publicKey:r,version:a}=null!=e?e:await ln(t);return Zn(n,vt(r),a)}function ur(t){var e;return null===(e=Object.entries(ye).find((e=>{let[,n]=e;return t instanceof n})))||void 0===e?void 0:e[0]}function dr(){return O.generateMnemonic()}function lr(t){return O.validateMnemonic(t)}function fr(t){return F().sign.keyPair.fromSeed(vt(t))}async function mr(t,e,n){try{const{secretKey:r}=await pr(t,e,n)||{};return r}catch(t){return void console.error(t)}}async function pr(t,e,n){try{var r;n=null!==(r=n)&&void 0!==r?r:await mn(t);const a=await Cn(t,e,n);if(!a)return;return P(a)?fr(a[0]):"bip39"===n.type?Ar(a):await O.mnemonicToKeyPair(a)}catch(t){return void(0,B.SJ)("fetchKeyPair",t)}}async function wr(t,e,n){const r=await mr(t,e);if(r)return gt(F().sign.detached(vt(n),r))}function hr(t,e,n){const{publicKey:r}=Ar(e);return vr(r,t,n)}async function yr(t,e,n){const{publicKey:r}=await O.mnemonicToKeyPair(t);return vr(r,e,n)}function gr(t,e,n){const{publicKey:r}=fr(t);return vr(r,e,n)}async function vr(t,e,n){let r,a;n?r=Zn(e,t,n):({wallet:r,version:n,lastTxId:a}=await rr(e,t));const o=ke(r.address,!1,e);return{type:"ton",publicKey:gt(t),address:o,version:n,index:0,lastTxId:a}}function Ar(t){const e=U.kw(t.join(" ")),{key:n}=L(kt,e.toString("hex"));return F().sign.keyPair.fromSeed(n)}async function br(t,e){const{network:n}=_(t),r=await mn(t),a=Gn(n,vt(r.ton.publicKey),e),o=await un(n),s={...r,ton:{type:"ton",address:a,publicKey:r.ton.publicKey,version:e,index:r.ton.index}},i="ledger"===r.type?{index:r.ton.index,driver:r.driver}:void 0;return await vn(o,"accounts",s),{accountId:o,address:a,ledger:i}}var Er=n(53528),Sr=n(62386),Ir=n(65871),kr=n(66902),Dr=n(56906),Tr=n(97590);const Br="https://ipfs.io/ipfs/";function Cr(t){t=Rr(t);const e=`${i.HUv}/utils/download-json?url=${t}`;return i.UMQ?_r(e):_r(t).catch((()=>_r(e)))}function Rr(t){return t.replace("ipfs://",Br)}async function _r(t){const e=await fetch(t);if(!e.ok)throw Error(`Http error ${e.status}`);return e.json()}const xr=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,Pr=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,Or=/[\n\r]/g,Ur=/[\u0702\u0701\u2024\u00B7\u02D9\u0971\u1427\u18DF\u22C5\u2027]/g,Nr=/[\u200B-\u200D\uFEFF\u2063]/g,Fr=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/,Mr=new Map([[" "," "],["0","⓿"],["1","11⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠"],["2","⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ"],["3","³ȝჳⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ"],["4","𝟰𝟺𝟦𝟒➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋"],["5","𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌"],["6","Ⳓ🄇𝟼Ꮾ𝟲𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍"],["7","𝟕𝟟𝟩𝟳𝟽🄈⓻𐓒➐７⁷⑦₇❼➆⑺⒎"],["8","𐌚🄉➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏"],["9","൭Ꝯ𝝑𝞋𝟅🄊𝟡𝟵Ⳋ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐"],["10","⓾❿➉➓🔟⑩⑽⒑"],["11","⑪⑾⒒⓫"],["12","⑫⑿⒓⓬"],["13","⑬⒀⒔⓭"],["14","⑭⒁⒕⓮"],["15","⑮⒂⒖⓯"],["16","⑯⒃⒗⓰"],["17","⑰⒄⒘⓱"],["18","⑱⒅⒙⓲"],["19","⑲⒆⒚⓳"],["20","⑳⒇⒛⓴"],["ae","æ"],["OE","Œ"],["oe","œ"],["pi","ᒆ"],["Nj","ǋ"],["AE","ᴁ"],["A","𝑨𝔄ᗄ𝖠𝗔ꓯ𝞐🄐🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼ᗩ"],["a","∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶"],["B","🄑𝔙𝖁ꞵ𝛃𝛽𝜷𝝱𝞫Ᏸ𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧"],["b","ꮟᏏ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ"],["C","ꞆႠ℃🄒ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ"],["c","🝌ｃⅽ𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌ᴄϲⲥсꮯ𐐽ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ"],["D","🄓Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩"],["d","Ꮷ𝔡𝖉ᑯꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ"],["E","£ᙓ⋿∃ⴺꓱ𝐄𝐸𝔈𝕰𝖤𝘌𝙴𝛦𝜠ꭼ🄔🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪"],["e","əәⅇꬲꞓ⋴𝛆𝛜𝜀𝜖𝜺𝝐𝝴𝞊𝞮𝟄ⲉꮛ𐐩ꞒⲈ⍷𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ"],["F","ᖵꘘꓞꟻᖷ𝐅𝐹𝑭𝔽𝕱𝖥𝗙𝙁𝙵𝟊℉🄕🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ"],["f","𝐟ᵮ𝑓𝒇𝒻𝓯𝔣𝕗𝖿𝗳𝙛𝚏ꬵꞙẝ𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧"],["G","𝗚𝘎🄖ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁"],["g","ᶃᶢⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐"],["H","Ἤ🄗𝆦🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭"],["h","ꞕ৸𝕳ꚕᏲℏӊԊꜧᏂҺ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ"],["I","ⲒἿ🄘🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮"],["i","⍳ℹⅈ𝑖𝒊𝒾ı𝚤ɩιιͺ𝛊𝜄𝜾𝞲ꙇӏꭵᎥⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤"],["J","𝐉𝐽𝑱𝒥𝓙𝔍𝕁𝕵𝖩𝗝𝘑𝙅𝙹ꞲͿꓙ🄙🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯"],["j","𝚥ꭻⅉⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣"],["K","𝐊ꝄꝀ𝐾𝑲𝓚𝕶𝖪𝙺𝚱𝝟🄚𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰"],["k","ⓚꝁｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀"],["L","𝐋𝐿𝔏𝕃𝕷𝖫𝗟𝘓𝙇ﴼ🄛🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱"],["l","ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲"],["M","ꮇ🄜🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲"],["m","₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗"],["N","𝇙𝇚𝇜🄝𝆧𝙉🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳"],["n","ոռח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩"],["O","𝜽⭘🔿ꭴ⭕⏺🄁🄀Ꭴ𝚯𝚹𝛩𝛳𝜣𝜭𝝝𝝧𝞗𝞡ⴱᎾᏫ⍬𝞱𝝷𝛉𝟎𝜃θ𝟘𝑂𝑶𝓞𝔒𝕆𝕺𝗢𝘖𝙊𝛰㈇ꄲ🄞🔾🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ"],["o","ంಂംං૦௦۵ℴ𝑜𝒐𝖔ꬽ𝝄𝛔𝜎𝝈𝞂ჿ𝚘০୦ዐ𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ"],["P","🄟🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱"],["p","ⲣҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀"],["Q","🅀🄠Ꝗ🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶"],["q","𝓆ꝗ𝗾ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦"],["R","℞🄡℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ"],["r","𝚛ꭇᣴℾ𝚪𝛤𝜞𝝘𝞒ⲄГᎱᒥꭈⲅꮁⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ"],["S","🅂🄪🄢ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ"],["s","ᣵⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸"],["T","🅃🄣七ፒ𝜯🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ"],["t","ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ"],["U","🅄Џ🄤ሀꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺"],["u","𝘂𝘶𝙪𝚞ꞟꭎꭒ𝛖𝜐𝝊𝞄𝞾𐓶ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ"],["V","𝑉𝒱𝕍𝗩🄥🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥"],["v","∨⌄⋁ⅴ𝐯𝑣𝒗𝓋𝔳𝕧𝖛𝗏ꮩሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿"],["W","𝐖𝑊𝓦𝔚𝕎𝖂𝖶𝗪𝙒𝚆🄦🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼"],["w","𝐰ꝡ𝑤𝒘𝓌𝔀𝔴𝕨𝖜𝗐𝘄𝘸𝙬𝚠աẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏"],["X","ꭓꭕ𝛘𝜒𝝌𝞆𝟀ⲭ🞨𝑿𝛸🄧🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽"],["x","᙮ⅹ𝑥𝒙𝓍𝔵𝕩𝖝𝗑𝘅ᕁᕽⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁"],["Y","𝒴🄨𝓨𝔜𝖄𝖸𝘠𝙔𝚼𝛶𝝪𝞤УᎩᎽⲨ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾"],["y","𝐲𝑦𝒚𝓎𝔂𝔶𝕪𝖞𝗒𝘆𝘺𝙮𝚢ʏỿꭚγℽ𝛄𝛾𝜸𝝲𝞬🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ"],["Z","🄩🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿"],["z","𝑍𝒁𝒵𝓩𝖹𝙕𝚉𝚭𝛧𝜡𝝛𝞕ᵶꮓ𝐳𝑧𝒛𝓏𝔃𝔷𝕫𝖟𝗓𝘇𝘻𝙯𝚣ⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ"]]),Wr=new Map,Kr=new Map;for(const[t,e]of Mr.entries()){Wr.set(t,[...e]);for(const n of e)Kr.set(n,t)}function jr(t){if(function(t){return Fr.test(t)}(t))return t;let e="";for(const n of function(t){return t.replace(Pr,"").replace(xr,"$1").replace(Or," ").replace(Ur,".").replace(Nr,"")}(t))e+=Kr.get(n)||n;return e}const qr=400;async function Lr(t,e,n){const{authToken:r,isAllowBadRequest:a,method:o,shouldRetry:s,retries:c,timeouts:u}=null!=n?n:{},d=new URL(`${i.HUv}${t}`),l={method:null!=o?o:"POST",headers:{"Content-Type":"application/json",...zr(),...r&&{"X-Auth-Token":r}},body:JSON.stringify(e)},f=s?await(0,Rn.J5)(d,l,{retries:c,timeouts:u,shouldSkipRetryFn:t=>!(null!=t&&t.includes("signal is aborted"))}):await fetch(d.toString(),l);return await(0,Rn.EQ)(f,a?[qr]:void 0),f.json()}function Jr(t,e,n){const r=new URL(`${i.HUv}${t}`);return(0,Rn.x6)(r,e,{headers:{...n,...zr()}})}function zr(){return{...It().apiHeaders,"X-App-Version":i.hl5,"X-App-Env":i.Guj}}let Hr={},Vr=[],$r=new Set,Qr=new Set;async function Gr(){try{const t=await Jr("/known-addresses");Hr=t.knownAddresses,Vr=t.scamMarkers.map((t=>new RegExp(t,"i"))),$r=new Set(t.trustedSites),Qr=new Set(t.trustedCollections)}catch(t){(0,B.SJ)("tryUpdateKnownAddresses",t)}}function Zr(){return Hr}function Xr(t){return Hr[t]}function Yr(t){const e=jr(t).matchAll(i.kNZ);for(const t of e){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.host;if(e&&(r=e,!$r.has(r.toLowerCase())))return!0}var r;return!1}var ta=n(64143);const ea=new Set(["AbortError","BulkError","UnknownError"]);async function na(t){try{return await t()}catch(t){if(ea.has(null==t?void 0:t.name))return;throw t}}class ra{constructor(t){var e,n,r;e=this,r=void 0,(n=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(n="table"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.table=t}all(){return this.table.toArray()}find(t){return na((()=>this.table.where(t).toArray()))}put(t){return na((()=>this.table.put(t)))}bulkPut(t){return na((()=>this.table.bulkPut(t)))}update(t,e){return na((()=>this.table.update(t,e)))}delete(t){return na((()=>this.table.delete(t)))}deleteWhere(t){return na((()=>this.table.where(t).delete()))}clear(){return na((()=>this.table.clear()))}}function aa(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class oa extends ta.Ay{constructor(){super("tables"),aa(this,"nfts",void 0),aa(this,"tokens",void 0),this.version(1).stores({nfts:"[accountId+address], accountId, address, collectionAddress"}),this.version(2).stores({sseConnections:"&clientId"}),this.version(3).stores({tokens:"tokenAddress, chain, &slug"})}}const sa=new oa,ia=new ra(sa.nfts),ca=new ra(sa.tokens);let ua;const da={},la={baseCurrency:i.wOb,bySlug:{}};function fa(t,e){var n;return null!==(n=da[`${t}:${e}`])&&void 0!==n?n:{}}function ma(t,e,n){const r=`${t}:${e}`;da[r]={...da[r],...n}}function pa(){return ua}function wa(){return la}const ha={...i.lfO};async function ya(t,e,n){const r=[];for(let e=0;e<t.length;e++){const n=t[e],a=ga(n);n.slug in ha||r.push(a),ha[n.slug]=a,t[e]=a}await ca.bulkPut(t),(n||r.length)&&e&&Ea(e)}function ga(t){return{...ha[t.slug]||{},...t}}function va(){return ha}function Aa(t){return va()[t]}function ba(t){return Aa(Sa("ton",t))}function Ea(t){const e=va(),n=wa(),r=Object.values(e).map((t=>{var e;return[t.slug,{...t,quote:null!==(e=n.bySlug[t.slug])&&void 0!==e?e:{slug:t.slug,price:0,priceUsd:0,percentChange24h:0}}]}));t({type:"updateTokens",tokens:Object.fromEntries(r),baseCurrency:n.baseCurrency})}function Sa(t,e){return`${t}-${e.replace(/[^a-z\d]/gi,"").slice(0,10)}`.toLowerCase()}var Ia=n(48287).Buffer;const ka=1;const Da={parse:t=>{const e=Ia.from(""),n=(t,e,r)=>{if(r&&0!==t.loadUint(8))throw new Error("Only snake format is supported");return e=Ia.concat([e,t.loadBuffer(t.remainingBits/8)]),1===t.remainingRefs&&(e=n(t.loadRef().beginParse(),e,!1)),e};return n(t.loadRef().beginParse(),e,!0)},serialize:()=>{}},Ta={uri:"ascii",name:"utf8",description:"utf8",image:"ascii",symbol:"utf8",decimals:"utf8",custom_payload_api_uri:"ascii"};async function Ba(t){return rt(await Cr(t),["name","description","symbol","decimals","image","image_data","custom_payload_api_uri"])}async function Ca(t,e,n){var r;const a=_a(n),o={type:"unknown",base64:n};return a&&null!==(r=await Ra(t,e,a,!0))&&void 0!==r?r:o}async function Ra(t,e,n,r,a){let o;try{if(o=n.loadUint(32),o===Xt.Comment){return{type:"comment",comment:Oa(n).toString("utf-8")}}if(o===Xt.Encrypted){return{type:"encrypted-comment",encryptedComment:Oa(n).toString("base64")}}if(n.remainingBits<64)return;const a=n.loadUintBig(64);switch(o){case Yt.Transfer:{var s;const r=Sa("ton",await be(t,e).catch((()=>""))),o=n.loadCoins(),i=n.loadAddress(),c=n.loadMaybeAddress();if(!c)return{type:"tokens:transfer-non-standard",queryId:a,destination:ke(i,void 0,t),amount:o,slug:r};const u=n.loadMaybeRef(),d=n.loadCoins();let l,f=n.loadMaybeRef();if(!f&&n.remainingBits){const t=(new Ir.Builder).storeBits(n.loadBits(n.remainingBits));st(0,n.remainingRefs).forEach((()=>{t.storeRef(n.loadRef())})),f=t.endCell()}if(f){const t=f.beginParse();t.remainingBits>32&&(l=t.loadUint(32))}return{type:"tokens:transfer",queryId:a,amount:o,destination:ke(i,void 0,t),responseDestination:ke(c,void 0,t),customPayload:null==u?void 0:u.toBoc().toString("base64"),forwardAmount:d,forwardPayload:null===(s=f)||void 0===s?void 0:s.toBoc().toString("base64"),forwardPayloadOpCode:l,slug:r}}case te.TransferOwnership:{var c;const o=n.loadAddress(),s=n.loadAddress(),i=n.loadMaybeRef(),u=n.loadCoins(),d=Pa(n),l=d?xa(d.asSlice()):void 0;let f;if(r){const[n]=await Hn(t,[e]);n&&(f=Na(t,n))}return{type:"nft:transfer",queryId:a,newOwner:ke(o,void 0,t),responseDestination:ke(s,void 0,t),customPayload:null==i?void 0:i.toBoc().toString("base64"),forwardAmount:u,forwardPayload:null==d?void 0:d.toBoc().toString("base64"),nftAddress:e,nftName:null===(c=f)||void 0===c?void 0:c.name,nft:f,comment:l}}case te.OwnershipAssigned:{const o=n.loadAddress(),s=Pa(n),i=s?xa(s.asSlice()):void 0;let c;if(r){const[n]=await Hn(t,[e]);n&&(c=Na(t,n))}return{type:"nft:ownership-assigned",queryId:a,prevOwner:ke(o,void 0,t),comment:i,nftAddress:e,nft:c}}case Yt.Burn:{const r=await be(t,e),o=Sa("ton",r),s=n.loadCoins(),c=n.loadAddress(),u=n.loadMaybeRef(),d=r===i.Kzb;return{type:"tokens:burn",queryId:a,amount:s,address:ke(c,void 0,t),customPayload:null==u?void 0:u.toBoc().toString("base64"),slug:o,isLiquidUnstakeRequest:d}}case ee.DistributedAsset:return{type:"liquid-staking:withdrawal-nft",queryId:a};case ee.Withdrawal:return{type:"liquid-staking:withdrawal",queryId:a};case ee.Deposit:{let t;return n.remainingBits>0&&(t=n.loadUintBig(64)),{type:"liquid-staking:deposit",queryId:a,appId:t}}case ne.AddWhitelist:{const e=n.loadAddress();return{type:"vesting:add-whitelist",queryId:a,address:r?await Fn(t,e.toRawString()):""}}case re.Withdraw:return{type:"single-nominator:withdraw",queryId:a,amount:n.loadCoins()};case re.ChangeValidator:{const e=n.loadAddress();return{type:"single-nominator:change-validator",queryId:a,address:r?await Fn(t,e.toRawString()):""}}case ee.Vote:{const t=n.loadAddress(),e=n.loadUint(48),r=n.loadBit(),o=n.loadBit();return{type:"liquid-staking:vote",queryId:a,votingAddress:ke(t,!0),expirationDate:e,vote:r,needConfirmation:o}}case ae.ChangeRecord:{var u,d;const e=n.loadBuffer(32).toString("hex"),o=null!==(u=null===(d=Object.entries(ce).find((t=>{let[,n]=t;return e===n})))||void 0===d?void 0:d[0])&&void 0!==u?u:"unknown",s=n.loadAddress(),c=r?await async function(t,e){"string"==typeof e&&(e=J.Address.parse(e));const n=ge(t).open(new dt(e)),r=(a=ke((await n.getNftData()).collectionAddress,!0),i.gs5.find((t=>t.resolver===a)));var a;return`${null!=r&&r.isTelemint?await n.getTelemintDomain():await n.getDomain()}.${null==r?void 0:r.suffixes[0]}`}(t,s):"";if("wallet"===o){if(n.remainingRefs>0){const e=n.loadRef().beginParse();n.endParse();const o=e.loadAddress(),s=e.loadUint(8);return{type:"dns:change-record",queryId:a,record:{type:"wallet",value:r?await Fn(t,o.toRawString()):"",flags:s},domain:c}}return{type:"dns:change-record",queryId:a,record:{type:"wallet",value:void 0},domain:c}}if(n.remainingRefs>0){const t=n.loadRef();return{type:"dns:change-record",queryId:a,record:"unknown"===o?{type:"unknown",key:e,value:t.toBoc().toString("base64")}:{type:o,value:t.toBoc().toString("base64")},domain:c}}return{type:"dns:change-record",queryId:a,record:"unknown"===o?{type:"unknown",key:e}:{type:o},domain:c}}case oe.TokenBridgePaySwap:return{type:"token-bridge:pay-swap",queryId:a,swapId:n.loadBuffer(32).toString("hex")};case ft.Hx.UNSTAKE_JETTONS:return{type:"jetton-staking:unstake",queryId:a,amount:n.loadCoins(),isForce:n.loadBoolean()}}}catch(t){if(i.Oig){var l;const e=a&&`${a.txId} ${new Date(a.timestamp)}`,n=`0x${null===(l=o)||void 0===l?void 0:l.toString(16).padStart(8,"0")}`;(0,B.SJ)("parsePayload",n,e,"\n",t)}}}function _a(t){let e;e="string"==typeof t?Ia.from(t,"base64"):t instanceof Ia?t:Ia.from(t);try{return kr.Cell.fromBoc(e)[0].beginParse()}catch(t){if("Invalid magic"!==(null==t?void 0:t.message))throw t}return new Dr.Slice(new Er.BitReader(new Sr.BitString(e,0,8*e.length)),[])}function xa(t){if(!(t.remainingBits<32)&&t.loadUint(32)===Xt.Comment&&(t.remainingBits||t.remainingRefs))return Oa(t).toString("utf-8")}function Pa(t){var e;let n=t.loadBit()&&t.remainingRefs?t.loadRef():void 0;if(!n&&t.remainingBits){const e=(new Ir.Builder).storeBits(t.loadBits(t.remainingBits));st(0,t.remainingRefs).forEach((()=>{e.storeRef(t.loadRef())})),n=e.endCell()}return null!==(e=n)&&void 0!==e?e:void 0}function Oa(t){let e=Ia.alloc(0);for(;t.remainingBits>=8&&(e=Ia.concat([e,t.loadBuffer(t.remainingBits/8)]),t.remainingRefs);)t=t.loadRef().beginParse();return e}function Ua(t){const{image:e,id:n}=t;let r,a,o={};var s,i,c;(e&&(o.imageUrl=e),void 0!==n&&(o.mtwCardId=n),"attributes"in t&&Array.isArray(t.attributes)&&t.attributes.length&&(r=null===(s=t.attributes.find((t=>"Card Type"===t.trait_type)))||void 0===s?void 0:s.value.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),r))&&(a=null===(i=t.attributes.find((t=>"Text"===t.trait_type)))||void 0===i?void 0:i.value.toLowerCase(),o.mtwCardType=r,"standard"===r&&(o.mtwCardBorderShineType=null===(c=t.attributes.find((t=>"Shine"===t.trait_type)))||void 0===c?void 0:c.value.toLowerCase()),o.mtwCardTextType="dark"===a||"silver"===r?"dark":"light",o=ot(o));return Object.keys(o).length?o:void 0}function Na(t,e){if(e.metadata)try{const{address:n,index:r,collection:a,metadata:o,previews:s,sale:c,trust:u,owner:d}=e,{name:l,image:f,description:m,render_type:p,lottie:w}=o,h=a&&ke(a.address,!0,t);let y=!1;if(!h||!function(t){return Qr.has(t)}(h))for(const t of[l,m].filter(Boolean))Yr(t)&&(y=!0);const g="whitelist"===u,v=y||"SCAM"===m||"blacklist"===u,A="hidden"===p||v,b=s.find((t=>"1500x1500"===t.resolution)).url,E=null==f?void 0:f.startsWith(i._Qu),S={...g&&{lottie:w},...h===i.qL&&Ua(o),...E&&{fragmentUrl:f.replace(i.Pjb,"https://$1")}};return ot({index:r,name:l,ownerAddress:d?ke(d.address,!1,t):void 0,address:ke(n,!0,t),image:Rr(b||f||""),thumbnail:s.find((t=>"500x500"===t.resolution)).url,isOnSale:Boolean(c),isHidden:A,isScam:v,description:m,...a&&{collectionAddress:h,collectionName:a.name,isOnFragment:E||i.q5n.has(a.address)},metadata:S})}catch(t){return void(0,B.SJ)("buildNft",t)}}function Fa(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.timestamp-e.timestamp;return 0===r&&(r=t.id>e.id?1:t.id<e.id?-1:0),n?r:-r}function Ma(t){return i.zll[t]}function Wa(t){var e;return"stars-fee"===t.status?0n:null!==(e=t.amount)&&void 0!==e?e:0n}Object.fromEntries(Object.entries(i.zll).map((t=>{let[e,{nativeToken:n}]=t;return[n.slug,e]})));const Ka=(0,n(19314).A)((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t)return t.length<=e+n+3?t:`${t.slice(0,e)}...${t.slice(-n)}`})),ja=new Map;function qa(t){return Ka(t,i.bOf)}function La(t){const{fromAddress:e,amount:n,timestamp:r}=t,a=function(t){const e=qa(t);return ja.get(e)}(e);(!a||a.timestamp<r||a.timestamp===r&&a.amount>n)&&function(t,e,n){const r=qa(t);ja.set(r,{address:t,amount:e,timestamp:n})}(e,n,r)}var Ja=n(50110),za=n(37836);var Ha=n(48287).Buffer;const Va=n(52598),$a=n(87963);function Qa(t){if(t.length<48)throw new Error;const e=t.slice(0,32),n=t.slice(32,48);return new $a.ModeOfOperation.cbc(e,n)}function Ga(t,e){return async function(t,e){const n={name:"HMAC",hash:"SHA-512"},r=await crypto.subtle.importKey("raw",t,n,!1,["sign"]),a=await crypto.subtle.sign(n,r,e),o=new Uint8Array(a);if(64!==o.length)throw new Error;return o}(t,e)}async function Za(t,e,n,r,a){if(!t||!t.length)throw new Error("empty comment");64===r.length&&(r=r.slice(0,32));const o=(new TextEncoder).encode(t),s=(new TextEncoder).encode(ke(a,!0)),i=await async function(t,e,n,r,a){const o=await Va.getSharedSecret(r,n),s=await async function(t,e,n){const r=await function(t){const e=(31+t&-16)-t,n=crypto.getRandomValues(new Uint8Array(e));if(n[0]=e,(e+t)%16!=0)throw new Error;return n}(t.length),a=new Uint8Array(r.length+t.length);return a.set(r,0),a.set(t,r.length),async function(t,e,n){if(t.length%16!=0)throw new Error;const r=(await Ga(n,t)).slice(0,16),a=new Uint8Array(t.length+16);a.set(r,0);const o=await Ga(e,r),s=(await Qa(o)).encrypt(t);return a.set(s,16),a}(a,e,n)}(t,o,a),i=new Uint8Array(e.length+s.length);for(let t=0;t<e.length;t++)i[t]=n[t]^e[t];return i.set(s,e.length),i}(o,e,n,r,s),c=new Uint8Array(i.length+4),u=Ha.alloc(4);return u.writeUInt32BE(Xt.Encrypted),c.set(u,0),c.set(i,4),c}async function Xa(t,e,n,r){64===n.length&&(n=n.slice(0,32));const a=(new TextEncoder).encode(ke(r,!0)),o=await async function(t,e,n,r){if(t.length<e.length)throw new Error("Failed to decrypt: data is too small");const a=new Uint8Array(e.length);for(let n=0;n<e.length;n++)a[n]=t[n]^e[n];const o=await Va.getSharedSecret(n,a);return await async function(t,e,n){if(t.length<16)throw new Error("Failed to decrypt: data is too small");if(t.length%16!=0)throw new Error("Failed to decrypt: data size is not divisible by 16");const r=t.slice(0,16),a=t.slice(16),o=await Ga(e,r),s=await async function(t,e,n,r){const a=(await Qa(t)).decrypt(n),o=(await Ga(r,a)).slice(0,16);if(e.join(",")!==o.join(","))throw new Error("Failed to decrypt: hash mismatch");const s=a[0];if(s>a.length||s<16)throw new Error("Failed to decrypt: invalid prefix size");return a.slice(s)}(o,r,a,n);return s}(t.slice(e.length),o,r)}(t,e,n,a);return(new TextDecoder).decode(o)}const Ya="/diesel",to="/diesel";async function eo(t,e,n,r){const{address:a,init:o}=e;let s;o&&!await t.isContractDeployed(a)&&(s=o);const i=(0,J.external)({to:a,init:s?{code:s.code,data:s.data}:void 0,body:n}),c=(0,J.beginCell)().store((0,J.storeMessage)(i)).endCell(),u="w5"===r,d=c.hash().toString("base64"),l=n.hash().toString("base64"),f=c.toBoc().toString("base64");let m;if(u){const t=await function(t){return Lr(`${to}/w5/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(f);m=t.paymentLink}else if("diesel"===r){const t=await function(t){return Lr(`${Ya}/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(f);m=t.paymentLink}else await t.sendFile(f);return{boc:f,msgHash:u?l:d,paymentLink:m}}function no(t,e){const n=typeof t;if(n!==typeof e)return!1;if("object"!==n||null===t||null===e)return t===e;const r=Array.isArray(t);if(r!==Array.isArray(e))return!1;if(r){const n=t,r=e;return n.length===r.length&&n.every(((t,e)=>no(t,r[e])))}const a=t,o=e,s=Object.keys(a),i=Object.keys(o);return!!s.every((t=>o.hasOwnProperty(t)))&&!!i.every((t=>a.hasOwnProperty(t)))&&s.every((t=>no(a[t],o[t])))}var ro=n(59288);let ao=0;const oo=()=>`${Date.now()}|${ao++}`;let so,io;function co(t){const{normalizedAddress:e,comment:n,type:r,isIncoming:a,nft:o}=t;let{metadata:s={}}=t;const c="nftTransferred"===r||"nftReceived"===r||Boolean(o),u=Zr(),d=!!n&&Vr.some((t=>t.test(n))),l=!(d||!n||!a||!c&&!n.toLowerCase().includes("claim"))&&(Yr(n)||(f=n,i.rcB.test(jr(f))));var f;return e in u&&(s={...s,...u[e]}),(d||l)&&(s.isScam=!0),{...t,metadata:s}}function uo(t,e){return lo(t)&&function(t){return on===t}(e)}function lo(t){return io===t}function fo(t){const{id:e,network:n}=t;return`${e}-ton-${n}`}async function mo(){const t=await Ve.getKeys();if(null!=t&&t.length){const e=[];for(const n of t){if(n.startsWith("backup_"))continue;const t=`backup_${n}`,r=await Ve.getItem(n,!0);(0,ro.v)(void 0!==r,"Empty value!"),await Ve.setItem(t,r);const a=await Ve.getItem(t);(0,ro.v)(no(r,a),"Data has not been saved!"),e.push([n,r])}for(const[t,n]of e){let e=!1;await Ve.setItem(t,n).catch((()=>{e=!0})),e&&(await Ve.removeItem(t),await Ve.setItem(t,n))}}}function po(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wo{constructor(){po(this,"promise",void 0),po(this,"reject",void 0),po(this,"resolve",void 0),this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}static resolved(t){const e=new wo;return e.resolve(t),e}}const ho={},yo={};async function go(t,e){const n=`${t}:${e}`,r=yo[n],a=qe(),o=new wo;return yo[n]=o,ho[a]=o,r&&await r.promise,{id:a,pendingTransfer:o}}function vo(t){return ho[t]}const Ao=365,bo=50;var Eo=n(39989),So=n(75269);const Io={action_send_msg:247711853,action_set_code:2907562126,action_extended_set_data:536406539,action_extended_add_extension:2,action_extended_remove_extension:3,action_extended_set_signature_auth_allowed:4,auth_extension:1702392942,auth_signed:1936287598,auth_signed_internal:1936289396};function ko(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Do{constructor(t,e){this.mode=t,this.outMsg=e,ko(this,"tag",Do.tag)}serialize(){return(0,J.beginCell)().storeUint(this.tag,32).storeUint(this.mode||J.SendMode.IGNORE_ERRORS,8).storeRef((0,J.beginCell)().store((0,J.storeMessageRelaxed)(this.outMsg)).endCell()).endCell()}}function To(t){if(0===t.length)return(0,J.beginCell)().endCell();const[e,...n]=t;return(0,J.beginCell)().storeRef(To(n)).storeSlice(e.serialize().beginParse()).endCell()}function Bo(t){const e=t;let n=(0,J.beginCell)();return n=0===e.length?n.storeUint(0,1):n.storeMaybeRef(To(e.slice().reverse())),n=n.storeUint(0,1),n.endCell()}ko(Do,"tag",247711853);var Co=n(48287).Buffer;function Ro(t,e,n){const r=t.asSlice(),a=r.loadUint(8),o=r.loadUint(8);if(a!==e||o!==n)throw new Error("Invalid dns record value prefix");return function(t){t.loadUint(3);let e=t.loadUintBig(8);e>127n&&(e-=256n);const n=t.loadUintBig(256);if("0:0"==`${e.toString(10)}:${n.toString(16)}`)return;const r=`${e.toString(10)}:${n.toString(16).padStart(64,"0")}`;return J.Address.parse(r)}(r)}function _o(t){return Ro(t,186,147)}function xo(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);if(116!==n||115!==r)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}async function Po(t,e,n,r,a){const o=8*n.length,s=(new J.Builder).storeBuffer(Co.from(n)).asCell(),i=await async function(t){if(!t)return 0n;const e=(new TextEncoder).encode(t),n=Co.from(await yt(e)).toString("hex");return BigInt(`0x${n}`)}(r),{stack:c}=await t.callGetMethod(J.Address.parse(e),"dnsresolve",[{type:"slice",cell:s},{type:"int",value:BigInt(i.toString())}]),u=c.readNumber();let d;try{d=c.readCell()}catch(t){}if(0!==u){if(u%8!=0)throw new Error("domain split not at a component boundary");if(u>o)throw new Error(`invalid response ${u}/${o}`);if(u===o)return r===ie.DnsNextResolver?d?_o(d):void 0:r===ie.Wallet?d?function(t){return Ro(t,159,211)}(d):void 0:r===ie.Site?d?function(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);return 173===n||1===r?function(t){const e=t.asSlice(),n=e.loadUint(8),r=e.loadUint(8);if(173!==n||1!==r)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}(t):xo(t)}(d):void 0:r===ie.BagId?d?xo(d):void 0:d;if(d){const e=_o(d);return a?r===ie.DnsNextResolver?e:void 0:Po(t,e.toString(),n.slice(u/8),r,!1)}}}async function Oo(t,e){let n;if(void 0!==tt(e)){const r=await async function(t,e){try{const n=tt(e);if(!n)return;const r=await function(t,e,n,r,a){const o=function(t){if(!t||!t.length)throw new Error("empty domain");if("."===t)return new Uint8Array([0]);t=t.toLowerCase();for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let e=0;e<t.length;e++){const n=t.substring(e,e+1);for(let t=127;t<=159;t++)if(n===String.fromCharCode(t))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=t.split(".");e.forEach((t=>{if(!t.length)throw new Error("domain name cannot have an empty component")}));let n=`${e.reverse().join("\0")}\0`;return n.length<126&&(n=`\0${n}`),(new TextEncoder).encode(n)}(n);return Po(t,e,o,r,a)}(ge(t),n.zone.resolver,n.base,ie.Wallet);if(!(r instanceof J.Address))return;return ke(r,void 0,t)}catch(t){var n;if(null===(n=t.message)||void 0===n||!n.includes("exit_code"))throw t;return}}(t,e);if(!r)return;n=e,e=(await Nn(t,[r]))[r].user_friendly}const r=Xr(Uo(e));var a;return r?{address:e,...r,name:null!==(a=n)&&void 0!==a?a:r.name}:{address:e,name:n}}function Uo(t,e){return ke(t,!0,e)}async function No(t){const{network:e}=_(t),{address:n}=await ln(t);return Fo(e,n)}async function Fo(t,e){return(await zn(t,e)).map((e=>function(t,e){if(e.jetton)try{const{balance:n,jetton:r,wallet_address:a}=e,o=Lo(ke(r.address,!0,t),r);return{slug:o.slug,balance:BigInt(n),token:o,jettonWallet:ke(a.address,void 0,t)}}catch(t){return void(0,B.SJ)("parseTokenBalance",t)}}(t,e))).filter(Boolean)}async function Mo(t,e,n,r){const{toAddress:a,payload:o}=r,s=ba(n);if("string"!=typeof o||null==s||!s.customPayloadApiUrl)return r;const i=await Ca(t,a,o);if("tokens:transfer"!==i.type)throw new Error("Invalid payload");const{mintlessTokenBalance:c,isMintlessClaimed:u,stateInit:d,customPayload:l}=await jo({network:t,token:s,fromAddress:e,tokenWalletAddress:r.toAddress});if(!c||u)return r;const f=Te({toAddress:i.destination,queryId:i.queryId,tokenAmount:i.amount,forwardAmount:i.forwardAmount,forwardPayload:J.Cell.fromBase64(i.forwardPayload),responseAddress:i.responseDestination,customPayload:J.Cell.fromBase64(l)});return{...r,stateInit:d?J.Cell.fromBase64(d):void 0,payload:f,isBase64Payload:!1}}async function Wo(t){const{network:e,tokenAddress:n,fromAddress:r,toAddress:a,amount:o,shouldSkipMintless:s,forwardAmount:i=xt}=t;let{payload:c}=t;const u=await Ae(e,r,n),d=ba(n),{isTokenWalletDeployed:l=!!await Qn(e,u),isMintlessClaimed:f,mintlessTokenBalance:m,customPayload:p,stateInit:w}=await jo({network:e,fromAddress:r,token:d,tokenWalletAddress:u,shouldSkipMintless:s});if(l&&n!==await be(e,u))throw new Error("Invalid contract");c=Te({tokenAmount:o,toAddress:a,forwardAmount:i,forwardPayload:c,responseAddress:r,customPayload:p?J.Cell.fromBase64(p):void 0});let{amount:h,realAmount:y}=Jo(d,Boolean(m)&&!f);return i>xt&&(h+=i),{amount:h,realAmount:y,toAddress:u,payload:c,stateInit:w?J.Cell.fromBase64(w):void 0,mintlessTokenBalance:m,isTokenWalletDeployed:l}}async function Ko(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,a=0n;return n&&(a+=await Pe(t,e)),r&&(a+=r),a}async function jo(t){const{network:e,fromAddress:n,token:r,tokenWalletAddress:a,shouldSkipMintless:o}=t;let s,i,c,u,d;if(r.customPayloadApiUrl&&!o&&(s=!!await Qn(e,a),u=s&&await async function(t,e){return(await ge(t).runMethod(J.Address.parse(e),"is_claimed")).stack.readBoolean()}(e,a),!u)){const t=await async function(t,e){const n=De(e);return await(0,Rn.x3)(`${t}/wallet/${n}`).catch((()=>{}))}(r.customPayloadApiUrl,n),e=!t||Date.now()>new Date(1e3*Number(t.compressed_info.expired_at)).getTime();t&&!e&&(i=t.custom_payload,d=BigInt(t.compressed_info.amount),s||(c=t.state_init))}return{isTokenWalletDeployed:s,isMintlessClaimed:u,mintlessTokenBalance:d,customPayload:i,stateInit:c}}async function qo(t,e){return Lo(e,await async function(t,e){const{content:n}=await function(t,e){return ge(t).open(new lt.Sr(J.Address.parse(e))).getJettonData()}(t,e);let r;const a=n.asSlice();if(a.loadUint(8)===ka){const t=Oa(a).toString("utf-8");r=await Ba(t)}else r=await async function(t){const e=t.loadDict(Tr.Dictionary.Keys.Buffer(32),Da),n={};for(const[t,a]of Object.entries(Ta)){var r;const o=Ia.from(await yt(Ia.from(t,"ascii"))),s=null===(r=e.get(o))||void 0===r?void 0:r.toString(a);s&&(n[t]=s)}return n}(a),r.uri&&(r={...await Ba(r.uri),...r});return r}(t,e))}function Lo(t,e){const{name:n,symbol:r,image:a,image_data:o,decimals:s,custom_payload_api_uri:i}=e;return{slug:Sa("ton",t),name:n,symbol:r,decimals:void 0===s?qt:Number(s),chain:"ton",tokenAddress:t,image:a&&Rr(a)||o&&(c=o,(u=c,ht.from(u,"base64").toString("utf-8")).includes("<svg")?`data:image/svg+xml;base64,${c}`:`data:image/png;base64,${c}`)||void 0,customPayloadApiUrl:i};var c,u}function Jo(t,e){let n=0n,r=0n;return t.slug===i.rUK?(n+=Bt,r+=_t):t.isTiny?(n+=Bt,r+=Rt):(n+=Tt,r+=Ct),e&&(n+=Pt,r+=Pt),{amount:n,realAmount:r}}var zo=n(48287).Buffer;const Ho=128,Vo=100,$o=6e4,Qo=1e3,Go=100000000n,Zo=9e5,Xo={status:"not-available",nativeAmount:0n,remainingFee:0n,realFee:0n},Yo=(0,ut.A)((async(t,e)=>{const n=await Pn({network:t,address:e,limit:1});return Boolean(n.length)}));async function ts(t){const{accountId:e,amount:n=0n,tokenAddress:r,shouldEncrypt:a,isBase64Data:o,stateInit:s,forwardAmount:i,allowGasless:c}=t;let{toAddress:u,data:d}=t;const{network:l}=_(e);let f={};try{if(f=await es(l,u),"error"in f)return f;u=f.resolvedAddress;const{isInitialized:t}=await Yn(l,u);if(s&&!o)return{...f,error:R.KL.StateInitWithoutBin};let p;if(s)try{p=J.Cell.fromBase64(s)}catch{return{...f,error:R.KL.InvalidStateInit}}if(f.isBounceable&&!t&&!p)return f.isToAddressNew=!await Yo(l,u),{...f,error:R.KL.InactiveContract};if(f.resolvedAddress=u,n<0n)return{...f,error:R.KL.InvalidAmount};const w=await cr(e);if("string"==typeof d&&o&&(d=At(d)),d&&"string"==typeof d&&a&&!await Ee(l,u))return{...f,error:R.KL.WalletNotInitialized};const{address:h,isInitialized:y}=await ln(e);d&&"string"==typeof d&&!o&&(d=Be(d));const g=await er(l,w);let v,A,b,E;if(r){const t=await Wo({network:l,tokenAddress:r,fromAddress:h,toAddress:u,amount:n,payload:d,forwardAmount:i});({amount:A,toAddress:u,payload:d}=t);const{realAmount:e,isTokenWalletDeployed:a,mintlessTokenBalance:o}=t;b=A,E=e;const s=u;v=await Ko(l,s,a,o)}else v=g,A=n,b=0n,E=0n,d instanceof Uint8Array&&(d=a?_e(d):Ce(d));const S=!r&&g===n,{transaction:I}=await ss({network:l,wallet:w,toAddress:u,amount:A,payload:d,stateInit:p,isFullBalance:S,shouldEncrypt:a}),k=await gs(l,w,I,y),D=T(k,Jt);let B;if(b+=D,E+=D,f.fee=b,f.realFee=E,f.diesel=Xo,r){const t=g>=b;c&&(f.diesel=await ks({accountId:e,tokenAddress:r,canTransferGasfully:t,toncoinBalance:g,tokenBalance:v})),B="not-available"!==(m=f.diesel).status&&void 0!==m.amount?n+Wa(f.diesel)<=v:t&&n<=v}else B=S?g>k:g>=b+n;return B?f:{...f,error:R.KL.InsufficientBalance}}catch(t){return{...(0,Eo.QS)(t),...f}}var m}async function es(t,e){const n={},r=await Oo(t,e);if(!r)return{...n,error:R.KL.DomainNotResolved};n.addressName=r.name,n.resolvedAddress=r.address,n.isMemoRequired=r.isMemoRequired,n.isScam=r.isScam,e=r.address;const{isValid:a,isUserFriendly:o,isTestOnly:s,isBounceable:i}=Oe(e);if(n.isBounceable=i,!a)return{...n,error:R.KL.InvalidToAddress};const c=!/[+=/]/.test(e);return!o||!c||"mainnet"===t&&s?{...n,error:R.KL.InvalidAddressFormat}:n}async function ns(t){const{accountId:e,password:n,amount:r,tokenAddress:a,shouldEncrypt:o,isBase64Data:s,forwardAmount:i}=t;let{stateInit:c}=t,{toAddress:u,data:d}=t;const{network:l}=_(e);try{const t=await mn(e),{address:f,isInitialized:m}=t.ton,p=await cr(e,t.ton),{publicKey:w,secretKey:h}=await pr(e,n,t);let y,g;"string"==typeof d&&({payload:d,encryptedComment:y}=await as({network:l,toAddress:u,fromAddress:f,data:d,secretKey:h,publicKey:w,shouldEncrypt:o,isBase64Data:s})),a?({amount:g,toAddress:u,payload:d,stateInit:c}=await Wo({network:l,tokenAddress:a,fromAddress:f,toAddress:u,amount:r,payload:d,forwardAmount:i})):(g=r,d instanceof Uint8Array&&(d=o?_e(d):Ce(d)));const{pendingTransfer:v}=await go(l,f),A=await er(l,p),b=!a&&A===r,{seqno:E,transaction:S}=await ss({network:l,wallet:p,toAddress:u,amount:g,payload:d,stateInit:c,privateKey:h,isFullBalance:b,shouldEncrypt:o}),I=await gs(l,p,S,m);if(!(b?A>I:A>=g+I))return{error:R.jf.InsufficientBalance};const k=ge(l),{msgHash:D,boc:T}=await eo(k,p,S);return ys(l,f,T,E,v),{amount:r,seqno:E,encryptedComment:y,toAddress:u,msgHash:D}}catch(t){return(0,B.SJ)("submitTransfer",t),{error:os(t)}}}async function rs(t){try{const{toAddress:e,amount:n,accountId:r,password:a,tokenAddress:o,shouldEncrypt:s,dieselAmount:c,isGaslessWithStars:u}=t;let{data:d}=t;const{network:l}=_(r),[{address:f},m]=await Promise.all([ln(r),pr(r,a)]),{publicKey:p,secretKey:w}=m;let h;"string"==typeof d&&({payload:d,encryptedComment:h}=await as({network:l,toAddress:e,fromAddress:f,data:d,secretKey:w,publicKey:p,shouldEncrypt:s}));const y=[await Wo({network:l,tokenAddress:o,fromAddress:f,toAddress:e,amount:n,payload:d})];return u||y.push(await Wo({network:l,tokenAddress:o,fromAddress:f,toAddress:i.InW,amount:c,shouldSkipMintless:!0})),{...await ws({accountId:r,password:a,messages:y,isGasless:!0}),encryptedComment:h}}catch(t){return(0,B.SJ)("submitTransferWithDiesel",t),{error:os(t)}}}async function as(t){let e,n,{network:r,toAddress:a,data:o,shouldEncrypt:s,publicKey:i,secretKey:c,fromAddress:u,isBase64Data:d}=t;if(o)if(d)e=function(t){try{return J.Cell.fromBase64(t)}catch(e){return(0,B.SJ)("parseBase64",e),Uint8Array.from(pe.from(t,"base64"))}}(o);else if(s){const t=await Ee(r,a);e=await Za(o,i,t,c,u),n=zo.from(e.slice(4)).toString("base64")}else e=Be(o);else e=void 0;return{payload:e,encryptedComment:n}}function os(t){if(t instanceof Eo.K$){if(t.message.includes("exitcode=35,"))return R.jf.IncorrectDeviceTime;if(400===t.statusCode)return t.message;if(t.displayError)return t.displayError}return R.jf.UnsuccesfulTransfer}async function ss(t){let{network:e,wallet:n,toAddress:r,amount:a,payload:o,stateInit:s,privateKey:i,isFullBalance:c,expireAt:u,shouldEncrypt:d}=t;const{seqno:l}=await Xn(e,n);i?(0,B.MD)("Signing transactions",{seqno:l,toAddress:r,amount:a}):i=new Uint8Array(64),u||(u=Math.round(Date.now()/1e3)+$t),o instanceof Uint8Array&&(o=d?_e(o):Ce(o,0));const f=s?(0,J.loadStateInit)(s.asSlice()):void 0,m=c?J.SendMode.CARRY_ALL_REMAINING_BALANCE:J.SendMode.PAY_GAS_SEPARATELY+(o?0:J.SendMode.IGNORE_ERRORS);return{seqno:l,transaction:n.createTransfer({seqno:l,secretKey:zo.from(i),messages:[(0,J.internal)({value:a,to:r,body:o,init:f,bounce:Oe(r).isBounceable})],sendMode:m,timeout:u})}}async function is(t){const{network:e}=_(t),{address:n}=await ln(t);return async function(t,e){const n=await Pn({network:t,address:e,limit:1});if(n.length)return n[0].txId}(e,n)}async function cs(t,e,n,r){const{network:a}=_(t),{address:o}=await ln(t);let s=await Pn({network:a,address:o,limit:null!=r?r:Ho,toTimestamp:e,fromTimestamp:n});return s=await Promise.all(s.map((t=>async function(t,e){var n;const r=null===(n=e.extraData)||void 0===n?void 0:n.body;if(!r||e.comment||e.encryptedComment)return e;try{const n=_a(r);if(n.remainingBits>32){const r=e.isIncoming?e.fromAddress:e.toAddress,a=await Ra(t,r,n,!1,e);e.extraData.parsedPayload=a,"comment"===(null==a?void 0:a.type)?e={...e,comment:a.comment}:"encrypted-comment"===(null==a?void 0:a.type)&&(e={...e,encryptedComment:a.encryptedComment})}}catch(t){(0,B.SJ)("parseTransactionBody",t)}return e}(a,t)))),await async function(t,e){const n=new Set,r=new Set;for(const t of e){const{extraData:{parsedPayload:e}}=t;"nft:ownership-assigned"===(null==e?void 0:e.type)?(n.add(e.nftAddress),r.add(e.prevOwner)):"nft:transfer"===(null==e?void 0:e.type)&&(n.add(e.nftAddress),r.add(e.newOwner)),La(t)}if(n.size){const[a,o]=await Promise.all([Hn(t,[...n]),Nn(t,[...r])]),s=et(a.map((e=>Na(t,e))).filter(Boolean),"address");for(const t of e){const{extraData:{parsedPayload:e}}=t;if("nft:ownership-assigned"===(null==e?void 0:e.type)){const n=s[e.nftAddress];t.nft=n,null!=n&&n.isScam?t.metadata={...t.metadata,isScam:!0}:t.fromAddress=o[e.prevOwner].user_friendly}else if("nft:transfer"===(null==e?void 0:e.type)){const n=s[e.nftAddress];t.nft=n,null!=n&&n.isScam?t.metadata={...t.metadata,isScam:!0}:t.toAddress=o[e.newOwner].user_friendly}}}}(a,s),s.map(fs).map(co).map(ls).map(ms)}async function us(t,e,n,r){const a=await cs(t,e,void 0,n);if(!a.length)return[];const o=a[a.length-1].timestamp,s=await Promise.all(r.map((n=>ds(t,n,e,o,Vo,!0)))),i=[...a,...s.flat()];return i.sort(Fa),i}async function ds(t,e,n,r,a,o){if(e===i.Tu9.slug)return cs(t,n,r,a);const{network:s}=_(t),{address:c}=await ln(t),u=Aa(e),{tokenAddress:d}=u,l=await Ae(s,c,d);return(await Pn({network:s,address:l,limit:null!=a?a:Ho,fromTimestamp:r,toTimestamp:n,shouldIncludeFrom:o})).map((t=>function(t,e,n,r){const{extraData:a}=e;if(null==a||!a.body)return;const o=function(t,e){if(e)try{let n=kr.Cell.fromBase64(e).beginParse();const r=n.loadUint(32),a=n.loadUintBig(64);if(r!==Yt.Transfer&&r!==Yt.InternalTransfer)return;const o=n.loadCoins(),s=n.loadMaybeAddress(),i=n.loadMaybeAddress();let c,u,d,l;if(i&&(r===Yt.Transfer&&n.loadBit(),c=n.loadCoins(),n.remainingBits&&n.loadBit()&&n.remainingRefs&&(n=n.loadRef().beginParse()),n.remainingBits>32)){const t=n.loadUint(32);t===Xt.Comment?(u=Oa(n).toString("utf-8"),"Jettons unstaked"===u&&(l="unstake")):t===Xt.Encrypted?d=Oa(n).toString("base64"):t===ft.Hx.STAKE_JETTONS&&(l="stake")}return{operation:Yt[r],queryId:a,jettonAmount:o,responseAddress:i,address:s?ke(s,void 0,t):void 0,forwardAmount:c,comment:u,encryptedComment:d,type:l}}catch(t){(0,B.SJ)("parseJettonWalletMsgBody",t)}}(t,a.body);if(!o)return;const{operation:s,jettonAmount:i,address:c,comment:u,encryptedComment:d,type:l}=o,f="InternalTransfer"===s,m=f?null!=c?c:e.fromAddress:r,p=f?r:c,w=ke(f?m:p,!0);return{...e,type:l,slug:n,fromAddress:m,toAddress:p,normalizedAddress:w,amount:f?i:-i,comment:u,encryptedComment:d,isIncoming:f}}(s,t,e,c))).filter(Boolean).map(co).map(ls).map(ms)}function ls(t){return at(t,["extraData"])}function fs(t){var e;const{amount:n,extraData:r}=t;let{comment:a}=t;const o=ke(t.fromAddress,!0),s=ke(t.toAddress,!0);let i;if(bt(o)&&n>Mt.unstakeNominators)i="unstake";else if(bt(s))a===Wt?i="stake":a===Kt&&(i="unstakeRequest");else if(null!=r&&r.parsedPayload&&(null===(e=t.metadata)||void 0===e||!e.isScam)){const t=r.parsedPayload;"tokens:burn"===t.type&&t.isLiquidUnstakeRequest?i="unstakeRequest":"liquid-staking:deposit"===t.type?i="stake":"liquid-staking:withdrawal"===t.type||"liquid-staking:withdrawal-nft"===t.type?i="unstake":"nft:transfer"===t.type?(i="nftTransferred",a=t.comment):"nft:ownership-assigned"===t.type?(i="nftReceived",a=t.comment):"jetton-staking:unstake"===t.type&&(i="unstakeRequest")}return{...t,type:i,comment:a}}function ms(t){return{...t,kind:"transaction",id:t.txId}}async function ps(t,e,n,r){const a={};let o=0n;const{network:s}=_(t),{isInitialized:c,version:u,address:d}=await ln(t);try{var l,f,m;for(const{toAddress:t,amount:n}of e){if(n<0n)return{...a,error:R.KL.InvalidAmount};const e="mainnet"===s,{isValid:r,isTestOnly:i}=Oe(t);if(!r||e&&i)return{...a,error:R.KL.InvalidToAddress};o+=n}const p=await cr(t),{balance:w}=await Xn(s,p),{transaction:h}=await hs({network:s,wallet:p,messages:e,version:u});if(r&&(a.emulation=await(0,Ja.T)((async()=>{const t=await function(t,e,n,r){const a=function(t,e,n){const r=(0,J.external)({to:t.address,init:n?void 0:{code:t.init.code,data:t.init.data},body:e});return(0,J.beginCell)().store((0,J.storeMessage)(r)).endCell().toBoc().toString("base64")}(e,n,r);return async function(t,e){const n="testnet"===t?i.pyR:i._J8;return(await(0,Rn.J5)(`${n}/api/emulate/v1/emulateTrace`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boc:e,ignore_chksig:!0,include_code_data:!1,with_actions:!1})})).json()}(t,a)}(s,p,h,c);return t&&function(t,e,n){const r=De(e).toUpperCase(),a=Object.entries(n.transactions).map((e=>{let[n,r]=e;return function(t,e,n){const{now:r,lt:a,total_fees:o,description:{compute_ph:{exit_code:s}}}=n,c=de({lt:a,hash:e}),u=1e3*r,d=!!n.in_msg.source,l=n.in_msg.hash,f=d?[n.in_msg]:n.out_msgs;if(!f.length)return[];const m=BigInt(o)/BigInt(f.length);return f.map(((n,r)=>{const{source:a,destination:o,value:p,fwd_fee:w,opcode:h}=n,y=ke(d?a:o,!0,t),g=m+BigInt(null!=w?w:0);return ot({txId:f.length>1?`${c}:${r+1}`:c,timestamp:u,isIncoming:d,fromAddress:a,toAddress:o,amount:BigInt(null!=p?p:0),slug:i.Tu9.slug,fee:g,inMsgHash:l,normalizedAddress:y,shouldHide:!!s||void 0,hash:e,opCode:Number(h)||void 0})}))}(t,n,r)})).flat(),o=a.reduce(((t,e)=>{const n=e.hash;return t[n]?t[n].push(e):t[n]=[e],t}),{}),s=[];return function t(e,n){const a=o[e.tx_hash];for(const[t,{toAddress:e,amount:o,fee:c,isIncoming:u}]of a.entries()){const a=null!=n?n:t;a in s||s.push({received:0n,fee:T(c,Jt)}),e===r&&u&&(s[a].received+=-0n===(i=o)||i<0n?-i:i)}var i;for(const[r,a]of e.children.entries())t(a,null!=n?n:r)}(n.trace),{totalFee:s.reduce(((t,e)=>{let{fee:n}=e;return t+n}),0n),totalReceived:s.reduce(((t,e)=>{let{received:n}=e;return t+n}),0n),byTransactionIndex:s}}(s,d,t)}))),!a.emulation){const t=await gs(s,p,h,c);a.fee=T(t,Jt)}const y=null!==(l=null!==(f=null===(m=a.emulation)||void 0===m?void 0:m.totalFee)&&void 0!==f?f:a.fee)&&void 0!==l?l:0n;return!n&&w<o+y?{...a,error:R.KL.InsufficientBalance}:a}catch(t){return(0,Eo.QS)(t)}}async function ws(t){let{accountId:e,password:n,messages:r,expireAt:a,isGasless:o}=t;const{network:s}=_(e),i=await mn(e),{address:c,isInitialized:u,version:d}=i.ton,{pendingTransfer:l}=await go(s,c);try{const t=await cr(e,i.ton),f=await mr(e,n,i);let m=0n;r.forEach((t=>{m+=BigInt(t.amount)}));const{balance:p}=await Xn(s,t),w=o?"W5"===d?"w5":"diesel":void 0,h="w5"===w,{seqno:y,transaction:g}=await hs({network:s,wallet:t,messages:r,version:d,privateKey:f,expireAt:a,withW5Gasless:h});if(!o){const e=await gs(s,t,g,u);if(p<m+e)return{error:R.jf.InsufficientBalance}}const v=ge(s),{msgHash:A,boc:b,paymentLink:E}=await eo(v,t,g,w);o?l.resolve():ys(s,c,b,y,l);const S=r.map((t=>"string"!=typeof t.payload&&void 0!==t.payload?at(t,["payload"]):t));return{seqno:y,amount:m.toString(),messages:S,boc:b,msgHash:A,paymentLink:E}}catch(t){return l.resolve(),(0,B.SJ)("submitMultiTransfer",t),{error:os(t)}}}async function hs(t){let{network:e,wallet:n,messages:r,version:a,privateKey:o,expireAt:s,withW5Gasless:i}=t;const{seqno:c}=await Xn(e,n);o?(0,B.MD)("Signing transaction",{seqno:c,messages:r.map((t=>rt(t,["toAddress","amount"])))}):o=new Uint8Array(64),s||(s=Math.round(Date.now()/1e3)+$t);let u=!1;const d=r.map((t=>{const{amount:e,toAddress:n,stateInit:r,isBase64Payload:a}=t;let{payload:o}=t;a&&"string"==typeof o&&(o=J.Cell.fromBase64(o));const s=r?(0,J.loadStateInit)(r.asSlice()):void 0;return!u&&o&&(u=!0),(0,J.internal)({value:e,to:n,body:o,bounce:Oe(n).isBounceable,init:s})}));let l;"W5"!==a||i||d.reverse(),l=i?function(t,e,n,r){const a=(0,J.beginCell)().storeUint(Io.auth_signed_internal,32).storeUint(2147483409n,32).storeUint(Math.floor((Date.now()+r)/1e3),32).storeUint(e,32).storeSlice(t.beginParse()).endCell(),o=(0,So.sign)(a.hash(),n);return(0,J.beginCell)().storeSlice(a.beginParse()).storeUint((s=o,BigInt(`0x${s.toString("hex")}`)),512).endCell();var s}(Bo(d.map((t=>new Do(J.SendMode.PAY_GAS_SEPARATELY,t)))),c,zo.from(o),Zo):n.createTransfer({seqno:c,secretKey:zo.from(o),messages:d,sendMode:J.SendMode.PAY_GAS_SEPARATELY+(u?0:J.SendMode.IGNORE_ERRORS),timeout:s});const f=function(t,e,n){return(0,J.beginCell)().storeWritable((0,J.storeMessage)((0,J.external)({to:t.address,init:0===e?t.init:void 0,body:n}))).endCell()}(n,c,l);return{seqno:c,transaction:l,externalMessage:f}}async function ys(t,e,n,r,a){const o=ge(t),s=Date.now()+$o;for(;Date.now()<s;){const[a,s]=await Promise.all([o.sendFile(n).catch((t=>String(t))),Xn(t,e).catch((()=>{}))]);if(null!=a&&a.match(/(exitcode=33|exitcode=133|inbound external message rejected by account)/))break;if(s&&s.seqno>r)break;await(0,za.v7)(Qo)}null==a||a.resolve()}async function gs(t,e,n,r){const{code:a=null,data:o=null}=r?{}:e.init,{source_fees:s}=await ge(t).estimateExternalMessageFee(e.address,{body:n,initCode:a,initData:o,ignoreSignature:!0});return BigInt(s.in_fwd_fee+s.storage_fee+s.gas_fee+s.fwd_fee)}async function vs(t,e,n){const{network:r}=_(t),{address:a,publicKey:o,version:s}=await ln(t),i=ge(r),c=i.open(ve(o,s)),{base64:u,seqno:d}=e,l=n?vo(n):void 0;try{const{msgHash:t,boc:e}=await eo(i,c,J.Cell.fromBase64(u));return ys(r,a,e,d,l),{boc:e,msgHash:t}}catch(t){throw null==l||l.resolve(),t}}async function As(t,e){const{network:n}=_(t),{address:r,publicKey:a,version:o}=await ln(t),s=ge(n),i=s.open(ve(a,o)),c=jt+e.length;let u,d=0,l=0;const f=[];let m;for(;d<e.length&&l<c;){const{base64:t,seqno:a}=e[d];try{({pendingTransfer:m}=await go(n,r));const{msgHash:e,boc:o}=await eo(s,i,J.Cell.fromBase64(t));f.push(e),0===d&&(u=o),ys(n,r,o,a,m),d++}catch(t){var p;null===(p=m)||void 0===p||p.resolve(),(0,B.SJ)("sendSignedMessages",t)}l++}return{successNumber:d,firstBoc:u,msgHashes:f}}async function bs(t,e,n,r){const a=await pr(t,r);if(!a)return;const{secretKey:o,publicKey:s}=a;return Xa(zo.from(e,"base64"),s,o,n)}async function Es(t,e,n){const{lt:r}=le(n);if(0!==r)for(;;){const n=await On(t,e);if(n&&le(n).lt>=r)return;await(0,za.v7)(Qo)}}async function Ss(t,e){const n=new Set;for(const t of e)"transaction"===t.kind&&t.slug!==i.Tu9.slug&&(n.add(t.fromAddress),n.add(t.toAddress));if(!n.size)return;const r=await Nn(t,Array.from(n));for(const t of e)"transaction"===t.kind&&t.slug!==i.Tu9.slug&&(t.fromAddress=r[t.fromAddress].user_friendly,t.toAddress=r[t.toAddress].user_friendly)}function Is(t,e){return ks({accountId:t,tokenAddress:e,canTransferGasfully:!1})}async function ks(t){var e,n;let{accountId:r,tokenAddress:a,canTransferGasfully:o,toncoinBalance:s,tokenBalance:c}=t;const{network:u}=_(r);if("mainnet"!==u)return Xo;const d=await ln(r),l=await cr(r,d),f=ba(a);if(!f.isGaslessEnabled&&!f.isStarsEnabled)return Xo;const{address:m,version:p}=d;null!==(e=s)&&void 0!==e||(s=await er(u,l));const w=function(t){const e=!t.isGaslessEnabled&&t.isStarsEnabled;let{amount:n,realAmount:r}=Jo(t,!1);return e||(n*=2n,r*=2n),n+=i.dqR,r+=i.dqR,{amount:n,realFee:r,isStars:e}}(f),h=w.amount-s;if(s>=Go||h<=0n)return Xo;const y=await function(t,e,n,r,a){return Jr("/diesel/estimate",{address:t,tokenAddress:e,toncoinAmount:n,isW5:r,isStars:a})}(m,a,function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return E(t,null!=e?e:i.Tu9.decimals,n).toString()}(h),"W5"===p,w.isStars),g={status:y.status,amount:void 0===y.amount?void 0:b(y.amount,"stars-fee"===y.status?0:f.decimals),nativeAmount:h,remainingFee:s,realFee:w.realFee},v=Wa(g);if(0n===v)return g;null!==(n=c)&&void 0!==n||(c=await async function(t,e,n){const r=await Ae(t,e,n),a=ba(n),{isTokenWalletDeployed:o=!!await Qn(t,r),mintlessTokenBalance:s}=await jo({network:t,fromAddress:e,token:a,tokenWalletAddress:r});return Ko(t,r,o,s)}(u,m,a));const A=c>=v,S=Boolean(y.pendingCreatedAt&&Date.now()-new Date(y.pendingCreatedAt).getTime()<Zo);return!o&&A||S?g:Xo}var Ds=n(48287).Buffer;async function Ts(t,e,n){const{network:r}=_(t),{address:a}=await ln(t),o=await async function(t,e,n){const{collection:r,offset:a,limit:o}=null!=n?n:{};return(await Jn(t).accounts.getAccountNftItems(e,{offset:null!=a?a:0,limit:null!=o?o:jn,indirect_ownership:!0,collection:r})).nft_items}(r,a,{offset:e,limit:n});return o.map((t=>Na(r,t))).filter(Boolean).filter(Boolean)}async function Bs(t,e){const{network:n}=_(t),{address:r}=await ln(t),a=await function(t,e){return Jn(t).nft.getNftItemByAddress(e)}(n,e),o=Na(n,a);return r===(null==o?void 0:o.ownerAddress)}async function Cs(t,e){var n,r;const{network:a}=_(t),{address:o}=await ln(t),s=await async function(t,e,n){return(await Jn(t).accounts.getAccountEvents(e,{limit:qn,start_date:n})).events}(a,o,e);e=null!==(n=null===(r=s[0])||void 0===r?void 0:r.timestamp)&&void 0!==n?n:e,s.reverse();const i=[];for(const e of s)for(const n of e.actions){let e,r,s;const c=!!n.NftPurchase;if(n.NftItemTransfer){const{sender:t,recipient:o,nft:s}=n.NftItemTransfer;if(!t||!o)continue;e=ke(o.address,void 0,a),r=ke(s,!0,a)}else{if(!n.NftPurchase)continue;{const{buyer:t}=n.NftPurchase;if(e=ke(t.address,void 0,a),s=n.NftPurchase.nft,!s)continue;r=ke(s.address,!0,a)}}if(e===o){if(s||([s]=await Hn(a,[r])),s){const e=Na(a,s);e&&i.push({type:"nftReceived",accountId:t,nftAddress:r,nft:e})}}else!c&&await Qn(a,e)?i.push({type:"nftPutUpForSale",accountId:t,nftAddress:r}):i.push({type:"nftSent",accountId:t,nftAddress:r,newOwnerAddress:e})}return[e,i]}async function Rs(t){const{accountId:e,nfts:n,comment:r}=t;let{toAddress:a}=t;const{network:o}=_(e),{address:s}=await ln(e),c=await es(o,a);if("error"in c)return c;a=c.resolvedAddress;const u=n.slice(0,i.gR8).map((t=>xs(t,s,a,r))),d=await ps(e,u);if(void 0!==d.fee){const t=d.fee;c.fee=Os(n.length,u.length,t,Ot),c.realFee=Os(n.length,u.length,t,Ut)}return"error"in d&&(c.error=d.error),c}async function _s(t){const{accountId:e,password:n,nfts:r,toAddress:a,comment:o}=t,{address:s}=await ln(e);return ws({accountId:e,password:n,messages:r.map((t=>xs(t,s,a,o)))})}function xs(t,e,n,r){return{payload:t.collectionAddress!==i.KmP||n!==i.pV9&&!i.WVU.includes(n)?Ps(e,n,r):function(t,e,n){const r=J.Address.parse(e).hash.readUint8()>>4;return Ps(t,i.WVU[r],(new J.Builder).storeUint(1609328194,32).storeUint(n,64).endCell(),i.APY)}(e,t.address,t.index),amount:Ot,toAddress:t.address}}function Ps(t,e,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nt,o=(new J.Builder).storeUint(te.TransferOwnership,32).storeUint(fe(),64).storeAddress(J.Address.parse(e)).storeAddress(J.Address.parse(t)).storeBit(!1).storeCoins(a);return n&&(r="string"==typeof n?Ce(Be(n),Math.floor((o.availableBits-Ft)/8)):n),r instanceof Uint8Array?(o.storeBit(0),o=o.storeBuffer(Ds.from(r))):o=o.storeMaybeRef(r),o.endCell()}function Os(t,e,n,r){let a=t%e;return a>0&&a<e&&(a+=1),T(n,(Math.floor(t/e)*e+a)/e)+BigInt(t)*r}class Us{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new Us(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,J.beginCell)().endCell()};return new Us((0,J.contractAddress)(n,r),r)}async getListNominators(t){return(await t.get("list_nominators",[])).stack.readTuple().items.map((t=>{const e=t.map((t=>({type:"int",value:t}))),n=new J.TupleReader(e),r=n.readBigNumber().toString(16).padStart(64,"0");return{address:J.Address.parse(`0:${r}`),amount:n.readBigNumber(),pendingDepositAmount:n.readBigNumber(),withdrawRequested:Boolean(n.readNumber())}}))}}var Ns=n(48287).Buffer;let Fs;async function Ms(){if(Fs=await en.getItem("clientId"),!Fs){Fs=Ns.from(S(10)).toString("hex");const t=await en.getItem("referrer");t&&(Fs=`${Fs}:${t}`),await en.setItem("clientId",Fs)}return Fs}async function Ws(t,e,n){let r;switch(n.type){case"nominators":if(e<Mt.stakeNominators)return{error:R.KL.InvalidAmount};r=await ts({accountId:t,toAddress:n.pool,amount:e+Mt.stakeNominators,data:Wt}),"fee"in r&&r.fee&&(r.fee=Mt.stakeNominators+r.fee);break;case"liquid":r=await ts({accountId:t,toAddress:i.qMf,amount:e+Mt.stakeLiquid,data:xe()}),"fee"in r&&r.fee&&(r.fee=Mt.stakeLiquid+r.fee);break;case"jetton":{const{tokenSlug:a,pool:o,period:s}=n,{tokenAddress:i}=Aa(a);r=await ts({accountId:t,toAddress:o,tokenAddress:i,amount:e,data:pt.Ml.stakePayload(s),forwardAmount:Mt.stakeJettonsForward});break}}return r}async function Ks(t,e,n){const{network:r}=_(t),{address:a}=await ln(t),o=pa();let s,i;switch(n.type){case"nominators":s=await ts({accountId:t,toAddress:n.pool,amount:Mt.unstakeNominators,data:Kt});break;case"liquid":{if(e>n.balance)return{error:R.KL.InsufficientBalance};i=e===n.balance?n.tokenBalance:D(e,o.liquid.currentRate);const c=await Ls(r,a,i);s=await ts({accountId:t,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":i=e,s=await ts({accountId:t,toAddress:n.stakeWalletAddress,amount:Mt.unstakeJettons,data:Ne(e,!0)})}return{...s,type:n.type,tokenAmount:i}}async function js(t,e,n,r){let a;const{network:o}=_(t),{address:s}=await ln(t);switch(r.type){case"nominators":a=await ns({accountId:t,password:e,toAddress:ke(r.pool,!0,o),amount:n+Mt.stakeNominators,data:Wt});break;case"liquid":a=await ns({accountId:t,password:e,toAddress:i.qMf,amount:n+Mt.stakeLiquid,data:xe()});break;case"jetton":{const{tokenSlug:o,pool:s,period:i}=r,{tokenAddress:c}=Aa(o);a=await ns({accountId:t,password:e,toAddress:s,tokenAddress:c,amount:n,data:pt.Ml.stakePayload(i),forwardAmount:Mt.stakeJettonsForward}),"error"in a||(a.toAddress=s);break}}return"error"in a||ma(t,s,{stakedAt:Date.now()}),a}async function qs(t,e,n,r){const{network:a}=_(t),{address:o}=await ln(t);let s;switch(r.type){case"nominators":s=await ns({accountId:t,password:e,toAddress:ke(r.pool,!0,a),amount:Mt.unstakeNominators,data:Kt});break;case"liquid":{const i=r.instantAvailable?R.Dn.Default:R.Dn.BestRate,c=await Ls(a,o,n,i);s=await ns({accountId:t,password:e,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":s=await ns({accountId:t,password:e,toAddress:r.stakeWalletAddress,amount:Mt.unstakeJettons,data:Ne(n,!0)})}return s}async function Ls(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:R.Dn.Default;const a=await Ae(t,e,i.Kzb),o=function(t){const{queryId:e,amount:n,responseAddress:r,waitTillRoundEnd:a,fillOrKill:o}=t,s=function(t,e){return(new J.Builder).storeUint(Number(t),1).storeUint(Number(e),1).asCell()}(a,o);return(new J.Builder).storeUint(Yt.Burn,32).storeUint(null!=e?e:0,64).storeCoins(n).storeAddress(J.Address.parse(r)).storeBit(1).storeRef(s).asCell()}({amount:n,responseAddress:e,fillOrKill:r===R.Dn.Instant,waitTillRoundEnd:r===R.Dn.BestRate});return{amount:Mt.unstakeLiquid,toAddress:a,payload:o}}async function Js(t,e,n){const{network:r}=_(t),{address:a}=await ln(t),{loyaltyType:o,shouldUseNominators:s,type:c}=n,u={accountId:t,backendState:n,commonData:e,address:a,loyaltyType:o,network:r},d=[zs(u)];for(const t of e.jettonPools)d.push(Hs(u,t));return(s||"nominators"===c)&&d.push(async function(t){var e,n,r,a;let{network:o,address:s,backendState:c,commonData:u}=t;const d=c.balance,{address:l,apy:f}=c.nominatorsPool,m=Date.now()>u.prevRound.unlock,p=m?u.round.start:u.prevRound.start,w=m?u.round.unlock:u.prevRound.unlock;let h;if("nominators"===c.type){const t=ge(o).open(new Us(J.Address.parse(l))),e=await t.getListNominators(),n=J.Address.parse(s);h=e.find((t=>t.address.equals(n)))}return{type:"nominators",id:"nominators",tokenSlug:i.Tu9.slug,balance:h?d:0n,annualYield:f,yieldType:"APY",pool:l,start:p,end:w,pendingDepositAmount:null!==(e=null===(n=h)||void 0===n?void 0:n.pendingDepositAmount)&&void 0!==e?e:0n,isUnstakeRequested:null!==(r=null===(a=h)||void 0===a?void 0:a.withdrawRequested)&&void 0!==r&&r}}(u)),Promise.all(d)}async function zs(t){var e,n;let{accountId:r,address:a,backendState:o,commonData:s,loyaltyType:c}=t;const{currentRate:u,collection:d}=s.liquid,l=await async function(t){const{network:e}=_(t);if("mainnet"!==e)return 0n;const{address:n}=await ln(t),r=await Ae(e,n,i.Kzb);return await $n(e,r)?Pe(e,r):0n}(r);let f=0n;if(d){const t=await ia.find({accountId:r,collectionAddress:d});for(const e of null!=t?t:[]){var m;const t=null===(m=e.name)||void 0===m||null===(m=m.match(/Bill for (?<amount>[\d.]+) Pool Jetton/))||void 0===m||null===(m=m.groups)||void 0===m?void 0:m.amount;t&&(f+=b(t))}}const p=fa(r,a),w=Math.max(null!==(e=p.stakedAt)&&void 0!==e?e:0,null!==(n=o.stakedAt)&&void 0!==n?n:0),h=Date.now()-w>i.NFS?s.liquid.available:0n;let y=s.liquid.apy;c&&c in s.liquid.loyaltyApy&&(y=s.liquid.loyaltyApy[c]);const g=T(l+f,u);return{type:"liquid",id:"liquid",tokenSlug:i.Tu9.slug,pool:i.qMf,balance:g,annualYield:y,yieldType:"APY",tokenBalance:l,isUnstakeRequested:f>0n,unstakeRequestAmount:f,instantAvailable:h}}async function Hs(t,e){const{network:n}=t,{pool:r,token:a}=e,{decimals:o,slug:s}=ba(a),i=ge(n).open(pt.Ml.createFromAddress(J.Address.parse(r))),c=await i.getStorageData(),{tvl:u,rewardJettons:d}=Me(c),{rewardsDeposits:l}=Object.values(d)[0],f=Math.floor(Date.now()/1e3);let m=0n;for(const{startTime:t,endTime:e,distributionSpeed:n}of Object.values(l))t<f&&e>f&&(m+=n);const p=function(t){let{tvl:e,dailyReward:n,decimals:r}=t;if(!e)return 0;const a=E(n,r).div(E(e,r)).mul(Ao).mul(100).toFixed(2);return Number(a)}({tvl:u,dailyReward:m,decimals:o}),{address:w}=t,h=e.periods[0],y=await Se(n,r,h.period,w),g=await y.getStorageData().catch((()=>{}));let v,A=0n,b=0n;if(g){var S;const t=await Ae(n,r,a),e=g&&mt.sH.getAvailableRewards(g,c);A=null!==(S=e&&e[t])&&void 0!==S?S:0n,b=g.jettonBalance,v=Object.keys(e)}return{type:"jetton",id:r,pool:r,tokenAddress:a,tokenSlug:s,annualYield:p,yieldType:"APR",balance:b,unclaimedRewards:A,poolWallets:v,stakeWalletAddress:ke(y.address,!0),tokenAmount:0n,tvl:u,dailyReward:m,period:h.period}}async function Vs(t){const{address:e}=await ln(t),n=await async function(t){const e=await Ms(),n=await Jr(`/staking/state/${t}`,void 0,{"X-App-ClientID":e});if(n.balance=b(n.balance),n.totalProfit=b(n.totalProfit),!bt(n.nominatorsPool.address))throw Error("Unexpected pool address, likely a malicious activity");return n}(e);return{...n,nominatorsPool:{...n.nominatorsPool,start:1e3*n.nominatorsPool.start,end:1e3*n.nominatorsPool.end}}}function $s(t,e,n){return ns({accountId:t,password:e,toAddress:n.stakeWalletAddress,amount:Mt.claimJettons,data:Fe(n.poolWallets)})}var Qs=n(48287).Buffer;function Gs(t){let e=new J.Cell;return t&&(t instanceof J.Cell?e=t:"string"==typeof t?t.length>0&&(e=(new J.Builder).storeUint(0,32).storeStringTail(t).asCell()):e=(new J.Builder).storeBuffer(Qs.from(t)).asCell()),e.toBoc().toString("base64")}async function Zs(t){try{return await ge(t).getMasterchainInfo(),!0}catch(t){return!1}}function Xs(t){return"nft:transfer"===(null==t?void 0:t.type)}function Ys(t){return"tokens:transfer"===(null==t?void 0:t.type)||"tokens:transfer-non-standard"===(null==t?void 0:t.type)}function ti(t){return`swap:${t}`}function ei(t,e){return Jr(`/swap/history/${t}`,{...e,swapVersion:i.AuB})}function ni(t){return{...t,id:ti(t.id),kind:"swap",from:ri(t,t.from),to:ri(t,t.to)}}function ri(t,e){return e===i.Tu9.symbol?i.Tu9.slug:t.cex?null!==(n=null===(r=ba(e))||void 0===r?void 0:r.slug)&&void 0!==n?n:e:Sa("ton",e);var n,r}async function ai(t){const{address:e,swapId:n,authToken:r,msgHash:a,error:o}=t;await Lr(`/swap/history/${e}/${n}/update`,{swapVersion:i.AuB,msgHash:a,error:o},{method:"PATCH",authToken:r})}const oi=[i.yTE,i.InW],si="EQCajaUU1XXSAjTD-xOV7pE49fGtg4q8kF3ELCOJtGvQFQ2C",ii=1000000000n,ci=50,ui=3e5,di=1e3,li=41276;async function fi(t,e,n,r){const a=(a,o)=>{(0,ro.v)(a,o,{network:t,address:e,request:n,transfers:r})};a(r.length<=2,"Too many transfers");const[o,s]=r;if(n.from===i.Tu9.symbol){const e=b(n.fromAmount)+ii,{isSwapAllowed:r,codeHash:i}=await Yn(t,o.toAddress);a(!!r,`Not allowed swap contract: ${i}`),a(o.amount<=e,"Main transfer amount is too big"),s&&(a(s.amount<=o.amount,"Fee transfer amount is too big"),a(s.amount+o.amount<e,"Total amount is too big"),a(oi.includes(ke(s.toAddress,!1)),"Unexpected fee transfer address"))}else{var c,u;const r=ba(n.from);a(!!r,'Unknown "from" token');const i=b(n.fromAmount,r.decimals)+b(null!==(c=n.ourFee)&&void 0!==c?c:0,r.decimals)+b(null!==(u=n.dieselFee)&&void 0!==u?u:0,r.decimals),d=ii,l=await Ae(t,e,r.tokenAddress),f=await Ca(t,o.toAddress,o.payload);let m,p=0n;o.toAddress===si?(m=o.toAddress,a(o.toAddress===r.tokenAddress,"Main transfer address is not the token address")):(a(o.toAddress===l,"Main transfer address is not the token wallet address"),a(Ys(f),"Main transfer payload is not a token transfer"),({amount:p,destination:m}=f),a(p<=i,"Main transfer token amount is too big")),a(o.amount<d,"Main transfer TON amount is too big");const{isSwapAllowed:w}=await Yn(t,m);if(a(!!w,"Main transfer destination is not a swap smart contract"),s){const e=await Ca(t,s.toAddress,s.payload);a(s.amount+o.amount<d,"Total TON amount is too big"),a(s.toAddress===l,"Fee transfer address is not the token wallet address"),a(Ys(e),"Fee transfer payload is not a token transfer");const{amount:n,destination:r}=e;a(p+n<=i,"Total token amount is too big"),a(oi.includes(ke(r,!1)),"Unexpected fee transfer destination")}}}async function mi(t,e,n,r){if(!e.length||"testnet"===n)return e;try{var a;const{address:n}=await ln(t),o=r?null!==(a=Aa(r).tokenAddress)&&void 0!==a?a:i.Tu9.symbol:void 0,{fromLt:s,toLt:c,fromTime:u,toTime:d}=wi(e),l=await ei(n,{fromLt:s,toLt:c,fromTimestamp:u,toTimestamp:d,asset:o});return l.length?pi(e,l):e}catch(t){return(0,B.SJ)("swapReplaceTransactions",t),e}}function pi(t,e){const n=[],r=new Set,a=[];for(const t of e){var o;null===(o=t.txIds)||void 0===o||o.forEach((t=>{r.add(t)})),t.lt&&Number(t.id)<li&&a.push([t.lt,t.lt+ci]);const e=ni(t);n.push(e)}for(let e of t){const[t,o]=e.txId.split(":"),s=Number(t),i=`${s}:${o}`,c=Boolean(r.has(i)||a.find((t=>{let[e,n]=t;return s>=e&&s<=n})));c&&(e={...e,shouldHide:c}),n.push(e)}return n}function wi(t){const e=le(t[0].txId).lt,n=le(t[t.length-1].txId).lt,r=t[0].timestamp,a=t[t.length-1].timestamp,[o,s]=e>n?[n,a]:[e,r],[c,u]=e>n?[e,r]:[n,a],d=t[0].slug;return{asset:d===i.Tu9.slug?i.Tu9.symbol:Aa(d).tokenAddress,fromLt:100*Math.floor(o/100),toLt:c,fromTime:s,toTime:u}}const hi=new Set;let yi=!0;function gi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const n=new wo;return hi.add(n),n.promise.then((()=>{hi.delete(n)})),(0,za.v7)(yi?t:e).then(n.resolve),n.promise}function vi(t){yi=t,t&&hi.forEach((t=>t.resolve()))}function Ai(t,e){var n;return{...e,collectionAddress:null!==(n=e.collectionAddress)&&void 0!==n?n:"",accountId:t}}const bi=function(){const t=new Set;function e(e){t.delete(e)}return{runCallbacks:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((t=>{t(...n)}))},addCallback:function(n){return t.add(n),()=>{e(n)}},removeCallback:e,hasCallbacks:function(){return Boolean(t.size)}}}();var Ei=n(48287).Buffer;async function Si(t,e,n){const r=e.filter((t=>"ton"===t.chain&&!t.codeHash&&["LP","STAKED","POOL"].some((e=>t.symbol.toUpperCase().includes(e)))));if(!r.length)return;const a=et(r,"tokenAddress");try{const e=await async function(t,e){const{accounts:n}=await Mn(t,"/accountStates",{address:e.join(",")}),r=Object.fromEntries(e.map((t=>[De(t),t])));for(const t of n)t.address=r[t.address.toLowerCase()];return et(n,"address")}(t,r.map((t=>t.tokenAddress)));for(const t of Object.keys(e))a[t]&&(a[t].codeHash=Ei.from(e[t].code_hash,"base64").toString("hex"));await ya(Object.values(a).filter((t=>t.codeHash)),n,!0)}catch(t){(0,B.SJ)("Failed to fetch contract code hashes for tokens",t)}}async function Ii(t){const{network:e}=_(t),n="testnet"===e,{address:r}=await ln(t);return Jr(`/vesting/${r}`,{isTestnet:n})}const ki=1100,Di=1e4,Ti=3e4,Bi=6e4,Ci=5e3,Ri=1e4,_i=3e5,xi=9e5,Pi=1e4,Oi=6e4,Ui=3e4,Ni=6e4,Fi={};function Mi(t,e,n){!async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};delete Fi[t];const{network:r}=_(t);let a,o,{address:s,isInitialized:c}=await ln(t),u=Math.round(Date.now()/1e3),d=0;async function l(t,e,n){const{balance:a,lastTxId:o}=await Xn(r,s),c=void 0!==a&&a!==t[i.Tu9.slug];return e[i.Tu9.slug]=a,c&&n.push(i.Tu9.slug),{lastTxId:o,isToncoinBalanceChanged:c}}async function f(n){if(Date.now()-d<Bi){if(n){const n=await Cs(t,u).catch(Ki);Wi(e,t),n&&([u,a]=n,async function(t,e,n){e.filter((t=>!("nftReceived"===t.type&&t.nft.isHidden))).forEach(n);for(const n of e)if("nftSent"===n.type){const e=[t,n.nftAddress];await ia.delete(e)}else if("nftReceived"===n.type){const e=Ai(t,n.nft);await ia.put(e)}else if("nftPutUpForSale"===n.type){const e=[t,n.nftAddress];await ia.update(e,{isOnSale:!0})}}(t,a,e))}}else{const n=await Ts(t).catch(Ki);d=Date.now(),Wi(e,t),n&&(u=Math.round(Date.now()/1e3),async function(t,e,n){n({type:"updateNfts",accountId:t,nfts:e});const r=e.map((e=>Ai(t,e)));await ia.deleteWhere({accountId:t}),await ia.bulkPut(r)}(t,n,e))}}async function m(n,a,s,i){let c=[];if(n||o&&o<Date.now()){o=n?Date.now()+Ti:void 0,c=await No(t),Wi(e,t);const u=c.filter(Boolean).map((t=>{let{token:e}=t;return e}));await ya(u,e),await Si(r,u,e),c.forEach((t=>{let{slug:e,balance:n}=t;s[e]=n,a[e]!==n&&i.push(e)}))}return c}async function p(a,o,c){if(o.length){c&&await Es(r,s,c);const u=o.filter((t=>t!==i.Tu9.slug)),d=await async function(t,e,n,r,a){const{network:o}=_(t),s=[],c={};{const r=i.Tu9.slug;let o=e[r];const u=await ds(t,r,void 0,o,bo);u.length&&(o=u[0].timestamp,s.push(u)),c[r]=o;const d=et(null!=a?a:[],"jettonWallet");u.forEach((t=>{let{isIncoming:e,toAddress:r,fromAddress:a}=t;const o=d[e?a:r];o&&!n.includes(o.slug)&&(n=n.concat([o.slug]))}))}await Promise.all(n.map((async n=>{let r=e[n];const a=await ds(t,n,void 0,r,bo);a.length&&(r=a[0].timestamp,s.push(a)),c[n]=r})));const u=s.flat().sort(Fa),d=!Object.values(e).some(Boolean),l=await async function(t,e,n,r){e=e.slice();const{network:a}=_(t);if(!n.length||"testnet"===a)return e;try{const{address:a}=await ln(t);r||await async function(t){const e=Date.now()+ui;for(;Date.now()<e;){const e=await ei(t,{status:"pending",isCex:!1});if(!e.length)break;if(e.every((t=>Date.now()-t.timestamp>2*ui)))break;await(0,za.v7)(di)}}(a);const o=n.map((t=>wi(t))),s=await function(t,e){return Lr(`/swap/history-ranges/${t}`,{swapVersion:i.AuB,ranges:e})}(a,o);return s.length?pi(e,s):e}catch(t){return(0,B.SJ)("swapReplaceTransactionsByRanges",t),e}}(t,u,s,d);return u.slice().reverse().forEach((t=>{bi.runCallbacks(t)})),await Ss(o,l),l.sort(Fa),r({type:"newActivities",chain:"ton",activities:l,accountId:t}),c}(t,n,u,e,a);n={...n,...d}}e({type:"updatingStatus",kind:"activities",isUpdating:!1})}for(;uo(e,t);){try{var w;e({type:"updatingStatus",kind:"activities",isUpdating:!0}),e({type:"updatingStatus",kind:"balance",isUpdating:!0});const n={},a=[],o=null!==(w=Fi[t])&&void 0!==w?w:{},{lastTxId:i,isToncoinBalanceChanged:u}=await l(o,n,a);Wi(e,t);const d=await m(u,o,n,a);Fi[t]=n,a.length&&e({type:"updateBalances",accountId:t,chain:"ton",balances:n}),e({type:"updatingStatus",kind:"balance",isUpdating:!1}),await Promise.all([p(d,a,i),f(u)]),u&&!c&&await $n(r,s)&&(c=!0,await hn(t,{isInitialized:c}))}catch(t){if(t instanceof Eo.Ww)return;(0,B.SJ)("setupBalanceBasedPolling",t)}await gi(ki,Di)}}(t,e,n),async function(t,e){const n=await mn(t);if("bip39"===n.type)return;const r="ledger"===n.type,{publicKey:a,version:o}=n.ton,s=vt(a),{network:c}=_(t),u=(r?i.iQn:i.eZ2).filter((t=>t!==o));let d;for(;uo(e,t);){try{const n=(await ar(c,s,u)).filter((t=>!!t.lastTxId||"W5"===t.version)),r=n.map((t=>{let{wallet:e,...n}=t;return n}));if(!uo(e,t))return;no(n,d)||(d=n,e({type:"updateWalletVersions",accountId:t,currentVersion:o,versions:r}))}catch(t){(0,B.SJ)("setupWalletVersionsPolling",t)}await gi(_i,xi)}}(t,e),i.TI6||(async function(t,e){const{network:n}=_(t);if("mainnet"!==n)return;let r;for(;uo(e,t);){try{const n=pa(),a=await Vs(t),{shouldUseNominators:o,totalProfit:s}=a,i=await Js(t,n,a);if(!uo(e,t))return;no(i,r)||(r=i,e({type:"updateStaking",accountId:t,states:i,common:n,totalProfit:s,shouldUseNominators:o}))}catch(t){(0,B.SJ)("setupStakingPolling",t)}await gi(Ci,Ri)}}(t,e),async function(t,e){let n;for(;uo(e,t);){try{const r=await Ii(t);if(!uo(e,t))return;no(n,r)||(n=r,e({type:"updateVesting",accountId:t,vestingInfo:r}))}catch(t){(0,B.SJ)("setupVestingPolling",t)}await gi(Pi,Oi)}}(t,e))}function Wi(t,e){if(!uo(t,e))throw new Eo.Ww}function Ki(t){(0,B.SJ)("Polling error",t)}async function ji(t){let e,n={};const r=t;async function a(){const t=await pn();n={},Object.entries(t).filter((t=>{let[n]=t;return n!==e})).forEach((t=>{let[e,r]=t;const{network:a}=_(e),{address:o}=r.ton,s={id:e,network:a,address:o};n[o]||(n[o]=[]),n[o].push(s)}))}async function o(t,e,n,r){const{balance:a,lastTxId:o}=await Xn(t.network,t.address),s=void 0!==a&&a!==e[i.Tu9.slug];return n[i.Tu9.slug]=a,s&&r.push(i.Tu9.slug),{lastTxId:o,isToncoinBalanceChanged:s}}async function s(n,a,o,s){const i=await No(n.id);if(!e)throw new Eo.Ww;if(Wi(r,e),!i)return;const c=i.filter(Boolean).map((t=>{let{token:e}=t;return e}));await ya(c,t),await Si(n.network,c,t),i.forEach((t=>{let{slug:e,balance:n}=t;o[e]=n,a[e]!==n&&s.push(e)}))}for(;lo(r);){try{e=sn(),await a();for(const e of Object.keys(n)){var c;const a=n[e][0],i=null!==(c=Fi[a.id])&&void 0!==c?c:{},u={},d=[],{isToncoinBalanceChanged:l}=await o(a,i,u,d);lo(r)&&l&&(await s(a,i,u,d),Fi[a.id]=u,d.length&&n[a.address].forEach((e=>{t({type:"updateBalances",accountId:e.id,chain:"ton",balances:u})})))}}catch(t){if(t instanceof Eo.Ww)break;(0,B.SJ)("setupBalancesPolling",t)}await gi(Ui,Ni)}}var qi=n(17718);let Li;const Ji={},zi=Ma("tron");function Hi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return Li||(Li={mainnet:new qi.TronWeb({fullHost:zi.mainnet.apiUrl}),testnet:new qi.TronWeb({fullHost:zi.testnet.apiUrl})}),Li[t]}async function Vi(t){if(!(t in Ji)){const e=await Hi(t).trx.getChainParameters(),n=e.find((t=>"getEnergyFee"===t.key)).value,r=e.find((t=>"getTransactionFee"===t.key)).value;Ji[t]={energyUnitFee:n,bandwidthUnitFee:r}}return Ji[t]}async function $i(t,e,n,r,a){const{network:o}=_(t),{address:s}=await fn(t);if(e===i.X7T.slug){const t=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Ma("tron")[t].apiUrl,a=new URL(`${r}/v1/accounts/${e}/transactions`);return(await(0,Rn.x6)(a.toString(),n)).data}(o,s,{min_timestamp:r?r+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:a});return t.map((t=>function(t,e){var n;const{raw_data:r,txID:a,energy_fee:o,net_fee:s,block_timestamp:c}=e,u=BigInt(null!==(n=r.contract[0].parameter.value.amount)&&void 0!==n?n:0),d=qi.TronWeb.address.fromHex(r.contract[0].parameter.value.owner_address),l=qi.TronWeb.address.fromHex(r.contract[0].parameter.value.to_address),f=l===t;return{id:a,kind:"transaction",txId:a,timestamp:c,fromAddress:d,toAddress:l,amount:f?u:-u,slug:i.X7T.slug,isIncoming:f,normalizedAddress:f?d:l,fee:BigInt(o+s),shouldHide:"TransferAssetContract"===r.contract[0].type}}(s,t))).filter(Boolean)}{const{tokenAddress:t}=Aa(e),c=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Ma("tron")[t].apiUrl,a=new URL(`${r}/v1/accounts/${e}/transactions/trc20`);return(await(0,Rn.x6)(a.toString(),n)).data}(o,s,{contract_address:t,min_timestamp:r?r+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:a});return c.map((t=>function(t,e){const{transaction_id:n,block_timestamp:r,from:a,to:o,value:s,token_info:c}=e,u=BigInt(s),d=o===t;return{id:n,kind:"transaction",txId:n,timestamp:r,fromAddress:a,toAddress:o,amount:d?u:-u,slug:Sa(i.X7T.chain,c.address),isIncoming:d,normalizedAddress:d?a:o,fee:0n}}(s,t)))}}async function Qi(t,e,n,r){const a=(await Promise.all([$i(t,i.X7T.slug,e,void 0,n),...r.map((r=>$i(t,r,e,void 0,n)))])).filter((t=>t.length));if(!a.length)return[];const o=a.reduce(((t,e)=>t.length>e.length?t:t.length<e.length||t[t.length-1].timestamp<e[e.length-1].timestamp?e:t),[]),s=o[o.length-1].timestamp,[c,...u]=a;return Gi(c,u.flat()).flat().filter((t=>{let{timestamp:e}=t;return e>=s})).sort(Fa)}function Gi(t,e){const n=et(e,"id"),r=[];for(const e of t){const t=n[e.id];e.toAddress?r.push(e):t&&(t.fee=e.fee)}return[r,e]}async function Zi(t,e){const n=Hi(t);return BigInt(await n.trx.getBalance(e))}async function Xi(t,e,n){const r=await async function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;try{const o=await t.transactionBuilder.triggerSmartContract(e,n,{_isConstant:!0},r,a);return o&&o.result?o.constant_result:[]}catch(t){return(0,B.SJ)("callContract",t),[]}}(Hi(t),e,"balanceOf(address)",[{type:"address",value:n}],n);return r.length?BigInt(`0x${r[0]}`):0n}const Yi=1100,tc=1e4;async function ec(t,e,n){const{network:r}=_(t),{address:a}=await fn(t),{usdtAddress:o}=Ma("tron")[r],s=Sa("tron",o),c=[i.X7T.slug,s];let u,d;for(;uo(e,t);){try{const[l,f]=await Promise.all([Zi(r,a),Xi(r,o,a)]);l===u&&f===d||(e({type:"updateBalances",accountId:t,chain:"tron",balances:{[i.X7T.slug]:l,[s]:f}}),n=await nc(t,n,c,e),u=l,d=f)}catch(t){(0,B.SJ)("tron:setupPolling",t)}await gi(Yi,tc)}}async function nc(t,e,n,r){const a={},o=await Promise.all(n.map((async n=>{let r=e[n];const o=await $i(t,n,void 0,r,bo);return o.length&&(r=o[0].timestamp),a[n]=r,o}))),[s,...i]=o,c=Gi(s,i.flat()).flat().sort(Fa);return c.slice().reverse().forEach((t=>{bi.runCallbacks(t)})),r({type:"newActivities",chain:"tron",activities:c,accountId:t}),a}const rc={transferTrc20Estimated:28214970n},ac=1000000n;var oc=n(48287).Buffer;const sc=65;async function ic(t){const{accountId:e,amount:n,toAddress:r,tokenAddress:a}=t,{network:o}=_(e),s=Hi(o),i={};try{if(!s.isAddress(r))return{error:R.KL.InvalidToAddress};i.resolvedAddress=r;const{address:t}=await fn(e),[c,u,{energyUnitFee:d,bandwidthUnitFee:l}]=await Promise.all([Zi(o,t),s.trx.getBandwidth(t),Vi(o)]);let f;if(a)f=await async function(t,e){const{network:n,tokenAddress:r,toAddress:a,energyUnitFee:o,fromAddress:s}=e;let{amount:i}=e;const c=await Xi(n,r,s);if(!c)return rc.transferTrc20Estimated;(void 0===i||i>c)&&(i=1n);const{energy_required:u}=await t.transactionBuilder.estimateEnergy(r,"transfer(address,uint256)",{},[{type:"address",value:a},{type:"uint256",value:Number(i)}],s);return BigInt(o*u)}(s,{network:o,toAddress:r,tokenAddress:a,amount:n,energyUnitFee:d,fromAddress:t});else{const[e,a]=await Promise.all([s.transactionBuilder.sendTrx(r,Number(null!=n?n:1),t),s.trx.getAccount(r)]),o=69+oc.from(e.raw_data_hex,"hex").byteLength+sc;f=u>o?0n:BigInt(o)*BigInt(l),void 0===a.balance&&(f+=ac)}return i.fee=f,i.realFee=f,c>=(a?f:(null!=n?n:0n)+f)||(i.error=R.KL.InsufficientBalance),i}catch(t){return(0,B.SJ)("tron:checkTransactionDraft",t),{...(0,Eo.QS)(t),...i}}}async function cc(t){const{accountId:e,password:n,toAddress:r,amount:a,fee:o=0n,tokenAddress:s}=t,{network:i}=_(e);try{const t=Hi(i),c=await mn(e),{address:u}=c.tron;if(!(await Zi(i,u)>=(s?o:o+a)))return{error:R.jf.InsufficientBalance};const d=await Cn(e,n,c),l=t.fromMnemonic(d.join(" ")).privateKey.slice(2);if(s){const{transaction:e}=await async function(t,e){const{amount:n,tokenAddress:r,toAddress:a,feeLimit:o,fromAddress:s}=e,{transaction:i}=await t.transactionBuilder.triggerSmartContract(r,"transfer(address,uint256)",{feeLimit:Number(o)},[{type:"address",value:a},{type:"uint256",value:Number(n)}],s);return{transaction:i}}(t,{toAddress:r,tokenAddress:s,amount:a,feeLimit:o,fromAddress:u}),n=await t.trx.sign(e,l);return{amount:a,toAddress:r,txId:(await t.trx.sendRawTransaction(n)).transaction.txID}}{const e=await t.trx.sendTransaction(r,Number(a),{privateKey:l});if("code"in e&&(!("result"in e)||!e.result)){const t="message"in e&&e.message?function(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return e}(e.message):e.code.toString();return(0,B.SJ)("submitTransfer",{error:t,result:e}),{error:t}}return{amount:a,toAddress:r,txId:e.transaction.txID}}}catch(t){return(0,B.SJ)("submitTransfer",t),{error:R.jf.UnsuccesfulTransfer}}}function uc(t,e){const{address:n,publicKey:r}=Hi(t).fromMnemonic(e.join(" "));return{type:"tron",address:n,publicKey:r,index:0}}function dc(t){const e=Hi(t).isConnected();return Boolean(e)}const lc={ton:r,tron:a},fc={};async function mc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const e of null!==(a=fc[t])&&void 0!==a?a:[]){var a;try{await e(...n)}catch(e){(0,B.SJ)(`callHooks:${t}`,e)}}}const pc={};let wc;function hc(t){wc=t}function yc(t,e){const n=Ac(e);pc[t]=e,wc&&lo(wc)&&(n&&wc({type:"updateActiveDapp",accountId:n}),wc({type:"updateActiveDapp",accountId:t,origin:e}))}function gc(t){return pc[t]}function vc(t){const e=Ac(t);return!!e&&(bc(e),!0)}function Ac(t){return Object.keys(pc).find((e=>t===pc[e]))}function bc(t){return!!pc[t]&&(delete pc[t],wc&&lo(wc)&&wc({type:"updateActiveDapp",accountId:t}),!0)}function Ec(){for(const[t,e]of Object.entries(pc))e&&(delete pc[t],wc({type:"updateActiveDapp",accountId:t}))}async function Sc(t,e){var n;return null===(n=await yn(t,"dapps"))||void 0===n?void 0:n[e]}async function Ic(t,e){const n=await Bc(t);n[e.origin]=e,await vn(t,"dapps",n)}async function kc(t,e,n){const r=await Bc(t);return e in r&&(function(t,e){return pc[t]===e}(t,e)&&bc(t),delete r[e],await vn(t,"dapps",r),wc&&lo(wc)&&wc({type:"dappDisconnect",accountId:t,origin:e}),n||await mc("onDappDisconnected",t,e),await mc("onDappsChanged"),!0)}async function Dc(t){bc(t);const e=Object.keys(await Bc(t));await vn(t,"dapps",{}),e.forEach((e=>{wc({type:"dappDisconnect",accountId:t,origin:e}),mc("onDappDisconnected",t,e)})),await mc("onDappsChanged")}async function Tc(t){return Object.values(await Bc(t))}async function Bc(t){return await yn(t,"dapps")||{}}function Cc(){return en.getItem("dapps")}async function Rc(t){await gn(t,"dapps"),mc("onDappsChanged")}async function _c(){await en.removeItem("dapps"),await mc("onDappsChanged")}function xc(t){return An(t,"dapps")}function Pc(t){let{isLandscape:e}=t;return Jr("/v2/dapp/catalog",{isLandscape:e})}const{ton:Oc,tron:Uc}=lc;let Nc;function Fc(t){Nc=t}async function Mc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await so;const n=sn(),r=!n;cn(t),await en.setItem("currentAccountId",t),rn(),i.hL1&&(n&&_(n).network!==_(t).network&&Ec(),mc("onFirstLogin"),function(t){const e=gc(t);wc({type:"updateActiveDapp",accountId:t,origin:e})}(t)),r&&Ea(Nc);const a=await mn(t);"ton"in a&&Oc.setupPolling(t,Nc,Wc(e,"ton")),"tron"in a&&Uc.setupPolling(t,Nc,Wc(e,"tron"))}function Wc(t,e){const{slug:n}=Ma(e).nativeToken;return Object.entries(t).reduce(((t,r)=>{let[a,o]=r;return(a===n||a.startsWith(`${e}-`))&&(t[a]=o),t}),{})}function Kc(){jc(),cn(void 0),i.hL1&&(Ec(),mc("onFullLogout"))}function jc(){i.hL1&&bc(sn())}function qc(t){return ln(t)}function Lc(t){return mn(t)}const{ton:Jc,tron:zc}=lc;function Hc(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.iAh)?U.we(256).split(" "):Jc.generateMnemonic()}function Vc(t,e,n,r){return r||(r=i.RoE),Qc(t,e,n,r)}function $c(t){return Dn(t)&&i.iAh||lc.ton.validateMnemonic(t)}async function Qc(t,e,n,r){const a=P(e);let o=Dn(e);const s=await Jc.validateMnemonic(e);if(!(a||s||o&&i.iAh))throw new Error("Invalid mnemonic");const c=await un(t),u=await Tn(e,n),d=await Bn(u,n).catch((()=>{}));if(!n||!d)return{error:R.QD.DebugError};let l,f,m,p;try{if(o&&s&&(f=await Jc.getWalletFromMnemonic(e,t,r),f.lastTxId&&(o=!1)),o){const n=zc.getWalletFromBip39Mnemonic(t,e);f=await Jc.getWalletFromBip39Mnemonic(t,e),m=f.address,p=n.address,l={type:"bip39",mnemonicEncrypted:u,tron:n,ton:f}}else f||(f=a?await Jc.getWalletFromPrivateKey(e[0],t,r):await Jc.getWalletFromMnemonic(e,t,r)),l={type:"ton",mnemonicEncrypted:u,ton:f},m=f.address;await vn(c,"accounts",l);const n=i.TI6?await Gc({accountId:c,network:t,mnemonic:e,mnemonicEncrypted:u,version:r}):void 0;return Mc(c),{accountId:c,tonAddress:m,tronAddress:p,secondNetworkAccount:n}}catch(t){return(0,Eo.QS)(t)}}async function Gc(t){const{mnemonic:e,version:n,mnemonicEncrypted:r}=t,{network:a,accountId:o}=t,s=await Jc.getWalletFromMnemonic(e,a,n),i="testnet"===a?"mainnet":"testnet",c=x({..._(o),network:i});s.address=ke(s.address,!1,i);const u={type:"ton",mnemonicEncrypted:r,ton:s};return await vn(c,"accounts",u),{accountId:c,addressByChain:{ton:s.address},network:i}}async function Zc(t,e){const n=await un(t),{publicKey:r,address:a,index:o,driver:s,deviceId:i,deviceName:c,version:u}=e;return await function(t,e){return vn(t,"accounts",e)}(n,{type:"ledger",ton:{type:"ton",address:a,publicKey:r,version:u,index:o},driver:s,deviceId:i,deviceName:c}),{accountId:n,address:a,walletInfo:e}}async function Xc(t){Kc(),await Promise.all([An(t,"accounts"),It().isDappSupported&&xc(t)])}async function Yc(){Kc(),await Promise.all([en.removeItem("accounts"),en.removeItem("currentAccountId"),It().isDappSupported&&_c(),ia.clear()])}async function tu(t,e,n){await Promise.all([gn(t,"accounts"),It().isDappSupported&&Rc(t),ia.deleteWhere({accountId:t})]),jc(),await Mc(e,n)}async function eu(t,e){for(const[n,r]of Object.entries(await pn())){if(!("mnemonicEncrypted"in r))continue;const a=await Bn(r.mnemonicEncrypted,t),o=await Tn(a,e);await wn(n,{mnemonicEncrypted:o})}}function nu(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ru=new Map;class au{constructor(){nu(this,"resolve",void 0),nu(this,"reject",void 0),nu(this,"promise",new Promise(((t,e)=>{this.resolve=t,this.reject=e})))}}function ou(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();const e=new au;ru.set(t,e);const{promise:n}=e;return{promiseId:t,promise:n}}function su(t,e){const n=ru.get(t);n&&(n.resolve(e),ru.delete(t))}var iu=n(48287).Buffer;const cu=lc.ton;async function uu(t,e){const n=await mn(t),r=await mr(t,e,n);return iu.from(r).toString("hex")}async function du(t,e){return Cn(t,e,await mn(t))}function lu(){return O.wordlists.default}async function fu(t){var e;const[n,r]=null!==(e=await async function(){const t=await pn();return Object.entries(t).find((t=>{let[,{type:e}]=t;return"ledger"!==e}))}())&&void 0!==e?e:[];if(!n||!r)throw new Error("The user is not authorized in the wallet");return Boolean(await Cn(n,t,r))}function mu(t,e){su(t,e)}function pu(t,e){su(t,e)}function wu(t,e){!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown rejection reason";const n=ru.get(t);n&&(n.reject(new Eo.KB(e)),ru.delete(t))}(t,e)}async function hu(t,e){const{network:n}=_(t);return e||({address:e}=await ln(t)),cu.getWalletSeqno(n,e)}function yu(t,e){return dn(t,e)}function gu(t,e){return lc.ton.isAddressInitialized(t,e)}function vu(t,e,n){return lc[t].getWalletBalance(e,n)}function Au(t,e){return lc.ton.getContractInfo(t,e)}function bu(t,e){return lc.ton.getWalletInfo(t,e)}const{ton:Eu}=lc;function Su(t,e){const{network:n}=_(t);return Eu.fetchToken(n,e)}function Iu(t,e,n){return lc.ton.resolveTokenWalletAddress(t,e,n)}function ku(t,e){return lc.ton.resolveTokenAddress(t,e)}function Du(t){return lc.ton.getAccountTokenBalances(t)}function Tu(t,e){return lc.ton.getTokenBalances(e,t)}function Bu(t,e){const n=lc.ton,r=ba(t);return n.getToncoinAmountForTransfer(r,e)}let Cu;const{ton:Ru,tron:_u}=lc;function xu(t){Cu=t}async function Pu(t,e,n,r,a){const{network:o}=_(t);try{if("ton"===e){const s=await lc[e].fetchTokenTransactionSlice(t,n,r,void 0,a),i=await Ru.swapReplaceTransactions(t,s,o,n);return await Ru.fixTokenActivitiesAddressForm(o,i),i}return await lc[e].getTokenTransactionSlice(t,n,r,void 0,a)}catch(t){return(0,B.SJ)("fetchTokenActivitySlice",t),(0,Eo.QS)(t)}}async function Ou(t,e,n,r,a){const{network:o}=_(t);try{const{type:s}=await mn(t),i=await Ru.getAllTransactionSlice(t,n,e,r),c=await Ru.swapReplaceTransactions(t,i,o);if(await Ru.fixTokenActivitiesAddressForm(o,c),"bip39"!==s)return c;const u=await _u.getAllTransactionSlice(t,n,e,a);if(!c.length&&!u.length)return[];if(!c.length)return u;if(!u.length)return c;const d=Math.min(c[c.length-1].timestamp,u&&u[u.length-1].timestamp);return[...u,...c].sort(Fa).filter((t=>{let{timestamp:e}=t;return e>=d}))}catch(t){return(0,B.SJ)("fetchAllActivitySlice",t),(0,Eo.QS)(t)}}function Uu(t,e){return lc[t].checkTransactionDraft(e)}async function Nu(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,comment:c,fee:u,realFee:d,shouldEncrypt:l,isBase64Data:f,withDiesel:m,dieselAmount:p,isGaslessWithStars:w}=e,h="string"==typeof e.stateInit?J.Cell.fromBase64(e.stateInit):e.stateInit,y=await dn(r,t);let g;if(g=m&&"ton"===t?await Ru.submitTransferWithDiesel({accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,data:c,shouldEncrypt:l,dieselAmount:p,isGaslessWithStars:w}):await lc[t].submitTransfer({accountId:r,password:a,toAddress:o,amount:s,tokenAddress:i,data:c,shouldEncrypt:l,isBase64Data:f,stateInit:h,fee:u}),"error"in g)return g;if(!n)return g;const v=i?Sa(t,i):Ma(t).nativeToken.slug;let A;if("msgHash"in g){const{encryptedComment:e,msgHash:n}=g;A=ju(r,t,{amount:s,fromAddress:y,toAddress:o,comment:l?void 0:c,encryptedComment:e,fee:null!=d?d:0n,slug:v,inMsgHash:n}),"paymentLink"in g&&g.paymentLink&&Cu({type:"openUrl",url:g.paymentLink,isExternal:!0})}else{const{txId:e}=g;A=ju(r,t,{txId:e,amount:s,fromAddress:y,toAddress:o,comment:c,fee:null!=d?d:0n,slug:v})}return{...g,txId:A.txId}}async function Fu(t){const{network:e}=_(t),{address:n}=await ln(t);return(await go(e,n)).id}async function Mu(t,e,n){const{msgHash:r}=await Ru.sendSignedMessage(t,e,n);return ju(t,"ton",{...e.params,inMsgHash:r}).txId}function Wu(t){var e;null===(e=vo(t))||void 0===e||e.resolve()}function Ku(t,e,n,r){return lc.ton.decryptComment(t,e,n,r)}function ju(t,e,n){const{network:r}=_(t),{toAddress:a}=n;let o;o=n.normalizedAddress?n.normalizedAddress:"ton"===e?Ru.normalizeAddress(a,r):a;const s=function(t,e){const{amount:n,txId:r,...a}=t,o=co({...a,txId:r?`${r}|`:oo(),timestamp:Date.now(),isIncoming:!1,amount:-n,normalizedAddress:e,extraData:{}});return{...o,id:o.txId,kind:"transaction"}}(n,o);return Cu({type:"newLocalTransaction",transaction:s,accountId:t}),s}function qu(t,e){return lc.ton.fetchEstimateDiesel(t,e)}const{ton:Lu}=lc;function Ju(t){return Lu.getAccountNfts(t)}function zu(t){return Lu.checkNftTransferDraft(t)}async function Hu(t,e,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0n;const{address:s}=await ln(t),c=await Lu.submitNftTransfers({accountId:t,password:e,nfts:n,toAddress:r,comment:a});if("error"in c)return c;const u=D(o,Object.keys(c.messages).length);for(const[e,o]of c.messages.entries())ju(t,"ton",{amount:o.amount,fromAddress:s,toAddress:r,comment:a,fee:u,normalizedAddress:o.toAddress,slug:i.Tu9.slug,inMsgHash:c.msgHash,type:"nftTransferred",nft:null==n?void 0:n[e]});return c}function Vu(t,e){return Lu.checkNftOwnership(t,e)}async function $u(){var t;return null!==(t=await en.getItem("baseCurrency"))&&void 0!==t?t:i.wOb}function Qu(t){return en.setItem("baseCurrency",t)}let Gu;const Zu=new Promise((t=>{Gu=t}));function Xu(){Gu()}async function Yu(){await Zu}const{ton:td}=lc;function ed(){}function nd(t,e,n){return td.checkStakeDraft(t,e,n)}function rd(t,e,n){return td.checkUnstakeDraft(t,e,n)}async function ad(t,e,n,r,a){const{address:o}=await ln(t),s=await td.submitStake(t,e,n,r);if("error"in s)return!1;let c;return c=r.tokenSlug===i.Tu9.slug?ju(t,"ton",{amount:s.amount,fromAddress:o,toAddress:s.toAddress,fee:null!=a?a:0n,type:"stake",slug:r.tokenSlug,inMsgHash:s.msgHash}):ju(t,"ton",{amount:n,fromAddress:o,toAddress:s.toAddress,fee:null!=a?a:0n,type:"stake",slug:r.tokenSlug}),{...s,txId:c.txId}}async function od(t,e,n,r,a){const{address:o}=await ln(t),s=await td.submitUnstake(t,e,n,r);if("error"in s)return!1;const c=ju(t,"ton",{amount:s.amount,fromAddress:o,toAddress:s.toAddress,fee:null!=a?a:0n,type:"unstakeRequest",slug:i.Tu9.slug,inMsgHash:s.msgHash});return{...s,txId:c.txId}}async function sd(t,e,n){const{address:r}=await ln(t);return Jr(`/staking/profits/${r}`,{limit:e,offset:n})}async function id(){try{const t=await Jr("/staking/common");t.round.start*=1e3,t.round.end*=1e3,t.round.unlock*=1e3,t.prevRound.start*=1e3,t.prevRound.end*=1e3,t.prevRound.unlock*=1e3,t.liquid.available=b(t.liquid.available),function(t){ua=t}(t)}catch(t){(0,B.SJ)("tryUpdateLiquidStakingState",t)}}function cd(t){return td.getBackendStakingState(t)}async function ud(t,e,n,r){const{address:a}=await ln(t),o=await td.submitStakingClaim(t,e,n);if("error"in o)return o;const s=ju(t,"ton",{amount:o.amount,fromAddress:a,toAddress:o.toAddress,fee:null!=r?r:0n,slug:i.Tu9.slug,inMsgHash:o.msgHash});return{...o,txId:s.txId}}var dd=n(48287).Buffer;const ld=dd.from("MyTonWallet_AuthToken_n6i0k4w8pb");function fd(t,e){return lc[t].checkApiAvailability(e)}async function md(t,e){const n=await ln(t);let{authToken:r}=n;const{publicKey:a,isInitialized:o}=n;if(!r){const a=await lc.ton.fetchPrivateKey(t,e),o=F().sign.detached(ld,a);r=dd.from(o).toString("base64"),await wn(t,{ton:{...n,authToken:r}})}return o||(r+=`:${a}`),r}async function pd(){try{const[t,e,n]=await Promise.all([pn(),en.getItem("stateVersion"),en.getItem("mnemonicsEncrypted")]);return JSON.stringify({accounts:t,stateVersion:e,mnemonicsEncrypted:n})}catch(t){return void(0,B.SJ)("fetchAccountConfigForDebugPurposesOnly",t)}}function wd(){return!0}function hd(t,e,n){ma(t,e,n)}async function yd(t,e,n){try{return await Jr("/onramp-url",{chain:t,address:e,theme:n})}catch(t){return(0,B.SJ)("getMoonpayOnrampUrl",t),(0,Eo.QS)(t)}}function gd(){return Jr(`${i.HUv}/cards/info`)}const vd=lc.ton;let Ad;function bd(t){Ad=t}async function Ed(t,e,n){const{network:r}=_(t),a=await md(t,e),{address:o,version:s}=await ln(t);n.walletVersion=s;const{id:i,transfers:c}=await Td(a,n),u=c.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));try{await vd.validateDexSwapTransfers(r,o,n,u);const e=await vd.checkMultiTransactionDraft(t,u,n.shouldTryDiesel);return"error"in e?(await ai({address:o,swapId:i,authToken:a,error:e.error}),e):{...e,id:i,transfers:c}}catch(t){throw await ai({address:o,swapId:i,authToken:a,error:Id(t)}),t}}async function Sd(t,e,n,r,a){const o=r.id,s=await md(t,e),{address:c}=await ln(t);try{const u=n.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));r.from!==i.Tu9.symbol&&(u[0]=await vd.insertMintlessPayload("mainnet",c,r.from,u[0]));const d=await vd.submitMultiTransfer({accountId:t,password:e,messages:u,isGasless:a});if("error"in d)return await ai({address:c,swapId:o,authToken:s,error:d.error}),d;delete d.messages[0].stateInit;const l=ri(r,r.from),f=ri(r,r.to),m={...r,id:ti(r.id),from:l,to:f,kind:"swap"};return await ai({address:c,swapId:o,authToken:s,msgHash:d.msgHash}),Ad({type:"newActivities",chain:"ton",accountId:t,activities:[m]}),mc("onSwapCreated",t,m.timestamp-1),d}catch(t){throw await ai({address:c,swapId:o,authToken:s,error:Id(t)}),t}}function Id(t){return"string"==typeof t?t:t.stack}async function kd(t,e){const{address:n}=await ln(t),r=await Promise.allSettled(e.map((t=>function(t,e){return Jr(`/swap/history/${t}/${e}`,{swapVersion:i.AuB})}(n,t.replace("swap:",""))))),a=[],o=r.map(((t,n)=>{if("rejected"!==t.status)return ni(t.value);t.reason instanceof Eo.K$&&404===t.reason.statusCode&&a.push(e[n])})).filter(Boolean);return{nonExistentIds:a,swaps:o}}async function Dd(t,e){const n=(await ln(t)).version;return Lr("/swap/ton/estimate",{...e,swapVersion:i.AuB,walletVersion:n},{isAllowBadRequest:!0})}function Td(t,e){return Lr("/swap/ton/build",{...e,swapVersion:i.AuB,isMsgHashMode:!0},{authToken:t})}function Bd(){return Jr("/swap/assets")}function Cd(){return Jr("/swap/ton/tokens")}function Rd(t){return Jr("/swap/pairs",{asset:t})}function _d(t){return Lr("/swap/cex/estimate",t,{isAllowBadRequest:!0})}function xd(t){return Jr("/swap/cex/validate-address",t)}async function Pd(t,e,n){const r=await md(t,e),{swap:a}=await Lr("/swap/cex/createTransaction",{...n,swapVersion:i.AuB},{authToken:r}),o=ni(a);return Ad({type:"newActivities",accountId:t,activities:[o]}),mc("onSwapCreated",t,a.timestamp-1),{swap:a,activity:o}}const Od=3e4,Ud=6e4,Nd=3e4,{ton:Fd}=lc;let Md;async function Wd(t){Md=t,await qd(),Promise.allSettled([Gr(),Ld(t,!0),Jd(t),id()]).then((()=>Xu())),zd(t),Kd(),jd(),i.gmk&&Fd.setupInactiveAccountsBalancePolling(Md)}async function Kd(){const t=Md;for(;lo(t);){if(await gi(Od),!lo(t))return;try{await qd(t),await Ld(t)}catch(t){(0,B.SJ)("setupBackendPolling",t)}}}async function jd(){const t=Md;for(;lo(t);)await gi(Ud),await Promise.all([Gr(),id(),zd(t),Jd(t)])}async function qd(t){t||(t=Md);try{const e=await $u(),n=await Jr("/prices/current",{base:e});if(!lo(t))return;const r=wa();r.bySlug=et(Object.values(n),"slug"),r.baseCurrency=e}catch(t){(0,B.SJ)("tryUpdatePrices",t)}}async function Ld(t,e){t||(t=Md),e&&await async function(){return ya(await ca.all())}();try{let e=await Jr("/known-tokens");if(e=e.map((t=>({...at(t,["minterAddress"]),tokenAddress:t.minterAddress,chain:"ton"}))),!lo(t))return;await ya(e,Md,!0)}catch(t){(0,B.SJ)("tryUpdateTokens",t)}}async function Jd(t){t||(t=Md);try{const e=await Bd();if(!lo(t))return;const n=wa(),r=e.reduce(((t,e)=>{var r,a;return t[e.slug]={...at(e,["blockchain"]),chain:"blockchain"in e?e.blockchain:e.chain,tokenAddress:"contract"in e&&e.contract!==i.Tu9.symbol?e.contract:e.tokenAddress,price:null!==(r=null===(a=n.bySlug[e.slug])||void 0===a?void 0:a.price)&&void 0!==r?r:0},t}),{});Md({type:"updateSwapTokens",tokens:r})}catch(t){(0,B.SJ)("tryUpdateSwapTokens",t)}}async function zd(t){try{const{isLimited:e,isCopyStorageEnabled:n=!1,supportAccountsCount:r=1,now:a,country:o,isUpdateRequired:s}=await Jr("/utils/get-config");if(!lo(t))return;Md({type:"updateConfig",isLimited:e,isCopyStorageEnabled:n,supportAccountsCount:r,countryCode:o,isAppUpdateRequired:s});const i=(new Date).getTime();Math.abs(a-i)>Nd&&Md({type:"incorrectTime"})}catch(t){(0,B.SJ)("tryUpdateRegion",t)}}var Hd=n(55861);let Vd=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),$d=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),Qd=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({});const Gd={rE:"3.4.6"};function Zd(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;return{platform:Xd(),appName:i.C39,appVersion:Gd.rE,maxProtocolVersion:i.gY_,features:["SendTransaction",{name:"SendTransaction",maxMessages:t}]}}function Xd(){var t;const{userAgent:e}=navigator,n=navigator.platform||(null===(t=navigator)||void 0===t||null===(t=t.userAgentData)||void 0===t?void 0:t.platform)||"";let r;return r=i.hL1||i.tKX?"browser":/Android/.test(e)?"android":-1!==["iPhone"].indexOf(n)?"iphone":-1!==["iPad","iPod"].indexOf(n)?"ipad":-1!==["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)?"windows":/Linux/.test(n)?"linux":"browser",r}class Yd extends Eo.aU{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;var r,a,o;super(t),r=this,o=void 0,(a=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(a="code"))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o,this.code=e,this.displayError=n}}class tl extends Yd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Manifest content error",Vd.MANIFEST_CONTENT_ERROR)}}class el extends Yd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error.",0)}}class nl extends Yd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bad request",1,arguments.length>1?arguments[1]:void 0)}}class rl extends Yd{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown app error",100)}}const al=1000000000n,ol=3000000000n;function sl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"string"==typeof t&&t.length<=e}function il(t){if(!sl(t,255))return!1;try{return new URL(t),!0}catch(t){return!1}}function cl(t,e){return Xs(e)?e.newOwner:Ys(e)?e.destination:t}function ul(t){return"unknown"===(null==t?void 0:t.type)}function dl(t){let{amount:e,payload:n}=t;return e<=al&&(Xs(n)||Ys(n))}var ll=n(48287).Buffer;const fl="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ml=lc.ton;let pl;const wl=new Promise((t=>{pl=t}));let hl;function yl(t){hl=t,pl()}async function gl(t,e,n){try{await Rl(!0),hl({type:"dappLoading",connectionType:"connect",isSse:t&&"sseOptions"in t});const r=await Bl(e.manifestUrl);i.hL1||(t.origin=r.origin);const{origin:a}=await Cl(t,!0),o=e.items.find((t=>{let{name:e}=t;return"ton_addr"===e})),s=e.items.find((t=>{let{name:e}=t;return"ton_proof"===e})),c=s?{timestamp:Math.round(Date.now()/1e3),domain:new URL(a).host,payload:s.payload}:void 0;if(!o)throw new nl("Missing 'ton_addr'");if(c&&!c.domain.includes("."))throw new nl("Invalid domain");let u=await async function(){const t=await En();if(!t)throw new nl("The user is not authorized in the wallet");return t}();const{promiseId:d,promise:l}=ou(),f={...r,origin:a,connectedAt:Date.now(),..."sseOptions"in t&&{sse:t.sseOptions}};hl({type:"dappConnect",identifier:"identifier"in t?t.identifier:void 0,promiseId:d,accountId:u,dapp:f,permissions:{address:!0,proof:!!c},proof:c});const m=await l;u=m.accountId,t.accountId=u,await Ic(u,f),yc(u,a);const p=await mn(u),{address:w}=p.ton,h=Zd(Al(p)),y=[await Dl(u,p.ton)];if(c){const{password:t,signature:e}=m;let n;n=t?await async function(t,e,n,r,a){const o=await pr(t,n,e),{timestamp:s,domain:i,payload:c}=a,u=ll.allocUnsafe(8);u.writeBigInt64LE(BigInt(s));const d=ll.from(i),l=ll.allocUnsafe(4);l.writeInt32LE(d.byteLength);const f=J.Address.parse(r),m=ll.allocUnsafe(4);m.writeInt32BE(f.workChain);const p=ll.concat([m,f.hash]),w=ll.concat([ll.from("ton-proof-item-v2/","utf8"),p,l,d,u,ll.from(c)]),h=ll.concat([ll.from("ffff","hex"),ll.from("ton-connect","utf8"),ll.from(await yt(w))]);return Tl(a,(y=F().sign.detached(ll.from(await yt(h)),o.secretKey),ht.from(y).toString("base64")));var y}(u,p,t,w,c):Tl(c,e),y.push(n)}return hl({type:"updateDapps"}),hl({type:"dappConnectComplete"}),{event:"connect",id:n,payload:{items:y,device:h}}}catch(t){return(0,B.SJ)("tonConnect:connect",t),(0,Ja.A)((()=>{hl({type:"dappCloseLoading"})})),kl(n,t)}}async function vl(t,e){try{const{origin:n,accountId:r}=await Cl(t);if(yc(r,n),!await Sc(r,n))throw new rl;await async function(t,e,n){const r=await Sc(t,e);await Ic(t,{...r,...n})}(r,n,{connectedAt:Date.now()});const a=await mn(r),o=Zd(Al(a));return{event:"connect",id:e,payload:{items:[await Dl(r,a.ton)],device:o}}}catch(t){return(0,B.SJ)("tonConnect:reconnect",t),kl(e,t)}}function Al(t){const{type:e,ton:{version:n}}=t;return"ledger"===e?Gt:"W5"===n?Zt:Qt}async function bl(t,e){try{const{origin:e,accountId:n}=await Cl(t);await kc(n,e,!0),bc(n),hl({type:"updateDapps"})}catch(t){(0,B.SJ)("tonConnect:disconnect",t)}return{id:e.id,result:{}}}async function El(t,e){try{const{origin:n,accountId:r}=await Cl(t),{network:a}=_(r),o=JSON.parse(e.params[0]),{messages:s,network:c}=o,u=await mn(r),{type:d,ton:{address:l,publicKey:f}}=u,m=Al(u);if(s.length>m)throw new nl(`Payload contains more than ${m} messages, which exceeds limit`);const p=c?c===Hd.S5.MAINNET?"mainnet":"testnet":void 0;let w=o.valid_until;w&&w>10**10&&(w=Math.round(w/1e3));const h="ledger"===d;let y;if(o.from&&ke(o.from)!==ke(l)){const t=vt(f);if(!h||!await async function(t,e,n){var r;const[a,o]=await Promise.all([Yn(t,n),Ee(t,n)]);return"vesting"===(null===(r=a.contractInfo)||void 0===r?void 0:r.name)&&no(e,o)}(a,t,o.from))throw new nl(void 0,R.jf.WrongAddress);y=o.from}if(p&&a!==p)throw new nl(void 0,R.jf.WrongNetwork);await Rl(!0),hl({type:"dappLoading",connectionType:"sendTransaction",accountId:r,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{preparedMessages:g,checkResult:v}=await async function(t,e,n){const r=e.map((t=>{const{address:e,amount:r,payload:a,stateInit:o}=t;return{toAddress:Ue(e)?ke(e,!0,n):e,amount:BigInt(r),payload:a?J.Cell.fromBase64(a):void 0,stateInit:o?J.Cell.fromBase64(o):void 0}}));return{preparedMessages:r,checkResult:await ml.checkMultiTransactionDraft(t,r,!1,!0)}}(r,s,a),A=(await Bc(r))[n],b=await async function(t,e,n){if(!n.emulation&&void 0===n.fee)throw new Error("Both `emulation` and `fee` miss in the check result");const r=await Promise.all(e.map((async(r,a)=>{var o,s,i;let{address:c,amount:u,payload:d,stateInit:l}=r;const f=BigInt(u),m=Ue(c)?ke(c,!0,t):c,p=ke(c,void 0,t),w=d?await Ca(t,m,d):void 0,{isScam:h}=Xr(p)||{},y=null===(o=n.emulation)||void 0===o?void 0:o.byTransactionIndex[a];return{toAddress:m,amount:f,rawPayload:d,payload:w,stateInit:l,normalizedAddress:p,isScam:h,isDangerous:ul(w),displayedToAddress:cl(m,w),displayedAmount:f,fullFee:null!==(s=null==y?void 0:y.fee)&&void 0!==s?s:D(n.fee,e.length),received:null!==(i=null==y?void 0:y.received)&&void 0!==i?i:0n}})));return function(t){const e=t.reduce(((t,e)=>t+(dl(e)?e.displayedAmount:0n)),0n);return 0n===e||e>ol?t:t.map((t=>dl(t)?{...t,displayedAmount:0n,fullFee:t.fullFee+t.displayedAmount}:t))}(r)}(a,s,v),{promiseId:E,promise:S}=ou();hl({type:"dappSendTransactions",promiseId:E,accountId:r,dapp:A,transactions:b,vestingAddress:y});const I=await S;if(w&&w<Date.now()/1e3)throw new nl("The confirmation timeout has expired");let k,T,B;if(h){const t=I;({boc:k,msgHash:B}=await ml.sendSignedMessage(r,t[0]))}else{const t=I,e=await ml.submitMultiTransfer({accountId:r,password:t,messages:g,expireAt:w});"error"in e?T=e.error:({boc:k,msgHash:B}=e)}if(T)throw new el(T);return b.forEach((t=>{let{amount:e,normalizedAddress:n,payload:a}=t;const o="comment"===(null==a?void 0:a.type)?a.comment:void 0;ju(r,"ton",{amount:e,fromAddress:l,toAddress:n,comment:o,fee:v.fee,slug:i.Tu9.slug,inMsgHash:B})})),{result:k,id:e.id}}catch(t){(0,B.SJ)("tonConnect:sendTransaction",t),(0,Ja.A)((()=>{hl({type:"dappCloseLoading"})}));let n,r=$d.UNKNOWN_ERROR,a="Unhandled error";return t instanceof Eo.KB?(r=$d.USER_REJECTS_ERROR,a=t.message):t instanceof Yd?(r=t.code,a=t.message,n=t.displayError):n=t instanceof Eo.K$?t.displayError:R.QD.Unexpected,hl&&lo(hl)&&n&&hl({type:"showError",error:n}),{error:{code:r,message:a},id:e.id}}}function Sl(t,e){return{error:{code:Qd.METHOD_NOT_SUPPORTED,message:"Method not supported"},id:e.id}}async function Il(t){try{const{origin:e}=await Cl(t,!0);vc(e)}catch(t){(0,B.SJ)("tonConnect:deactivate",t)}}function kl(t,e){let n=Vd.UNKNOWN_ERROR,r="Unhandled error";return e instanceof Eo.KB?(n=Vd.USER_REJECTS_ERROR,r=e.message):e instanceof Yd&&(n=e.code,r=e.message),{id:t,event:"connect_error",payload:{code:n,message:r}}}async function Dl(t,e){const{network:n}=_(t),{publicKey:r,address:a}=e,o=await ml.getWalletStateInit(t,e);return{name:"ton_addr",address:De(a),network:"mainnet"===n?Hd.S5.MAINNET:Hd.S5.TESTNET,publicKey:r,walletStateInit:o.toBoc({idx:!0,crc32:!0}).toString("base64")}}function Tl(t,e){const{timestamp:n,domain:r,payload:a}=t,o=ll.from(r);return{name:"ton_proof",proof:{timestamp:n,domain:{lengthBytes:o.byteLength,value:o.toString("utf8")},signature:e,payload:a}}}async function Bl(t,e){try{const n=await Cr(t),{url:r,name:a,iconUrl:o}=await n,s=o.startsWith("data:")||""===o?fl:o;if(!il(r)||!sl(a)||!il(s))throw new Error("Invalid data");return{origin:null!=e?e:new URL(r).origin,url:r,name:a,iconUrl:s,manifestUrl:t}}catch(t){throw(0,B.SJ)("fetchDapp",t),new tl}}async function Cl(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{origin:n}=t;if(!n)throw new nl("Invalid origin");let r="";if(t.accountId)r=t.accountId;else if(!e){const{network:t}=_(await async function(){const t=await En();if(!t)throw new Error("The user is not authorized in the wallet");return t}()),e=await async function(t,e){const n=await Cc()||{};let r,a=0;return Object.entries(n).forEach((n=>{let[o,s]=n;e in s&&_(o).network===t&&s[e].connectedAt>a&&(a=s[e].connectedAt,r=o)})),r}(t,n);if(!e)throw new nl("The connection is outdated, try relogin");r=e}return{origin:n,accountId:r}}async function Rl(t){return!(!i.hL1||!t&&hl&&lo(hl)||(await mc("onWindowNeeded"),await wl,0))}var _l=n(48287).Buffer;const xl="https://tonconnectbridge.mytonwallet.org/bridge",Pl=300,Ol=24,Ul=6e4;let Nl,Fl,Ml,Wl=[];async function Kl(t){let{url:e,isFromInAppBrowser:n,identifier:r}=t;const{searchParams:a,origin:o}=new URL(e),s=a.get("ret")||"back",i=Number(a.get("v")),c=a.get("id"),u="back"!==s&&"none"!==s,d=a.get("r");if(!d)return void(u&&(Fl={validUntil:Date.now()+Ul,url:s,isFromInAppBrowser:n}));const l=(0,Ja.A)((()=>JSON.parse(d)))||JSON.parse(decodeURIComponent(d));(0,B.MD)("SSE Start connection:",{version:i,appClientId:c,connectRequest:l,ret:s,origin:o,identifier:r});const{secretKey:f,publicKey:m}=F().box.keyPair(),p=gt(f),w=gt(m),h={identifier:r,sseOptions:{clientId:w,appClientId:c,secretKey:p,lastOutputId:0}};if(await an,!l)return void Ml({type:"showError",error:"Invalid TON Connect link"});const y=await gl(h,l,0);return await ql(y,p,w,c),"connect_error"!==y.event&&await jl(),u?s:void 0}async function jl(){const[t,e,n]=await Promise.all([en.getItem("sseLastEventId"),Cc(),bn()]);if(!e||!n)return;Wl=Object.entries(e).reduce(((t,e)=>{let[r,a]=e;if(_(r).network===n)for(const e of Object.values(a)){var o;null!==(o=e.sse)&&void 0!==o&&o.clientId&&t.push({...e.sse,accountId:r,origin:e.origin})}return t}),[]);const r=ct(Wl,"clientId").filter(Boolean);r.length&&(Nl&&((0,Ja.A)((()=>{Nl.close()})),Nl=void 0),Nl=function(t,e){const n=new URL(`${xl}/events`);return n.searchParams.set("client_id",t.join(",")),e&&n.searchParams.set("last_event_id",e),new EventSource(n)}(r,t),Nl.onopen=()=>{(0,B.MD)("EventSource opened")},Nl.onerror=t=>{(0,B.SJ)("EventSource",t.type)},Nl.onmessage=async t=>{const{from:e,message:n}=JSON.parse(t.data),r=Wl.find((t=>{let{appClientId:n}=t;return n===e}));if(!r)return void(0,B.MD)(`Dapp with clientId ${e} not found`);const{accountId:a,clientId:s,appClientId:i,secretKey:c,origin:u,lastOutputId:d}=r,l=function(t,e,n){const r=_l.from(t,"base64"),a=r.subarray(0,Ol),o=r.subarray(Ol),s=F().box.open(o,a,_l.from(e,"hex"),_l.from(n,"hex")),i=new TextDecoder("utf-8").decode(s);return JSON.parse(i)}(n,i,c);(0,B.MD)("SSE Event:",l),await function(t){return en.setItem("sseLastEventId",t)}(t.lastEventId);const f={clientId:s,appClientId:i,secretKey:c,lastOutputId:d},m=await o[l.method]({origin:u,accountId:a,sseOptions:f},l);if(await ql(m,c,s,i),Fl){const{validUntil:t,url:e,isFromInAppBrowser:n}=Fl;t>Date.now()&&Ml({type:"openUrl",url:e,isExternal:!n}),Fl=void 0}})}function ql(t,e,n,r,a){const o=function(t,e,n){const r=(0,N.randomBytes)(Ol),a=F().box(t,r,_l.from(e,"hex"),_l.from(n,"hex"));return _l.concat([r,a]).toString("base64")}(_l.from(JSON.stringify(t)),r,e);return async function(t,e,n,r){const a=new URL(`${xl}/message`);a.searchParams.set("client_id",e),a.searchParams.set("to",n),a.searchParams.set("ttl",Pl.toString()),r&&a.searchParams.set("topic",r);const o=await fetch(a,{method:"POST",body:t});await(0,Rn.EQ)(o)}(o,n,r,a)}async function Ll(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.wOb;await Yu();const r=Aa(t);return r?Jr(`/prices/chart/${r.chain===i.Tu9.chain&&r.tokenAddress?r.tokenAddress:r.symbol}`,{base:n,period:e}):[]}async function Jl(t){try{return await Lr("/notifications/subscribe",t,{shouldRetry:!0})}catch(t){return(0,B.SJ)("subscribeNotifications",t),(0,Eo.QS)(t)}}async function zl(t){try{return await Lr("/notifications/unsubscribe",t,{shouldRetry:!0})}catch(t){return(0,B.SJ)("unsubscribeNotifications",t),(0,Eo.QS)(t)}}async function Hl(t,e){!function(t){io=t}(t);const n=St(e);i.hL1||Ke||(Ke=function(t,e,n){const r=new Je(t,void 0,n,void 0,void 0);function a(t){let{data:e}=t;r.onMessage(e)}return t.addEventListener("message",a),r.destroy=()=>{t.removeEventListener("message",a)},r}(self,0,i.Pcx),Ke.init()),Fc(t),Wd(t),xu(t),bd(t),n.isDappSupported&&(hc(t),yl(t)),n.isSseSupported&&(Ml=t),await function(t,e){return so=async function(t,e){let n=Number(await en.getItem("stateVersion",!0));if(17===n)return;if(i.TI6&&!n&&await async function(t){const e=i.hL1?en:tn,[n="v3R2",r,a,o,s,c,u]=await Promise.all([e.getItem("walletVersion"),e.getItem("isTestnet"),e.getItem("address"),e.getItem("words"),e.getItem("publicKey"),e.getItem("proxy"),e.getItem("magic")]);r&&t({type:"updateSettings",settings:{isTestnet:!0}});const d=r?"testnet":"mainnet",l=`0-ton-${d}`;if(a&&o&&s){const i="mainnet"===d?"testnet":"mainnet",f=`0-ton-${i}`,m=ke(a,!1,i),p={};p[l]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:a,version:n,publicKey:s,index:0}},p[f]={type:"ton",mnemonicEncrypted:o,ton:{type:"ton",address:m,version:n,publicKey:s,index:0}},await en.setItem("accounts",p),t({type:"migrateCoreApplication",isTestnet:r,accountId:l,address:a,secondAccountId:f,secondAddress:m,isTonProxyEnabled:c,isTonMagicEnabled:u}),["walletVersion","isTestnet","words","address","publicKey","magic","proxy","isLedger","ledgerTransportType","__time","isDebug"].forEach((t=>{e.removeItem(t)}))}}(t),i.UMQ&&!n)if(await en.getItem("accounts",!0))n=10;else{const t=await Xe.getItem("stateVersion");t&&(n=Number(t))}if(i.hL1&&!n&&!await en.getItem("addresses")&&(n=await Xe.getItem("stateVersion"),n)){const t=await Xe.getAll();await en.setMany(t)}if(!n)return void await en.setItem("stateVersion",17);if(!n){const t=await en.getItem("mnemonicEncrypted");if(t&&(await en.setItem("mnemonicsEncrypted",JSON.stringify({[i.Kih]:t})),await en.removeItem("mnemonicEncrypted")),!t)for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=await en.getItem(t);if(!e)continue;const n=JSON.parse(e),r=Object.entries(n).reduce(((t,e)=>{let[n,r]=e;const[a,o="ton"]=n.split("-");return t[[a,o].join("-")]=r,t}),{});await en.setItem(t,JSON.stringify(r))}n=1,await en.setItem("stateVersion",n)}if(1===n){const t=await en.getItem("addresses");if(t&&t.includes("-undefined"))for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=(await en.getItem(t)).replace("-undefined","-ton");await en.setItem(t,e)}n=2,await en.setItem("stateVersion",n)}if(n>=2&&n<=4){for(const t of["addresses","mnemonicsEncrypted","publicKeys","dapps"]){const e=await en.getItem(t);"string"==typeof e&&await en.setItem(t,JSON.parse(e))}n=5,await en.setItem("stateVersion",n)}if(5===n){const t=await en.getItem("dapps");if(t){for(const e of Object.values(t))for(const t of Object.values(e))t.connectedAt=1;await en.setItem("dapps",t)}n=6,await en.setItem("stateVersion",n)}if(6===n){for(const t of["addresses","mnemonicsEncrypted","publicKeys","accounts","dapps"]){let e=await en.getItem(t);e&&(e=Object.entries(e).reduce(((t,e)=>{let[n,r]=e;const a=_(n),o=fo({...a,network:"mainnet"}),s=fo({...a,network:"testnet"});return{...t,[o]:r,[s]:r}}),{}),await en.setItem(t,e))}n=7,await en.setItem("stateVersion",n)}if(7===n){const e=await en.getItem("addresses");if(e){var r;const n=await en.getItem("publicKeys"),a=null!==(r=await en.getItem("accounts"))&&void 0!==r?r:{};for(const[r,o]of Object.entries(e)){const e=ke(o,!1);a[r]={...a[r],address:e,publicKey:n[r]},t({type:"updateAccount",accountId:r,partial:{address:e}})}await en.setItem("accounts",a),await en.removeItem("addresses"),await en.removeItem("publicKeys")}n=8,await en.setItem("stateVersion",n)}if(8===n){if(It().isSseSupported){const t=await en.getItem("dapps");if(t){const e=[];for(const n of Object.values(t))for(const t of Object.values(n)){var a,o;null!==(a=t.sse)&&void 0!==a&&a.appClientId&&e.push({clientId:null===(o=t.sse)||void 0===o?void 0:o.appClientId})}}}n=9,await en.setItem("stateVersion",n)}if(9===n){if(i.UMQ){const t=await Xe.getAll();for(const[e,n]of Object.entries(t))if(await Ve.setItem(e,n),!no(n,await Ve.getItem(e,!0)))throw new Error("Migration error!");await Xe.clear()}n=10,await en.setItem("stateVersion",n)}let s=!1;if(It().isIosApp&&n>=10&&n<=13&&(await mo(),s=!0),10===n||11===n||12===n){const t=await en.getItem("accounts",!0);if(t){for(const n of Object.values(t)){const{publicKey:t,address:r,version:a}=n;if(a||!t)continue;const o=vt(t),s=e.pickWalletByAddress("mainnet",o,r);n.version=s.version}await en.setItem("accounts",t)}n=13,await en.setItem("stateVersion",n)}if(13===n){const e=await en.getItem("accounts",!0);if(e){for(const[n,r]of Object.entries(e)){const{network:e}=_(n);"testnet"===e&&(r.address=ke(r.address,!1,e),t({type:"updateAccount",accountId:n,partial:{address:r.address}}))}n=14,await en.setItem("accounts",e)}}14!==n&&15!==n||(It().isIosApp&&!s&&await mo(),n=16,await en.setItem("stateVersion",n)),16===n&&(await async function(){const t=await en.getItem("accounts");if(!t)return;const e=await en.getItem("mnemonicsEncrypted"),n={};for(const[a,o]of Object.entries(t)){var r;const{address:t,version:s,publicKey:i,authToken:c,ledger:u,isInitialized:d}=o,l={type:"ton",address:t,version:s,publicKey:i,authToken:c,isInitialized:d,index:null!==(r=null==u?void 0:u.index)&&void 0!==r?r:0};n[a]=u?{type:"ledger",ton:l,driver:u.driver,deviceId:u.deviceId,deviceName:u.deviceName}:{type:"ton",mnemonicEncrypted:e[a],ton:l}}await en.setItem("accounts",n)}(),n=17,await en.setItem("stateVersion",n))}(t,e).catch((t=>{var e;(0,B.SJ)("Migration error",t),null===(e=io)||void 0===e||e({type:"showError",error:"Migration error"})})),so}(t,lc.ton),n.isSseSupported&&jl(),async function(t){var e;let n=await en.getItem("referrer");void 0===n&&(t.referrer?n=t.referrer:({referrer:n}=await Jr("/referrer/get")),await en.setItem("referrer",null!==(e=n)&&void 0!==e?e:""))}(e)}!function(t){for(const[n,r]of Object.entries(t)){var e;fc[n]=(null!==(e=fc[n])&&void 0!==e?e:[]).concat([r])}}({onDappDisconnected:async function(t,e){const n=Wl.find((n=>n.origin===e&&n.accountId===t));if(!n)return;const{secretKey:r,clientId:a,appClientId:o}=n,s={event:"disconnect",id:n.lastOutputId+1,payload:{}};await ql(s,r,a,o)},onDappsChanged:jl}),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self;function r(t,r){t.channel=e,r?n.postMessage(t,r):n.postMessage(t)}(arguments.length>3?arguments[3]:void 0)||function(t){self.onerror=e=>{var n,r;const a=(null===(n=e.error)||void 0===n?void 0:n.message)||"Uncaught exception in worker";(0,B.SJ)(a,e.error),t({type:"unhandledError",error:{message:a,stack:null===(r=e.error)||void 0===r?void 0:r.stack}})},self.addEventListener("unhandledrejection",(e=>{var n,r;const a=(null===(n=e.reason)||void 0===n?void 0:n.message)||"Unhandled rejection in worker";(0,B.SJ)(a,e.reason),t({type:"unhandledError",error:{message:a,stack:null===(r=e.reason)||void 0===r?void 0:r.stack}})}))}(r),n.onmessage=n=>{var a;(null===(a=n.data)||void 0===a?void 0:a.channel)===e&&async function(t,e,n,r,a){switch(r||(r=t=>{n({type:"update",update:t})}),e.type){case"init":{var o;const{args:n}=e,s="function"==typeof t?t("init",a,r,...n):null===(o=t.init)||void 0===o?void 0:o.call(t,r,...n);await s;break}case"callMethod":{const{messageId:r,name:o,args:s,withCallback:i}=e;try{if(r&&i){const t=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];const o=e[e.length-1];var s;n({type:"methodCallback",messageId:r,callbackArgs:e},(s=o)instanceof ArrayBuffer||s instanceof ImageBitmap?[o]:void 0)};C.set(r,t),s.push(t)}const e="function"==typeof t?await t(o,a,...s):await t[o](...s),{arrayBuffer:c}="object"==typeof e&&e&&"arrayBuffer"in e||{};r&&n({type:"methodResponse",messageId:r,response:e},c?[c]:void 0)}catch(t){(0,B.SJ)(o,t),r&&n({type:"methodResponse",messageId:r,error:{message:t.message}})}r&&C.delete(r);break}case"cancelProgress":{const t=C.get(e.messageId);t&&(t.isCanceled=!0);break}}}(t,n.data,r)}}((function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return"init"===t?Hl(r[0],r[1]):t.startsWith("tonConnect_")?(t=t.replace("tonConnect_",""),(0,o[t])(...r)):(0,s[t])(...r)}))},56051:(t,e,n)=>{"use strict";n.d(e,{KL:()=>a,QD:()=>r,jf:()=>o});let r=function(t){return t.Unexpected="Unexpected",t.ServerError="ServerError",t.DebugError="DebugError",t.UnsupportedVersion="UnsupportedVersion",t}({}),a=function(t){return t.InvalidAmount="InvalidAmount",t.InvalidToAddress="InvalidToAddress",t.InsufficientBalance="InsufficientBalance",t.InvalidStateInit="InvalidStateInit",t.StateInitWithoutBin="StateInitWithoutBin",t.DomainNotResolved="DomainNotResolved",t.WalletNotInitialized="WalletNotInitialized",t.InvalidAddressFormat="InvalidAddressFormat",t.InactiveContract="InactiveContract",t}({}),o=function(t){return t.PartialTransactionFailure="PartialTransactionFailure",t.IncorrectDeviceTime="IncorrectDeviceTime",t.InsufficientBalance="InsufficientBalance",t.UnsuccesfulTransfer="UnsuccesfulTransfer",t.NotSupportedHardwareOperation="NotSupportedHardwareOperation",t.HardwareBlindSigningNotEnabled="HardwareBlindSigningNotEnabled",t.WrongAddress="WrongAddress",t.WrongNetwork="WrongNetwork",t}({})},23174:(t,e,n)=>{"use strict";n.d(e,{Dn:()=>r.D,KL:()=>a.KL,QD:()=>a.QD,jf:()=>a.jf});var r=n(10428),a=n(56051)},10428:(t,e,n)=>{"use strict";n.d(e,{D:()=>r});let r=function(t){return t[t.Default=0]="Default",t[t.Instant=1]="Instant",t[t.BestRate=2]="BestRate",t}({})},31481:(t,e,n)=>{"use strict";n.d(e,{APY:()=>dt,AuB:()=>pt,C39:()=>s,FHx:()=>h,Guj:()=>a,HGV:()=>D,HUv:()=>C,InW:()=>w,Irq:()=>E,Kih:()=>A,KmP:()=>ut,Kzb:()=>U,MVx:()=>u,NFS:()=>R,Oig:()=>c,PcM:()=>g,Pcx:()=>Y,Pjb:()=>W,Q$0:()=>T,RoE:()=>nt,SKs:()=>B,TI6:()=>o,TUC:()=>st,Tu9:()=>j,UMQ:()=>l,WRE:()=>it,WVU:()=>lt,X1K:()=>_,X7T:()=>q,_J8:()=>b,_Qu:()=>M,aPk:()=>P,bOf:()=>v,cSq:()=>ot,dqR:()=>x,eZ2:()=>rt,gR8:()=>ct,gY_:()=>N,gmk:()=>f,gs5:()=>ht,hL1:()=>d,hl5:()=>i,iAh:()=>y,iQn:()=>at,kNZ:()=>ft,lHX:()=>I,lfO:()=>G,pV9:()=>et,pyR:()=>k,q5n:()=>F,qL:()=>K,qMf:()=>O,rQT:()=>X,rUK:()=>V,rcB:()=>mt,tKX:()=>m,vPi:()=>Z,wOb:()=>tt,xlJ:()=>S,yTE:()=>p,zll:()=>J});var r=n(65606);const a="production",o=!0,s=o?"TON Wallet":"MyTonWallet",i="3.4.6",c="production"!==a&&"perf"!==a&&"test"!==a,u=!1,d=!1,l=(r.env.IS_OPERA_EXTENSION,!1),f=!1,m=!1,p="UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp",w="UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG",h="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",y=!o,g=64,v=4,A="0-ton-mainnet",b="https://toncenter.mytonwallet.org",E="",S="",I="https://tonapiio.mytonwallet.org",k="https://toncenter-testnet.mytonwallet.org",D="",T="",B="https://tonapiio-testnet.mytonwallet.org",C="https://api.mytonwallet.org",R=65536e3,_=1000000000n,x=15000000n,P="3wrbrkS1z3Gpjk3ppd8m8-s_ wW4fiH5zVd4SaHih7PObxP_0 OP3OduRYPdavxGO3DH12fF5g qSTQda2Z1vGK-b7EaPQoeJMx JQoONbSGp8MkrAu1xtM6NOxE dPA4cFLr3rxLOoDcpzR_SyBX".split(" "),O="EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o",U="EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE",N=2,F=new Set(["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2"]),M="https://nft.fragment.com/gift/",W=/^https?:\/\/nft\.(fragment\.com\/gift\/[\w-]+-\d+)\.\w+$/i,K="EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM",j={name:"Toncoin",symbol:"TON",slug:"toncoin",decimals:9,chain:"ton",cmcSlug:"toncoin"},q={name:"TRON",symbol:"TRX",slug:"trx",decimals:6,chain:"tron",cmcSlug:"tron"},L={name:"MyTonWallet Coin",symbol:"MY",slug:"ton-eqcfvnlrbn",decimals:9,chain:"ton",minterAddress:"EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w"},J={ton:{isMemoSupported:!0,isDnsSupported:!0,addressRegex:/^([-\w_]{48}|0:[\da-h]{64})$/i,addressPrefixRegex:/^([-\w_]{1,48}|0:[\da-h]{0,64})$/i,nativeToken:j},tron:{isMemoSupported:!1,isDnsSupported:!1,addressRegex:/^T[1-9A-HJ-NP-Za-km-z]{33}$/,addressPrefixRegex:/^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,nativeToken:q,mainnet:{apiUrl:"https://tronapi.mytonwallet.org",usdtAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},testnet:{apiUrl:"https://api.shasta.trongrid.io",usdtAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs"}}},z="tron-tr7nhqjekq",H="tron-tg3xxyexbk",V="ton-eqcxe6mutq",$={name:"Tether USD",symbol:"USDT",decimals:6,chain:"tron"},Q={name:"Tether USD",symbol:"USD₮",chain:"ton",slug:V,decimals:6,tokenAddress:"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"},G=(j.slug,q.slug,j.slug,q.slug,{toncoin:{...j,quote:{slug:j.slug,price:1.95,priceUsd:1.95,percentChange24h:0}},trx:{...q,quote:{slug:q.slug,price:0,priceUsd:0,percentChange24h:0}},[z]:{...$,slug:z,tokenAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",quote:{slug:z,price:0,priceUsd:0,percentChange24h:0}},[H]:{...$,slug:H,tokenAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs",quote:{slug:H,price:0,priceUsd:0,percentChange24h:0}},[V]:{...Q,image:"https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp",quote:{slug:V,price:0,priceUsd:0,percentChange24h:0}},[L.slug]:{...L,image:"https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp",quote:{slug:L.slug,price:0,priceUsd:0,percentChange24h:0}}}),Z=(j.symbol,j.chain,j.slug,j.decimals,j.slug,j.slug,j.slug,"keyval-store"),X="keyval",Y="windowProvider",tt="USD",et=(j.symbol,"UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ"),nt="W5",rt=["v3R1","v3R2","v4R2","W5"],at=["v3R2","v4R2"],ot=1e4,st=3,it=500,ct=4,ut="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW",dt=30000000n,lt=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"],ft=/((ftp|https?):\/\/)?(?<host>(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z][-a-zA-Z0-9]{1,62})\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g,mt=/telegram[:\s-]*((@[a-z0-9_]+)|(https:\/\/)?(t\.me|telegram\.me|telegram\.dog)\/[a-z0-9_]+)/gim,pt=(new Set(["82566ad72b6568fe7276437d3b0c911aab65ed701c13601941b2917305e81c11","ec614ea4aaea3f7768606f1c1632b3374d3de096a1e7c4ba43c8009c487fee9d","c0f9d14fbc8e14f0d72cba2214165eee35836ab174130912baf9dbfa43ead562","1275095b6da3911292406f4f4386f9e780099b854c6dee9ee2895ddce70927c1","5d01684bdf1d5c9be2682c4e36074202432628bd3477d77518d66b0976b78cca"]),new Set(["ton-eqcqc6ehrj","ton-eqcbzvsfwq"]),j.slug,j.slug,2),wt=[{suffixes:["ton"],baseFormat:/^([-\da-z]+\.){0,2}[-\da-z]{4,126}$/i,resolver:"EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz"},{suffixes:["t.me"],baseFormat:/^([-\da-z]+\.){0,2}[-_\da-z]{4,32}$/i,resolver:"EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi",isTelemint:!0},{suffixes:["vip","ton.vip","vip.ton"],baseFormat:/^([-\da-z]+\.){0,2}?[\da-z]{1,24}$/i,resolver:"EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS",isUnofficial:!0},{suffixes:["gram"],baseFormat:/^([-\da-z]+\.){0,2}[\da-z]{1,127}$/i,resolver:"EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ",isUnofficial:!0}],ht=o?wt.filter((t=>{let{isUnofficial:e}=t;return!e})):wt},87963:function(t){!function(){"use strict";function e(t){return parseInt(t)===t}function n(t){if(!e(t.length))return!1;for(var n=0;n<t.length;n++)if(!e(t[n])||t[n]<0||t[n]>255)return!1;return!0}function r(t,r){if(t.buffer&&"Uint8Array"===t.name)return r&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(e(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function a(t){return new Uint8Array(t)}function o(t,e,n,r,a){null==r&&null==a||(t=t.slice?t.slice(r,a):Array.prototype.slice.call(t,r,a)),e.set(t,n)}var s,i={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var a=t.charCodeAt(n++);37===a?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(a)}return r(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):r>191&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(s="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(s[(240&r)>>4]+s[15&r])}return e.join("")}}),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],m=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],w=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],h=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],g=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],I=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function k(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var D=function(t){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:r(t,!0)}),this._prepare()};D.prototype._prepare=function(){var t=u[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),a=this.key.length/4,o=k(this.key);for(e=0;e<a;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var s,i=0,c=a;c<r;){if(s=o[a-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^d[i]<<24,i+=1,8!=a)for(e=1;e<a;e++)o[e]^=o[e-1];else{for(e=1;e<a/2;e++)o[e]^=o[e-1];for(s=o[a/2-1],o[a/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24,e=a/2+1;e<a;e++)o[e]^=o[e-1]}for(e=0;e<a&&c<r;)f=c>>2,m=c%4,this._Ke[f][m]=o[e],this._Kd[t-f][m]=o[e++],c++}for(var f=1;f<t;f++)for(var m=0;m<4;m++)s=this._Kd[f][m],this._Kd[f][m]=b[s>>24&255]^E[s>>16&255]^S[s>>8&255]^I[255&s]},D.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=k(t),o=0;o<4;o++)r[o]^=this._Ke[0][o];for(var s=1;s<e;s++){for(o=0;o<4;o++)n[o]=m[r[o]>>24&255]^p[r[(o+1)%4]>>16&255]^w[r[(o+2)%4]>>8&255]^h[255&r[(o+3)%4]]^this._Ke[s][o];r=n.slice()}var i,c=a(16);for(o=0;o<4;o++)i=this._Ke[e][o],c[4*o]=255&(l[r[o]>>24&255]^i>>24),c[4*o+1]=255&(l[r[(o+1)%4]>>16&255]^i>>16),c[4*o+2]=255&(l[r[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(l[255&r[(o+3)%4]]^i);return c},D.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=k(t),o=0;o<4;o++)r[o]^=this._Kd[0][o];for(var s=1;s<e;s++){for(o=0;o<4;o++)n[o]=y[r[o]>>24&255]^g[r[(o+3)%4]>>16&255]^v[r[(o+2)%4]>>8&255]^A[255&r[(o+1)%4]]^this._Kd[s][o];r=n.slice()}var i,c=a(16);for(o=0;o<4;o++)i=this._Kd[e][o],c[4*o]=255&(f[r[o]>>24&255]^i>>24),c[4*o+1]=255&(f[r[(o+3)%4]>>16&255]^i>>16),c[4*o+2]=255&(f[r[(o+2)%4]>>8&255]^i>>8),c[4*o+3]=255&(f[255&r[(o+1)%4]]^i);return c};var T=function(t){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new D(t)};T.prototype.encrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16)o(t,n,0,s,s+16),o(n=this._aes.encrypt(n),e,s);return e},T.prototype.decrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16)o(t,n,0,s,s+16),o(n=this._aes.decrypt(n),e,s);return e};var B=function(t,e){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastCipherblock=r(e,!0),this._aes=new D(t)};B.prototype.encrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16){o(t,n,0,s,s+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),o(this._lastCipherblock,e,s)}return e},B.prototype.decrypt=function(t){if((t=r(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=a(t.length),n=a(16),s=0;s<t.length;s+=16){o(t,n,0,s,s+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[s+i]=n[i]^this._lastCipherblock[i];o(t,this._lastCipherblock,0,s,s+16)}return e};var C=function(t,e,n){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=a(16);n||(n=1),this.segmentSize=n,this._shiftRegister=r(e,!0),this._aes=new D(t)};C.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=r(t,!0),a=0;a<n.length;a+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)n[a+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(n,this._shiftRegister,16-this.segmentSize,a,a+this.segmentSize)}return n},C.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=r(t,!0),a=0;a<n.length;a+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)n[a+s]^=e[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(t,this._shiftRegister,16-this.segmentSize,a,a+this.segmentSize)}return n};var R=function(t,e){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=a(16);this._lastPrecipher=r(e,!0),this._lastPrecipherIndex=16,this._aes=new D(t)};R.prototype.encrypt=function(t){for(var e=r(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},R.prototype.decrypt=R.prototype.encrypt;var _=function(t){if(!(this instanceof _))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=a(16),this.setValue(t)):this.setBytes(t)};_.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},_.prototype.setBytes=function(t){if(16!=(t=r(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},_.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var x=function(t,e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof _||(e=new _(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new D(t)};x.prototype.encrypt=function(t){for(var e=r(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},x.prototype.decrypt=x.prototype.encrypt;var P={AES:D,Counter:_,ModeOfOperation:{ecb:T,cbc:B,cfb:C,ofb:R,ctr:x},utils:{hex:c,utf8:i},padding:{pkcs7:{pad:function(t){var e=16-(t=r(t,!0)).length%16,n=a(t.length+e);o(t,n);for(var s=t.length;s<n.length;s++)n[s]=e;return n},strip:function(t){if((t=r(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,s=0;s<e;s++)if(t[n+s]!==e)throw new Error("PKCS#7 invalid padding byte");var i=a(n);return o(t,i,0,0,n),i}}},_arrayTest:{coerceArray:r,createArray:a,copyArray:o}};t.exports=P}()},52598:function(t,e){!function(t){"use strict";const e=Object.freeze({__proto__:null,default:{}}),n=BigInt(0),r=BigInt(1),a=BigInt(2),o=BigInt(8),s=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),i=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:s,n:s,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),c=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),u=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const d=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),l=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),f=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),m=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class p{constructor(t,e,n,r){this.x=t,this.y=e,this.z=n,this.t=r}static fromAffine(t){if(!(t instanceof b))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(b.ZERO)?p.ZERO:new p(t.x,t.y,r,P(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const a=new Array(t.length),o=O(t.reduce(((t,r,o)=>r===n?t:(a[o]=t,P(t*r,e))),r),e);return t.reduceRight(((t,r,o)=>r===n?t:(a[o]=P(t*a[o],e),P(t*r,e))),o),a}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){h(t);const{x:e,y:n,z:r}=this,{x:a,y:o,z:s}=t,i=P(e*s),c=P(a*r),u=P(n*s),d=P(o*r);return i===c&&u===d}negate(){return new p(P(-this.x),this.y,this.z,P(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:r}=i,o=P(t*t),s=P(e*e),c=P(a*P(n*n)),u=P(r*o),d=t+e,l=P(P(d*d)-o-s),f=u+s,m=f-c,w=u-s,h=P(l*m),y=P(f*w),g=P(l*w),v=P(m*f);return new p(h,y,v,g)}add(t){h(t);const{x:e,y:r,z:o,t:s}=this,{x:i,y:c,z:u,t:d}=t,l=P((r-e)*(c+i)),f=P((r+e)*(c-i)),m=P(f-l);if(m===n)return this.double();const w=P(o*a*d),y=P(s*a*u),g=y+w,v=f+l,A=y-w,b=P(g*m),E=P(v*A),S=P(g*A),I=P(m*v);return new p(b,E,I,S)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let r=this,a=r;for(let o=0;o<e;o++){a=r,n.push(a);for(let e=1;e<2**(t-1);e++)a=a.add(r),n.push(a);r=a.double()}return n}wNAF(t,e){!e&&this.equals(p.BASE)&&(e=b.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let a=e&&A.get(e);a||(a=this.precomputeWindow(n),e&&1!==n&&(a=p.normalizeZ(a),A.set(e,a)));let o=p.ZERO,s=p.BASE;const i=1+256/n,c=2**(n-1),u=BigInt(2**n-1),d=2**n,l=BigInt(n);for(let e=0;e<i;e++){const n=e*c;let i=Number(t&u);t>>=l,i>c&&(i-=d,t+=r);const f=n,m=n+Math.abs(i)-1,p=e%2!=0,h=i<0;0===i?s=s.add(w(p,a[f])):o=o.add(w(h,a[m]))}return p.normalizeZ([o,s])[0]}multiply(t,e){return this.wNAF(j(t,i.l),e)}multiplyUnsafe(t){let e=j(t,i.l,!1);const a=p.BASE,o=p.ZERO;if(e===n)return o;if(this.equals(o)||e===r)return this;if(this.equals(a))return this.wNAF(e);let s=o,c=this;for(;e>n;)e&r&&(s=s.add(c)),c=c.double(),e>>=r;return s}isSmallOrder(){return this.multiplyUnsafe(i.h).equals(p.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(i.l/a).double();return i.l%a&&(t=t.add(this)),t.equals(p.ZERO)}toAffine(t){const{x:e,y:n,z:a}=this,s=this.equals(p.ZERO);null==t&&(t=s?o:O(a));const i=P(e*t),c=P(n*t),u=P(a*t);if(s)return b.ZERO;if(u!==r)throw new Error("invZ was invalid");return new b(i,c)}fromRistrettoBytes(){g()}toRistrettoBytes(){g()}fromRistrettoHash(){g()}}function w(t,e){const n=e.negate();return t?n:e}function h(t){if(!(t instanceof p))throw new TypeError("ExtendedPoint expected")}function y(t){if(!(t instanceof v))throw new TypeError("RistrettoPoint expected")}function g(){throw new Error("Legacy method: switch to RistrettoPoint")}p.BASE=new p(i.Gx,i.Gy,r,P(i.Gx*i.Gy)),p.ZERO=new p(n,r,r,n);class v{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=i,n=P(u*t*t),a=P((n+r)*f);let o=BigInt(-1);const s=P((o-e*n)*P(n+e));let{isValid:c,value:l}=F(a,s),w=P(l*t);C(w)||(w=P(-w)),c||(l=w),c||(o=n);const h=P(o*(n-r)*m-s),y=l*l,g=P((l+l)*s),v=P(h*d),A=P(r-y),b=P(r+y);return new p(P(g*b),P(A*v),P(v*b),P(g*A))}static hashToCurve(t){const e=x((t=K(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(e),r=x(t.slice(32,64)),a=this.calcElligatorRistrettoMap(r);return new v(n.add(a))}static fromHex(t){t=K(t,32);const{a:e,d:a}=i,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=x(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(B(s),t)||C(s))throw new Error(o);const c=P(s*s),u=P(r+e*c),d=P(r-e*c),l=P(u*u),f=P(d*d),m=P(e*a*l-f),{isValid:w,value:h}=M(P(m*f)),y=P(h*d),g=P(h*y*m);let A=P((s+s)*y);C(A)&&(A=P(-A));const b=P(u*g),E=P(A*b);if(!w||C(E)||b===n)throw new Error(o);return new v(new p(A,b,r,E))}toRawBytes(){let{x:t,y:e,z:n,t:r}=this.ep;const a=P(P(n+e)*P(n-e)),o=P(t*e),s=P(o*o),{value:i}=M(P(a*s)),c=P(i*a),d=P(i*o),f=P(c*d*r);let m;if(C(r*f)){let n=P(e*u),r=P(t*u);t=n,e=r,m=P(c*l)}else m=d;C(t*f)&&(e=P(-e));let p=P((n-e)*m);return C(p)&&(p=P(-p)),B(p)}toHex(){return k(this.toRawBytes())}toString(){return this.toHex()}equals(t){y(t);const e=this.ep,n=t.ep,r=P(e.x*n.y)===P(e.y*n.x),a=P(e.y*n.y)===P(e.x*n.x);return r||a}add(t){return y(t),new v(this.ep.add(t.ep))}subtract(t){return y(t),new v(this.ep.subtract(t.ep))}multiply(t){return new v(this.ep.multiply(t))}multiplyUnsafe(t){return new v(this.ep.multiplyUnsafe(t))}}v.BASE=new v(p.BASE),v.ZERO=new v(p.ZERO);const A=new WeakMap;class b{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:n,P:a}=i,o=(t=K(t,32)).slice();o[31]=-129&t[31];const s=R(o);if(e&&s>=a)throw new Error("Expected 0 < hex < P");if(!e&&s>=c)throw new Error("Expected 0 < hex < 2**256");const u=P(s*s),d=P(u-r),l=P(n*u+r);let{isValid:f,value:m}=F(d,l);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const p=(m&r)===r;return!!(128&t[31])!==p&&(m=P(-m)),new b(m,s)}static async fromPrivateKey(t){return(await V(t)).point}toRawBytes(){const t=B(this.y);return t[31]|=this.x&r?128:0,t}toHex(){return k(this.toRawBytes())}toX25519(){const{y:t}=this;return B(P((r+t)*O(r-t)))}isTorsionFree(){return p.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new b(P(-this.x),this.y)}add(t){return p.fromAffine(this).add(p.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return p.fromAffine(this).multiply(t,this).toAffine()}}b.BASE=new b(i.Gx,i.Gy),b.ZERO=new b(n,r);class E{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=K(t,64),n=b.fromHex(e.slice(0,32),!1),r=R(e.slice(32,64));return new E(n,r)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof b))throw new Error("Expected Point instance");return j(e,i.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(B(this.s),32),t}toHex(){return k(this.toRawBytes())}}function S(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const r=e.reduce(((t,e)=>t+e.length),0),a=new Uint8Array(r);for(let t=0,n=0;t<e.length;t++){const r=e[t];a.set(r,n),n+=r.length}return a}const I=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function k(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=I[t[n]];return e}function D(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,a=t.slice(r,r+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function T(t){return D(t.toString(16).padStart(64,"0"))}function B(t){return T(t).reverse()}function C(t){return(P(t)&r)===r}function R(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+k(Uint8Array.from(t).reverse()))}const _=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function x(t){return P(R(t)&_)}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const r=t%e;return r>=n?r:e+r}function O(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;if(t===n||e<=n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let a=P(t,e),o=e,s=n,c=r;for(;a!==n;){const t=o%a,e=s-c*(o/a);o=a,a=t,s=c,c=e}if(o!==r)throw new Error("invert: does not exist");return P(s,e)}function U(t,e){const{P:r}=i;let a=t;for(;e-- >n;)a*=a,a%=r;return a}function N(t){const{P:e}=i,n=BigInt(5),o=BigInt(10),s=BigInt(20),c=BigInt(40),u=BigInt(80),d=t*t%e*t%e,l=U(d,a)*d%e,f=U(l,r)*t%e,m=U(f,n)*f%e,p=U(m,o)*m%e,w=U(p,s)*p%e,h=U(w,c)*w%e,y=U(h,u)*h%e,g=U(y,u)*h%e,v=U(g,o)*m%e;return{pow_p_5_8:U(v,a)*t%e,b2:d}}function F(t,e){const n=P(e*e*e),r=P(n*n*e);let a=P(t*n*N(t*r).pow_p_5_8);const o=P(e*a*a),s=a,i=P(a*u),c=o===t,d=o===P(-t),l=o===P(-t*u);return c&&(a=s),(d||l)&&(a=i),C(a)&&(a=P(-a)),{isValid:c||d,value:a}}function M(t){return F(r,t)}function W(t){return P(R(t),i.l)}function K(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):D(t);if("number"==typeof e&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function j(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(r){if(n<t)return t}else if(n<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function q(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function L(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?T(j(t,c)):K(t)).length)throw new Error("Expected 32 bytes");return t}function J(t){const e=q(t.slice(0,32)),n=t.slice(32,64),r=W(e),a=b.BASE.multiply(r),o=a.toRawBytes();return{head:e,prefix:n,scalar:r,point:a,pointBytes:o}}let z;function H(){if("function"!=typeof z)throw new Error("utils.sha512Sync must be set to use sync methods");return z(...arguments)}async function V(t){return J(await et.sha512(L(t)))}function $(t){return J(H(L(t)))}function Q(t,e,n){e=K(e),n instanceof b||(n=b.fromHex(n,!1));const{r,s:a}=t instanceof E?t.assertValidity():E.fromHex(t);return{r,s:a,SB:p.BASE.multiplyUnsafe(a),pub:n,msg:e}}function G(t,e,n,r){const a=W(r),o=p.fromAffine(t).multiplyUnsafe(a);return p.fromAffine(e).add(o).subtract(n).multiplyUnsafe(i.h).equals(p.ZERO)}const Z={getExtendedPublicKey:$,getPublicKey:function(t){return $(t).pointBytes},sign:function(t,e){t=K(t);const{prefix:n,scalar:r,pointBytes:a}=$(e),o=W(H(n,t)),s=b.BASE.multiply(o),c=P(o+W(H(s.toRawBytes(),a,t))*r,i.l);return new E(s,c).toRawBytes()},verify:function(t,e,n){const{r,SB:a,msg:o,pub:s}=Q(t,e,n),i=H(r.toRawBytes(),s.toRawBytes(),o);return G(s,r,a,i)}};function X(t,e,n){const r=P(t*(e-n));return[e=P(e-r),n=P(n+r)]}b.BASE._setWindowSize(8);const Y={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const a=function(t,e){const{P:a}=i,o=j(t,a),s=j(e,a),c=BigInt(121665),u=o;let d,l=r,f=n,m=o,p=r,w=n;for(let t=BigInt(254);t>=n;t--){const e=s>>t&r;w^=e,d=X(w,l,m),l=d[0],m=d[1],d=X(w,f,p),f=d[0],p=d[1],w=e;const n=l+f,a=P(n*n),o=l-f,i=P(o*o),h=a-i,y=m+p,g=P((m-p)*n),v=P(y*o),A=g+v,b=g-v;m=P(A*A),p=P(u*P(b*b)),l=P(a*i),f=P(h*(a+P(c*h)))}d=X(w,l,m),l=d[0],m=d[1],d=X(w,f,p),f=d[0],p=d[1];const{pow_p_5_8:h,b2:y}=N(f),g=P(U(h,BigInt(3))*y);return P(l*g)}(function(t){const e=K(t,32);return e[31]&=127,R(e)}(e),R(q(K(t,32))));if(a===n)throw new Error("Invalid private or public key received");return B(P(a,i.P))},scalarMultBase:t=>Y.scalarMult(t,Y.BASE_POINT_U)},tt={node:e,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},et={bytesToHex:k,hexToBytes:D,concatBytes:S,getExtendedPublicKey:V,mod:P,invert:O,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=K(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return P(R(t),i.l-r)+r},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(tt.web)return tt.web.getRandomValues(new Uint8Array(t));if(tt.node){const{randomBytes:e}=tt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>et.randomBytes(32),sha512:async function(){const t=S(...arguments);if(tt.web){const e=await tt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;const n=e.equals(b.BASE)?e:new b(e.x,e.y);return n._setWindowSize(t),n.multiply(a),n},sha512Sync:void 0};Object.defineProperties(et,{sha512Sync:{configurable:!1,get:()=>z,set(t){z||(z=t)}}}),t.CURVE=i,t.ExtendedPoint=p,t.Point=b,t.RistrettoPoint=v,t.Signature=E,t.curve25519=Y,t.getPublicKey=async function(t){return(await V(t)).pointBytes},t.getSharedSecret=async function(t,e){const{head:n}=await V(t),r=b.fromHex(e).toX25519();return Y.scalarMult(n,r)},t.sign=async function(t,e){t=K(t);const{prefix:n,scalar:r,pointBytes:a}=await V(e),o=W(await et.sha512(n,t)),s=b.BASE.multiply(o),c=P(o+W(await et.sha512(s.toRawBytes(),a,t))*r,i.l);return new E(s,c).toRawBytes()},t.sync=Z,t.utils=et,t.verify=async function(t,e,n){const{r,SB:a,msg:o,pub:s}=Q(t,e,n),i=await et.sha512(r.toRawBytes(),s.toRawBytes(),o);return G(s,r,a,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},59288:(t,e,n)=>{"use strict";n.d(e,{p:()=>r,v:()=>a});class r extends Error{constructor(t,e){super(t),this.metadata=e}}function a(t,e,n){if(!t)throw new r(e,n)}},10309:(t,e,n)=>{"use strict";n.d(e,{Z2:()=>a});var r=n(19314);const a=1e3;(0,r.A)((function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Date(e).toLocaleString(t,{year:n?void 0:"numeric",month:r||void 0,day:a?void 0:"numeric",hour:o?"numeric":void 0,minute:o?"numeric":void 0,hourCycle:"h23"})}))},1689:(t,e,n)=>{"use strict";n.d(e,{B:()=>r});const r=n(31481).hL1&&!["chrome-extension:","moz-extension:"].includes(self.location.protocol)},45232:(t,e,n)=>{"use strict";n.d(e,{EQ:()=>f,J5:()=>d,x3:()=>c,x6:()=>u});var r=n(31481),a=n(39989),o=n(55029),s=n(37836);const i=3e4;async function c(t,e,n){try{return await u(t,e,n)}catch(o){if(o instanceof a.K$&&(!o.statusCode||403===o.statusCode))return u(`${r.HUv}/proxy/?url=${t.toString()}`,e,n);throw o}}async function u(t,e,n){const r=new URL(t);return e&&Object.entries(e).forEach((t=>{let[e,n]=t;void 0!==n&&(Array.isArray(n)?n.forEach((t=>{r.searchParams.append(e,t.toString())})):r.searchParams.set(e,n.toString()))})),(await d(r,n)).json()}async function d(t,e,n){const{retries:c=r.TUC,timeouts:u=r.cSq,shouldSkipRetryFn:d=m}=null!=n?n:{};let f,p="Unknown error.";for(let n=1;n<=c;n++)try{var w;n>1&&(0,o.MD)(`Retry request #${n}:`,t.toString(),f);const r=Array.isArray(u)?null!==(w=u[n-1])&&void 0!==w?w:u[u.length-1]:Math.min(u*n,i),a=await l(t,e,r);if(f=a.status,f>=400){const{error:t}=await a.json().catch((()=>{}));throw new Error(null!=t?t:`HTTP Error ${f}`)}return a}catch(t){var h;if(p="string"==typeof t?t:null!==(h=t.message)&&void 0!==h?h:p,d(p,f))throw new a.K$(p,f);n<c&&await(0,s.v7)(r.WRE*n)}throw new a.K$(p)}async function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.cSq;const a=new AbortController,o=setTimeout((()=>{a.abort()}),n);try{return await fetch(t,{...e,signal:a.signal,cache:"no-cache"})}finally{clearTimeout(o)}}async function f(t,e){if(!(t.ok||null!=e&&e.includes(t.status))){var n;let{error:e,errors:o}=await t.json().catch((()=>{}));var r;throw!e&&o&&o.length&&(e=null===(r=o[0])||void 0===r?void 0:r.msg),new a.K$(null!==(n=e)&&void 0!==n?n:`HTTP Error ${t.status}`,t.status)}return t}function m(t,e){return e&&[400,404].includes(e)}},2188:(t,e,n)=>{"use strict";n.d(e,{H:()=>l});var r=n(31481),a=n(10309),o=n(1689),s=n(55029),i=n(37836);const c=("development"===r.Guj||"staging"===r.Guj)&&"object"==typeof window&&!o.B,u=(0,i.nF)((t=>window.alert(t)),10*a.Z2);function d(t){t instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===t.message||(t.preventDefault(),l(t instanceof ErrorEvent?t.error||t.message:t.reason))}function l(t){(0,s.SJ)("handleError",t);const e="string"==typeof t?t:t.message,n="object"==typeof t?t.stack:void 0;e.endsWith("Failed to import rlottie-wasm.js")||c&&u(`${r.FHx}\n\n${e||t}\n${n}`)}self.addEventListener("error",d),self.addEventListener("unhandledrejection",d)},55029:(t,e,n)=>{"use strict";n.d(e,{MD:()=>l,SJ:()=>d,ao:()=>u});var r=n(31481),a=n(59288);const o=999,s=[];function i(t,e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,metadata:e instanceof a.p?e.metadata:void 0}:e}function c(t){s.length>o&&s.shift(),s.push({...t,args:t.args.map((t=>JSON.stringify(t,i))),time:new Date})}function u(){return s}function d(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];c({message:t,level:"debugError",args:n}),r.Oig&&console.error(`[DEBUG][${t}]`,...n)}function l(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];c({message:t,level:"debug",args:n}),r.Oig&&console.log(`[DEBUG] ${t}`,...n)}},50110:(t,e,n)=>{"use strict";n.d(e,{A:()=>i,T:()=>s});var r=n(31481),a=n(2188);const o=!r.MVx;async function s(t,e){if(!o)return t();const{rescue:n,always:r,shouldIgnoreError:s}=null!=e?e:{};try{return await t()}catch(t){return null==n||n(t),void(s||(0,a.H)(t))}finally{null==r||r()}}function i(t,e){if(!o)return t();const{rescue:n,always:r,shouldIgnoreError:s}=null!=e?e:{};try{return t()}catch(t){return null==n||n(t),void(s||(0,a.H)(t))}finally{null==r||r()}}},37836:(t,e,n)=>{"use strict";function r(t,e){let n,r,a,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){r=!0;for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];a=i,n||(o&&(r=!1,t(...a)),n=self.setInterval((()=>{if(!r)return self.clearInterval(n),void(n=void 0);r=!1,t(...a)}),e))}}n.d(e,{nF:()=>r,v7:()=>a});const a=t=>new Promise((e=>{setTimeout((()=>e()),t)}))},19314:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});const r=new WeakMap;function a(t){return function(){let e=r.get(t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];const s=a.map(String).join("_");if(e){const t=e.get(s);if(t)return t}else e=new Map,r.set(t,e);const i=t(...a);return e.set(s,i),i}}},15340:()=>{},79838:()=>{},66443:()=>{}},r={};function a(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t].call(o.exports,o,o.exports,a),o.exports}a.m=n,a.x=()=>{var t=a.O(void 0,[494,362,776],(()=>a(22100)));return a.O(t)},t=[],a.O=(e,n,r,o)=>{if(!n){var s=1/0;for(d=0;d<t.length;d++){for(var[n,r,o]=t[d],i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((t=>a.O[t](n[c])))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){t.splice(d--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,r,o]},a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,n)=>(a.f[n](t,e),e)),[])),a.u=t=>t+"."+{362:"1dbe55c972e9075fe06c",494:"2a76b4246c2b484142fb",776:"28cf5f93438bdbe59349"}[t]+".js",a.miniCssF=t=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={941:1};a.f.i=(e,n)=>{t[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[],n=e.push.bind(e);e.push=e=>{var[r,o,s]=e;for(var i in o)a.o(o,i)&&(a.m[i]=o[i]);for(s&&s(a);r.length;)t[r.pop()]=1;n(e)}})(),e=a.x,a.x=()=>Promise.all([494,362,776].map(a.e,a)).then(e),a.x()})();
//# sourceMappingURL=941.e77e449fed97d4b53290.js.map